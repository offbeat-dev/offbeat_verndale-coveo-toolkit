"use strict";(self.webpackChunk_verndale_toolkit=self.webpackChunk_verndale_toolkit||[]).push([[7182],{47182:function(y,d,s){s.r(d),s.d(d,{atomic_result_multi_value_text:function(){return f}});var i=s(51860),h=s(7941),c=s(24731),a=s(5278),u=s(52276),m=s(59348),V=s(27663),E=s(29721);const D=":host>ul{display:flex;list-style:none;margin:0;padding:0}:host>ul li{display:inline-block}.separator::before{display:inline;content:',\\00a0'}";var g=function(e,t,l,r){var o=arguments.length,n=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,l):r,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,l,r);else for(var p=e.length-1;p>=0;p--)(_=e[p])&&(n=(o<3?_(n):o>3?_(t,l,n):_(t,l))||n);return o>3&&n&&Object.defineProperty(t,l,n),n};const f=class{constructor(e){(0,i.r)(this,e),this.maxValuesToDisplay=3,this.delimiter=null,this.sortedValues=null}initialize(){this.breadcrumbManager=(0,h.c)(this.bindings.engine)}get resultValues(){const e=h.k.getResultProperty(this.result,this.field);return e===null?null:Array.isArray(e)?e.map(t=>`${t}`.trim()):typeof e!="string"||e.trim()===""?(this.error=new Error(`Could not parse "${e}" from field "${this.field}" as a string array.`),null):this.delimiter?e.split(this.delimiter).map(t=>t.trim()):[e]}get facetSelectedValues(){return this.breadcrumbManager.state.facetBreadcrumbs.filter(e=>e.field===this.field).reduce((e,t)=>[...e,...t.values.map(({value:l})=>l.value)],[])}updateSortedValues(){const e=this.resultValues;if(e===null){this.sortedValues=null;return}const t=new Set(e),l=this.facetSelectedValues.filter(r=>t.has(r));this.sortedValues=Array.from(e.reduce((r,o)=>r.add(o),new Set(l)))}getShouldDisplayLabel(e){return this.maxValuesToDisplay>0&&e.length>this.maxValuesToDisplay}getNumberOfValuesToDisplay(e){return e.length<=this.maxValuesToDisplay?e.length:this.maxValuesToDisplay<2?this.maxValuesToDisplay:Math.min(e.length-2,this.maxValuesToDisplay)}renderValue(e){const t=(0,a.g)(this.field,e,this.bindings.i18n),l=(0,m.t)(e);return(0,i.h)("li",{key:e,part:"result-multi-value-text-value"},(0,i.h)("slot",{name:`result-multi-value-text-value-${l}`},t))}renderSeparator(e,t){return(0,i.h)("li",{role:"separator",part:"result-multi-value-text-separator",key:`${e}~${t}`,class:"separator"})}renderMoreLabel(e){return(0,i.h)("li",{key:"more-field-values",part:"result-multi-value-text-value-more"},this.bindings.i18n.t("n-more",{value:e}))}renderListItems(e){const t=this.getNumberOfValuesToDisplay(e),l=[];for(let r=0;r<t;r++)r>0&&l.push(this.renderSeparator(e[r-1],e[r])),l.push(this.renderValue(e[r]));return this.getShouldDisplayLabel(e)&&(l.push(this.renderSeparator(e[t-1],"more-field-values")),l.push(this.renderMoreLabel(e.length-t))),l}componentWillRender(){this.updateSortedValues()}render(){if(this.sortedValues===null){this.host.remove();return}return(0,i.h)("ul",null,...this.renderListItems(this.sortedValues))}get host(){return(0,i.g)(this)}};g([(0,u.I)()],f.prototype,"bindings",void 0),g([(0,c.R)()],f.prototype,"result",void 0),f.style=D},5278:function(y,d,s){s.d(d,{a:function(){return h},g:function(){return c}});function i(a){return`caption-${a}`}function h(a,u){return u.getResourceBundle(u.language,i(a))||{}}function c(a,u,m){return m.t(`${i(a)}:${u}`)}}}]);

//# sourceMappingURL=7182.bundle.js.map