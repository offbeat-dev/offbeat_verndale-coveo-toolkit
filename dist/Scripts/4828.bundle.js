(self.webpackChunk_verndale_toolkit=self.webpackChunk_verndale_toolkit||[]).push([[4828],{98411:function(Ge,pt,xe){"use strict";xe.d(pt,{nt:function(){return fy},IM:function(){return yy}});/**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt=Object.create,ze=Object.defineProperty,Mt=Object.getOwnPropertyDescriptor,le=Object.getOwnPropertyNames,Ae=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty,ta=e=>ze(e,"__esModule",{value:!0}),G=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ra=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of le(t))!ht.call(e,n)&&n!=="default"&&ze(e,n,{get:()=>t[n],enumerable:!(r=Mt(t,n))||r.enumerable});return e},fe=e=>ra(ta(ze(e!=null?Vt(Ae(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),na=G((e,t)=>{t.exports=fetch}),cr=G(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(a){var i=t(t({},r),a);return i.numOfAttempts<1&&(i.numOfAttempts=1),i}e.getSanitizedOptions=n}),Lt=G(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(r){var n=Math.random()*r;return Math.round(n)}e.fullJitter=t}),Us=G(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(r){return r}e.noJitter=t}),zs=G(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Lt(),r=Us();function n(a){switch(a.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}),aa=G(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=zs(),r=function(){function n(a){this.options=a,this.attempt=0}return n.prototype.apply=function(){var a=this;return new Promise(function(i){return setTimeout(i,a.jitteredDelay)})},n.prototype.setAttemptNumber=function(a){this.attempt=a},Object.defineProperty(n.prototype,"jitteredDelay",{get:function(){var a=t.JitterFactory(this.options);return a(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){var a=this.options.startingDelay,i=this.options.timeMultiple,o=this.numOfDelayedAttempts,s=a*Math.pow(i,o);return Math.min(s,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),n}();e.Delay=r}),Hs=G(e=>{"use strict";var t=e&&e.__extends||function(){var o=function(s,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var d in f)f.hasOwnProperty(d)&&(l[d]=f[d])},o(s,u)};return function(s,u){o(s,u);function l(){this.constructor=s}s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),r=e&&e.__awaiter||function(o,s,u,l){function f(d){return d instanceof u?d:new u(function(p){p(d)})}return new(u||(u=Promise))(function(d,p){function b(h){try{c(l.next(h))}catch(y){p(y)}}function w(h){try{c(l.throw(h))}catch(y){p(y)}}function c(h){h.done?d(h.value):f(h.value).then(b,w)}c((l=l.apply(o,s||[])).next())})},n=e&&e.__generator||function(o,s){var u={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,f,d,p;return p={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function b(c){return function(h){return w([c,h])}}function w(c){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,f&&(d=c[0]&2?f.return:c[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,c[1])).done)return d;switch(f=0,d&&(c=[c[0]&2,d.value]),c[0]){case 0:case 1:d=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,f=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(d=u.trys,!(d=d.length>0&&d[d.length-1])&&(c[0]===6||c[0]===2)){u=0;continue}if(c[0]===3&&(!d||c[1]>d[0]&&c[1]<d[3])){u.label=c[1];break}if(c[0]===6&&u.label<d[1]){u.label=d[1],d=c;break}if(d&&u.label<d[2]){u.label=d[2],u.ops.push(c);break}d[2]&&u.ops.pop(),u.trys.pop();continue}c=s.call(o,u)}catch(h){c=[6,h],f=0}finally{l=d=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=aa(),i=function(o){t(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return s.prototype.apply=function(){return r(this,void 0,void 0,function(){return n(this,function(u){return[2,this.isFirstAttempt?!0:o.prototype.apply.call(this)]})})},Object.defineProperty(s.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),s}(a.Delay);e.SkipFirstDelay=i}),Qs=G(e=>{"use strict";var t=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var l in u)u.hasOwnProperty(l)&&(s[l]=u[l])},a(i,o)};return function(i,o){a(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=aa(),n=function(a){t(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i}(r.Delay);e.AlwaysDelay=n}),Bs=G(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Hs(),r=Qs();function n(i,o){var s=a(i);return s.setAttemptNumber(o),s}e.DelayFactory=n;function a(i){return i.delayFirstAttempt?new r.AlwaysDelay(i):new t.SkipFirstDelay(i)}}),Ys=G(e=>{"use strict";var t=e&&e.__awaiter||function(s,u,l,f){function d(p){return p instanceof l?p:new l(function(b){b(p)})}return new(l||(l=Promise))(function(p,b){function w(y){try{h(f.next(y))}catch(R){b(R)}}function c(y){try{h(f.throw(y))}catch(R){b(R)}}function h(y){y.done?p(y.value):d(y.value).then(w,c)}h((f=f.apply(s,u||[])).next())})},r=e&&e.__generator||function(s,u){var l={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},f,d,p,b;return b={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function w(h){return function(y){return c([h,y])}}function c(h){if(f)throw new TypeError("Generator is already executing.");for(;l;)try{if(f=1,d&&(p=h[0]&2?d.return:h[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,h[1])).done)return p;switch(d=0,p&&(h=[h[0]&2,p.value]),h[0]){case 0:case 1:p=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,d=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(p=l.trys,!(p=p.length>0&&p[p.length-1])&&(h[0]===6||h[0]===2)){l=0;continue}if(h[0]===3&&(!p||h[1]>p[0]&&h[1]<p[3])){l.label=h[1];break}if(h[0]===6&&l.label<p[1]){l.label=p[1],p=h;break}if(p&&l.label<p[2]){l.label=p[2],l.ops.push(h);break}p[2]&&l.ops.pop(),l.trys.pop();continue}h=u.call(s,l)}catch(y){h=[6,y],d=0}finally{f=p=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=cr(),a=Bs();function i(s,u){return u===void 0&&(u={}),t(this,void 0,void 0,function(){var l,f;return r(this,function(d){switch(d.label){case 0:return l=n.getSanitizedOptions(u),f=new o(s,l),[4,f.execute()];case 1:return[2,d.sent()]}})})}e.backOff=i;var o=function(){function s(u,l){this.request=u,this.options=l,this.attemptNumber=0}return s.prototype.execute=function(){return t(this,void 0,void 0,function(){var u,l;return r(this,function(f){switch(f.label){case 0:if(this.attemptLimitReached)return[3,7];f.label=1;case 1:return f.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return f.sent(),[4,this.request()];case 3:return[2,f.sent()];case 4:return u=f.sent(),this.attemptNumber++,[4,this.options.retry(u,this.attemptNumber)];case 5:if(l=f.sent(),!l||this.attemptLimitReached)throw u;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(s.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),s.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){var u;return r(this,function(l){switch(l.label){case 0:return u=a.DelayFactory(this.options,this.attemptNumber),[4,u.apply()];case 1:return l.sent(),[2]}})})},s}()}),gt=G((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&xe.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=n()})(e,function(){"use strict";var r=1e3,n=6e4,a=36e5,i="millisecond",o="second",s="minute",u="hour",l="day",f="week",d="month",p="quarter",b="year",w="date",c="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},T=function(x,v,O){var S=String(x);return!S||S.length>=v?x:""+Array(v+1-S.length).join(O)+x},L={s:T,z:function(x){var v=-x.utcOffset(),O=Math.abs(v),S=Math.floor(O/60),q=O%60;return(v<=0?"+":"-")+T(S,2,"0")+":"+T(q,2,"0")},m:function x(v,O){if(v.date()<O.date())return-x(O,v);var S=12*(O.year()-v.year())+(O.month()-v.month()),q=v.clone().add(S,d),F=O-q<0,P=v.clone().add(S+(F?-1:1),d);return+(-(S+(O-q)/(F?q-P:P-q))||0)},a:function(x){return x<0?Math.ceil(x)||0:Math.floor(x)},p:function(x){return{M:d,y:b,w:f,d:l,D:w,h:u,m:s,s:o,ms:i,Q:p}[x]||String(x||"").toLowerCase().replace(/s$/,"")},u:function(x){return x===void 0}},_="en",H={};H[_]=R;var Q=function(x){return x instanceof j},C=function x(v,O,S){var q;if(!v)return _;if(typeof v=="string"){var F=v.toLowerCase();H[F]&&(q=F),O&&(H[F]=O,q=F);var P=v.split("-");if(!q&&P.length>1)return x(P[0])}else{var U=v.name;H[U]=v,q=U}return!S&&q&&(_=q),q||!S&&_},k=function(x,v){if(Q(x))return x.clone();var O=typeof v=="object"?v:{};return O.date=x,O.args=arguments,new j(O)},g=L;g.l=C,g.i=Q,g.w=function(x,v){return k(x,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var j=function(){function x(O){this.$L=C(O.locale,null,!0),this.parse(O)}var v=x.prototype;return v.parse=function(O){this.$d=function(S){var q=S.date,F=S.utc;if(q===null)return new Date(NaN);if(g.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var P=q.match(h);if(P){var U=P[2]-1||0,Y=(P[7]||"0").substring(0,3);return F?new Date(Date.UTC(P[1],U,P[3]||1,P[4]||0,P[5]||0,P[6]||0,Y)):new Date(P[1],U,P[3]||1,P[4]||0,P[5]||0,P[6]||0,Y)}}return new Date(q)}(O),this.$x=O.x||{},this.init()},v.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},v.$utils=function(){return g},v.isValid=function(){return this.$d.toString()!==c},v.isSame=function(O,S){var q=k(O);return this.startOf(S)<=q&&q<=this.endOf(S)},v.isAfter=function(O,S){return k(O)<this.startOf(S)},v.isBefore=function(O,S){return this.endOf(S)<k(O)},v.$g=function(O,S,q){return g.u(O)?this[S]:this.set(q,O)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(O,S){var q=this,F=!!g.u(S)||S,P=g.p(O),U=function(oe,ue){var qe=g.w(q.$u?Date.UTC(q.$y,ue,oe):new Date(q.$y,ue,oe),q);return F?qe:qe.endOf(l)},Y=function(oe,ue){return g.w(q.toDate()[oe].apply(q.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(ue)),q)},D=this.$W,ee=this.$M,be=this.$D,ye="set"+(this.$u?"UTC":"");switch(P){case b:return F?U(1,0):U(31,11);case d:return F?U(1,ee):U(0,ee+1);case f:var ke=this.$locale().weekStart||0,Ee=(D<ke?D+7:D)-ke;return U(F?be-Ee:be+(6-Ee),ee);case l:case w:return Y(ye+"Hours",0);case u:return Y(ye+"Minutes",1);case s:return Y(ye+"Seconds",2);case o:return Y(ye+"Milliseconds",3);default:return this.clone()}},v.endOf=function(O){return this.startOf(O,!1)},v.$set=function(O,S){var q,F=g.p(O),P="set"+(this.$u?"UTC":""),U=(q={},q[l]=P+"Date",q[w]=P+"Date",q[d]=P+"Month",q[b]=P+"FullYear",q[u]=P+"Hours",q[s]=P+"Minutes",q[o]=P+"Seconds",q[i]=P+"Milliseconds",q)[F],Y=F===l?this.$D+(S-this.$W):S;if(F===d||F===b){var D=this.clone().set(w,1);D.$d[U](Y),D.init(),this.$d=D.set(w,Math.min(this.$D,D.daysInMonth())).$d}else U&&this.$d[U](Y);return this.init(),this},v.set=function(O,S){return this.clone().$set(O,S)},v.get=function(O){return this[g.p(O)]()},v.add=function(O,S){var q,F=this;O=Number(O);var P=g.p(S),U=function(ee){var be=k(F);return g.w(be.date(be.date()+Math.round(ee*O)),F)};if(P===d)return this.set(d,this.$M+O);if(P===b)return this.set(b,this.$y+O);if(P===l)return U(1);if(P===f)return U(7);var Y=(q={},q[s]=n,q[u]=a,q[o]=r,q)[P]||1,D=this.$d.getTime()+O*Y;return g.w(D,this)},v.subtract=function(O,S){return this.add(-1*O,S)},v.format=function(O){var S=this,q=this.$locale();if(!this.isValid())return q.invalidDate||c;var F=O||"YYYY-MM-DDTHH:mm:ssZ",P=g.z(this),U=this.$H,Y=this.$m,D=this.$M,ee=q.weekdays,be=q.months,ye=function(ue,qe,Ne,Ue){return ue&&(ue[qe]||ue(S,F))||Ne[qe].slice(0,Ue)},ke=function(ue){return g.s(U%12||12,ue,"0")},Ee=q.meridiem||function(ue,qe,Ne){var Ue=ue<12?"AM":"PM";return Ne?Ue.toLowerCase():Ue},oe={YY:String(this.$y).slice(-2),YYYY:this.$y,M:D+1,MM:g.s(D+1,2,"0"),MMM:ye(q.monthsShort,D,be,3),MMMM:ye(be,D),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:ye(q.weekdaysMin,this.$W,ee,2),ddd:ye(q.weekdaysShort,this.$W,ee,3),dddd:ee[this.$W],H:String(U),HH:g.s(U,2,"0"),h:ke(1),hh:ke(2),a:Ee(U,Y,!0),A:Ee(U,Y,!1),m:String(Y),mm:g.s(Y,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:P};return F.replace(y,function(ue,qe){return qe||oe[ue]||P.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(O,S,q){var F,P=g.p(S),U=k(O),Y=(U.utcOffset()-this.utcOffset())*n,D=this-U,ee=g.m(this,U);return ee=(F={},F[b]=ee/12,F[d]=ee,F[p]=ee/3,F[f]=(D-Y)/6048e5,F[l]=(D-Y)/864e5,F[u]=D/a,F[s]=D/n,F[o]=D/r,F)[P]||D,q?ee:g.a(ee)},v.daysInMonth=function(){return this.endOf(d).$D},v.$locale=function(){return H[this.$L]},v.locale=function(O,S){if(!O)return this.$L;var q=this.clone(),F=C(O,S,!0);return F&&(q.$L=F),q},v.clone=function(){return g.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},x}(),A=j.prototype;return k.prototype=A,[["$ms",i],["$s",o],["$m",s],["$H",u],["$W",l],["$M",d],["$y",b],["$D",w]].forEach(function(x){A[x[1]]=function(v){return this.$g(v,x[0],x[1])}}),k.extend=function(x,v){return x.$i||(x(v,j,k),x.$i=!0),k},k.locale=C,k.isDayjs=Q,k.unix=function(x){return k(1e3*x)},k.en=H[_],k.Ls=H,k.p={},k})}),Ws=G((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&xe.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_utc=n()})(e,function(){"use strict";var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,s){var u=o.prototype;s.utc=function(c){var h={date:c,utc:!0,args:arguments};return new o(h)},u.utc=function(c){var h=s(this.toDate(),{locale:this.$L,utc:!0});return c?h.add(this.utcOffset(),r):h},u.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(c){c.utc&&(this.$u=!0),this.$utils().u(c.$offset)||(this.$offset=c.$offset),l.call(this,c)};var f=u.init;u.init=function(){if(this.$u){var c=this.$d;this.$y=c.getUTCFullYear(),this.$M=c.getUTCMonth(),this.$D=c.getUTCDate(),this.$W=c.getUTCDay(),this.$H=c.getUTCHours(),this.$m=c.getUTCMinutes(),this.$s=c.getUTCSeconds(),this.$ms=c.getUTCMilliseconds()}else f.call(this)};var d=u.utcOffset;u.utcOffset=function(c,h){var y=this.$utils().u;if(y(c))return this.$u?0:y(this.$offset)?d.call(this):this.$offset;if(typeof c=="string"&&(c=function(_){_===void 0&&(_="");var H=_.match(n);if(!H)return null;var Q=(""+H[0]).match(a)||["-",0,0],C=Q[0],k=60*+Q[1]+ +Q[2];return k===0?0:C==="+"?k:-k}(c),c===null))return this;var R=Math.abs(c)<=16?60*c:c,T=this;if(h)return T.$offset=R,T.$u=c===0,T;if(c!==0){var L=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(T=this.local().add(R+L,r)).$offset=R,T.$x.$localOffset=L}else T=this.utc();return T};var p=u.format;u.format=function(c){var h=c||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,h)},u.valueOf=function(){var c=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*c},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var b=u.toDate;u.toDate=function(c){return c==="s"&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():b.call(this)};var w=u.diff;u.diff=function(c,h,y){if(c&&this.$u===c.$u)return w.call(this,c,h,y);var R=this.local(),T=s(c).local();return w.call(R,T,h,y)}}})}),Js=G((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&xe.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,function(){"use strict";var r={year:0,month:1,day:2,hour:3,minute:4,second:5},n={};return function(a,i,o){var s,u=function(p,b,w){w===void 0&&(w={});var c=new Date(p),h=function(y,R){R===void 0&&(R={});var T=R.timeZoneName||"short",L=y+"|"+T,_=n[L];return _||(_=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:T}),n[L]=_),_}(b,w);return h.formatToParts(c)},l=function(p,b){for(var w=u(p,b),c=[],h=0;h<w.length;h+=1){var y=w[h],R=y.type,T=y.value,L=r[R];L>=0&&(c[L]=parseInt(T,10))}var _=c[3],H=_===24?0:_,Q=c[0]+"-"+c[1]+"-"+c[2]+" "+H+":"+c[4]+":"+c[5]+":000",C=+p;return(o.utc(Q).valueOf()-(C-=C%1e3))/6e4},f=i.prototype;f.tz=function(p,b){p===void 0&&(p=s);var w=this.utcOffset(),c=this.toDate(),h=c.toLocaleString("en-US",{timeZone:p}),y=Math.round((c-new Date(h))/1e3/60),R=o(h).$set("millisecond",this.$ms).utcOffset(15*-Math.round(c.getTimezoneOffset()/15)-y,!0);if(b){var T=R.utcOffset();R=R.add(w-T,"minute")}return R.$x.$timezone=p,R},f.offsetName=function(p){var b=this.$x.$timezone||o.tz.guess(),w=u(this.valueOf(),b,{timeZoneName:p}).find(function(c){return c.type.toLowerCase()==="timezonename"});return w&&w.value};var d=f.startOf;f.startOf=function(p,b){if(!this.$x||!this.$x.$timezone)return d.call(this,p,b);var w=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return d.call(w,p,b).tz(this.$x.$timezone,!0)},o.tz=function(p,b,w){var c=w&&b,h=w||b||s,y=l(+o(),h);if(typeof p!="string")return o(p).tz(h);var R=function(H,Q,C){var k=H-60*Q*1e3,g=l(k,C);if(Q===g)return[k,Q];var j=l(k-=60*(g-Q)*1e3,C);return g===j?[k,g]:[H-60*Math.min(g,j)*1e3,Math.max(g,j)]}(o.utc(p,c).valueOf(),y,h),T=R[0],L=R[1],_=o(T).utcOffset(L);return _.$x.$timezone=h,_},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(p){s=p}}})}),Ks=G((e,t)=>{"use strict";var r=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports=r.AbortController,t.exports.default=r.AbortController}),Zs=G((e,t)=>{"use strict";function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(i=`${i}`,i=i.replace(/[ \t\n\f\r]/g,""),i.length%4==0&&(i=i.replace(/==?$/,"")),i.length%4==1||/[^+/0-9A-Za-z]/.test(i))return null;let o="",s=0,u=0;for(let l=0;l<i.length;l++)s<<=6,s|=a(i[l]),u+=6,u===24&&(o+=String.fromCharCode((s&16711680)>>16),o+=String.fromCharCode((s&65280)>>8),o+=String.fromCharCode(s&255),s=u=0);return u===12?(s>>=4,o+=String.fromCharCode(s)):u===18&&(s>>=2,o+=String.fromCharCode((s&65280)>>8),o+=String.fromCharCode(s&255)),o}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(i){let o=n.indexOf(i);return o<0?void 0:o}t.exports=r}),Gs=G((e,t)=>{"use strict";function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let o;for(i=`${i}`,o=0;o<i.length;o++)if(i.charCodeAt(o)>255)return null;let s="";for(o=0;o<i.length;o+=3){let u=[void 0,void 0,void 0,void 0];u[0]=i.charCodeAt(o)>>2,u[1]=(i.charCodeAt(o)&3)<<4,i.length>o+1&&(u[1]|=i.charCodeAt(o+1)>>4,u[2]=(i.charCodeAt(o+1)&15)<<2),i.length>o+2&&(u[2]|=i.charCodeAt(o+2)>>6,u[3]=i.charCodeAt(o+2)&63);for(let l=0;l<u.length;l++)typeof u[l]=="undefined"?s+="=":s+=a(u[l])}return s}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(i){if(i>=0&&i<64)return n[i]}t.exports=r}),Xs=G((e,t)=>{"use strict";var r=Zs(),n=Gs();t.exports={atob:r,btoa:n}}),ia=G((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&xe.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,function(){"use strict";var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,s={},u=function(c){return(c=+c)+(c>68?1900:2e3)},l=function(c){return function(h){this[c]=+h}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(c){(this.zone||(this.zone={})).offset=function(h){if(!h||h==="Z")return 0;var y=h.match(/([+-]|\d\d)/g),R=60*y[1]+(+y[2]||0);return R===0?0:y[0]==="+"?-R:R}(c)}],d=function(c){var h=s[c];return h&&(h.indexOf?h:h.s.concat(h.f))},p=function(c,h){var y,R=s.meridiem;if(R){for(var T=1;T<=24;T+=1)if(c.indexOf(R(T,0,h))>-1){y=T>12;break}}else y=c===(h?"pm":"PM");return y},b={A:[o,function(c){this.afternoon=p(c,!1)}],a:[o,function(c){this.afternoon=p(c,!0)}],S:[/\d/,function(c){this.milliseconds=100*+c}],SS:[a,function(c){this.milliseconds=10*+c}],SSS:[/\d{3}/,function(c){this.milliseconds=+c}],s:[i,l("seconds")],ss:[i,l("seconds")],m:[i,l("minutes")],mm:[i,l("minutes")],H:[i,l("hours")],h:[i,l("hours")],HH:[i,l("hours")],hh:[i,l("hours")],D:[i,l("day")],DD:[a,l("day")],Do:[o,function(c){var h=s.ordinal,y=c.match(/\d+/);if(this.day=y[0],h)for(var R=1;R<=31;R+=1)h(R).replace(/\[|\]/g,"")===c&&(this.day=R)}],M:[i,l("month")],MM:[a,l("month")],MMM:[o,function(c){var h=d("months"),y=(d("monthsShort")||h.map(function(R){return R.slice(0,3)})).indexOf(c)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(c){var h=d("months").indexOf(c)+1;if(h<1)throw new Error;this.month=h%12||h}],Y:[/[+-]?\d+/,l("year")],YY:[a,function(c){this.year=u(c)}],YYYY:[/\d{4}/,l("year")],Z:f,ZZ:f};function w(c){var h,y;h=c,y=s&&s.formats;for(var R=(c=h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,g,j){var A=j&&j.toUpperCase();return g||y[j]||r[j]||y[A].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(x,v,O){return v||O.slice(1)})})).match(n),T=R.length,L=0;L<T;L+=1){var _=R[L],H=b[_],Q=H&&H[0],C=H&&H[1];R[L]=C?{regex:Q,parser:C}:_.replace(/^\[|\]$/g,"")}return function(k){for(var g={},j=0,A=0;j<T;j+=1){var x=R[j];if(typeof x=="string")A+=x.length;else{var v=x.regex,O=x.parser,S=k.slice(A),q=v.exec(S)[0];O.call(g,q),k=k.replace(q,"")}}return function(F){var P=F.afternoon;if(P!==void 0){var U=F.hours;P?U<12&&(F.hours+=12):U===12&&(F.hours=0),delete F.afternoon}}(g),g}}return function(c,h,y){y.p.customParseFormat=!0,c&&c.parseTwoDigitYear&&(u=c.parseTwoDigitYear);var R=h.prototype,T=R.parse;R.parse=function(L){var _=L.date,H=L.utc,Q=L.args;this.$u=H;var C=Q[1];if(typeof C=="string"){var k=Q[2]===!0,g=Q[3]===!0,j=k||g,A=Q[2];g&&(A=Q[2]),s=this.$locale(),!k&&A&&(s=y.Ls[A]),this.$d=function(S,q,F){try{if(["x","X"].indexOf(q)>-1)return new Date((q==="X"?1e3:1)*S);var P=w(q)(S),U=P.year,Y=P.month,D=P.day,ee=P.hours,be=P.minutes,ye=P.seconds,ke=P.milliseconds,Ee=P.zone,oe=new Date,ue=D||(U||Y?1:oe.getDate()),qe=U||oe.getFullYear(),Ne=0;U&&!Y||(Ne=Y>0?Y-1:oe.getMonth());var Ue=ee||0,Gn=be||0,Xn=ye||0,ea=ke||0;return Ee?new Date(Date.UTC(qe,Ne,ue,Ue,Gn,Xn,ea+60*Ee.offset*1e3)):F?new Date(Date.UTC(qe,Ne,ue,Ue,Gn,Xn,ea)):new Date(qe,Ne,ue,Ue,Gn,Xn,ea)}catch{return new Date("")}}(_,C,H),this.init(),A&&A!==!0&&(this.$L=this.locale(A).$L),j&&_!=this.format(C)&&(this.$d=new Date("")),s={}}else if(C instanceof Array)for(var x=C.length,v=1;v<=x;v+=1){Q[1]=C[v-1];var O=y.apply(this,Q);if(O.isValid()){this.$d=O.$d,this.$L=O.$L,this.init();break}v===x&&(this.$d=new Date(""))}else T.call(this,L)}}})}),eu=G((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&xe.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,function(){"use strict";var r="month",n="quarter";return function(a,i){var o=i.prototype;o.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var s=o.add;o.add=function(l,f){return l=Number(l),this.$utils().p(f)===n?this.add(3*l,r):s.bind(this)(l,f)};var u=o.startOf;o.startOf=function(l,f){var d=this.$utils(),p=!!d.u(f)||f;if(d.p(l)===n){var b=this.quarter()-1;return p?this.month(3*b).startOf(r).startOf("day"):this.month(3*b+2).endOf(r).endOf("day")}return u.bind(this)(l,f)}}})}),tu=G((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?n(e):typeof define=="function"&&xe.amdO?define(["exports"],n):(r=typeof globalThis!="undefined"?globalThis:r||self,n(r["fast-equals"]={}))})(e,function(r){"use strict";var n=typeof WeakSet=="function",a=Object.keys;function i(g,j){return g===j||g!==g&&j!==j}function o(g){return g.constructor===Object||g.constructor==null}function s(g){return!!g&&typeof g.then=="function"}function u(g){return!!(g&&g.$$typeof)}function l(){var g=[];return{add:function(j){g.push(j)},has:function(j){return g.indexOf(j)!==-1}}}var f=function(g){return g?function(){return new WeakSet}:l}(n);function d(g){return function(j){var A=g||j;return function(x,v,O){O===void 0&&(O=f());var S=!!x&&typeof x=="object",q=!!v&&typeof v=="object";if(S||q){var F=S&&O.has(x),P=q&&O.has(v);if(F||P)return F&&P;S&&O.add(x),q&&O.add(v)}return A(x,v,O)}}}function p(g,j,A,x){var v=g.length;if(j.length!==v)return!1;for(;v-- >0;)if(!A(g[v],j[v],x))return!1;return!0}function b(g,j,A,x){var v=g.size===j.size;if(v&&g.size){var O={};g.forEach(function(S,q){if(v){var F=!1,P=0;j.forEach(function(U,Y){!F&&!O[P]&&(F=A(q,Y,x)&&A(S,U,x),F&&(O[P]=!0)),P++}),v=F}})}return v}var w="_owner",c=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function h(g,j,A,x){var v=a(g),O=v.length;if(a(j).length!==O)return!1;if(O)for(var S=void 0;O-- >0;){if(S=v[O],S===w){var q=u(g),F=u(j);if((q||F)&&q!==F)return!1}if(!c(j,S)||!A(g[S],j[S],x))return!1}return!0}function y(g,j){return g.source===j.source&&g.global===j.global&&g.ignoreCase===j.ignoreCase&&g.multiline===j.multiline&&g.unicode===j.unicode&&g.sticky===j.sticky&&g.lastIndex===j.lastIndex}function R(g,j,A,x){var v=g.size===j.size;if(v&&g.size){var O={};g.forEach(function(S){if(v){var q=!1,F=0;j.forEach(function(P){!q&&!O[F]&&(q=A(S,P,x),q&&(O[F]=!0)),F++}),v=q}})}return v}var T=typeof Map=="function",L=typeof Set=="function";function _(g){var j=typeof g=="function"?g(A):A;function A(x,v,O){if(x===v)return!0;if(x&&v&&typeof x=="object"&&typeof v=="object"){if(o(x)&&o(v))return h(x,v,j,O);var S=Array.isArray(x),q=Array.isArray(v);return S||q?S===q&&p(x,v,j,O):(S=x instanceof Date,q=v instanceof Date,S||q?S===q&&i(x.getTime(),v.getTime()):(S=x instanceof RegExp,q=v instanceof RegExp,S||q?S===q&&y(x,v):s(x)||s(v)?x===v:T&&(S=x instanceof Map,q=v instanceof Map,S||q)?S===q&&b(x,v,j,O):L&&(S=x instanceof Set,q=v instanceof Set,S||q)?S===q&&R(x,v,j,O):h(x,v,j,O)))}return x!==x&&v!==v}return A}var H=_(),Q=_(function(){return i}),C=_(d()),k=_(d(i));r.circularDeepEqual=C,r.circularShallowEqual=k,r.createCustomEqual=_,r.deepEqual=H,r.sameValueZeroEqual=i,r.shallowEqual=Q,Object.defineProperty(r,"__esModule",{value:!0})})}),ru=G((e,t)=>{"use strict";function r(a){try{return JSON.stringify(a)}catch{return'"[Circular]"'}}t.exports=n;function n(a,i,o){var s=o&&o.stringify||r,u=1;if(typeof a=="object"&&a!==null){var l=i.length+u;if(l===1)return a;var f=new Array(l);f[0]=s(a);for(var d=1;d<l;d++)f[d]=s(i[d]);return f.join(" ")}if(typeof a!="string")return a;var p=i.length;if(p===0)return a;for(var b="",w=1-u,c=-1,h=a&&a.length||0,y=0;y<h;){if(a.charCodeAt(y)===37&&y+1<h){switch(c=c>-1?c:0,a.charCodeAt(y+1)){case 100:case 102:if(w>=p||i[w]==null)break;c<y&&(b+=a.slice(c,y)),b+=Number(i[w]),c=y+2,y++;break;case 105:if(w>=p||i[w]==null)break;c<y&&(b+=a.slice(c,y)),b+=Math.floor(Number(i[w])),c=y+2,y++;break;case 79:case 111:case 106:if(w>=p||i[w]===void 0)break;c<y&&(b+=a.slice(c,y));var R=typeof i[w];if(R==="string"){b+="'"+i[w]+"'",c=y+2,y++;break}if(R==="function"){b+=i[w].name||"<anonymous>",c=y+2,y++;break}b+=s(i[w]),c=y+2,y++;break;case 115:if(w>=p)break;c<y&&(b+=a.slice(c,y)),b+=String(i[w]),c=y+2,y++;break;case 37:c<y&&(b+=a.slice(c,y)),b+="%",c=y+2,y++,w--;break}++w}++y}return c===-1?a:(c<h&&(b+=a.slice(c)),b)}}),nu=G((e,t)=>{"use strict";var r=ru();t.exports=o;var n=Q().console||{},a={mapHttpRequest:h,mapHttpResponse:h,wrapRequestSerializer:y,wrapResponseSerializer:y,wrapErrorSerializer:y,req:h,res:h,err:w};function i(C,k){return Array.isArray(C)?C.filter(function(g){return g!=="!stdSerializers.err"}):C===!0?Object.keys(k):!1}function o(C){C=C||{},C.browser=C.browser||{};let k=C.browser.transmit;if(k&&typeof k.send!="function")throw Error("pino: transmit option must have a send function");let g=C.browser.write||n;C.browser.write&&(C.browser.asObject=!0);let j=C.serializers||{},A=i(C.browser.serialize,j),x=C.browser.serialize;Array.isArray(C.browser.serialize)&&C.browser.serialize.indexOf("!stdSerializers.err")>-1&&(x=!1);let v=["error","fatal","warn","info","debug","trace"];typeof g=="function"&&(g.error=g.fatal=g.warn=g.info=g.debug=g.trace=g),C.enabled===!1&&(C.level="silent");let O=C.level||"info",S=Object.create(g);S.log||(S.log=R),Object.defineProperty(S,"levelVal",{get:F}),Object.defineProperty(S,"level",{get:P,set:U});let q={transmit:k,serialize:A,asObject:C.browser.asObject,levels:v,timestamp:c(C)};S.levels=o.levels,S.level=O,S.setMaxListeners=S.getMaxListeners=S.emit=S.addListener=S.on=S.prependListener=S.once=S.prependOnceListener=S.removeListener=S.removeAllListeners=S.listeners=S.listenerCount=S.eventNames=S.write=S.flush=R,S.serializers=j,S._serialize=A,S._stdErrSerialize=x,S.child=Y,k&&(S._logEvent=b());function F(){return this.level==="silent"?1/0:this.levels.values[this.level]}function P(){return this._level}function U(D){if(D!=="silent"&&!this.levels.values[D])throw Error("unknown level "+D);this._level=D,s(q,S,"error","log"),s(q,S,"fatal","error"),s(q,S,"warn","error"),s(q,S,"info","log"),s(q,S,"debug","log"),s(q,S,"trace","log")}function Y(D,ee){if(!D)throw new Error("missing bindings for child Pino");ee=ee||{},A&&D.serializers&&(ee.serializers=D.serializers);let be=ee.serializers;if(A&&be){var ye=Object.assign({},j,be),ke=C.browser.serialize===!0?Object.keys(ye):A;delete D.serializers,f([D],ke,ye,this._stdErrSerialize)}function Ee(oe){this._childLevel=(oe._childLevel|0)+1,this.error=d(oe,D,"error"),this.fatal=d(oe,D,"fatal"),this.warn=d(oe,D,"warn"),this.info=d(oe,D,"info"),this.debug=d(oe,D,"debug"),this.trace=d(oe,D,"trace"),ye&&(this.serializers=ye,this._serialize=ke),k&&(this._logEvent=b([].concat(oe._logEvent.bindings,D)))}return Ee.prototype=this,new Ee(this)}return S}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=a,o.stdTimeFunctions=Object.assign({},{nullTime:T,epochTime:L,unixTime:_,isoTime:H});function s(C,k,g,j){let A=Object.getPrototypeOf(k);k[g]=k.levelVal>k.levels.values[g]?R:A[g]?A[g]:n[g]||n[j]||R,u(C,k,g)}function u(C,k,g){!C.transmit&&k[g]===R||(k[g]=function(j){return function(){let A=C.timestamp(),x=new Array(arguments.length),v=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var O=0;O<x.length;O++)x[O]=arguments[O];if(C.serialize&&!C.asObject&&f(x,this._serialize,this.serializers,this._stdErrSerialize),C.asObject?j.call(v,l(this,g,x,A)):j.apply(v,x),C.transmit){let S=C.transmit.level||k.level,q=o.levels.values[S],F=o.levels.values[g];if(F<q)return;p(this,{ts:A,methodLevel:g,methodValue:F,transmitLevel:S,transmitValue:o.levels.values[C.transmit.level||k.level],send:C.transmit.send,val:k.levelVal},x)}}}(k[g]))}function l(C,k,g,j){C._serialize&&f(g,C._serialize,C.serializers,C._stdErrSerialize);let A=g.slice(),x=A[0],v={};j&&(v.time=j),v.level=o.levels.values[k];let O=(C._childLevel|0)+1;if(O<1&&(O=1),x!==null&&typeof x=="object"){for(;O--&&typeof A[0]=="object";)Object.assign(v,A.shift());x=A.length?r(A.shift(),A):void 0}else typeof x=="string"&&(x=r(A.shift(),A));return x!==void 0&&(v.msg=x),v}function f(C,k,g,j){for(let A in C)if(j&&C[A]instanceof Error)C[A]=o.stdSerializers.err(C[A]);else if(typeof C[A]=="object"&&!Array.isArray(C[A]))for(let x in C[A])k&&k.indexOf(x)>-1&&x in g&&(C[A][x]=g[x](C[A][x]))}function d(C,k,g){return function(){let j=new Array(1+arguments.length);j[0]=k;for(var A=1;A<j.length;A++)j[A]=arguments[A-1];return C[g].apply(this,j)}}function p(C,k,g){let j=k.send,A=k.ts,x=k.methodLevel,v=k.methodValue,O=k.val,S=C._logEvent.bindings;f(g,C._serialize||Object.keys(C.serializers),C.serializers,C._stdErrSerialize===void 0?!0:C._stdErrSerialize),C._logEvent.ts=A,C._logEvent.messages=g.filter(function(q){return S.indexOf(q)===-1}),C._logEvent.level.label=x,C._logEvent.level.value=v,j(x,C._logEvent,O),C._logEvent=b(S)}function b(C){return{ts:0,messages:[],bindings:C||[],level:{label:"",value:0}}}function w(C){let k={type:C.constructor.name,msg:C.message,stack:C.stack};for(let g in C)k[g]===void 0&&(k[g]=C[g]);return k}function c(C){return typeof C.timestamp=="function"?C.timestamp:C.timestamp===!1?T:L}function h(){return{}}function y(C){return C}function R(){}function T(){return!1}function L(){return Date.now()}function _(){return Math.round(Date.now()/1e3)}function H(){return new Date(Date.now()).toISOString()}function Q(){function C(k){return typeof k!="undefined"&&k}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return C(self)||C(window)||C(this)||{}}}});function we(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!1)var a,i;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fe(e){return!!e&&!!e[K]}function Pe(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===fu}(e)||Array.isArray(e)||!!e[ga]||!!e.constructor[ga]||dr(e)||fr(e))}function He(e,t,r){r===void 0&&(r=!1),Xe(e)===0?(r?Object.keys:tt)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Xe(e){var t=e[K];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:dr(e)?2:fr(e)?3:0}function et(e,t){return Xe(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function au(e,t){return Xe(e)===2?e.get(t):e[t]}function oa(e,t,r){var n=Xe(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function sa(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function dr(e){return cu&&e instanceof Map}function fr(e){return du&&e instanceof Set}function Te(e){return e.o||e.t}function pr(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ya(e);delete t[K];for(var r=tt(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function hr(e,t){return t===void 0&&(t=!1),gr(e)||Fe(e)||!Pe(e)||(Xe(e)>1&&(e.set=e.add=e.clear=e.delete=iu),Object.freeze(e),t&&He(e,function(r,n){return hr(n,!0)},!0)),e}function iu(){we(2)}function gr(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function je(e){var t=qr[e];return t||we(18,e),t}function ou(e,t){qr[e]||(qr[e]=t)}function yr(){return yt}function vr(e,t){t&&(je("Patches"),e.u=[],e.s=[],e.v=t)}function _t(e){mr(e),e.p.forEach(su),e.p=null}function mr(e){e===yt&&(yt=e.l)}function ua(e){return yt={p:[],l:yt,h:e,m:!0,_:0}}function su(e){var t=e[K];t.i===0||t.i===1?t.j():t.O=!0}function br(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||je("ES5").S(t,e,n),n?(r[K].P&&(_t(t),we(4)),Pe(e)&&(e=Dt(t,e),t.l||Nt(t,e)),t.u&&je("Patches").M(r[K].t,e,t.u,t.s)):e=Dt(t,r,[]),_t(t),t.u&&t.v(t.u,t.s),e!==ha?e:void 0}function Dt(e,t,r){if(gr(t))return t;var n=t[K];if(!n)return He(t,function(i,o){return la(e,n,t,i,o,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Nt(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=pr(n.k):n.o;He(n.i===3?new Set(a):a,function(i,o){return la(e,n,a,i,o,r)}),Nt(e,a,!1),r&&e.u&&je("Patches").R(n,r,e.u,e.s)}return n.o}function la(e,t,r,n,a,i){if(Fe(a)){var o=Dt(e,a,i&&t&&t.i!==3&&!et(t.D,n)?i.concat(n):void 0);if(oa(r,n,o),!Fe(o))return;e.m=!1}if(Pe(a)&&!gr(a)){if(!e.h.F&&e._<1)return;Dt(e,a),t&&t.A.l||Nt(e,a)}}function Nt(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&hr(t,r)}function wr(e,t){var r=e[K];return(r?Te(r):e)[t]}function ca(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function $e(e){e.P||(e.P=!0,e.l&&$e(e.l))}function Sr(e){e.o||(e.o=pr(e.t))}function Cr(e,t,r){var n=dr(t)?je("MapSet").N(t,r):fr(t)?je("MapSet").T(t,r):e.g?function(a,i){var o=Array.isArray(a),s={i:o?1:0,A:i?i.A:yr(),P:!1,I:!1,D:{},l:i,t:a,k:null,o:null,j:null,C:!1},u=s,l=vt;o&&(u=[s],l=mt);var f=Proxy.revocable(u,l),d=f.revoke,p=f.proxy;return s.k=p,s.j=d,p}(t,r):je("ES5").J(t,r);return(r?r.A:yr()).p.push(n),n}function uu(e){return Fe(e)||we(22,e),function t(r){if(!Pe(r))return r;var n,a=r[K],i=Xe(r);if(a){if(!a.P&&(a.i<4||!je("ES5").K(a)))return a.t;a.I=!0,n=da(r,i),a.I=!1}else n=da(r,i);return He(n,function(o,s){a&&au(a.t,o)===s||oa(n,o,t(s))}),i===3?new Set(n):n}(e)}function da(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return pr(e)}function lu(){function e(o,s){var u=i[o];return u?u.enumerable=s:i[o]=u={configurable:!0,enumerable:s,get:function(){var l=this[K];return vt.get(l,o)},set:function(l){var f=this[K];vt.set(f,o,l)}},u}function t(o){for(var s=o.length-1;s>=0;s--){var u=o[s][K];if(!u.P)switch(u.i){case 5:n(u)&&$e(u);break;case 4:r(u)&&$e(u)}}}function r(o){for(var s=o.t,u=o.k,l=tt(u),f=l.length-1;f>=0;f--){var d=l[f];if(d!==K){var p=s[d];if(p===void 0&&!et(s,d))return!0;var b=u[d],w=b&&b[K];if(w?w.t!==p:!sa(b,p))return!0}}var c=!!s[K];return l.length!==tt(s).length+(c?0:1)}function n(o){var s=o.k;if(s.length!==o.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var l=0;l<s.length;l++)if(!s.hasOwnProperty(l))return!0;return!1}function a(o){o.O&&we(3,JSON.stringify(Te(o)))}var i={};ou("ES5",{J:function(o,s){var u=Array.isArray(o),l=function(d,p){if(d){for(var b=Array(p.length),w=0;w<p.length;w++)Object.defineProperty(b,""+w,e(w,!0));return b}var c=ya(p);delete c[K];for(var h=tt(c),y=0;y<h.length;y++){var R=h[y];c[R]=e(R,d||!!c[R].enumerable)}return Object.create(Object.getPrototypeOf(p),c)}(u,o),f={i:u?5:4,A:s?s.A:yr(),P:!1,I:!1,D:{},l:s,t:o,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,K,{value:f,writable:!0}),l},S:function(o,s,u){u?Fe(s)&&s[K].A===o&&t(o.p):(o.u&&function l(f){if(f&&typeof f=="object"){var d=f[K];if(d){var p=d.t,b=d.k,w=d.D,c=d.i;if(c===4)He(b,function(L){L!==K&&(p[L]!==void 0||et(p,L)?w[L]||l(b[L]):(w[L]=!0,$e(d)))}),He(p,function(L){b[L]!==void 0||et(b,L)||(w[L]=!1,$e(d))});else if(c===5){if(n(d)&&($e(d),w.length=!0),b.length<p.length)for(var h=b.length;h<p.length;h++)w[h]=!1;else for(var y=p.length;y<b.length;y++)w[y]=!0;for(var R=Math.min(b.length,p.length),T=0;T<R;T++)b.hasOwnProperty(T)||(w[T]=!0),w[T]===void 0&&l(b[T])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?r(o):n(o)}})}var fa,yt,Or=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",cu=typeof Map!="undefined",du=typeof Set!="undefined",pa=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",ha=Or?Symbol.for("immer-nothing"):((fa={})["immer-nothing"]=!0,fa),ga=Or?Symbol.for("immer-draftable"):"__$immer_draftable",K=Or?Symbol.for("immer-state"):"__$immer_state",Sy=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",fu=""+Object.prototype.constructor,tt=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ya=Object.getOwnPropertyDescriptors||function(e){var t={};return tt(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},qr={},vt={get:function(e,t){if(t===K)return e;var r=Te(e);if(!et(r,t))return function(a,i,o){var s,u=ca(i,o);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!Pe(n)?n:n===wr(e.t,t)?(Sr(e),e.o[t]=Cr(e.A.h,n,e)):n},has:function(e,t){return t in Te(e)},ownKeys:function(e){return Reflect.ownKeys(Te(e))},set:function(e,t,r){var n=ca(Te(e),t);if(n==null?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=wr(Te(e),t),i=a==null?void 0:a[K];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(sa(r,a)&&(r!==void 0||et(e.t,t)))return!0;Sr(e),$e(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return wr(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Sr(e),$e(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Te(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){we(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){we(12)}},mt={};He(vt,function(e,t){mt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),mt.deleteProperty=function(e,t){return mt.set.call(this,e,t,void 0)},mt.set=function(e,t,r){return vt.set.call(this,e[0],t,r,e[0])};var pu=function(){function e(r){var n=this;this.g=pa,this.F=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var s=i;i=a;var u=n;return function(c){var h=this;c===void 0&&(c=s);for(var y=arguments.length,R=Array(y>1?y-1:0),T=1;T<y;T++)R[T-1]=arguments[T];return u.produce(c,function(L){var _;return(_=i).call.apply(_,[h,L].concat(R))})}}var l;if(typeof i!="function"&&we(6),o!==void 0&&typeof o!="function"&&we(7),Pe(a)){var f=ua(n),d=Cr(n,a,void 0),p=!0;try{l=i(d),p=!1}finally{p?_t(f):mr(f)}return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(c){return vr(f,o),br(c,f)},function(c){throw _t(f),c}):(vr(f,o),br(l,f))}if(!a||typeof a!="object"){if((l=i(a))===void 0&&(l=a),l===ha&&(l=void 0),n.F&&hr(l,!0),o){var b=[],w=[];je("Patches").M(a,l,b,w),o(b,w)}return l}we(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(l){for(var f=arguments.length,d=Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return n.produceWithPatches(l,function(b){return a.apply(void 0,[b].concat(d))})};var o,s,u=n.produce(a,i,function(l,f){o=l,s=f});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(l){return[l,o,s]}):[u,o,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Pe(r)||we(8),Fe(r)&&(r=uu(r));var n=ua(this),a=Cr(this,r,void 0);return a[K].C=!0,mr(n),a},t.finishDraft=function(r,n){var a=r&&r[K],i=a.A;return vr(i,n),br(void 0,i)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!pa&&we(20),this.g=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=je("Patches").$;return Fe(r)?o(r,n):this.produce(r,function(s){return o(s,n)})},e}(),me=new pu,hu=me.produce,Cy=me.produceWithPatches.bind(me),Oy=me.setAutoFreeze.bind(me),qy=me.setUseProxies.bind(me),xy=me.applyPatches.bind(me),Iy=me.createDraft.bind(me),Ey=me.finishDraft.bind(me),xr=hu;function gu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?va(Object(r),!0).forEach(function(n){gu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):va(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ba=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ir=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ut={INIT:"@@redux/INIT"+Ir(),REPLACE:"@@redux/REPLACE"+Ir(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ir()}};function yu(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function wa(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(pe(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(pe(1));return r(wa)(e,t)}if(typeof e!="function")throw new Error(pe(2));var a=e,i=t,o=[],s=o,u=!1;function l(){s===o&&(s=o.slice())}function f(){if(u)throw new Error(pe(3));return i}function d(c){if(typeof c!="function")throw new Error(pe(4));if(u)throw new Error(pe(5));var h=!0;return l(),s.push(c),function(){if(h){if(u)throw new Error(pe(6));h=!1,l();var y=s.indexOf(c);s.splice(y,1),o=null}}}function p(c){if(!yu(c))throw new Error(pe(7));if(typeof c.type=="undefined")throw new Error(pe(8));if(u)throw new Error(pe(9));try{u=!0,i=a(i,c)}finally{u=!1}for(var h=o=s,y=0;y<h.length;y++){var R=h[y];R()}return c}function b(c){if(typeof c!="function")throw new Error(pe(10));a=c,p({type:Ut.REPLACE})}function w(){var c,h=d;return c={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(pe(11));function R(){y.next&&y.next(f())}R();var T=h(R);return{unsubscribe:T}}},c[ba]=function(){return this},c}return p({type:Ut.INIT}),n={dispatch:p,subscribe:d,getState:f,replaceReducer:b},n[ba]=w,n}function vu(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:Ut.INIT});if(typeof n=="undefined")throw new Error(pe(12));if(typeof r(void 0,{type:Ut.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(pe(13))})}function Sa(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),o,s;try{vu(r)}catch(u){s=u}return function(u,l){if(u===void 0&&(u={}),s)throw s;if(!1)var f;for(var d=!1,p={},b=0;b<i.length;b++){var w=i[b],c=r[w],h=u[w],y=c(h,l);if(typeof y=="undefined"){var R=l&&l.type;throw new Error(pe(14))}p[w]=y,d=d||y!==h}return d=d||i.length!==Object.keys(u).length,d?p:u}}function zt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function mu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(pe(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(u){return u(o)});return i=zt.apply(void 0,s)(a.dispatch),ma(ma({},a),{},{dispatch:i})}}}function Ca(e){var t=function(r){var n=r.dispatch,a=r.getState;return function(i){return function(o){return typeof o=="function"?o(n,a,e):i(o)}}};return t}var Oa=Ca();Oa.withExtraArgument=Ca;var qa=Oa,bu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wu=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(f){return u([l,f])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(f){l=[6,f],a=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ht=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},Su=Object.defineProperty,Cu=Object.defineProperties,Ou=Object.getOwnPropertyDescriptors,xa=Object.getOwnPropertySymbols,qu=Object.prototype.hasOwnProperty,xu=Object.prototype.propertyIsEnumerable,Ia=function(e,t,r){return t in e?Su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},rt=function(e,t){for(var r in t||(t={}))qu.call(t,r)&&Ia(e,r,t[r]);if(xa)for(var n=0,a=xa(t);n<a.length;n++){var r=a[n];xu.call(t,r)&&Ia(e,r,t[r])}return e},Er=function(e,t){return Cu(e,Ou(t))},Iu=function(e,t,r){return new Promise(function(n,a){var i=function(u){try{s(r.next(u))}catch(l){a(l)}},o=function(u){try{s(r.throw(u))}catch(l){a(l)}},s=function(u){return u.done?n(u.value):Promise.resolve(u.value).then(i,o)};s((r=r.apply(e,t)).next())})},Eu=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?zt:zt.apply(null,arguments)},jy=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};function ju(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var Ru=function(e){bu(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Ht([void 0],r[0].concat(this)))):new(t.bind.apply(t,Ht([void 0],r.concat(this))))},t}(Array);function ku(e){return typeof e=="boolean"}function Au(){return function(e){return Fu(e)}}function Fu(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t,n=e.immutableCheck,a=n===void 0?!0:n,i=e.serializableCheck,o=i===void 0?!0:i,s=new Ru;if(r&&(ku(r)?s.push(qa):s.push(qa.withExtraArgument(r.extraArgument))),!1){if(a)var u;if(o)var l}return s}var jr=!0;function Pu(e){var t=Au(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,s=r.devTools,u=s===void 0?!0:s,l=r.preloadedState,f=l===void 0?void 0:l,d=r.enhancers,p=d===void 0?void 0:d,b;if(typeof a=="function")b=a;else if(ju(a))b=Sa(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var w=o;if(typeof w=="function"&&(w=w(t),!jr&&!Array.isArray(w)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!jr&&w.some(function(T){return typeof T!="function"}))throw new Error("each middleware provided to configureStore must be a function");var c=mu.apply(void 0,w),h=zt;u&&(h=Eu(rt({trace:!jr},typeof u=="object"&&u)));var y=[c];Array.isArray(p)?y=Ht([c],p):typeof p=="function"&&(y=p(y));var R=h.apply(void 0,y);return wa(b,f,R)}function m(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return rt(rt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}function Tu(e){var t={},r=[],n,a={addCase:function(i,o){var s=typeof i=="string"?i:i.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function $u(e){return typeof e=="function"}function M(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?Tu(t):[t,r,n],i=a[0],o=a[1],s=a[2],u;if($u(e))u=function(){return xr(e(),function(){})};else{var l=xr(e,function(){});u=function(){return l}}function f(d,p){d===void 0&&(d=u());var b=Ht([i[p.type]],o.filter(function(w){var c=w.matcher;return c(p)}).map(function(w){var c=w.reducer;return c}));return b.filter(function(w){return!!w}).length===0&&(b=[s]),b.reduce(function(w,c){if(c)if(Fe(w)){var h=w,y=c(h,p);return typeof y=="undefined"?w:y}else{if(Pe(w))return xr(w,function(T){return c(T,p)});var y=c(w,p);if(typeof y=="undefined"){if(w===null)return w;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return w},d)}return f.getInitialState=u,f}var Vu="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Mu=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=Vu[Math.random()*64|0];return t},Lu=["name","message","stack","code"],Rr=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Ea=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),_u=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=Lu;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}};function Z(e,t,r){var n=m(e+"/fulfilled",function(l,f,d,p){return{payload:l,meta:Er(rt({},p||{}),{arg:d,requestId:f,requestStatus:"fulfilled"})}}),a=m(e+"/pending",function(l,f,d){return{payload:void 0,meta:Er(rt({},d||{}),{arg:f,requestId:l,requestStatus:"pending"})}}),i=m(e+"/rejected",function(l,f,d,p,b){return{payload:p,error:(r&&r.serializeError||_u)(l||"Rejected"),meta:Er(rt({},b||{}),{arg:d,requestId:f,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),o=!1,s=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(f,d,p){var b=(r==null?void 0:r.idGenerator)?r.idGenerator(l):Mu(),w=new s,c,h=new Promise(function(L,_){return w.signal.addEventListener("abort",function(){return _({name:"AbortError",message:c||"Aborted"})})}),y=!1;function R(L){y&&(c=L,w.abort())}var T=function(){return Iu(this,null,function(){var L,_,H,Q,C,k;return wu(this,function(g){switch(g.label){case 0:return g.trys.push([0,4,,5]),Q=(L=r==null?void 0:r.condition)==null?void 0:L.call(r,l,{getState:d,extra:p}),Nu(Q)?[4,Q]:[3,2];case 1:Q=g.sent(),g.label=2;case 2:if(Q===!1)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=!0,f(a(b,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:b,arg:l},{getState:d,extra:p}))),[4,Promise.race([h,Promise.resolve(t(l,{dispatch:f,getState:d,extra:p,requestId:b,signal:w.signal,rejectWithValue:function(j,A){return new Rr(j,A)},fulfillWithValue:function(j,A){return new Ea(j,A)}})).then(function(j){if(j instanceof Rr)throw j;return j instanceof Ea?n(j.payload,b,l,j.meta):n(j,b,l)})])];case 3:return H=g.sent(),[3,5];case 4:return C=g.sent(),H=C instanceof Rr?i(null,b,l,C.payload,C.meta):i(C,b,l),[3,5];case 5:return k=r&&!r.dispatchConditionRejection&&i.match(H)&&H.meta.condition,k||f(H),[2,H]}})})}();return Object.assign(T,{abort:R,requestId:b,arg:l,unwrap:function(){return T.then(Du)}})}}return Object.assign(u,{pending:a,rejected:i,fulfilled:n,typePrefix:e})}function Du(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Nu(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Uu="task",ja="listener",Ra="completed",kr="cancelled",Ry="task-"+kr,ky="task-"+Ra,Ay=ja+"-"+kr,Fy=ja+"-"+Ra,Py=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Uu+" "+kr+" (reason: "+t+")"}return e}(),Ar="listenerMiddleware",Ty=m(Ar+"/add"),$y=m(Ar+"/removeAll"),Vy=m(Ar+"/remove");lu();function zu(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new ka(r)}var ka=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},bt=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let a in this.definition){let i=this.definition[a].validate(r[a]);i&&n.push(`${a}: ${i}`)}if(n.length)throw zu(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},he=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&X(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ce(e){return e===void 0}function Hu(e){return e===null}function X(e){return ce(e)||Hu(e)}var z=class{constructor(e={}){this.config=e,this.value=new he(e)}validate(e){return this.value.validate(e)||(Qu(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Qu(e){return ce(e)||Aa(e)}function Aa(e){return typeof e=="number"&&!isNaN(e)}var W=class{constructor(e={}){this.value=new he(e)}validate(e){return this.value.validate(e)||(Bu(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Bu(e){return ce(e)||Fa(e)}function Fa(e){return typeof e=="boolean"}var Yu=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,V=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new he(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(ce(e)?null:Fr(e)?!t&&!e.length?"value is an empty string.":r&&!Yu.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Fr(e){return Object.prototype.toString.call(e)==="[object String]"}var B=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(ce(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Pa(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&X(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);i!==null&&(t+=" "+i)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Pa(e){return e!==void 0&&typeof e=="object"}var ne=class{constructor(e={}){this.config=e,this.value=new he(this.config)}validate(e){if(!X(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(X(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&X(n)&&(r=`value is null or undefined: ${e.join(",")}`);let a=this.validatePrimitiveValue(n,this.config.each);a!==null&&(r+=" "+a)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Fa(e)||Fr(e)||Aa(e)||Pa(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Ta(e){return Array.isArray(e)}var nt=class{constructor(e){this.config=e,this.value=new he(e)}validate(e){let t=this.value.validate(e);return t!==null?t:ce(e)||Object.values(this.config.enum).find(r=>r===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},$=new V({required:!0,emptyAllowed:!1}),ae=new V({required:!1,emptyAllowed:!1}),se=new V({required:!0,emptyAllowed:!0}),at=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Qe=(e,t)=>{if("required"in t)return{payload:new bt({value:t}).validate({value:e}).value};let r=new B({options:{required:!0},values:t}).validate(e);if(r)throw new ka(r);return{payload:e}},E=(e,t)=>{try{return Qe(e,t)}catch(r){return{payload:e,error:at(r)}}},Wu=(e,t,r,n)=>{let a=`Check the options of ${n}`;return Ju(e,t,r,a,"Controller initialization error")},Ju=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(i){throw e.logger.error(i,a),i}},Pr=()=>ae,$a=()=>$,Qt=m("configuration/updateBasicConfiguration",e=>E(e,{accessToken:ae,organizationId:ae,platformUrl:ae})),Bt=m("configuration/updateSearchConfiguration",e=>E(e,{apiBaseUrl:ae,pipeline:ae,searchHub:ae,timezone:ae,locale:ae,authenticationProviders:new ne({required:!1,each:$})})),Tr=m("configuration/updateAnalyticsConfiguration",e=>E(e,{enabled:new W({default:!0}),originContext:Pr(),originLevel2:Pr(),originLevel3:Pr(),apiBaseUrl:ae,runtimeEnvironment:new he,anonymous:new W({default:!1}),deviceId:ae,userDisplayName:ae,documentLocation:ae})),$r=m("configuration/analytics/disable"),Vr=m("configuration/analytics/enable"),Va=m("configuration/analytics/originlevel2",e=>E(e,{originLevel2:$a()})),Ma=m("configuration/analytics/originlevel3",e=>E(e,{originLevel3:$a()}));function Ku(e){let t={...e},r,n=a=>(i,o)=>{let s=a(i,o);return r?r(s,o):s};return{get combinedReducer(){return n(Sa(t))},containsAll(a){return Object.keys(a).every(i=>i in t)},add(a){Object.keys(a).filter(i=>!(i in t)).forEach(i=>t[i]=a[i])},addCrossReducer(a){r=a}}}var Zu=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},Gu=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function Xu({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return Pu({reducer:e,preloadedState:t,devTools:{stateSanitizer:i=>i.history?{...i,history:"<<OMIT>>"}:i,name:a,shouldHotReload:!1},middleware:i=>[...r,...i({thunk:{extraArgument:n}}),Gu(n.logger)]})}var La=m("history/undo"),_a=m("history/redo"),Be=m("history/snapshot"),My=Z("history/back",async(e,{dispatch:t})=>{t(La()),await t(de())}),Ly=Z("history/forward",async(e,{dispatch:t})=>{t(_a()),await t(de())}),de=Z("history/change",async(e,{getState:t})=>t().history.present),Ve=()=>new V({required:!1,emptyAllowed:!0}),Da=m("advancedSearchQueries/update",e=>E(e,{aq:Ve(),cq:Ve(),lq:Ve(),dq:Ve()})),Na=m("advancedSearchQueries/register",e=>E(e,{aq:Ve(),cq:Ve(),lq:Ve(),dq:Ve()})),Yt=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}}),el={q:new V,enableQuerySyntax:new W,aq:new V,cq:new V,firstResult:new z({min:0}),numberOfResults:new z({min:0}),sortCriteria:new V,f:new B,cf:new B,nf:new B,df:new B,debug:new W,sf:new B,tab:new V},ve=m("searchParameters/restore",e=>E(e,el)),_y=M(Yt(),e=>{e.addCase(Da,(t,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;ce(n)||(t.aq=n,t.aqWasSet=!0),ce(a)||(t.cq=a,t.cqWasSet=!0),ce(i)||(t.lq=i,t.lqWasSet=!0),ce(o)||(t.dq=o,t.dqWasSet=!0)}).addCase(Na,(t,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;ce(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),ce(a)||(t.defaultFilters.cq=a,t.cqWasSet||(t.cq=a)),ce(i)||(t.defaultFilters.lq=i,t.lqWasSet||(t.lq=i)),ce(o)||(t.defaultFilters.dq=o,t.dqWasSet||(t.dq=o))}).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.advancedSearchQueries)!=null?a:t}).addCase(ve,(t,r)=>{let{aq:n,cq:a}=r.payload;ce(n)||(t.aq=n,t.aqWasSet=!0),ce(a)||(t.cq=a,t.cqWasSet=!0)})}),tl=m("tab/register",e=>{let t=new B({values:{id:$,expression:se}});return E(e,t)}),Ua=m("tab/updateActiveTab",e=>E(e,$)),rl=fe(na()),nl=fe(Ys()),Mr=new Error("Failed to load reducers."),za=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Lr=class extends Error{constructor(e,t){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};function al(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}function il(e){return typeof e!="object"||!e?!1:Object.values(e).every(ol)}function ol(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Ha(e){return e===429}var Me=class{static async call(e){let t=ul(e),{preprocessRequest:r,logger:n}=e,a={...t,...r?await r(t,"searchApiFetch"):{}};n.info(a,"Platform request");let{url:i,...o}=a,s=async()=>{let u=await(0,rl.default)(i,o);if(Ha(u.status))throw u;return u};try{let u=await(0,nl.backOff)(s,{retry:l=>{let f=l&&Ha(l.status);return f&&n.info("Platform retrying request"),f}});if(u.status===419)throw n.info("Platform renewing token"),new za;if(u.status===404)throw new Lr(i,u.status);return n.info({response:u,requestInfo:a},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Lr(i):u}}};function Qa(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function Ba(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Qa("platform",e)}function sl(e){return Qa("analytics",e)}function ul(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=e,s=e.method==="POST"||e.method==="PUT",u=ll(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...e.headers},...s&&{body:u},signal:o}}function ll(e,t){return t==="application/x-www-form-urlencoded"?il(e)?al(e):"":JSON.stringify(e)}var _r=fe(gt()),cl=fe(Ws()),dl=fe(Js());function Wt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function N(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(f){try{l(n.next(f))}catch(d){o(d)}}function u(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?i(f.value):a(f.value).then(s,u)}l((n=n.apply(e,t||[])).next())})}var te;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(te||(te={}));function fl(){return typeof window!="undefined"}function Dr(){return typeof navigator!="undefined"}function Ya(){return typeof document!="undefined"}function Nr(){try{return typeof localStorage!="undefined"}catch{return!1}}function pl(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function Wa(){return Dr()&&navigator.cookieEnabled}function hl(){return typeof crypto!="undefined"}function gl(){return hl()&&typeof crypto.getRandomValues!="undefined"}var yl=[te.click,te.custom,te.search,te.view],vl=(e,t)=>yl.indexOf(e)!==-1?Object.assign({language:Ya()?document.documentElement.lang:"unknown",userAgent:Dr()?navigator.userAgent:"unknown"},t):t,it=class{static set(e,t,r){var n,a,i,o,s;r?(i=new Date,i.setTime(i.getTime()+r),o="; expires="+i.toGMTString()):o="",s=location.hostname,s.indexOf(".")===-1?document.cookie=e+"="+t+o+"; path=/":(a=s.split("."),a.shift(),n="."+a.join("."),Ja({name:e,value:t,expires:o,domain:n}),(it.get(e)==null||it.get(e)!=t)&&(n="."+s,Ja({name:e,value:t,expires:o,domain:n})))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(a=a.replace(/^\s+/,""),a.indexOf(t)==0)return a.substring(t.length,a.length)}return null}static erase(e){it.set(e,"",-1)}};function Ja(e){let{name:t,value:r,expires:n,domain:a}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${a}; SameSite=Lax`}function ml(){return Nr()?localStorage:Wa()?new ot:pl()?sessionStorage:new wt}var ot=class{getItem(e){return it.get(`${ot.prefix}${e}`)}removeItem(e){it.erase(`${ot.prefix}${e}`)}setItem(e,t){it.set(`${ot.prefix}${e}`,t)}};ot.prefix="coveo_";var bl=class{constructor(){this.cookieStorage=new ot}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)}},wt=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},St="__coveo.analytics.history",Ka=20,Za=1e3*60,Ga=75,Jt=class{constructor(e){this.store=e||ml()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return N(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return N(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(St);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return N(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(St);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(St,JSON.stringify(e.slice(0,Ka)))}catch{}}clear(){try{this.store.removeItem(St)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return e!=null?e.sort((t,r)=>(r.internalTime||0)-(t.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Ga)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>Za:!0}stripInternalTime(e){return e.map(t=>{let{name:r,time:n,value:a}=t;return{name:r,time:n,value:a}})}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(t=>this.stripEmptyQuery(t))}},Xa=Object.freeze({__proto__:null,STORE_KEY:St,MAX_NUMBER_OF_HISTORY_ELEMENTS:Ka,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Za,MAX_VALUE_SIZE:Ga,HistoryStore:Jt,default:Jt}),wl=(e,t)=>N(void 0,void 0,void 0,function*(){return e===te.view?(yield Sl(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),Sl=e=>N(void 0,void 0,void 0,function*(){let t=new Jt,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)}),st=e=>e?(Number(e)^Cl(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):(`${1e7}`+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,st),Cl=e=>{if(gl())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)(t&3)==0&&(r=Math.random()*4294967296),e[t]=r>>>((t&3)<<3)&255;return e},Se=Object.keys,Ur={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Ol=Se(Ur).map(e=>Ur[e]),ql=[...Ol].join("|"),xl=new RegExp(`^(${ql}$)`),Il={svcAction:"svc_action",svcActionData:"svc_action_data"},El=e=>Se(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Ur[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),jl=e=>xl.test(e),Rl=[jl],ei={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},ti={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ge={action:"pa",list:"pal",listSource:"pls"},Kt={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},kl=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],zr={id:"quoteId",affiliation:"quoteAffiliation"},Hr={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Al={add:ge,bookmark_add:ge,bookmark_remove:ge,click:ge,checkout:ge,checkout_option:ge,detail:ge,impression:ge,remove:ge,refund:Object.assign(Object.assign({},ge),Kt),purchase:Object.assign(Object.assign({},ge),Kt),quickview:ge,quote:Object.assign(Object.assign({},ge),zr),review:Object.assign(Object.assign({},ge),Hr)},Fl=Se(ei).map(e=>ei[e]),Pl=Se(ti).map(e=>ti[e]),Tl=Se(ge).map(e=>ge[e]),$l=Se(Kt).map(e=>Kt[e]),Vl=Se(Hr).map(e=>Hr[e]),Ml=Se(zr).map(e=>zr[e]),Ll=[...Fl,"custom"].join("|"),_l=[...Pl,"custom"].join("|"),ri="(pr[0-9]+)",ni="(il[0-9]+pi[0-9]+)",Dl=new RegExp(`^${ri}(${Ll})$`),Nl=new RegExp(`^(${ni}(${_l}))|(il[0-9]+nm)$`),Ul=new RegExp(`^(${Tl.join("|")})$`),zl=new RegExp(`^(${$l.join("|")})$`),Hl=new RegExp(`^${ri}custom$`),Ql=new RegExp(`^${ni}custom$`),Bl=new RegExp(`^(${[...kl,...Vl,...Ml].join("|")})$`),Yl=e=>Dl.test(e),Wl=e=>Nl.test(e),Jl=e=>Ul.test(e),Kl=e=>zl.test(e),Zl=e=>Bl.test(e),Gl=[Wl,Yl,Jl,Kl,Zl],Xl=[Hl,Ql],ec={anonymizeIp:"aip"},tc={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},rc={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},nc=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale"],ac=Object.assign(Object.assign(Object.assign(Object.assign({},ec),tc),rc),nc.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Qr=Object.assign(Object.assign({},ac),Il),ic=e=>{let t=!!e.action&&Al[e.action]||{};return Se(e).reduce((r,n)=>{let a=t[n]||Qr[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})},{})},oc=Se(Qr).map(e=>Qr[e]),sc=e=>oc.indexOf(e)!==-1,uc=e=>e==="custom",lc=e=>[...Gl,...Rl,sc,uc].some(t=>t(e)),cc=e=>Se(e).reduce((t,r)=>{let n=dc(r);return n?Object.assign(Object.assign({},t),fc(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),dc=e=>{let t;return[...Xl].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!Boolean(t)}),t},fc=(e,t)=>Se(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),pc=class{constructor(e){this.opts=e}sendEvent(e,t){return N(this,void 0,void 0,function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=this.encodeForEventType(e,t),i=yield this.getQueryParamsForEventType(e),o={url:`${r}/analytics/${e}?${i}`,body:new Blob([a],{type:"application/x-www-form-urlencoded"})},{url:s,body:u}=Object.assign(Object.assign({},o),n?yield n(o,"analyticsBeacon"):{});console.log(`Sending beacon for "${e}" with: `,JSON.stringify(t)),navigator.sendBeacon(s,u)})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return N(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(e){return[te.click,te.custom,te.search,te.view].indexOf(e)!==-1}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(t=>!!e[t]).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},hc=class{sendEvent(e,t){return N(this,void 0,void 0,function*(){return Promise.resolve()})}},gc=window.fetch,ai=class{constructor(e){this.opts=e}sendEvent(e,t){return N(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),a?yield a(o,"analyticsFetch"):{}),{url:u}=s,l=Wt(s,["url"]),f=yield gc(u,l);if(f.ok){let d=yield f.json();return d.visitorId&&n.setCurrentVisitorId(d.visitorId),d}else{try{f.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,f,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}shouldAppendVisitorId(e){return[te.click,te.custom,te.search,te.view].indexOf(e)!==-1}getVisitorIdParam(){return N(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},yc=class{constructor(e,t){Nr()&&Wa()?this.storage=new bl:Nr()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new wt),this.client=new ai(e),this.beaconClient=new pc(e),window.addEventListener("beforeunload",()=>{let r=t();for(let{eventType:n,payload:a}of r)this.beaconClient.sendEvent(n,a)})}},vc=class{constructor(e,t){this.storage=t||new wt,this.client=new ai(e)}},mc=class{constructor(){this.storage=new wt,this.client=new hc}},bc="xx",wc=e=>(e==null?void 0:e.startsWith(bc))||!1,Sc=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please install @react-native-async-storage/async-storage and instantiate 
        your analytics client as follows:
        
        import {ReactNativeRuntime} from 'coveo.analytics/react-native';
        
        const analytics = new CoveoAnalytics({
            ...your options,
            runtimeEnvironment: new ReactNativeRuntime();
        })
    `;function Cc(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var Oc=["1",1,"yes",!0];function ii(){return Dr()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Oc.indexOf(e)!==-1)}var qc="v15",xc={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"},Ct=class{constructor(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[wl,vl].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),ii()&&(this.clear(),this.runtime.storage=new wt)}get defaultOptions(){return{endpoint:xc.default,token:"",version:qc,beforeSendHooks:[],afterSendHooks:[]}}initRuntime(e){return fl()&&Ya()?new yc(e,()=>{let t=[...this.bufferedRequests];return this.bufferedRequests=[],t}):(Cc()&&console.warn(Sc),new vc(e))}get storage(){return this.runtime.storage}determineVisitorId(){return N(this,void 0,void 0,function*(){try{return(yield this.storage.getItem("visitorId"))||st()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),st()}})}getCurrentVisitorId(){return N(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return N(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}getParameters(e,...t){return N(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...t)})}getPayload(e,...t){return N(this,void 0,void 0,function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(st()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}resolveParameters(e,...t){return N(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[i=>r.length>0?this.parseVariableArgumentsPayload(r,i):i[0],i=>N(this,void 0,void 0,function*(){return Object.assign(Object.assign({},i),{visitorId:n?yield this.getCurrentVisitorId():""})}),i=>a?this.ensureAnonymousUserWhenUsingApiKey(i):i,i=>this.beforeSendHooks.reduce((o,s)=>N(this,void 0,void 0,function*(){let u=yield o;return yield s(e,u)}),i)].reduce((i,o)=>N(this,void 0,void 0,function*(){let s=yield i;return yield o(s)}),Promise.resolve(t))})}resolvePayloadForParameters(e,t){return N(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[n=>this.removeEmptyPayloadValues(n,e),n=>this.validateParams(n),n=>r?ic(n):n,n=>r?this.removeUnknownParameters(n):n,n=>r?this.processCustomParameters(n):n].reduce((n,a)=>N(this,void 0,void 0,function*(){let i=yield n;return yield a(i)}),Promise.resolve(t))})}sendEvent(e,...t){return N(this,void 0,void 0,function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return this.bufferedRequests.push({eventType:r,payload:a}),yield Promise.all(this.afterSendHooks.map(i=>i(e,n))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBufferWithFetch(){return N(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.client.sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new Jt().clear()}sendSearchEvent(e){return N(this,void 0,void 0,function*(){return this.sendEvent(te.search,e)})}sendClickEvent(e){return N(this,void 0,void 0,function*(){return this.sendEvent(te.click,e)})}sendCustomEvent(e){return N(this,void 0,void 0,function*(){return this.sendEvent(te.custom,e)})}sendViewEvent(e){return N(this,void 0,void 0,function*(){return this.sendEvent(te.view,e)})}getVisit(){return N(this,void 0,void 0,function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e})}getHealth(){return N(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[te.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(t,n)||r(e[n])).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:e[a]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(t=>{if(lc(t))return!0;console.log(t,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=Wt(e,["custom"]),n=this.lowercaseKeys(t),a=cc(r);return Object.assign(Object.assign({},n),a)}lowercaseKeys(e){return Object.keys(e||{}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r.toLowerCase()]:e[r]}),{})}validateParams(e){let{anonymizeIp:t}=e,r=Wt(e,["anonymizeIp"]);return t!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${t}`.toLowerCase())==-1&&(r.anonymizeIp=1),r}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Wt(e,["userId"]);return wc(this.options.token)&&!t?(r.userId="anonymous",r):e}get baseUrl(){let{version:e,endpoint:t}=this.options,r=t.indexOf(".cloud.coveo.com")!==-1;return`${t}${r?"":"/rest"}/${e}`}},I;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults"})(I||(I={}));var Ic={[I.triggerNotify]:"queryPipelineTriggers",[I.triggerExecute]:"queryPipelineTriggers",[I.triggerQuery]:"queryPipelineTriggers",[I.triggerRedirect]:"queryPipelineTriggers",[I.queryError]:"errors",[I.queryErrorBack]:"errors",[I.queryErrorClear]:"errors",[I.queryErrorRetry]:"errors",[I.pagerNext]:"getMoreResults",[I.pagerPrevious]:"getMoreResults",[I.pagerNumber]:"getMoreResults",[I.pagerResize]:"getMoreResults",[I.pagerScrolling]:"getMoreResults",[I.facetSearch]:"facet",[I.facetShowLess]:"facet",[I.facetShowMore]:"facet",[I.recommendation]:"recommendation",[I.likeSmartSnippet]:"smartSnippet",[I.dislikeSmartSnippet]:"smartSnippet",[I.expandSmartSnippet]:"smartSnippet",[I.collapseSmartSnippet]:"smartSnippet",[I.openSmartSnippetFeedbackModal]:"smartSnippet",[I.closeSmartSnippetFeedbackModal]:"smartSnippet",[I.sendSmartSnippetReason]:"smartSnippet",[I.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.clearRecentQueries]:"recentQueries",[I.recentResultClick]:"recentlyClickedDocuments",[I.clearRecentResults]:"recentlyClickedDocuments",[I.showLessFoldedResults]:"folding"},oi=class{constructor(){this.runtime=new mc,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}};function Ec(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function jc(e){return e.map(t=>t.replace(/;/g,""))}function si(e){let t=256,r=e.join(";");return r.length<=t?r:si(e.slice(1))}var ui=e=>{let t=jc(e),r=Ec(t);return si(r)};function li(e){let t=typeof e.partialQueries=="string"?e.partialQueries:ui(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:ui(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Rc=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||ii();this.coveoAnalyticsClient=r?new oi:new Ct(e)}disable(){this.coveoAnalyticsClient instanceof Ct&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new oi}enable(){this.coveoAnalyticsClient=new Ct(this.opts)}logInterfaceLoad(){return this.logSearchEvent(I.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(I.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(I.recommendation)}logRecommendationOpen(e,t){return this.logClickEvent(I.recommendationOpen,e,t)}logStaticFilterClearAll(e){return this.logSearchEvent(I.staticFilterClearAll,e)}logStaticFilterSelect(e){return this.logSearchEvent(I.staticFilterSelect,e)}logStaticFilterDeselect(e){return this.logSearchEvent(I.staticFilterDeselect,e)}logFetchMoreResults(){return this.logCustomEvent(I.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(e){return this.logSearchEvent(I.interfaceChange,e)}logDidYouMeanAutomatic(){return this.logSearchEvent(I.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(I.didyoumeanClick)}logResultsSort(e){return this.logSearchEvent(I.resultsSort,e)}logSearchboxSubmit(){return this.logSearchEvent(I.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(I.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(I.searchboxAsYouType)}logBreadcrumbFacet(e){return this.logSearchEvent(I.breadcrumbFacet,e)}logBreadcrumbResetAll(){return this.logSearchEvent(I.breadcrumbResetAll)}logDocumentQuickview(e,t){return this.logClickEvent(I.documentQuickview,e,t)}logDocumentOpen(e,t){return this.logClickEvent(I.documentOpen,e,t)}logOmniboxAnalytics(e){return this.logSearchEvent(I.omniboxAnalytics,li(e))}logOmniboxFromLink(e){return this.logSearchEvent(I.omniboxFromLink,li(e))}logSearchFromLink(){return this.logSearchEvent(I.searchFromLink)}logTriggerNotify(e){return this.logCustomEvent(I.triggerNotify,e)}logTriggerExecute(e){return this.logCustomEvent(I.triggerExecute,e)}logTriggerQuery(){let e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(I.triggerQuery,e)}logTriggerRedirect(e){let t=Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(I.triggerRedirect,t)}logPagerResize(e){return this.logCustomEvent(I.pagerResize,e)}logPagerNumber(e){return this.logCustomEvent(I.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(I.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(I.pagerPrevious,e)}logPagerScrolling(){return this.logCustomEvent(I.pagerScrolling)}logFacetClearAll(e){return this.logSearchEvent(I.facetClearAll,e)}logFacetSearch(e){return this.logSearchEvent(I.facetSearch,e)}logFacetSelect(e){return this.logSearchEvent(I.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(I.facetDeselect,e)}logFacetExclude(e){return this.logSearchEvent(I.facetExclude,e)}logFacetUnexclude(e){return this.logSearchEvent(I.facetUnexclude,e)}logFacetSelectAll(e){return this.logSearchEvent(I.facetSelectAll,e)}logFacetUpdateSort(e){return this.logSearchEvent(I.facetUpdateSort,e)}logFacetShowMore(e){return this.logCustomEvent(I.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(I.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(I.queryError,e)}logQueryErrorBack(){return N(this,void 0,void 0,function*(){return yield this.logCustomEvent(I.queryErrorBack),this.logSearchEvent(I.queryErrorBack)})}logQueryErrorRetry(){return N(this,void 0,void 0,function*(){return yield this.logCustomEvent(I.queryErrorRetry),this.logSearchEvent(I.queryErrorRetry)})}logQueryErrorClear(){return N(this,void 0,void 0,function*(){return yield this.logCustomEvent(I.queryErrorClear),this.logSearchEvent(I.queryErrorClear)})}logLikeSmartSnippet(){return this.logCustomEvent(I.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(I.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(I.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(I.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(I.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(I.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(e,t){return this.logCustomEvent(I.sendSmartSnippetReason,{reason:e,details:t})}logExpandSmartSnippetSuggestion(e){return this.logCustomEvent(I.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return this.logCustomEvent(I.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logShowMoreSmartSnippetSuggestion(e){return this.logCustomEvent(I.showMoreSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return this.logCustomEvent(I.showLessSmartSnippetSuggestion,e)}logOpenSmartSnippetSource(e,t){return this.logClickEvent(I.openSmartSnippetSource,e,t)}logOpenSmartSnippetSuggestionSource(e,t){return this.logClickEvent(I.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logRecentQueryClick(){return this.logSearchEvent(I.recentQueryClick)}logClearRecentQueries(){return this.logCustomEvent(I.clearRecentQueries)}logRecentResultClick(e,t){return this.logCustomEvent(I.recentResultClick,{info:e,identifier:t})}logClearRecentResults(){return this.logCustomEvent(I.clearRecentResults)}logNoResultsBack(){return this.logSearchEvent(I.noResultsBack)}logShowMoreFoldedResults(e,t){return this.logClickEvent(I.showMoreFoldedResults,e,t)}logShowLessFoldedResults(){return this.logCustomEvent(I.showLessFoldedResults)}logCustomEvent(e,t){return N(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(r)),{eventType:Ic[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logCustomEventWithType(e,t,r){return N(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:t,eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(a)})}logSearchEvent(e,t){return N(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,t))})}logClickEvent(e,t,r,n){return N(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(a)})}getBaseSearchEventRequest(e,t){return N(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseCustomEventRequest(e){return N(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseEventRequest(e){return N(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ct?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},ci=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Ot={pageview:"pageview",event:"event"},kc=class{constructor({client:e,uuidGenerator:t=st}){this.actionData={},this.client=e,this.uuidGenerator=t,this.pageViewId=t(),this.nextPageViewId=this.pageViewId,this.currentLocation=ci(window.location),this.lastReferrer=document.referrer,this.addHooks()}setAction(e,t){this.action=e,this.actionData=t}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,t){return Object.assign({hitType:e},this.getNextValues(e,t))}updateLocationInformation(e,t){this.updateLocationForNextPageView(e,t)}getDefaultContextInformation(e){let t={title:document.title,encoding:document.characterSet},r={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now().toString(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),r),n),t)}updateLocationForNextPageView(e,t){let{pageViewId:r,referrer:n,location:a}=this.getNextValues(e,t);this.lastReferrer=n,this.pageViewId=r,this.currentLocation=a,e===Ot.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,t){return{pageViewId:e===Ot.pageview?this.nextPageViewId:this.pageViewId,referrer:e===Ot.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===Ot.pageview?this.getCurrentLocationFromPayload(t):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let t=r=>r.replace(/^\/?(.*)$/,"/$1");return`${(r=>r.split("/").slice(0,3).join("/"))(this.currentLocation)}${t(e.page)}`}else return ci(window.location)}},Zt=Object.assign({},Ot),di=Object.keys(Zt).map(e=>Zt[e]),Ac=class extends kc{constructor({client:e,uuidGenerator:t=st}){super({client:e,uuidGenerator:t});this.ticket={}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[t])=>di.indexOf(e)!==-1?this.addSVCDataToPayload(e,t):t),this.client.registerAfterSendEventHook((e,...[t])=>(di.indexOf(e)!==-1&&this.updateLocationInformation(e,t),t))}addHooksForPageView(){this.client.addEventTypeMapping(Zt.pageview,{newEventType:te.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Zt.event,{newEventType:te.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,t){var r;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((r=this.actionData)!==null&&r!==void 0?r:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),n),t)}getTicketPayload(){return El(this.ticket)}};Ac.Id="svc";var fi;(function(e){e.click="click",e.flowStart="flowStart"})(fi||(fi={}));var pi;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(pi||(pi={}));var hi;(function(e){e.quit="Quit",e.solved="Solved"})(hi||(hi={}));var ut=()=>({q:"",enableQuerySyntax:!1});function gi(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ye(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:gi(),pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""}}var Br=()=>"default",yi="1.87.1",Fc=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Yr=class{constructor(e){this.stateNeededByBaseAnalyticsProvider=e}getLanguage(){return Fc(this.stateNeededByBaseAnalyticsProvider)}getBaseMetadata(){let{context:e}=this.stateNeededByBaseAnalyticsProvider,t=(e==null?void 0:e.contextValues)||{},r={};for(let[n,a]of Object.entries(t)){let i=`context_${n}`;r[i]=a}return r.coveoHeadlessVersion=yi,r}getOriginContext(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originContext}getOriginLevel1(){return this.stateNeededByBaseAnalyticsProvider.searchHub||Br()}getOriginLevel2(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originLevel2}getOriginLevel3(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originLevel3}getIsAnonymous(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.anonymous}};function Wr(){return{}}function Jr(){return{}}function Kr(){return{}}function Zr(){return{}}var Pc=(e,t)=>{if("productListing"in e&&e.productListing)return e.productListing.facets.results.find(r=>r.facetId===t);if("search"in e&&e.search)return e.search.response.facets.find(r=>r.facetId===t)};function qt(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(a=>a.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function Tc(e,t){return!!t&&t.facetId in e.categoryFacetSet}var $c=(e,t)=>{let r=Pc(e,t);if(Tc(e,r))return r},vi=(e,t)=>{let r=$c(e,t);return qt(r==null?void 0:r.values).parents},mi=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),Vc=(e,t)=>{let r=wi(t,e),n=r?r.field:"",a=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:a}};function bi(e){return{facetSet:e.facetSet||Zr(),categoryFacetSet:e.categoryFacetSet||Wr(),dateFacetSet:e.dateFacetSet||Jr(),numericFacetSet:e.numericFacetSet||Kr(),..."search"in e&&{search:e.search?e.search:Ye()},..."productListing"in e&&{productListing:e.productListing?e.productListing:mi()}}}var Mc=e=>{let t=[];return Lc(e).forEach((r,n)=>{let a=Qc(e,r.facetId),i=Hc(r,n+1);if(a==="hierarchical"){if(!vi(e,r.facetId).length)return;t.push({...i,...zc(e,r.facetId),facetType:a,state:"selected"});return}r.values.forEach((o,s)=>{if(o.state==="idle")return;let u=_c(o,s+1,a),l=a==="specific"?Nc(o):Dc(o);t.push({...i,...u,...l})})}),t},Lc=e=>"productListing"in e&&e.productListing?e.productListing.facets.results:"search"in e&&e.search?e.search.response.facets:[],_c=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Dc=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Nc=e=>({displayValue:e.value,value:e.value}),Uc=(e,t)=>vi(e,t).map(r=>r.value).join(";"),zc=(e,t)=>{let r=1,n=Uc(e,t);return{value:n,valuePosition:r,displayValue:n}},Hc=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),wi=(e,t)=>{var r;return e.facetSet[t]||((r=e.categoryFacetSet[t])==null?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},Qc=(e,t)=>{let r=wi(e,t);return r?r.type:"specific"},Si=class extends Yr{constructor(e){super(e);this.state=e}getFacetState(){return Mc(bi(this.state))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;return((e=this.state.search)==null?void 0:e.searchResponseId)||((t=this.state.search)==null?void 0:t.response.searchUid)||Ye().response.searchUid}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||ut().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Ye().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Ye().response.results.length}},Bc=({logger:e,state:t,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new Si(t)})=>{let i=t.configuration.accessToken,o=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=t.configuration.analytics.enabled,l=new Rc({token:i,endpoint:o,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(f,d)=>(e.info({...d,type:f,endpoint:o,token:i},"Analytics request"),d)]},a);return u||l.disable(),l},Re=()=>new Ct({}).getCurrentVisitorId(),lt=new Xa.HistoryStore,Ci=()=>{let e=lt.getHistory().reverse().find(t=>t.name==="PageView"&&t.value);return e?e.value:""};_r.default.extend(cl.default),_r.default.extend(dl.default);var Oi="/rest/search/v2",Gr="/rest/ua",Yc=()=>({organizationId:"",accessToken:"",platformUrl:Ba(),search:{apiBaseUrl:`${Ba()}${Oi}`,locale:"en-US",timezone:_r.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${sl()}${Gr}`,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:""}}),Gt=async e=>({analytics:{clientId:await Re(),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Ci()&&{pageId:Ci()}}});function Wc(e,t){if(/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Gr;let r=e.match(new RegExp(`^https://(${t}\\.org)\\.coveo.com`));return r?e.replace(r[1],"analytics.cloud")+Gr:e}var Jc=M(Yc(),e=>e.addCase(Qt,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Oi}`,t.analytics.apiBaseUrl=Wc(r.payload.platformUrl,t.organizationId))}).addCase(Bt,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Tr,(t,r)=>{X(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),X(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),X(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),X(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),X(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),X(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),X(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),X(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),X(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),X(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase($r,t=>{t.analytics.enabled=!1}).addCase(Vr,t=>{t.analytics.enabled=!0}).addCase(Va,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Ma,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Ua,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(ve,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2})),Kc=new ne({each:$,required:!0}),qi=(e,t)=>(E(e,$),Fr(t)?E(t,$):E(t,Kc),{payload:{contextKey:e,contextValue:t}}),Xr=m("context/set",e=>{for(let[t,r]of Object.entries(e))qi(t,r);return{payload:e}}),en=m("context/add",e=>qi(e.contextKey,e.contextValue)),tn=m("context/remove",e=>E(e,$));function xi(){return{contextValues:{}}}var Dy=M(xi(),e=>{e.addCase(Xr,(t,r)=>{t.contextValues=r.payload}).addCase(en,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(tn,(t,r)=>{delete t.contextValues[r.payload]}).addCase(de.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})}),Ii=m("debug/enable"),Ei=m("debug/disable"),ji=()=>!1,Zc=M(ji(),e=>{e.addCase(Ii,()=>!0).addCase(Ei,()=>!1).addCase(ve,(t,r)=>{var n;return(n=r.payload.debug)!=null?n:t})}),Gc=M(yi,e=>e),Xc=m("didYouMean/enable"),ed=m("didYouMean/disable"),rn=m("didYouMean/correction",e=>E(e,$));function td(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function rd(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function nn(e,t){if(t&&e.name==="AbortError")return{error:rd(e)};if(e instanceof Lr)return{error:td(e)};throw e}var Le=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${nd(e)}${e.authentication?`&${ad(e)}`:""}`}),nd=e=>`organizationId=${e.organizationId}`,ad=e=>`authentication=${encodeURIComponent(e.authentication)}`;function id(e){return((e.headers.get("content-type")||"").split(";").find(t=>t.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var od=TextDecoder;function We(e){let{url:t,accessToken:r,organizationId:n,authentication:a,...i}=e;return i}var Je=e=>{let{response:t}=e;return t.body?sd(e):ud(t)},sd=e=>cd(e)?dd(e):ld(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},ud=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function ld(e){return e.body.statusCode!==void 0}function cd(e){return e.body.exception!==void 0}var dd=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),fd=async(e,t)=>{let r=await Me.call({...Le(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:We(e),...t});if(r instanceof Error)throw r;let n=id(r),a=await r.arrayBuffer(),i=new od(n).decode(a);return pd(i)?{success:i}:{error:Je({response:r,body:i})}};function pd(e){return typeof e=="string"}var hd=class{constructor(e){this.options=e,this.searchAbortController=null}async plan(e){let t=await Me.call({...Le(e,"POST","application/json","/plan"),requestParams:We(e),...this.options});if(t instanceof Error)return nn(t);let r=await t.json();return yd(r)?{success:r}:{error:Je({response:t,body:r})}}async querySuggest(e){let t=await Me.call({...Le(e,"POST","application/json","/querySuggest"),requestParams:We(e),...this.options});if(t instanceof Error)return nn(t);let r=await t.json(),n={response:t,body:r};return gd(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:Je(n)}}async search(e,t={}){var r;this.searchAbortController&&(!t.disableAbortWarning&&this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();let n=await Me.call({...Le(e,"POST","application/json",""),requestParams:We(e),...this.options,signal:(r=this.searchAbortController)==null?void 0:r.signal});if(n instanceof Error)return nn(n,t.disableAbortWarning);this.searchAbortController=null;let a=await n.json(),i={response:n,body:a};return an(a)?(i.body=md(a),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:Je(i)}}async facetSearch(e){let t=await Me.call({...Le(e,"POST","application/json","/facet"),requestParams:We(e),...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await Me.call({...Le(e,"POST","application/json",""),requestParams:We(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return an(r)?{success:r}:{error:Je({response:t,body:r})}}async html(e){return fd(e,this.options)}async productRecommendations(e){let t=await Me.call({...Le(e,"POST","application/json",""),requestParams:We(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return an(r)?{success:r}:{error:Je({response:t,body:r})}}async fieldDescriptions(e){let t=await Me.call({...Le(e,"GET","application/json","/fields"),requestParams:{},...this.options});if(t instanceof Error)throw t;let r=await t.json();return vd(r)?{success:r}:{error:Je({response:t,body:r})}}getAbortControllerInstanceIfAvailable(){if(typeof window=="undefined"){let e=Ks();return new e}return typeof AbortController=="undefined"?null:new AbortController}},ie=e=>e.error!==void 0;function gd(e){return e.completions!==void 0}function yd(e){return e.preprocessingOutput!==void 0}function vd(e){return e.fields!==void 0}function an(e){return e.results!==void 0}function md(e){let t=gi();return X(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}var on=()=>"",bd=fe(Xs());function wd(e){return Array.isArray(e)}function Sd(e,t){return Object.values(e.reduce((r,n,a)=>({...r,[t(n,a)]:n}),{}))}function Cd(e){return(typeof btoa!="undefined"?btoa:bd.btoa)(encodeURI(e))}function Od(e){let t=Ri(e),r=[e,...t].filter(n=>n.parentResult).map(n=>n.parentResult);return Sd([e,...t,...r],n=>n.uniqueId)}function Ri(e){return e.childResults?e.childResults.flatMap(t=>[t,...Ri(t)]):[]}var Ny=new Xa.HistoryStore,Ce=(e=>(e[e.Search=0]="Search",e[e.Custom=1]="Custom",e[e.Click=2]="Click",e))(Ce||{}),qd=e=>e(),Ie=(e,t,r,n=a=>new Si(a))=>Z(e,async(a,{getState:i,extra:{analyticsClientMiddleware:o,preprocessRequest:s,logger:u}})=>{let l=qd(i),f=Bc({state:l,logger:u,analyticsClientMiddleware:o,preprocessRequest:s,provider:n(l)}),d=await r(f,l);return u.info({client:f.coveoAnalyticsClient,response:d},"Analytics response"),{analyticsType:t}}),xd=e=>Z("analytics/noop",async()=>({analyticsType:e})),Uy=xd(0),Id=(e,t)=>{var r;let n=((r=t.recommendation)==null?void 0:r.recommendations.findIndex(({uniqueId:a})=>e.uniqueId===a))||0;return Ed(e,n,t)};function Ed(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:Ad(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Fd(e),queryPipeline:r.pipeline||on()}}var jd=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),ki={urihash:new V,sourcetype:new V,permanentid:new V},sn={uniqueId:$,raw:new B({values:ki}),title:$,uri:$,clickUri:$,rankingModifier:new V({required:!1,emptyAllowed:!0})};function Rd(e){return Object.assign({},...Object.keys(ki).map(t=>({[t]:e[t]})))}function kd(e){return Object.assign({},...Object.keys(sn).map(t=>({[t]:e[t]})),{raw:Rd(e.raw)})}function Ad(e){let t=e.raw.author;return X(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Fd(e){let t=e.raw.source;return X(t)?"unknown":t}var Ai=e=>new bt(sn).validate(kd(e)),zy=Ie("analytics/didyoumean/click",Ce.Search,e=>e.logDidYouMeanClick()),Pd=Ie("analytics/didyoumean/automatic",Ce.Search,e=>e.logDidYouMeanAutomatic()),un=m("query/updateQuery",e=>E(e,{q:new V,enableQuerySyntax:new W}));function Fi(){return{contextValues:{}}}function xt(){return{enabled:!0}}function Pi(){return{freezeFacetOrder:!1,facets:{}}}function Ti(){return[]}function ln(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function $i(){return{}}function Td(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}function Vi(){return{}}var Mi=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Mi||{}),cn=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(cn||{}),Xt=e=>{if(Ta(e))return e.map(t=>Xt(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},$d=()=>({by:"relevancy"}),Hy=new B({values:{by:new nt({enum:cn,required:!0}),order:new nt({enum:Mi}),field:new V}});function Li(){return Xt($d())}function _i(){return{}}function Di(){return{}}function Vd(){return ct({})}function ct(e){var t,r;return{context:e.context||xi(),dictionaryFieldContext:e.dictionaryFieldContext||Fi(),facetSet:e.facetSet||Zr(),numericFacetSet:e.numericFacetSet||Kr(),dateFacetSet:e.dateFacetSet||Jr(),categoryFacetSet:e.categoryFacetSet||Wr(),pagination:e.pagination||ln(),query:e.query||ut(),tabSet:e.tabSet||Di(),advancedSearchQueries:e.advancedSearchQueries||Yt(),staticFilterSet:e.staticFilterSet||_i(),querySet:e.querySet||Vi(),instantResults:e.instantResults||$i(),sortCriteria:e.sortCriteria||Li(),pipeline:e.pipeline||on(),searchHub:e.searchHub||Br(),facetOptions:e.facetOptions||Pi(),facetOrder:(t=e.facetOrder)!=null?t:Ti(),debug:(r=e.debug)!=null?r:ji()}}var Md=Ie("search/logFetchMoreResults",Ce.Search,e=>e.logFetchMoreResults()),_e=e=>Ie("search/queryError",Ce.Search,(t,r)=>{var n,a,i;return t.logQueryError({query:((n=r.query)==null?void 0:n.q)||ut().q,aq:((a=r.advancedSearchQueries)==null?void 0:a.aq)||Yt().aq,cq:((i=r.advancedSearchQueries)==null?void 0:i.cq)||Yt().cq,dq:"",errorType:e.type,errorMessage:e.message})})(),er=fe(gt()),Ni=fe(gt()),Ld=fe(ia());Ni.default.extend(Ld.default);var _d="YYYY/MM/DD@HH:mm:ss",Dd="1401-01-01";function Ui(e){return e.format(_d)}function Nd(e,t){let r=(0,Ni.default)(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",a=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?a:n}`)}zi(r)}function zi(e){if(e.isBefore(Dd))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var Ud=fe(eu());er.default.extend(Ud.default);var Hi=["past","now","next"],Qi=["minute","hour","day","week","month","quarter","year"],zd=e=>{let t=e==="now";return{amount:new z({required:!t,min:1}),unit:new V({required:!t,constrainTo:Qi}),period:new V({required:!0,constrainTo:Hi})}};function Bi(e){if(typeof e=="string"&&!It(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Ji(e):e;new bt(zd(t.period)).validate(t);let r=Yi(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);zi(r)}function Hd(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function Yi(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,er.default)().subtract(r,n);case"next":return(0,er.default)().add(r,n);case"now":return(0,er.default)()}}function dn(e){return Ui(Yi(Ji(e)))}function Wi(e){return e.toLocaleLowerCase().split("-")}function It(e){let[t,r,n]=Wi(e);if(t==="now")return!0;if(!Hi.includes(t)||!Qi.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function Qd(e){return!!e&&typeof e=="object"&&"period"in e}function Ji(e){let[t,r,n]=Wi(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Bd(e){return e.hasBreadcrumbs!==void 0}function Yd(e){return e.type==="dateRange"}function Ki(e){return`start${e}`}function Zi(e){return`end${e}`}var Wd=()=>({dateFacetValueMap:{}});function Jd(e,t,r){let n=e.start,a=e.end;return It(n)&&(n=dn(n),r.dateFacetValueMap[t][Ki(n)]=e.start),It(a)&&(a=dn(a),r.dateFacetValueMap[t][Zi(a)]=e.end),{...e,start:n,end:a}}function Kd(e,t){if(Yd(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(a=>Jd(a,r,t))}}if(Bd(e)){let{hasBreadcrumbs:r,...n}=e;return n}return e}function Gi(e){var t;let r=Wd();return{request:{...e,facets:(t=e.facets)==null?void 0:t.map(n=>Kd(n,r))},mappings:r}}function Zd(e,t,r){return{...e,start:r.dateFacetValueMap[t][Ki(e.start)]||e.start,end:r.dateFacetValueMap[t][Zi(e.end)]||e.end}}function Gd(e,t){return e.facetId in t.dateFacetValueMap}function Xd(e,t){return Gd(e,t)?{...e,values:e.values.map(r=>Zd(r,e.facetId,t))}:e}function Xi(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>Xd(n,t))}}:e}var tr=new z({required:!0,min:0}),ef=m("pagination/registerNumberOfResults",e=>E(e,tr)),tf=m("pagination/updateNumberOfResults",e=>E(e,tr)),rf=m("pagination/registerPage",e=>E(e,tr)),eo=m("pagination/updatePage",e=>E(e,tr)),nf=m("pagination/nextPage"),af=m("pagination/previousPage");function to(e,t){let r={};e.forEach(i=>r[i.facetId]=i);let n=[];t.forEach(i=>{i in r&&(n.push(r[i]),delete r[i])});let a=Object.values(r);return[...n,...a]}var fn=async e=>{var t,r,n,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Re(),actionsHistory:lt.getHistory()},...((t=e.advancedSearchQueries)==null?void 0:t.aq)&&{aq:e.advancedSearchQueries.aq},...((r=e.advancedSearchQueries)==null?void 0:r.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((a=e.advancedSearchQueries)==null?void 0:a.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Gt(e.configuration.analytics),...e.excerptLength&&!X(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},Ke=async e=>{var t;let r=cf(e),n=of(e),a=await fn(e);return Gi({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((t=e.folding)==null?void 0:t.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}})};function of(e){var t;return to(sf(e),(t=e.facetOrder)!=null?t:[])}function sf(e){return uf(e).filter(({facetId:t})=>{var r,n,a;return(a=(n=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:n.enabled)!=null?a:!0})}function uf(e){return[...pn(e.facetSet),...pn(e.numericFacetSet),...pn(e.dateFacetSet),...lf(e.categoryFacetSet)]}function lf(e){return Object.values(e||{}).map(t=>t.request)}function pn(e={}){return Object.keys(e).map(t=>e[t])}function cf(e){var t;let r=((t=e.advancedSearchQueries)==null?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find(o=>o.isActive),a=(n==null?void 0:n.expression.trim())||"",i=df(e);return[r,a,...i].filter(o=>!!o).join(" AND ")}function df(e){return Object.values(e.staticFilterSet||{}).map(t=>{let r=t.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),n=r.map(a=>a.expression).join(" OR ");return r.length>1?`(${n})`:n})}var Ze=m("breadcrumb/deselectAll"),Et=m("facet/deselectAllFacets"),hn=m("facet/updateFacetAutoSelection",e=>E(e,{allow:new W({required:!0})})),gn={id:$},ff={...gn,q:se},pf=m("instantResults/register",e=>E(e,gn)),ro=m("instantResults/updateQuery",e=>E(e,ff)),hf=m("instantResults/clearExpired",e=>E(e,gn)),jt=async(e,t,{request:r,mappings:n})=>{var a;let i=new Date().getTime(),o=Xi(await e.search(r),n),s=new Date().getTime()-i,u=((a=t.query)==null?void 0:a.q)||"";return{response:o,duration:s,queryExecuted:u,requestExecuted:r}},Qy=Z("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;E(e,{q:new V,enableQuerySyntax:new W}),r(Ze()),r(hn({allow:!0})),r(un(e)),r(eo(1))}),re=Z("search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();io(i);let o=await jt(a.apiClient,i,await Ke(i));if(ie(o.response))return r(_e(o.response.error)),n(o.response.error);if(!ao(i,o.response.success))return r(Be(ct(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Rt(i),analyticsAction:e};let{correctedQuery:s}=o.response.success.queryCorrections[0],u=await yf(a.apiClient,s,t,r);if(ie(u.response))return r(_e(u.response.error)),n(u.response.error);let l=o.response.success;return e(r,()=>gf(o.queryExecuted,o.duration,i,l),a),r(Be(ct(t()))),{...u,response:{...u.response.success,queryCorrections:o.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:Rt(i),analyticsAction:Pd()}}),yn=Z("search/fetchPage",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();io(i);let o=await jt(a.apiClient,i,await Ke(i));return ie(o.response)?(r(_e(o.response.error)),n(o.response.error)):(r(Be(ct(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Rt(i),analyticsAction:e})}),rr=Z("search/fetchMoreResults",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await jt(a,i,await vf(i));return ie(o.response)?(r(_e(o.response.error)),n(o.response.error)):(r(Be(ct(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Rt(i),analyticsAction:Md()})}),vn=Z("search/fetchFacetValues",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await jt(a,i,await bf(i));return ie(o.response)?(r(_e(o.response.error)),n(o.response.error)):(r(Be(ct(i))),{...o,analyticsAction:e,response:o.response.success,automaticallyCorrected:!1,originalQuery:Rt(i)})}),mn=Z("instantResults/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:$,q:$,maxResultsPerQuery:new z({required:!0,min:1}),cacheTimeout:new z});let{q:o,maxResultsPerQuery:s}=e,u=t(),l=await no(a,u,o,s);if(ie(l))return r(_e(l.error)),n(l.error);if(!ao(u,l.success))return{results:l.success.results};let{correctedQuery:f}=l.success.queryCorrections[0];r(ro({q:f,id:e.id}));let d=await no(a,u,f,s);return ie(d)?(r(_e(d.error)),n(d.error)):{results:d.success.results}});async function no(e,t,r,n){let{request:a,mappings:i}=await mf(t,r,n);return Xi(await e.search(a,{disableAbortWarning:!0}),i)}var gf=(e,t,r,n)=>{var a,i;return{...r,query:{q:e,enableQuerySyntax:(i=(a=r.query)==null?void 0:a.enableQuerySyntax)!=null?i:ut().enableQuerySyntax},search:{...Ye(),duration:t,response:n,results:n.results}}},yf=async(e,t,r,n)=>{n(un({q:t}));let a=await jt(e,r(),await Ke(r()));return n(rn(t)),a},ao=(e,t)=>{var r;return((r=e.didYouMean)==null?void 0:r.enableDidYouMean)===!0&&t.results.length===0&&t.queryCorrections.length!==0},vf=async e=>{var t,r,n,a;let i=await Ke(e);return i.request={...i.request,firstResult:((r=(t=e.pagination)==null?void 0:t.firstResult)!=null?r:0)+((a=(n=e.search)==null?void 0:n.results.length)!=null?a:0)},i},mf=async(e,t,r)=>{let n=await fn(e);return Gi({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},bf=async e=>{let t=await Ke(e);return t.request.numberOfResults=0,t},io=e=>{var t;e.configuration.analytics.enabled&&lt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},Rt=e=>{var t;return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""},bn=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function wf(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:bn(),originalQuery:""}}var By=M(wf(),e=>{e.addCase(Xc,t=>{t.enableDidYouMean=!0}).addCase(ed,t=>{t.enableDidYouMean=!1}).addCase(re.pending,t=>{t.queryCorrection=bn(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(re.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||bn(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(rn,(t,r)=>{t.wasCorrectedTo=r.payload})}),J=$,Sf={state:new he({required:!0}),numberOfResults:new z({required:!0,min:0}),value:new V({required:!0,emptyAllowed:!0}),path:new ne({required:!0,each:$}),moreValuesAvailable:new W({required:!1})};function oo(e){e.children.forEach(t=>{oo(t)}),Qe({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Sf)}var Cf={facetId:J,field:$,delimitingCharacter:new V({required:!1,emptyAllowed:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new z({required:!1,min:0}),numberOfValues:new z({required:!1,min:1}),sortCriteria:new he({required:!1}),basePath:new ne({required:!1,each:$}),filterByBasePath:new W({required:!1})},so=m("categoryFacet/register",e=>E(e,Cf)),uo=m("categoryFacet/toggleSelectValue",e=>{try{return Qe(e.facetId,$),oo(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:at(t)}}}),lo=m("categoryFacet/deselectAll",e=>E(e,J)),Of=m("categoryFacet/updateNumberOfValues",e=>E(e,{facetId:J,numberOfValues:new z({required:!0,min:1})})),qf=m("categoryFacet/updateSortCriterion",e=>E(e,{facetId:J,criterion:new he})),xf={value:$,numberOfResults:new z({min:0}),state:$},Yy=new V({regex:/^[a-zA-Z0-9-_]+$/}),Wy=new V({required:!0}),Jy=new ne({each:new V}),Ky=new V,Zy=new W,Gy=new W,Xy=new z({min:0}),If=new z({min:1}),ev=new W({required:!0}),Ef=new B,jf=new V,Rf={captions:Ef,numberOfValues:If,query:jf},tv=new B({values:Rf}),kf=new B({options:{required:!1},values:{type:new V({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new ne({required:!0,max:25,each:new V({emptyAllowed:!1,required:!0})})}}),rv=new W,Af={facetId:J,field:new V({required:!0,emptyAllowed:!0}),delimitingCharacter:new V({required:!1,emptyAllowed:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new z({required:!1,min:0}),numberOfValues:new z({required:!1,min:1}),sortCriteria:new he({required:!1}),allowedValues:kf},co=m("facet/register",e=>E(e,Af)),fo=m("facet/toggleSelectValue",e=>E(e,{facetId:J,selection:new B({values:xf})})),nr=m("facet/deselectAll",e=>E(e,J)),Ff=m("facet/updateSortCriterion",e=>E(e,{facetId:J,criterion:new he({required:!0})})),Pf=m("facet/updateNumberOfValues",e=>E(e,{facetId:J,numberOfValues:new z({required:!0,min:1})})),Tf=m("facet/updateIsFieldExpanded",e=>E(e,{facetId:J,isFieldExpanded:new W({required:!0})})),$f=m("facet/updateFreezeCurrentValues",e=>E(e,{facetId:J,freezeCurrentValues:new W({required:!0})})),po=fe(gt()),ho={state:$,start:new z({required:!0}),end:new z({required:!0}),endInclusive:new W({required:!0}),numberOfResults:new z({required:!0,min:0})},go={start:$,end:$,endInclusive:new W({required:!0}),state:$,numberOfResults:new z({required:!0,min:0})},yo=m("rangeFacet/updateSortCriterion",e=>E(e,{facetId:J,criterion:new he({required:!0})})),vo=fe(gt()),Vf=fe(ia());vo.default.extend(Vf.default);function Mf(e){var t,r;ce(e.useLocalTime)||console.warn('The "useLocalTime" option for "buildDateRange" is deprecated. Please use the "timezone" engine configuration option instead.');let n=mo(e.start,e),a=mo(e.end,e),i=(t=e.endInclusive)!=null?t:!1,o=(r=e.state)!=null?r:"idle";return{start:n,end:a,endInclusive:i,state:o}}function mo(e,t){let{dateFormat:r}=t;return Qd(e)?(Bi(e),Hd(e)):typeof e=="string"&&It(e)?(Bi(e),e):(Nd(e,r),Ui((0,vo.default)(e,r)))}var Lf={start:$,end:$,endInclusive:new W({required:!0}),state:$},_f={facetId:J,field:$,currentValues:new ne({required:!1,each:new B({values:Lf})}),generateAutomaticRanges:new W({required:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new z({required:!1,min:0}),numberOfValues:new z({required:!1,min:1}),sortCriteria:new he({required:!1}),rangeAlgorithm:new he({required:!1})};function bo(e){return It(e)?dn(e):e}function wo(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:n}=Mf(t);if((0,po.default)(bo(r)).isAfter((0,po.default)(bo(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var So=m("dateFacet/register",e=>{try{return Qe(e,_f),wo(e),{payload:e,error:null}}catch(t){return{payload:e,error:at(t)}}}),Co=m("dateFacet/toggleSelectValue",e=>E(e,{facetId:J,selection:new B({values:go})})),Oo=m("dateFacet/updateFacetValues",e=>{try{return Qe(e,{facetId:J,values:new ne({each:new B({values:go})})}),wo({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:at(t)}}}),Df=yo,Nf=nr,Uf={state:$,start:new z({required:!0}),end:new z({required:!0}),endInclusive:new W({required:!0})},zf={facetId:J,field:$,currentValues:new ne({required:!1,each:new B({values:Uf})}),generateAutomaticRanges:new W({required:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new z({required:!1,min:0}),numberOfValues:new z({required:!1,min:1}),sortCriteria:new he({required:!1}),rangeAlgorithm:new he({required:!1})};function qo(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var xo=m("numericFacet/register",e=>{try{return E(e,zf),qo(e),{payload:e,error:null}}catch(t){return{payload:e,error:at(t)}}}),Io=m("numericFacet/toggleSelectValue",e=>E(e,{facetId:J,selection:new B({values:ho})})),Eo=m("numericFacet/updateFacetValues",e=>{try{return Qe(e,{facetId:J,values:new ne({each:new B({values:ho})})}),qo({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:at(t)}}}),Hf=yo,Qf=nr,Bf=m("facetOptions/update",e=>E(e,{freezeFacetOrder:new W({required:!1})})),Yf=m("facetOptions/facet/enable",e=>E(e,J)),kt=m("facetOptions/facet/disable",e=>E(e,J)),nv=M(Pi(),e=>{e.addCase(Bf,(t,r)=>({...t,...r.payload})).addCase(re.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(re.rejected,t=>{t.freezeFacetOrder=!1}).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOptions)!=null?a:t}).addCase(so,(t,r)=>{t.facets[r.payload.facetId]=xt()}).addCase(co,(t,r)=>{t.facets[r.payload.facetId]=xt()}).addCase(So,(t,r)=>{t.facets[r.payload.facetId]=xt()}).addCase(xo,(t,r)=>{t.facets[r.payload.facetId]=xt()}).addCase(Yf,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(kt,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(ve,(t,r)=>{var n,a,i,o;[...Object.keys((n=r.payload.f)!=null?n:{}),...Object.keys((a=r.payload.cf)!=null?a:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((o=r.payload.df)!=null?o:{})].forEach(s=>{s in t||(t.facets[s]=xt()),t.facets[s].enabled=!0})})});function wn(e,t){let{facetId:r,criterion:n}=t,a=e[r];!a||(a.sortCriteria=n)}function ar(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function jo(e,t){!e||(e.numberOfValues=t)}var Sn={facetId:J,captions:new B({options:{required:!1}}),numberOfValues:new z({required:!1,min:1}),query:new V({required:!1,emptyAllowed:!0})},Wf={path:new ne({required:!0,each:$}),displayValue:se,rawValue:se,count:new z({required:!0,min:0})},Ro=m("categoryFacet/selectSearchResult",e=>E(e,{facetId:J,value:new B({values:Wf})})),Jf=m("categoryFacetSearch/register",e=>E(e,Sn));function ir(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function ko(e,t,r){e.currentValues=Kf(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function Kf(e,t){if(!e.length)return[];let r=Ao(e[0],t),n=r;for(let a of e.splice(1)){let i=Ao(a,t);n.children.push(i),n=i}return n.state="selected",n.retrieveChildren=!0,[r]}function Ao(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var av=M(Wr(),e=>{e.addCase(so,(t,r)=>{let n=r.payload,{facetId:a}=n;if(a in t)return;let i=Xf(n),o=i.numberOfValues;t[a]={request:i,initialNumberOfValues:o}}).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.categoryFacetSet)!=null?a:t}).addCase(ve,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(a=>{let i=t[a].request,o=n[a]||[];(o.length||i.currentValues.length)&&ko(i,o,t[a].initialNumberOfValues)})}).addCase(qf,(t,r)=>{var n;let{facetId:a,criterion:i}=r.payload,o=(n=t[a])==null?void 0:n.request;!o||(o.sortCriteria=i)}).addCase(uo,(t,r)=>{var n;let{facetId:a,selection:i,retrieveCount:o}=r.payload,s=(n=t[a])==null?void 0:n.request;if(!s)return;let{path:u}=i,l=u.slice(0,u.length-1),f=Gf(s,l,o);if(f.length){let p=f[0];p.retrieveChildren=!0,p.state="selected",p.children=[];return}let d=Fo(i.value,o);d.state="selected",f.push(d),s.numberOfValues=1}).addCase(lo,(t,r)=>{let n=r.payload;ir(t,n)}).addCase(Et,t=>{Object.keys(t).forEach(r=>ir(t,r))}).addCase(Ze,t=>{Object.keys(t).forEach(r=>ir(t,r))}).addCase(hn,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(Of,(t,r)=>{var n;let{facetId:a,numberOfValues:i}=r.payload,o=(n=t[a])==null?void 0:n.request;if(o){if(!o.currentValues.length)return jo(o,i);ep(t,r.payload)}}).addCase(Ro,(t,r)=>{let{facetId:n,value:a}=r.payload,i=t[n];if(!i)return;let o=[...a.path,a.rawValue];ko(i.request,o,i.initialNumberOfValues)}).addCase(vn.fulfilled,(t,r)=>{Po(t,r.payload.response.facets)}).addCase(re.fulfilled,(t,r)=>{Po(t,r.payload.response.facets)}).addCase(kt,(t,r)=>{ir(t,r.payload)})}),Zf={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function Gf(e,t,r){let n=e.currentValues;for(let a of t){let i=n[0];(!i||a!==i.value)&&(i=Fo(a,r),n.length=0,n.push(i)),i.retrieveChildren=!1,i.state="idle",n=i.children}return n}function Xf(e){return{...Zf,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function Fo(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function Po(e,t){t.forEach(r=>{var n;if(!tp(e,r))return;let a=r.facetId,i=(n=e[a])==null?void 0:n.request;if(!i)return;let o=rp(i,r);i.currentValues=o?[]:i.currentValues,i.preventAutoSelect=!1})}function ep(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=(r=e[n])==null?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&(i==null?void 0:i.state)!=="selected";)i=i.children[0];i.retrieveCount=a}}function tp(e,t){return t.facetId in e}function rp(e,t){let r=qt(e.currentValues).parents,n=qt(t.values).parents;return r.length!==n.length}var iv=M(Ti(),e=>{e.addCase(re.fulfilled,(t,r)=>r.payload.response.facets.map(n=>n.facetId)).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOrder)!=null?a:t})});function To(e,t,r){let{facetId:n}=t;if(e[n])return;let a=!1,i={...Do,...t},o=r();e[n]={options:i,isLoading:a,response:o,initialNumberOfValues:i.numberOfValues,requestId:""}}function $o(e,t){let{facetId:r,...n}=t,a=e[r];!a||(a.options={...a.options,...n})}function Vo(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function Mo(e,t){let r=e[t];!r||(r.isLoading=!1)}function Lo(e,t,r){let{facetId:n,response:a}=t,i=e[n];!i||i.requestId===r&&(i.isLoading=!1,i.response=a)}function Cn(e,t,r){let{facetId:n}=t,a=e[n];!a||(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=Do.query)}function _o(e,t){Object.keys(e).forEach(r=>Cn(e,{facetId:r},t))}var Do={captions:{},numberOfValues:10,query:""},np={facetId:J,value:new B({values:{displayValue:se,rawValue:se,count:new z({required:!0,min:0})}})},ap=m("facetSearch/register",e=>E(e,Sn)),No=m("facetSearch/update",e=>E(e,Sn)),Uo=m("facetSearch/toggleSelectValue",e=>E(e,np));function ip(){return{}}var op=e=>Ie("analytics/facet/search",Ce.Search,(t,r)=>{E(e,J);let n=bi(r),a=Vc(e,n);return t.logFacetSearch(a)})(),sp=async(e,t)=>{let{captions:r,query:n,numberOfValues:a}=t.facetSearchSet[e].options,{field:i,currentValues:o,filterFacetCount:s}=t.facetSet[e],u=(await Ke(t)).request,l=o.filter(d=>d.state!=="idle").map(d=>d.value),f=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:r,numberOfValues:a,query:f,field:i,ignoreValues:l,searchContext:u,filterFacetCount:s,type:"specific"}},up=async(e,t)=>{let r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:a,query:i,numberOfValues:o}=r,{field:s,delimitingCharacter:u,basePath:l,filterFacetCount:f}=n,d=(await Ke(t)).request,p=lp(n),b=p.length?[p]:[],w=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:a,numberOfValues:o,query:w,field:s,delimitingCharacter:u,ignorePaths:b,searchContext:d,filterFacetCount:f,type:"hierarchical"}},lp=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},dt=Z("facetSearch/executeSearch",async(e,{dispatch:t,getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i=r(),o;a(e,$),cp(i,e)?o=await sp(e,i):o=await up(e,i);let s=await n.facetSearch(o);return t(op(e)),{facetId:e,response:s}}),zo=m("facetSearch/clearResults",e=>E(e,{facetId:J})),cp=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0,ov=M(ip(),e=>{e.addCase(Jf,(t,r)=>{let n=r.payload;To(t,n,On)}).addCase(No,(t,r)=>{$o(t,r.payload)}).addCase(dt.pending,(t,r)=>{let n=r.meta.arg;Vo(t,n,r.meta.requestId)}).addCase(dt.rejected,(t,r)=>{let n=r.meta.arg;Mo(t,n)}).addCase(dt.fulfilled,(t,r)=>{Lo(t,r.payload,r.meta.requestId)}).addCase(zo,(t,{payload:{facetId:r}})=>{Cn(t,{facetId:r},On)}).addCase(re.fulfilled,t=>{_o(t,On)})});function On(){return{moreValuesAvailable:!1,values:[]}}function dp(){return{}}var sv=M(dp(),e=>{e.addCase(ap,(t,r)=>{let n=r.payload;To(t,n,qn)}).addCase(No,(t,r)=>{$o(t,r.payload)}).addCase(dt.pending,(t,r)=>{let n=r.meta.arg;Vo(t,n,r.meta.requestId)}).addCase(dt.rejected,(t,r)=>{let n=r.meta.arg;Mo(t,n)}).addCase(dt.fulfilled,(t,r)=>{Lo(t,r.payload,r.meta.requestId)}).addCase(zo,(t,{payload:r})=>{Cn(t,r,qn)}).addCase(re.fulfilled,t=>{_o(t,qn)})});function qn(){return{moreValuesAvailable:!1,values:[]}}var At=(e=>(e.Relevance="relevance",e.Fields="fields",e))(At||{}),Ho=(e=>(e.Ascending="asc",e.Descending="desc",e))(Ho||{}),fp=()=>({by:"relevance"}),uv=new B({options:{required:!1},values:{by:new nt({enum:At,required:!0}),fields:new ne({each:new B({values:{name:new V,direction:new nt({enum:Ho})}})})}}),pp=m("productlisting/setUrl",e=>E(e,{url:new V({required:!0,url:!0})})),hp=m("productlisting/setAdditionalFields",e=>E(e,{additionalFields:new ne({required:!0,each:new V({required:!0,emptyAllowed:!1})})})),Ft=Z("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProducts(await gp(i));return ie(s)?(r(_e(s.error)),n(s.error)):{response:s.success}}),gp=async e=>{var t,r,n;let a=vp(e),i=await Re();return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(t=e.productListing)==null?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...((r=e.productListing.additionalFields)==null?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&yp(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((n=e.sort)==null?void 0:n.by)||At.Relevance)!==At.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function yp(e){return e.debug}function vp(e){var t;return to(mp(e),(t=e.facetOrder)!=null?t:[])}function mp(e){return[...xn(e.facetSet),...xn(e.numericFacetSet),...xn(e.dateFacetSet),...bp(e.categoryFacetSet)]}function bp(e){return Object.values(e||{}).map(t=>t.request)}function xn(e={}){return Object.keys(e).map(t=>e[t])}var lv=M(Zr(),e=>{e.addCase(co,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=Sp(r.payload))}).addCase(de.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(ve,(t,r)=>{let n=r.payload.f||{};Object.keys(t).forEach(a=>{let i=t[a],o=n[a]||[],s=i.currentValues.filter(u=>!o.includes(u.value));i.currentValues=[...o.map(Bo),...s.map(Op)],i.preventAutoSelect=o.length>0,i.numberOfValues=Math.max(o.length,i.numberOfValues)})}).addCase(fo,(t,r)=>{let{facetId:n,selection:a}=r.payload,i=t[n];if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(u=>u.value===a.value);if(!o){Qo(i,a);return}let s=o.state==="selected";o.state=s?"idle":"selected",i.freezeCurrentValues=!0}).addCase($f,(t,r)=>{let{facetId:n,freezeCurrentValues:a}=r.payload,i=t[n];!i||(i.freezeCurrentValues=a)}).addCase(nr,(t,r)=>{let n=t[r.payload];ar(n)}).addCase(Et,t=>{Object.keys(t).forEach(r=>{let n=t[r];ar(n)})}).addCase(Ze,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(r=>{let n=t[r.facetId];ar(n)})}).addCase(hn,(t,r)=>Object.keys(t).forEach(n=>{t[n].preventAutoSelect=!r.payload.allow})).addCase(Ff,(t,r)=>{wn(t,r.payload)}).addCase(Pf,(t,r)=>{let{facetId:n,numberOfValues:a}=r.payload;jo(t[n],a)}).addCase(Tf,(t,r)=>{let{facetId:n,isFieldExpanded:a}=r.payload,i=t[n];!i||(i.isFieldExpanded=a)}).addCase(re.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>In(t[n.facetId],n))}).addCase(Ft.fulfilled,(t,r)=>{var n,a;(((a=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:a.results)||[]).forEach(i=>In(t[i.facetId],i))}).addCase(vn.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>In(t[n.facetId],n))}).addCase(Uo,(t,r)=>{let{facetId:n,value:a}=r.payload,i=t[n];if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,u=s.find(f=>f.value===o);if(u){u.state="selected";return}let l=Bo(o);Qo(i,l),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(kt,(t,r)=>{if(!(r.payload in t))return;let n=t[r.payload];ar(n)})});function Qo(e,t){let{currentValues:r}=e,n=r.findIndex(s=>s.state==="idle"),a=n===-1?r.length:n,i=r.slice(0,a),o=r.slice(a+1);e.currentValues=[...i,t,...o],e.numberOfValues=e.currentValues.length}function In(e,t){!e||(e.currentValues=t.values.map(Cp),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var wp={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function Sp(e){return{...wp,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,hasBreadcrumbs:!0,...e}}function Cp(e){let{value:t,state:r}=e;return{value:t,state:r}}function Bo(e){return{value:e,state:"selected"}}function Op(e){return{...e,state:"idle"}}var Yo={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function Wo(e,t){let{facetId:r}=t;if(r in e)return;let n=Xo(t);e[r]={...t,numberOfValues:n}}function Jo(e,t,r){let n=e[t];!n||(n.currentValues=r,n.numberOfValues=Xo(n))}function Ko(e,t,r){let n=e[t];if(!n)return;let a=En(n.currentValues,r);if(!a)return;let i=a.state==="selected";a.state=i?"idle":"selected",n.preventAutoSelect=!0}function De(e,t){let r=e[t];!r||r.currentValues.forEach(n=>n.state="idle")}function Zo(e,t){Object.entries(e).forEach(([r,n])=>{let a=t[r]||[];n.currentValues.forEach(s=>{let u=!!En(a,s);return s.state=u?"selected":"idle",s});let i=a.filter(s=>!En(n.currentValues,s)),o=n.currentValues;o.push(...i),n.numberOfValues=Math.max(n.numberOfValues,o.length)})}function Go(e,t,r){t.forEach(n=>{let a=n.facetId,i=e[a];if(!i)return;let o=r(n.values);i.currentValues=o,i.preventAutoSelect=!1})}function En(e,t){let{start:r,end:n}=t;return e.find(a=>a.start===r&&a.end===n)}function Xo(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var cv=M(Jr(),e=>{e.addCase(So,(t,r)=>{let{payload:n}=r,a=qp(n);Wo(t,a)}).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.dateFacetSet)!=null?a:t}).addCase(ve,(t,r)=>{let n=r.payload.df||{};Zo(t,n)}).addCase(Co,(t,r)=>{let{facetId:n,selection:a}=r.payload;Ko(t,n,a)}).addCase(Oo,(t,r)=>{let{facetId:n,values:a}=r.payload;Jo(t,n,a)}).addCase(Nf,(t,r)=>{De(t,r.payload)}).addCase(Et,t=>{Object.keys(t).forEach(r=>{De(t,r)})}).addCase(Ze,t=>{Object.keys(t).forEach(r=>{De(t,r)})}).addCase(Df,(t,r)=>{wn(t,r.payload)}).addCase(re.fulfilled,(t,r)=>{let n=r.payload.response.facets;Go(t,n,xp)}).addCase(kt,(t,r)=>{De(t,r.payload)})});function qp(e){return{...Yo,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function xp(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var dv=M(Kr(),e=>{e.addCase(xo,(t,r)=>{let{payload:n}=r,a=Ip(n);Wo(t,a)}).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.numericFacetSet)!=null?a:t}).addCase(ve,(t,r)=>{let n=r.payload.nf||{};Zo(t,n)}).addCase(Io,(t,r)=>{let{facetId:n,selection:a}=r.payload;Ko(t,n,a)}).addCase(Eo,(t,r)=>{let{facetId:n,values:a}=r.payload;Jo(t,n,a)}).addCase(Qf,(t,r)=>{De(t,r.payload)}).addCase(Et,t=>{Object.keys(t).forEach(r=>{De(t,r)})}).addCase(Ze,t=>{Object.keys(t).forEach(r=>{De(t,r)})}).addCase(Hf,(t,r)=>{wn(t,r.payload)}).addCase(re.fulfilled,(t,r)=>{let n=r.payload.response.facets;Go(t,n,Ep)}).addCase(kt,(t,r)=>{De(t,r.payload)})});function Ip(e){return{...Yo,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Ep(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var es=["author","language","urihash","objecttype","collection","source","permanentid"],jp=[...es,"date","filetype","parents"],fv=[...jp,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Rp=()=>({fieldsToInclude:es,fetchAllFields:!1,fieldsDescription:[]}),kp=new ne({each:$,required:!0}),ts=m("fields/registerFieldsToInclude",e=>E(e,kp)),rs=m("fields/fetchall/enable"),ns=m("fields/fetchall/disable"),as=Z("fields/description",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return ie(u)?n(u.error):u.success.fields}),Ap={collectionField:new V({emptyAllowed:!1,required:!1}),parentField:new V({emptyAllowed:!1,required:!1}),childField:new V({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new z({min:0,required:!1})},is=m("folding/register",e=>E(e,Ap)),jn=Z("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await fn(a),o=await n.search({...i,q:Fp(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}=${e}`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100});return ie(o)?r(o.error):{collectionId:e,results:o.success.results,rootResult:a.folding.collections[e].result}});function Fp(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var pv=Ie("analytics/folding/showLess",Ce.Custom,e=>e.logShowLessFoldedResults()),os=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}}),hv=M(Rp(),e=>e.addCase(ts,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(rs,t=>{t.fetchAllFields=!0}).addCase(ns,t=>{t.fetchAllFields=!1}).addCase(as.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(is,(t,{payload:r})=>{var n,a,i;let o=os().fields;t.fieldsToInclude.push((n=r.collectionField)!=null?n:o.collection,(a=r.parentField)!=null?a:o.parent,(i=r.childField)!=null?i:o.child)}));function Pp(e,t){return e.raw[t.collection]}function Rn(e,t){return e.raw[t.parent]}function Pt(e,t){let r=e.raw[t.child];return wd(r)?r[0]:r}function Tp(e,t){return(e||t)!==void 0&&e===t}function ss(e,t,r,n=[]){let a=Pt(e,r);return a?n.indexOf(a)!==-1?[]:t.filter(i=>{let o=Pt(i,r)===Pt(e,r);return Rn(i,r)===a&&!o}).map(i=>({result:i,children:ss(i,t,r,[...n,a])})):[]}function $p(e,t){return e.find(r=>{let n=Rn(r,t)===void 0,a=Tp(Rn(r,t),Pt(r,t));return n||a})}function us(e){return e.parentResult?us(e.parentResult):e}function Vp(e,t,r){var n;let a=Od(e),i=(n=r??$p(a,t))!=null?n:us(e);return{result:i,children:ss(i,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function kn(e,t,r){let n={};return e.forEach(a=>{let i=Pp(a,t);!i||!Pt(a,t)&&!a.parentResult||(n[i]=Vp(a,t,r))}),n}function ls(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var gv=M(os(),e=>e.addCase(re.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?kn(r.response.results,t.fields):{}}).addCase(rr.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...kn(r.response.results,t.fields)}:{}}).addCase(is,(t,{payload:r})=>{var n,a,i,o;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(n=r.collectionField)!=null?n:t.fields.collection,parent:(a=r.parentField)!=null?a:t.fields.parent,child:(i=r.childField)!=null?i:t.fields.child},filterFieldRange:(o=r.numberOfFoldedResults)!=null?o:t.filterFieldRange}}).addCase(jn.pending,(t,{meta:r})=>{let n=r.arg;ls(t,n).isLoadingMoreResults=!0}).addCase(jn.rejected,(t,{meta:r})=>{let n=r.arg;ls(t,n).isLoadingMoreResults=!1}).addCase(jn.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:a}})=>{let i=kn(n,t.fields,a);if(!i||!i[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=i[r],t.collections[r].moreResultsAvailable=!1})),Mp=fe(tu());function Lp(e,t,r=(n,a)=>n===a){return e.length===t.length&&e.findIndex((n,a)=>!r(t[a],n))===-1}var yv=(0,Mp.createCustomEqual)(e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length!==r.length?!1:t.every(n=>r.findIndex(a=>e(n,a))!==-1):e(t,r)),_p=M(Vd(),e=>{e.addCase(Be,(t,r)=>Dp(t,r.payload)?void 0:r.payload)}),Dp=(e,t)=>Np(e.context,t.context)&&Up(e.dictionaryFieldContext,t.dictionaryFieldContext)&&Wp(e.advancedSearchQueries,t.advancedSearchQueries)&&zp(e.tabSet,t.tabSet)&&Hp(e.staticFilterSet,t.staticFilterSet)&&An(e.facetSet,t.facetSet)&&An(e.dateFacetSet,t.dateFacetSet)&&An(e.numericFacetSet,t.numericFacetSet)&&Qp(e.categoryFacetSet,t.categoryFacetSet)&&Bp(e.pagination,t.pagination)&&Yp(e.query,t.query)&&Jp(e,t)&&Kp(e.pipeline,t.pipeline)&&Zp(e.searchHub,t.searchHub)&&Gp(e.facetOrder,t.facetOrder)&&Xp(e.debug,t.debug),Np=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Up=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),zp=(e,t)=>{let r=cs(e),n=cs(t);return(r==null?void 0:r.id)===(n==null?void 0:n.id)},cs=e=>Object.values(e).find(t=>t.isActive),Hp=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=ds(e[r]),i=ds(n);if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},ds=e=>e.values.filter(t=>t.state!=="idle"),An=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=e[r].currentValues.filter(o=>o.state==="selected"),i=n.currentValues.filter(o=>o.state==="selected");if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},Qp=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let i=qt((r=e[n])==null?void 0:r.request.currentValues).parents.map(({value:s})=>s),o=qt(a==null?void 0:a.request.currentValues).parents.map(({value:s})=>s);if(JSON.stringify(i)!==JSON.stringify(o))return!1}return!0},Bp=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,Yp=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Wp=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Jp=(e,t)=>e.sortCriteria===t.sortCriteria,Kp=(e,t)=>e===t,Zp=(e,t)=>e===t,Gp=(e,t)=>Lp(e,t),Xp=(e,t)=>e===t,eh=1,th=5e3,vv=M(ln(),e=>{e.addCase(ef,(t,r)=>{let n=Fn(t),a=r.payload;t.defaultNumberOfResults=t.numberOfResults=a,t.firstResult=Tt(n,a)}).addCase(tf,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(rf,(t,r)=>{let n=r.payload;t.firstResult=Tt(n,t.numberOfResults)}).addCase(eo,(t,r)=>{let n=r.payload;t.firstResult=Tt(n,t.numberOfResults)}).addCase(af,t=>{let r=Fn(t),n=Math.max(r-1,eh);t.firstResult=Tt(n,t.numberOfResults)}).addCase(nf,t=>{let r=Fn(t),n=rh(t),a=Math.min(r+1,n);t.firstResult=Tt(a,t.numberOfResults)}).addCase(de.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(ve,(t,r)=>{var n,a;t.firstResult=(n=r.payload.firstResult)!=null?n:t.firstResult,t.numberOfResults=(a=r.payload.numberOfResults)!=null?a:t.defaultNumberOfResults}).addCase(re.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(Ft.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.pagination.totalCount}).addCase(nr,t=>{Oe(t)}).addCase(fo,t=>{Oe(t)}).addCase(lo,t=>{Oe(t)}).addCase(uo,t=>{Oe(t)}).addCase(Ro,t=>{Oe(t)}).addCase(Co,t=>{Oe(t)}).addCase(Io,t=>{Oe(t)}).addCase(Et,t=>{Oe(t)}).addCase(Ze,t=>{Oe(t)}).addCase(Oo,t=>{Oe(t)}).addCase(Eo,t=>{Oe(t)}).addCase(Uo,t=>{Oe(t)})});function Oe(e){e.firstResult=ln().firstResult}function Fn(e){let{firstResult:t,numberOfResults:r}=e;return nh(t,r)}function rh(e){let{totalCountFiltered:t,numberOfResults:r}=e;return ah(t,r)}function Tt(e,t){return(e-1)*t}function nh(e,t){return e/t+1}function ah(e,t){let r=Math.min(e,th);return Math.ceil(r/t)}var Pn=m("pipeline/set",e=>E(e,new V({required:!0,emptyAllowed:!0}))),ih=M(on(),e=>{e.addCase(Pn,(t,r)=>r.payload).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.pipeline)!=null?a:t}).addCase(Bt,(t,r)=>r.payload.pipeline||t)}),mv=M(mi(),e=>{e.addCase(pp,(t,r)=>{t.url=r.payload.url}).addCase(hp,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(Ft.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Ft.fulfilled,(t,r)=>{t.error=null,t.facets=r.payload.response.facets,t.products=r.payload.response.products,t.responseId=r.payload.response.responseId,t.isLoading=!1}).addCase(Ft.pending,t=>{t.isLoading=!0})}),oh=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"],fs=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}),sh=class extends Yr{constructor(e){super(e);this.state=e,this.initialState=fs()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.state.productRecommendations)==null?void 0:e.searchUid)||this.initialState.searchUid}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var e;return((e=this.state.productRecommendations)==null?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return((e=this.state.productRecommendations)==null?void 0:e.recommendations.length)||this.initialState.recommendations.length}},uh=Ie("analytics/productrecommendations/load",Ce.Search,e=>e.logRecommendationInterfaceLoad(),e=>new sh(e));function lh(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var ch=m("productrecommendations/setId",e=>E(e,{id:$})),dh=m("productrecommendations/setSku",e=>E(e,{skus:new ne({required:!0,min:1,each:ae})})),fh=m("productrecommendations/setBrand",e=>E(e,{brand:new V({required:!0,emptyAllowed:!0})})),ph=m("productrecommendations/setCategory",e=>E(e,{category:new V({required:!0,emptyAllowed:!0})})),hh=m("productrecommendations/setAdditionalFields",e=>E(e,{additionalFields:new ne({required:!0,each:ae})})),gh=m("productrecommendations/setMaxNumberOfRecommendations",e=>E(e,{number:new z({required:!0,max:50,min:1})})),or=Z("productrecommendations/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=new Date().getTime(),o=await n.productRecommendations(await yh(a)),s=new Date().getTime()-i;if(ie(o))return r(o.error);let u=a.productRecommendations.additionalFields||[];return{recommendations:o.success.results.map(l=>ps(l,{additionalFields:u})),analyticsAction:uh(),searchUid:o.success.searchUid,duration:s}}),ps=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,a=e.raw.ec_in_stock,i={permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:a===void 0?void 0:a.toLowerCase()==="yes"||a.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce((o,s)=>({...o,[s]:e.raw[s]}),{}),childResults:[],totalNumberOfChildResults:0};return lh(e)&&(i.childResults=e.childResults.map(o=>ps(o,{additionalFields:t})),i.totalNumberOfChildResults=e.totalNumberOfChildResults),i},yh=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Re()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...oh,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?lt.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}}),bv=M(fs(),e=>{e.addCase(ch,(t,r)=>{t.id=r.payload.id}).addCase(dh,(t,r)=>{t.skus=r.payload.skus}).addCase(fh,(t,r)=>{t.filter.brand=r.payload.brand}).addCase(ph,(t,r)=>{t.filter.category=r.payload.category}).addCase(gh,(t,r)=>{t.maxNumberOfRecommendations=r.payload.number}).addCase(hh,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(or.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(or.fulfilled,(t,r)=>{t.error=null,t.searchUid=r.payload.searchUid,t.recommendations=r.payload.recommendations,t.isLoading=!1}).addCase(or.pending,t=>{t.isLoading=!0})}),hs={id:$,query:se},vh=m("querySet/register",e=>E(e,hs)),gs=m("querySet/update",e=>E(e,hs)),$t={id:$},mh=m("querySuggest/register",e=>E(e,{...$t,q:new V,count:new z({min:0})})),bh=m("querySuggest/unregister",e=>E(e,$t)),Tn=m("querySuggest/selectSuggestion",e=>E(e,{...$t,expression:se})),wh=m("querySuggest/clear",e=>E(e,$t)),$n=Z("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,$t);let i=e.id,o=await Sh(i,t()),s=await n.querySuggest(o);return ie(s)?r(s.error):{id:i,q:o.q,...s.success}}),Sh=async(e,t)=>{var r;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:(r=t.querySet)==null?void 0:r[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?lt.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await Re(),...t.configuration.analytics.enabled&&await Gt(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}},wv=M(Vi(),e=>{e.addCase(vh,(t,r)=>{let{id:n,query:a}=r.payload;n in t||(t[n]=a)}).addCase(gs,(t,r)=>{let{id:n,query:a}=r.payload;Vn(t,n,a)}).addCase(Tn,(t,r)=>{let{id:n,expression:a}=r.payload;Vn(t,n,a)}).addCase(re.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;ys(t,n)}).addCase(ve,(t,r)=>{X(r.payload.q)||ys(t,r.payload.q)}).addCase(de.fulfilled,(t,r)=>{if(r.payload)for(let[n,a]of Object.entries(r.payload.querySet))Vn(t,n,a)})});function ys(e,t){Object.keys(e).forEach(r=>e[r]=t)}var Vn=(e,t,r)=>{t in e&&(e[t]=r)},Ch=()=>({}),Sv=M(Ch(),e=>e.addCase(mh,(t,r)=>{let n=r.payload.id;n in t||(t[n]=Oh(r.payload))}).addCase(bh,(t,r)=>{delete t[r.payload.id]}).addCase($n.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.currentRequestId=r.meta.requestId,n.isLoading=!0)}).addCase($n.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:a}=r.payload;a&&n.partialQueries.push(a.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase($n.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.error=r.payload||null,n.isLoading=!1)}).addCase(gs,(t,r)=>{let{id:n,query:a}=r.payload;n in t&&vs(t[n],a)}).addCase(wh,(t,r)=>{let n=t[r.payload.id];!n||(n.responseId="",n.completions=[],n.partialQueries=[])}).addCase(Tn,(t,r)=>{let{id:n,expression:a}=r.payload,i=t[n];!i||(i.q=a)}).addCase(ve,(t,r)=>{X(r.payload.q)||ms(t,r.payload.q)}).addCase(re.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;ms(t,n)}));function vs(e,t){e.q=t}function ms(e,t){Object.keys(e).forEach(r=>vs(e[r],t))}function Oh(e){return{id:"",completions:[],responseId:"",count:5,q:"",currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var Cv=M(ut(),e=>e.addCase(un,(t,r)=>({...t,...r.payload})).addCase(rn,(t,r)=>{t.q=r.payload}).addCase(Tn,(t,r)=>{t.q=r.payload.expression}).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.query)!=null?a:t}).addCase(ve,(t,r)=>{var n,a;t.q=(n=r.payload.q)!=null?n:t.q,t.enableQuerySyntax=(a=r.payload.enableQuerySyntax)!=null?a:t.enableQuerySyntax})),qh=()=>new B({values:{documentId:new B({values:{contentIdKey:$,contentIdValue:$}})},options:{required:!0}}),xh=()=>new B({values:{questionAnswerId:$},options:{required:!0}});function bs(e){return!("contentIdKey"in e||"contentIdValue"in e)}function ws(e){return bs(e)?E(e,xh()):E(e,qh())}var Ih=m("smartSnippet/expand"),Eh=m("smartSnippet/collapse"),jh=m("smartSnippet/like"),Rh=m("smartSnippet/dislike"),kh=m("smartSnippet/feedbackModal/open"),Ah=m("smartSnippet/feedbackModal/close"),Fh=m("smartSnippet/related/expand",e=>ws(e)),Ph=m("smartSnippet/related/collapse",e=>ws(e)),Ss=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]}),Cs=(e,t)=>e.findIndex(r=>bs(t)?r.questionAnswerId===t.questionAnswerId:r.contentIdValue===t.contentIdValue&&r.contentIdKey===t.contentIdKey);function Os({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Cd(JSON.stringify({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n}))}function Th(e,t){let r=Os(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Ov=M(Ss(),e=>e.addCase(Ih,t=>{t.expanded=!0}).addCase(Eh,t=>{t.expanded=!1}).addCase(jh,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Rh,t=>{t.liked=!1,t.disliked=!0}).addCase(kh,t=>{t.feedbackModalOpen=!0}).addCase(Ah,t=>{t.feedbackModalOpen=!1}).addCase(re.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((i,o)=>Th(i,t.relatedQuestions[o])),a=Os(r.payload.response.questionAnswer);return t.questionAnswerId===a?{...t,relatedQuestions:n}:{...Ss(),relatedQuestions:n,questionAnswerId:a}}).addCase(Fh,(t,r)=>{let n=Cs(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(Ph,(t,r)=>{let n=Cs(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)})),$h={results:new ne({required:!0,each:new B({values:sn})}),maxLength:new z({required:!0,min:1,default:10})},Vh=m("recentResults/registerRecentResults",e=>E(e,$h)),Mh=m("recentResults/pushRecentResult",e=>(Ai(e),{payload:e})),Lh=m("recentResults/clearRecentResults");function _h(){return{results:[],maxLength:10}}var qv=M(_h(),e=>{e.addCase(Vh,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Lh,t=>{t.results=[]}).addCase(Mh,(t,r)=>{let n=r.payload;t.results=t.results.filter(i=>i.uniqueId!==n.uniqueId);let a=t.results.slice(0,t.maxLength-1);t.results=[n,...a]})}),Dh={queries:new ne({required:!0,each:new V({emptyAllowed:!1})}),maxLength:new z({required:!0,min:1,default:10})},Nh=m("recentQueries/registerRecentQueries",e=>E(e,Dh)),Uh=m("recentQueries/clearRecentQueries");function zh(){return{queries:[],maxLength:10}}var xv=M(zh(),e=>{e.addCase(Nh,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Uh,t=>{t.queries=[]}).addCase(re.fulfilled,(t,r)=>{let n=r.payload.queryExecuted.trim(),a=r.payload.response.results;if(!n.length||!a.length)return;t.queries=t.queries.filter(o=>o!==n);let i=t.queries.slice(0,t.maxLength-1);t.queries=[n,...i]})}),sr=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""}),qs=class extends Yr{constructor(e){super(e);this.state=e}getPipeline(){return this.state.pipeline||"default"}getSearchEventRequestPayload(){return{queryText:ut().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.state.recommendation)==null?void 0:e.searchUid)||sr().searchUid}get responseTime(){var e;return((e=this.state.recommendation)==null?void 0:e.duration)||sr().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.recommendation)==null?void 0:e.recommendations.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.recommendation)==null?void 0:e.recommendations.length)||sr().recommendations.length}},Hh=Ie("analytics/recommendation/update",Ce.Search,e=>e.logRecommendationInterfaceLoad(),e=>new qs(e)),Qh=e=>Ie("analytics/recommendation/open",Ce.Click,(t,r)=>(Ai(e),t.logRecommendationOpen(Id(e,r),jd(e))),t=>new qs(t))(),Mn=m("recommendation/set",e=>E(e,{id:$})),ft=Z("recommendation/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=new Date().getTime(),o=await n.recommendations(await Bh(a)),s=new Date().getTime()-i;return ie(o)?r(o.error):{recommendations:o.success.results,analyticsAction:Hh(),duration:s,searchUid:o.success.searchUid}}),Bh=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?lt.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await Re()},...e.configuration.analytics.enabled&&await Gt(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}),Yh=M(sr(),e=>{e.addCase(Mn,(t,r)=>{t.id=r.payload.id}).addCase(ft.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(ft.fulfilled,(t,r)=>{t.error=null,t.recommendations=r.payload.recommendations,t.duration=r.payload.duration,t.isLoading=!1,t.searchUid=r.payload.searchUid}).addCase(ft.pending,t=>{t.isLoading=!0})});function Wh(e){return e.type==="redirect"}var xs=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(Wh);return e.length?e[0].content:null}},Jh=Ie("analytics/redirection",Ce.Search,(e,t)=>{var r;if((r=t.redirection)==null?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})}),Kh=m("standaloneSearchBox/register",e=>E(e,{id:$,redirectionUrl:$})),Zh=m("standaloneSearchBox/reset",e=>E(e,{id:$})),Gh=m("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>E(e,{id:$})),Xh=m("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Ln=Z("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new V({emptyAllowed:!1})});let o=await Is(r()),s=await a.plan(o);if(ie(s))return n(s.error);let{redirectionUrl:u}=new xs(s.success);return u&&t(eg(u)),u||""}),eg=e=>Ie("analytics/standaloneSearchBox/redirect",Ce.Custom,t=>t.logTriggerRedirect({redirectedTo:e}))(),Is=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Re()},...e.configuration.analytics.enabled&&await Gt(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}),tg=Z("redirection/check",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{defaultRedirectionUrl:new V({emptyAllowed:!1})});let o=await a.plan(await Is(r()));if(ie(o))return n(o.error);let s=new xs(o.success).redirectionUrl;return s&&t(Jh()),s||e.defaultRedirectionUrl}),rg=()=>({redirectTo:null}),Iv=M(rg(),e=>e.addCase(tg.fulfilled,(t,r)=>{t.redirectTo=r.payload}));async function ng(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=((r=e.query)==null?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await Re()},q:s,...t,requestedOutputSize:t.requestedOutputSize||0,...n.authenticationProviders.length&&{authentication:n.authenticationProviders.join(",")}}}var Es=Z("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await ng(a,e),o=await t.apiClient.html(i);return ie(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}});function ag(){return{uniqueId:"",content:"",isLoading:!1}}var Ev=M(ag(),e=>{e.addCase(Es.pending,t=>{t.isLoading=!0}).addCase(Es.fulfilled,(t,r)=>{let{content:n,uniqueId:a}=r.payload;t.content=n,t.uniqueId=a,t.isLoading=!1})}),ur=m("searchHub/set",e=>E(e,new V({required:!0,emptyAllowed:!0}))),ig=M(Br(),e=>{e.addCase(ur,(t,r)=>r.payload).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.searchHub)!=null?a:t}).addCase(Bt,(t,r)=>r.payload.searchHub||t)});function _n(e,t){var r;let n=(r=t.payload)!=null?r:null;n&&(e.response=Ye().response,e.results=[]),e.error=n,e.isLoading=!1}function Dn(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Nn(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var jv=M(Ye(),e=>{e.addCase(re.rejected,(t,r)=>_n(t,r)),e.addCase(rr.rejected,(t,r)=>_n(t,r)),e.addCase(yn.rejected,(t,r)=>_n(t,r)),e.addCase(re.fulfilled,(t,r)=>{Dn(t,r),t.results=r.payload.response.results,t.searchResponseId=r.payload.response.searchUid}),e.addCase(rr.fulfilled,(t,r)=>{Dn(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(yn.fulfilled,(t,r)=>{Dn(t,r),t.results=r.payload.response.results}),e.addCase(vn.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(re.pending,Nn),e.addCase(rr.pending,Nn),e.addCase(yn.pending,Nn)}),js={by:new nt({enum:cn,required:!0})},og=m("sortCriteria/register",e=>Rs(e)),sg=m("sortCriteria/update",e=>Rs(e)),Rs=e=>Ta(e)?(e.forEach(t=>E(t,js)),{payload:e}):E(e,js),Rv=M(Li(),e=>{e.addCase(og,(t,r)=>Xt(r.payload)).addCase(sg,(t,r)=>Xt(r.payload)).addCase(de.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.sortCriteria)!=null?a:t}).addCase(ve,(t,r)=>{var n;return(n=r.payload.sortCriteria)!=null?n:t})});function ug(){return{}}var kv=M(ug(),e=>e.addCase(Kh,(t,r)=>{let{id:n,redirectionUrl:a}=r.payload;n in t||(t[n]=ks(a))}).addCase(Zh,(t,r)=>{let{id:n}=r.payload,a=t[n];if(a){t[n]=ks(a.defaultRedirectionUrl);return}}).addCase(Ln.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!0)}).addCase(Ln.fulfilled,(t,r)=>{let n=r.payload,a=t[r.meta.arg.id];!a||(a.redirectTo=n||a.defaultRedirectionUrl,a.isLoading=!1)}).addCase(Ln.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!1)}).addCase(Gh,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="searchFromLink")}).addCase(Xh,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function ks(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var lg=()=>({redirectTo:"",query:"",execute:{functionName:"",params:[]},executions:[],notification:"",notifications:[]}),Av=M(lg(),e=>e.addCase(re.fulfilled,(t,r)=>{var n,a,i,o;let s=[],u=[],l=[],f=[];r.payload.response.triggers.forEach(d=>{switch(d.type){case"redirect":s.push(d.content);break;case"query":u.push(d.content);break;case"execute":l.push({functionName:d.content.name,params:d.content.params});break;case"notify":f.push(d.content);break}}),t.redirectTo=(n=s[0])!=null?n:"",t.query=(a=u[0])!=null?a:"",t.execute=(i=l[0])!=null?i:{functionName:"",params:[]},t.executions=l,t.notification=(o=f[0])!=null?o:"",t.notifications=f})),As=e=>({past:[],present:e,future:[]}),cg=e=>{let{past:t,present:r,future:n}=e;if(!r||t.length===0)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}},dg=e=>{let{past:t,present:r,future:n}=e;if(!r||n.length===0)return e;let a=n[0],i=n.slice(1);return{past:[...t,r],present:a,future:i}},fg=e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:i}=r,o=n(i,t);return i?i===o?r:{past:[...a,i],present:o,future:[]}:As(o)},pg=e=>{let{actionTypes:t,reducer:r}=e,n=As();return(a=n,i)=>{switch(i.type){case t.undo:return cg(a);case t.redo:return dg(a);case t.snapshot:return fg({state:a,reducer:r,action:i});default:return a}}};function hg(){return fp()}var gg={by:new nt({enum:At,required:!0})},yg=m("sort/register",e=>Fs(e)),vg=m("sort/update",e=>Fs(e)),Fs=e=>E(e,gg),Fv=M(hg(),e=>{e.addCase(yg,(t,r)=>r.payload).addCase(vg,(t,r)=>r.payload)}),Un=m("dictionaryFieldContext/set",e=>{let t=new B({options:{required:!0}}),r=E(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new ne({each:se}),i=E(n,a).error;return i?{payload:e,error:i}:{payload:e}}),zn=m("dictionaryFieldContext/add",e=>{let t=new B({options:{required:!0},values:{field:se,key:se}});return E(e,t)}),Hn=m("dictionaryFieldContext/remove",e=>E(e,se)),Pv=M(Fi(),e=>{e.addCase(Un,(t,r)=>{t.contextValues=r.payload}).addCase(zn,(t,r)=>{let{field:n,key:a}=r.payload;t.contextValues[n]=a}).addCase(Hn,(t,r)=>{delete t.contextValues[r.payload]}).addCase(de.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})}),Tv=M(Di(),e=>{e.addCase(tl,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]={...n,isActive:!1})}).addCase(Ua,(t,r)=>{let n=r.payload;Ps(t,n)}).addCase(ve,(t,r)=>{let n=r.payload.tab||"";Ps(t,n)})});function Ps(e,t){t in e&&Object.keys(e).forEach(r=>{e[r].isActive=r===t})}var Qn=$,Ts=new B({options:{required:!0},values:{caption:se,expression:se,state:new V({constrainTo:["idle","selected"]})}}),mg=new ne({required:!0,each:Ts}),bg=m("staticFilter/register",e=>E(e,{id:Qn,values:mg})),wg=m("staticFilter/toggleSelect",e=>E(e,{id:Qn,value:Ts})),Sg=m("staticFilter/deselectAllFilterValues",e=>E(e,Qn)),$v=M(_i(),e=>e.addCase(bg,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]=n)}).addCase(wg,(t,r)=>{let{id:n,value:a}=r.payload,i=t[n];if(!i)return;let o=i.values.find(u=>u.caption===a.caption);if(!o)return;let s=o.state==="selected";o.state=s?"idle":"selected"}).addCase(Sg,(t,r)=>{let n=r.payload,a=t[n];!a||a.values.forEach(i=>i.state="idle")}).addCase(Ze,t=>{Object.values(t).forEach(r=>{r.values.forEach(n=>n.state="idle")})}).addCase(ve,(t,r)=>{let n=r.payload.sf||{};Object.entries(t).forEach(([a,i])=>{let o=n[a]||[];i.values.forEach(s=>{s.state=o.includes(s.caption)?"selected":"idle"})})})),Cg=m("caseAssistConfiguration/set",e=>E(e,{caseAssistId:$,locale:ae})),Og=()=>({caseAssistId:"",locale:"en-US"}),Vv=M(Og(),e=>{e.addCase(Cg,(t,r)=>{t.caseAssistId=r.payload.caseAssistId,t.locale=r.payload.locale})}),qg=m("caseAssist/caseInput/update",e=>E(e,{fieldName:$,fieldValue:se})),xg=()=>({}),Mv=M(xg(),e=>{e.addCase(qg,(t,r)=>{t[r.payload.fieldName]={value:r.payload.fieldValue}})}),$s=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>({...t,[r]:e[r].value}),{}),Ig=m("caseAssist/caseField/register",e=>E(e,{fieldName:$,fieldValue:se})),Eg=m("caseAssist/caseField/update",e=>E(e,{fieldName:$,fieldValue:se})),Bn=Z("caseAssist/classifications/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getCaseClassifications(await jg(a));return ie(i)?r(i.error):{response:i.success}}),jg=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Re()},fields:e.caseInput,context:e.caseField?$s(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),Rg=()=>({status:{loading:!1,error:null,lastResponseId:""},fields:{}}),Lv=M(Rg(),e=>{e.addCase(Ig,(t,r)=>{let{fieldName:n,fieldValue:a}=r.payload;t.fields[n]={value:a,suggestions:[]}}).addCase(Eg,(t,r)=>{let{fieldName:n,fieldValue:a}=r.payload;t.fields[n].value=a}).addCase(Bn.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(Bn.fulfilled,(t,r)=>{let n={value:"",suggestions:[]};Object.entries(r.payload.response.fields).forEach(([a,i])=>{t.fields[a]||(t.fields[a]={...n}),t.fields[a].suggestions=i.predictions}),t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Bn.pending,t=>{t.status.loading=!0})}),Yn=Z("caseAssist/documentSuggestions/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getDocumentSuggestions(await kg(a));return ie(i)?r(i.error):{response:i.success}}),kg=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Re()},fields:e.caseInput,context:e.caseField?$s(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),Ag=()=>({status:{loading:!1,error:null,lastResponseId:""},documents:[]}),_v=M(Ag(),e=>{e.addCase(Yn.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(Yn.fulfilled,(t,r)=>{t.documents=r.payload.response.documents,t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Yn.pending,t=>{t.status.loading=!0})}),Fg=m("excerptLength/set",e=>E(e,new z({min:0,required:!0})));function Pg(){return{length:void 0}}var Dv=M(Pg(),e=>{e.addCase(Fg,(t,r)=>{t.length=r.payload})}),Nv=M($i(),e=>{e.addCase(pf,(t,r)=>{let{id:n}=r.payload;t[n]||(t[n]={q:"",cache:{}})}),e.addCase(ro,(t,r)=>{let{q:n,id:a}=r.payload;!n||(t[a].q=n)}),e.addCase(hf,(t,r)=>{let{id:n}=r.payload;Object.entries(t[n].cache).forEach(([a,i])=>{Td(i)&&delete t[n].cache[a]})}),e.addCase(mn.pending,(t,r)=>{if(!lr(t,r.meta))Tg(t,r.meta);else{let n=lr(t,r.meta);n.isLoading=!0,n.error=null}}),e.addCase(mn.fulfilled,(t,r)=>{let{results:n}=r.payload,{cacheTimeout:a}=r.meta.arg,i=lr(t,r.meta);i.isLoading=!1,i.error=null,i.results=n,i.expiresAt=a?a+Date.now():0}),e.addCase(mn.rejected,(t,r)=>{let n=lr(t,r.meta);n.error=r.error||null,n.isLoading=!1})}),Tg=(e,t)=>{let{q:r,id:n}=t.arg;e[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0}},lr=(e,t)=>{let{q:r,id:n}=t.arg;return e[n].cache[r]||null},$g=m("insightConfiguration/set",e=>E(e,{insightId:$})),Vg=()=>({insightId:""}),Uv=M(Vg(),e=>{e.addCase($g,(t,r)=>{t.insightId=r.payload.insightId})}),Wn=Z("insight/interface/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await a.getInterface(Mg(i));return ie(o)?n(o.error):(r(ur(o.success.searchHub)),{response:o.success})}),Mg=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,insightId:e.insightConfiguration.insightId}),Lg=()=>({loading:!1,config:void 0}),zv=M(Lg(),e=>{e.addCase(Wn.pending,t=>{t.loading=!0,t.error=void 0}).addCase(Wn.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Wn.fulfilled,(t,r)=>{t.loading=!1,t.error=void 0;let{searchHub:n,...a}=r.payload.response;t.config=a})}),_g=()=>({caseContext:{}}),Dg=m("insight/caseContext/set",e=>{let t=new B({options:{required:!0}}),r=E(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new ne({each:se}),i=E(n,a).error;return i?{payload:e,error:i}:{payload:e}}),Hv=M(_g(),e=>{e.addCase(Dg,(t,r)=>{t.caseContext=r.payload})}),Jn=Jc,Ng=null,Vs=null,Ms=null,Ug=null,Ls=ih,_s=ig,Ds=Zc,zg=Gc,Qv=pg({actionTypes:{redo:_a.type,undo:La.type,snapshot:Be.type},reducer:_p}),Kn=Yh;function Hg(e,t,r){var n,a,i;t===void 0&&(t=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,s=(a=r.callback)!=null&&a,u=r.maxWait,l=Date.now(),f=[];function d(){if(u!==void 0){var b=Date.now()-l;if(b+t>=u)return u-b}return t}var p=function(){var b=[].slice.call(arguments),w=this;return new Promise(function(c,h){var y=o&&i===void 0;if(i!==void 0&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,l=Date.now(),!o){var T=e.apply(w,b);s&&s(T),f.forEach(function(L){return(0,L.resolve)(T)}),f=[]}},d()),y){var R=e.apply(w,b);return s&&s(R),c(R)}f.push({resolve:c,reject:h})})};return p.cancel=function(b){i!==void 0&&clearTimeout(i),f.forEach(function(w){return(0,w.reject)(b)}),f=[]},p}function Qg(e,t){let r=0,n=Hg(()=>r=0,500);return a=>i=>async o=>{if(typeof o!="function")return i(o);let s=await i(o);if(!Bg(s))return s;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let u=await Yg(t);a.dispatch(Qt({accessToken:u})),a.dispatch(o)}}function Bg(e){var t;return((t=e.error)==null?void 0:t.name)===new za().name}async function Yg(e){try{return await e()}catch{return""}}var Wg=e=>t=>r=>{var n,a;let i=(n=r.payload)==null?void 0:n.analyticsAction;i!==void 0&&((a=r.payload)==null||delete a.analyticsAction);let o=t(r);return r.type===re.fulfilled.type&&i===void 0&&console.error("No analytics action associated with search:",r),r.type===ft.fulfilled&&i===void 0&&console.error("No analytics action associated with recommendation:",r),r.type===or.fulfilled&&i===void 0&&console.error("No analytics action associated with product recommendation:",r),i!==void 0&&e.dispatch(i),o},Jg={configuration:Jn,version:zg};function Kg(e,t){let r=Zg(e,t),{accessToken:n,organizationId:a,platformUrl:i,analytics:o}=e.configuration;if(r.dispatch(Qt({accessToken:n,organizationId:a,platformUrl:i})),o){let{analyticsClientMiddleware:s,...u}=o;r.dispatch(Tr(u))}return r}function Zg(e,t){let{reducers:r}=e,n=Ku({...Jg,...r});e.crossReducer&&n.addCrossReducer(e.crossReducer);let a=t.logger,i=Gg(e,t,n);return{addReducers(o){n.containsAll(o)||(n.add(o),i.replaceReducer(n.combinedReducer))},dispatch:i.dispatch,subscribe:i.subscribe,enableAnalytics(){i.dispatch(Vr())},disableAnalytics(){i.dispatch($r())},get state(){return i.getState()},logger:a,store:i}}function Gg(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=Xg(e,t.logger);return Xu({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}function Xg(e,t){let{renewAccessToken:r}=e.configuration;return[Qg(t,r),Zu(t),Wg].concat(e.middlewares||[])}var ey={organizationId:$,accessToken:$,platformUrl:new V({required:!1,emptyAllowed:!1}),name:new V({required:!1,emptyAllowed:!1}),analytics:new B({options:{required:!1},values:{enabled:new W({required:!1}),originContext:new V({required:!1}),originLevel2:new V({required:!1}),originLevel3:new V({required:!1})}})};function ty(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var ry=new bt({...ey,pipeline:ae,searchHub:ae,locale:ae,timezone:ae});function Bv(){return{...ty(),searchHub:"default"}}var ny=fe(nu());function ay(e){return(0,ny.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter},browser:{transmit:{send:(e==null?void 0:e.browserPostLogHook)||(()=>{})}}})}var Ns=e=>e;function iy(e,t){let r=oy(e),n=Qe,a=sy(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:a,logger:t}}function oy(e){let{analytics:t}=e,r=(n,a)=>a;return(t==null?void 0:t.analyticsClientMiddleware)||r}function sy(e){return e.preprocessRequest||Ns}var uy=e=>e,ly=e=>e,cy=e=>e,dy={debug:Ds,pipeline:Ls,searchHub:_s,recommendation:Kn};function fy(e){let t=ay(e.loggerOptions);py(e.configuration,t);let r=hy(e.configuration,t),n={...iy(e.configuration,t),apiClient:r,searchAPIClient:r},a={...e,reducers:dy},i=Kg(a,n),{pipeline:o,searchHub:s,timezone:u,locale:l}=e.configuration;return i.dispatch(Bt({timezone:u,locale:l})),X(o)||i.dispatch(Pn(o)),X(s)||i.dispatch(ur(s)),{...i,get state(){return i.state}}}function py(e,t){try{ry.validate(e)}catch(r){throw t.error(r,"Recommendation engine configuration error"),r}}function hy(e,t){return new hd({logger:t,preprocessRequest:e.preprocessRequest||Ns,postprocessSearchResponseMiddleware:uy,postprocessFacetSearchResponseMiddleware:ly,postprocessQuerySuggestResponseMiddleware:cy})}function Yv(e){return e.addReducers({configuration:Jn}),{disableAnalytics:$r,enableAnalytics:Vr,setOriginLevel2:Va,setOriginLevel3:Ma,updateAnalyticsConfiguration:Tr,updateBasicConfiguration:Qt}}function Wv(e){return e.addReducers({advancedSearchQueries:Ng}),{updateAdvancedSearchQueries:Da,registerAdvancedSearchQueries:Na}}function Jv(e){return e.addReducers({context:Vs}),{addContext:en,removeContext:tn,setContext:Xr}}function Kv(e){return e.addReducers({dictionaryFieldContext:Ms}),{addContext:zn,removeContext:Hn,setContext:Un}}function Zv(e){return e.addReducers({fields:Ug}),{registerFieldsToInclude:ts,enableFetchAllFields:rs,disableFetchAllFields:ns,fetchFieldsDescription:as}}function Gv(e){return e.addReducers({pipeline:Ls}),{setPipeline:Pn}}function Xv(e){return e.addReducers({searchHub:_s}),{setSearchHub:ur}}function em(e){return e.addReducers({debug:Ds}),{disableDebug:Ei,enableDebug:Ii}}function tm(e){return e.addReducers({recommendation:Kn}),{getRecommendations:ft,setRecommendationId:Mn}}function rm(e){return e.addReducers({}),{logRecommendationOpen:Qh}}function Zn(e){let t,r=new Map,n=()=>r.size===0,a=i=>{try{let o=JSON.stringify(i),s=t!==o;return t=o,s}catch(o){return console.warn('Could not detect if state has changed, check the controller "get state method"',o),!0}};return{subscribe(i){i();let o=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{a(this.state)&&r.forEach(u=>u())})),r.set(o,i),()=>{r.delete(o),n()&&s&&s()}},get state(){return{}}}}var gy=new bt({id:new V({emptyAllowed:!0,required:!1,default:""})});function yy(e,t={}){if(!vy(e))throw Mr;let r=Zn(e),{dispatch:n}=e,a=()=>e.state,i=Wu(e,gy,t.options,"buildRecommendationList");return i.id!==""&&n(Mn({id:i.id})),{...r,refresh(){n(ft())},get state(){let o=a();return{recommendations:o.recommendation.recommendations,error:o.recommendation.error,isLoading:o.recommendation.isLoading}}}}function vy(e){return e.addReducers({recommendation:Kn,configuration:Jn}),!0}function my(e){if(!by(e))throw Mr;let t=Zn(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().context.contextValues}},set(a){r(Xr(a))},add(a,i){r(en({contextKey:a,contextValue:i}))},remove(a){r(tn(a))}}}function by(e){return e.addReducers({context:Vs}),!0}function nm(e){return my(e)}function am(e){if(!wy(e))throw Mr;let t=Zn(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().dictionaryFieldContext.contextValues}},set(a){r(Un(a))},add(a,i){r(zn({field:a,key:i}))},remove(a){r(Hn(a))}}}function wy(e){return e.addReducers({dictionaryFieldContext:Ms}),!0}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** *//**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */},92703:function(Ge,pt,xe){"use strict";var Vt=xe(50414);function ze(){}function Mt(){}Mt.resetWarningCache=ze,Ge.exports=function(){function le(ta,G,ra,fe,na,cr){if(cr!==Vt){var Lt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Lt.name="Invariant Violation",Lt}}le.isRequired=le;function Ae(){return le}var ht={array:le,bigint:le,bool:le,func:le,number:le,object:le,string:le,symbol:le,any:le,arrayOf:Ae,element:le,elementType:le,instanceOf:Ae,node:le,objectOf:Ae,oneOf:Ae,oneOfType:Ae,shape:Ae,exact:Ae,checkPropTypes:Mt,resetWarningCache:ze};return ht.PropTypes=ht,ht}},45697:function(Ge,pt,xe){if(!1)var Vt,ze;else Ge.exports=xe(92703)()},50414:function(Ge){"use strict";var pt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Ge.exports=pt}}]);

//# sourceMappingURL=4828.bundle.js.map