"use strict";(self.webpackChunk_verndale_toolkit=self.webpackChunk_verndale_toolkit||[]).push([[7318],{7318:function(Pg,In,Re){Re.r(In),Re.d(In,{atomic_frequently_bought_together:function(){return Fg}});var It=Re(51860);/**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ko=Object.create,Zt=Object.defineProperty,Zo=Object.getOwnPropertyDescriptor,Go=Object.getOwnPropertyNames,Xo=Object.getPrototypeOf,es=Object.prototype.hasOwnProperty,ts=e=>Zt(e,"__esModule",{value:!0}),X=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),rs=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Go(t))!es.call(e,n)&&n!=="default"&&Zt(e,n,{get:()=>t[n],enumerable:!(r=Zo(t,n))||r.enumerable});return e},ge=e=>rs(ts(Zt(e!=null?Ko(Xo(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),ns=X((e,t)=>{t.exports=fetch}),as=X(e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(a){var i=t(t({},r),a);return i.numOfAttempts<1&&(i.numOfAttempts=1),i}e.getSanitizedOptions=n}),is=X(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){var n=Math.random()*r;return Math.round(n)}e.fullJitter=t}),os=X(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){return r}e.noJitter=t}),ss=X(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=is(),r=os();function n(a){switch(a.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}),En=X(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=ss(),r=function(){function n(a){this.options=a,this.attempt=0}return n.prototype.apply=function(){var a=this;return new Promise(function(i){return setTimeout(i,a.jitteredDelay)})},n.prototype.setAttemptNumber=function(a){this.attempt=a},Object.defineProperty(n.prototype,"jitteredDelay",{get:function(){var a=t.JitterFactory(this.options);return a(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){var a=this.options.startingDelay,i=this.options.timeMultiple,o=this.numOfDelayedAttempts,s=a*Math.pow(i,o);return Math.min(s,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),n}();e.Delay=r}),us=X(e=>{var t=e&&e.__extends||function(){var o=function(s,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var f in d)d.hasOwnProperty(f)&&(l[f]=d[f])},o(s,u)};return function(s,u){o(s,u);function l(){this.constructor=s}s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),r=e&&e.__awaiter||function(o,s,u,l){function d(f){return f instanceof u?f:new u(function(p){p(f)})}return new(u||(u=Promise))(function(f,p){function S(h){try{c(l.next(h))}catch(y){p(y)}}function x(h){try{c(l.throw(h))}catch(y){p(y)}}function c(h){h.done?f(h.value):d(h.value).then(S,x)}c((l=l.apply(o,s||[])).next())})},n=e&&e.__generator||function(o,s){var u={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,p;return p={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function S(c){return function(h){return x([c,h])}}function x(c){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,d&&(f=c[0]&2?d.return:c[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,c[1])).done)return f;switch(d=0,f&&(c=[c[0]&2,f.value]),c[0]){case 0:case 1:f=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,d=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(f=u.trys,!(f=f.length>0&&f[f.length-1])&&(c[0]===6||c[0]===2)){u=0;continue}if(c[0]===3&&(!f||c[1]>f[0]&&c[1]<f[3])){u.label=c[1];break}if(c[0]===6&&u.label<f[1]){u.label=f[1],f=c;break}if(f&&u.label<f[2]){u.label=f[2],u.ops.push(c);break}f[2]&&u.ops.pop(),u.trys.pop();continue}c=s.call(o,u)}catch(h){c=[6,h],d=0}finally{l=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=En(),i=function(o){t(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return s.prototype.apply=function(){return r(this,void 0,void 0,function(){return n(this,function(u){return[2,this.isFirstAttempt?!0:o.prototype.apply.call(this)]})})},Object.defineProperty(s.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),s}(a.Delay);e.SkipFirstDelay=i}),ls=X(e=>{var t=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var l in u)u.hasOwnProperty(l)&&(s[l]=u[l])},a(i,o)};return function(i,o){a(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=En(),n=function(a){t(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i}(r.Delay);e.AlwaysDelay=n}),cs=X(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=us(),r=ls();function n(i,o){var s=a(i);return s.setAttemptNumber(o),s}e.DelayFactory=n;function a(i){return i.delayFirstAttempt?new r.AlwaysDelay(i):new t.SkipFirstDelay(i)}}),ds=X(e=>{var t=e&&e.__awaiter||function(s,u,l,d){function f(p){return p instanceof l?p:new l(function(S){S(p)})}return new(l||(l=Promise))(function(p,S){function x(y){try{h(d.next(y))}catch(R){S(R)}}function c(y){try{h(d.throw(y))}catch(R){S(R)}}function h(y){y.done?p(y.value):f(y.value).then(x,c)}h((d=d.apply(s,u||[])).next())})},r=e&&e.__generator||function(s,u){var l={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},d,f,p,S;return S={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function x(h){return function(y){return c([h,y])}}function c(h){if(d)throw new TypeError("Generator is already executing.");for(;l;)try{if(d=1,f&&(p=h[0]&2?f.return:h[0]?f.throw||((p=f.return)&&p.call(f),0):f.next)&&!(p=p.call(f,h[1])).done)return p;switch(f=0,p&&(h=[h[0]&2,p.value]),h[0]){case 0:case 1:p=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,f=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(p=l.trys,!(p=p.length>0&&p[p.length-1])&&(h[0]===6||h[0]===2)){l=0;continue}if(h[0]===3&&(!p||h[1]>p[0]&&h[1]<p[3])){l.label=h[1];break}if(h[0]===6&&l.label<p[1]){l.label=p[1],p=h;break}if(p&&l.label<p[2]){l.label=p[2],l.ops.push(h);break}p[2]&&l.ops.pop(),l.trys.pop();continue}h=u.call(s,l)}catch(y){h=[6,y],f=0}finally{d=p=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=as(),a=cs();function i(s,u){return u===void 0&&(u={}),t(this,void 0,void 0,function(){var l,d;return r(this,function(f){switch(f.label){case 0:return l=n.getSanitizedOptions(u),d=new o(s,l),[4,d.execute()];case 1:return[2,f.sent()]}})})}e.backOff=i;var o=function(){function s(u,l){this.request=u,this.options=l,this.attemptNumber=0}return s.prototype.execute=function(){return t(this,void 0,void 0,function(){var u,l;return r(this,function(d){switch(d.label){case 0:if(this.attemptLimitReached)return[3,7];d.label=1;case 1:return d.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return d.sent(),[4,this.request()];case 3:return[2,d.sent()];case 4:return u=d.sent(),this.attemptNumber++,[4,this.options.retry(u,this.attemptNumber)];case 5:if(l=d.sent(),!l||this.attemptLimitReached)throw u;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(s.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),s.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){var u;return r(this,function(l){switch(l.label){case 0:return u=a.DelayFactory(this.options,this.attemptNumber),[4,u.apply()];case 1:return l.sent(),[2]}})})},s}()}),fs=X((e,t)=>{var r=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports=r.AbortController,t.exports.default=r.AbortController}),st=X((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&Re.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=n()})(e,function(){var r=1e3,n=6e4,a=36e5,i="millisecond",o="second",s="minute",u="hour",l="day",d="week",f="month",p="quarter",S="year",x="date",c="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},T=function(q,v,w){var b=String(q);return!b||b.length>=v?q:""+Array(v+1-b.length).join(w)+q},N={s:T,z:function(q){var v=-q.utcOffset(),w=Math.abs(v),b=Math.floor(w/60),C=w%60;return(v<=0?"+":"-")+T(b,2,"0")+":"+T(C,2,"0")},m:function q(v,w){if(v.date()<w.date())return-q(w,v);var b=12*(w.year()-v.year())+(w.month()-v.month()),C=v.clone().add(b,f),k=w-C<0,P=v.clone().add(b+(k?-1:1),f);return+(-(b+(w-C)/(k?C-P:P-C))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:f,y:S,w:d,d:l,D:x,h:u,m:s,s:o,ms:i,Q:p}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},L="en",B={};B[L]=R;var Q=function(q){return q instanceof A},O=function q(v,w,b){var C;if(!v)return L;if(typeof v=="string"){var k=v.toLowerCase();B[k]&&(C=k),w&&(B[k]=w,C=k);var P=v.split("-");if(!C&&P.length>1)return q(P[0])}else{var z=v.name;B[z]=v,C=z}return!b&&C&&(L=C),C||!b&&L},j=function(q,v){if(Q(q))return q.clone();var w=typeof v=="object"?v:{};return w.date=q,w.args=arguments,new A(w)},g=N;g.l=O,g.i=Q,g.w=function(q,v){return j(q,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var A=function(){function q(w){this.$L=O(w.locale,null,!0),this.parse(w)}var v=q.prototype;return v.parse=function(w){this.$d=function(b){var C=b.date,k=b.utc;if(C===null)return new Date(NaN);if(g.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var P=C.match(h);if(P){var z=P[2]-1||0,H=(P[7]||"0").substring(0,3);return k?new Date(Date.UTC(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,H)):new Date(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,H)}}return new Date(C)}(w),this.$x=w.x||{},this.init()},v.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},v.$utils=function(){return g},v.isValid=function(){return this.$d.toString()!==c},v.isSame=function(w,b){var C=j(w);return this.startOf(b)<=C&&C<=this.endOf(b)},v.isAfter=function(w,b){return j(w)<this.startOf(b)},v.isBefore=function(w,b){return this.endOf(b)<j(w)},v.$g=function(w,b,C){return g.u(w)?this[b]:this.set(C,w)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(w,b){var C=this,k=!!g.u(b)||b,P=g.p(w),z=function(ie,se){var we=g.w(C.$u?Date.UTC(C.$y,se,ie):new Date(C.$y,se,ie),C);return k?we:we.endOf(l)},H=function(ie,se){return g.w(C.toDate()[ie].apply(C.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(se)),C)},D=this.$W,G=this.$M,me=this.$D,he="set"+(this.$u?"UTC":"");switch(P){case S:return k?z(1,0):z(31,11);case f:return k?z(1,G):z(0,G+1);case d:var je=this.$locale().weekStart||0,qe=(D<je?D+7:D)-je;return z(k?me-qe:me+(6-qe),G);case l:case x:return H(he+"Hours",0);case u:return H(he+"Minutes",1);case s:return H(he+"Seconds",2);case o:return H(he+"Milliseconds",3);default:return this.clone()}},v.endOf=function(w){return this.startOf(w,!1)},v.$set=function(w,b){var C,k=g.p(w),P="set"+(this.$u?"UTC":""),z=(C={},C[l]=P+"Date",C[x]=P+"Date",C[f]=P+"Month",C[S]=P+"FullYear",C[u]=P+"Hours",C[s]=P+"Minutes",C[o]=P+"Seconds",C[i]=P+"Milliseconds",C)[k],H=k===l?this.$D+(b-this.$W):b;if(k===f||k===S){var D=this.clone().set(x,1);D.$d[z](H),D.init(),this.$d=D.set(x,Math.min(this.$D,D.daysInMonth())).$d}else z&&this.$d[z](H);return this.init(),this},v.set=function(w,b){return this.clone().$set(w,b)},v.get=function(w){return this[g.p(w)]()},v.add=function(w,b){var C,k=this;w=Number(w);var P=g.p(b),z=function(G){var me=j(k);return g.w(me.date(me.date()+Math.round(G*w)),k)};if(P===f)return this.set(f,this.$M+w);if(P===S)return this.set(S,this.$y+w);if(P===l)return z(1);if(P===d)return z(7);var H=(C={},C[s]=n,C[u]=a,C[o]=r,C)[P]||1,D=this.$d.getTime()+w*H;return g.w(D,this)},v.subtract=function(w,b){return this.add(-1*w,b)},v.format=function(w){var b=this,C=this.$locale();if(!this.isValid())return C.invalidDate||c;var k=w||"YYYY-MM-DDTHH:mm:ssZ",P=g.z(this),z=this.$H,H=this.$m,D=this.$M,G=C.weekdays,me=C.months,he=function(se,we,Ve,De){return se&&(se[we]||se(b,k))||Ve[we].slice(0,De)},je=function(se){return g.s(z%12||12,se,"0")},qe=C.meridiem||function(se,we,Ve){var De=se<12?"AM":"PM";return Ve?De.toLowerCase():De},ie={YY:String(this.$y).slice(-2),YYYY:this.$y,M:D+1,MM:g.s(D+1,2,"0"),MMM:he(C.monthsShort,D,me,3),MMMM:he(me,D),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:he(C.weekdaysMin,this.$W,G,2),ddd:he(C.weekdaysShort,this.$W,G,3),dddd:G[this.$W],H:String(z),HH:g.s(z,2,"0"),h:je(1),hh:je(2),a:qe(z,H,!0),A:qe(z,H,!1),m:String(H),mm:g.s(H,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:P};return k.replace(y,function(se,we){return we||ie[se]||P.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(w,b,C){var k,P=g.p(b),z=j(w),H=(z.utcOffset()-this.utcOffset())*n,D=this-z,G=g.m(this,z);return G=(k={},k[S]=G/12,k[f]=G,k[p]=G/3,k[d]=(D-H)/6048e5,k[l]=(D-H)/864e5,k[u]=D/a,k[s]=D/n,k[o]=D/r,k)[P]||D,C?G:g.a(G)},v.daysInMonth=function(){return this.endOf(f).$D},v.$locale=function(){return B[this.$L]},v.locale=function(w,b){if(!w)return this.$L;var C=this.clone(),k=O(w,b,!0);return k&&(C.$L=k),C},v.clone=function(){return g.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},q}(),F=A.prototype;return j.prototype=F,[["$ms",i],["$s",o],["$m",s],["$H",u],["$W",l],["$M",f],["$y",S],["$D",x]].forEach(function(q){F[q[1]]=function(v){return this.$g(v,q[0],q[1])}}),j.extend=function(q,v){return q.$i||(q(v,A,j),q.$i=!0),j},j.locale=O,j.isDayjs=Q,j.unix=function(q){return j(1e3*q)},j.en=B[L],j.Ls=B,j.p={},j})}),ps=X((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&Re.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_utc=n()})(e,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,s){var u=o.prototype;s.utc=function(c){var h={date:c,utc:!0,args:arguments};return new o(h)},u.utc=function(c){var h=s(this.toDate(),{locale:this.$L,utc:!0});return c?h.add(this.utcOffset(),r):h},u.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(c){c.utc&&(this.$u=!0),this.$utils().u(c.$offset)||(this.$offset=c.$offset),l.call(this,c)};var d=u.init;u.init=function(){if(this.$u){var c=this.$d;this.$y=c.getUTCFullYear(),this.$M=c.getUTCMonth(),this.$D=c.getUTCDate(),this.$W=c.getUTCDay(),this.$H=c.getUTCHours(),this.$m=c.getUTCMinutes(),this.$s=c.getUTCSeconds(),this.$ms=c.getUTCMilliseconds()}else d.call(this)};var f=u.utcOffset;u.utcOffset=function(c,h){var y=this.$utils().u;if(y(c))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof c=="string"&&(c=function(L){L===void 0&&(L="");var B=L.match(n);if(!B)return null;var Q=(""+B[0]).match(a)||["-",0,0],O=Q[0],j=60*+Q[1]+ +Q[2];return j===0?0:O==="+"?j:-j}(c),c===null))return this;var R=Math.abs(c)<=16?60*c:c,T=this;if(h)return T.$offset=R,T.$u=c===0,T;if(c!==0){var N=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(T=this.local().add(R+N,r)).$offset=R,T.$x.$localOffset=N}else T=this.utc();return T};var p=u.format;u.format=function(c){var h=c||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,h)},u.valueOf=function(){var c=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*c},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var S=u.toDate;u.toDate=function(c){return c==="s"&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():S.call(this)};var x=u.diff;u.diff=function(c,h,y){if(c&&this.$u===c.$u)return x.call(this,c,h,y);var R=this.local(),T=s(c).local();return x.call(R,T,h,y)}}})}),hs=X((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&Re.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},n={};return function(a,i,o){var s,u=function(p,S,x){x===void 0&&(x={});var c=new Date(p),h=function(y,R){R===void 0&&(R={});var T=R.timeZoneName||"short",N=y+"|"+T,L=n[N];return L||(L=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:T}),n[N]=L),L}(S,x);return h.formatToParts(c)},l=function(p,S){for(var x=u(p,S),c=[],h=0;h<x.length;h+=1){var y=x[h],R=y.type,T=y.value,N=r[R];N>=0&&(c[N]=parseInt(T,10))}var L=c[3],B=L===24?0:L,Q=c[0]+"-"+c[1]+"-"+c[2]+" "+B+":"+c[4]+":"+c[5]+":000",O=+p;return(o.utc(Q).valueOf()-(O-=O%1e3))/6e4},d=i.prototype;d.tz=function(p,S){p===void 0&&(p=s);var x=this.utcOffset(),c=this.toDate(),h=c.toLocaleString("en-US",{timeZone:p}),y=Math.round((c-new Date(h))/1e3/60),R=o(h).$set("millisecond",this.$ms).utcOffset(15*-Math.round(c.getTimezoneOffset()/15)-y,!0);if(S){var T=R.utcOffset();R=R.add(x-T,"minute")}return R.$x.$timezone=p,R},d.offsetName=function(p){var S=this.$x.$timezone||o.tz.guess(),x=u(this.valueOf(),S,{timeZoneName:p}).find(function(c){return c.type.toLowerCase()==="timezonename"});return x&&x.value};var f=d.startOf;d.startOf=function(p,S){if(!this.$x||!this.$x.$timezone)return f.call(this,p,S);var x=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return f.call(x,p,S).tz(this.$x.$timezone,!0)},o.tz=function(p,S,x){var c=x&&S,h=x||S||s,y=l(+o(),h);if(typeof p!="string")return o(p).tz(h);var R=function(B,Q,O){var j=B-60*Q*1e3,g=l(j,O);if(Q===g)return[j,Q];var A=l(j-=60*(g-Q)*1e3,O);return g===A?[j,g]:[B-60*Math.min(g,A)*1e3,Math.max(g,A)]}(o.utc(p,c).valueOf(),y,h),T=R[0],N=R[1],L=o(T).utcOffset(N);return L.$x.$timezone=h,L},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(p){s=p}}})}),gs=X((e,t)=>{function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(i=`${i}`,i=i.replace(/[ \t\n\f\r]/g,""),i.length%4==0&&(i=i.replace(/==?$/,"")),i.length%4==1||/[^+/0-9A-Za-z]/.test(i))return null;let o="",s=0,u=0;for(let l=0;l<i.length;l++)s<<=6,s|=a(i[l]),u+=6,u===24&&(o+=String.fromCharCode((s&16711680)>>16),o+=String.fromCharCode((s&65280)>>8),o+=String.fromCharCode(s&255),s=u=0);return u===12?(s>>=4,o+=String.fromCharCode(s)):u===18&&(s>>=2,o+=String.fromCharCode((s&65280)>>8),o+=String.fromCharCode(s&255)),o}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(i){let o=n.indexOf(i);return o<0?void 0:o}t.exports=r}),ys=X((e,t)=>{function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let o;for(i=`${i}`,o=0;o<i.length;o++)if(i.charCodeAt(o)>255)return null;let s="";for(o=0;o<i.length;o+=3){let u=[void 0,void 0,void 0,void 0];u[0]=i.charCodeAt(o)>>2,u[1]=(i.charCodeAt(o)&3)<<4,i.length>o+1&&(u[1]|=i.charCodeAt(o+1)>>4,u[2]=(i.charCodeAt(o+1)&15)<<2),i.length>o+2&&(u[2]|=i.charCodeAt(o+2)>>6,u[3]=i.charCodeAt(o+2)&63);for(let l=0;l<u.length;l++)typeof u[l]=="undefined"?s+="=":s+=a(u[l])}return s}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(i){if(i>=0&&i<64)return n[i]}t.exports=r}),vs=X((e,t)=>{var r=gs(),n=ys();t.exports={atob:r,btoa:n}}),jn=X((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&Re.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,i=/\d\d?/,o=/\d*[^\s\d-_:/()]+/,s={},u=function(c){return(c=+c)+(c>68?1900:2e3)},l=function(c){return function(h){this[c]=+h}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(c){(this.zone||(this.zone={})).offset=function(h){if(!h||h==="Z")return 0;var y=h.match(/([+-]|\d\d)/g),R=60*y[1]+(+y[2]||0);return R===0?0:y[0]==="+"?-R:R}(c)}],f=function(c){var h=s[c];return h&&(h.indexOf?h:h.s.concat(h.f))},p=function(c,h){var y,R=s.meridiem;if(R){for(var T=1;T<=24;T+=1)if(c.indexOf(R(T,0,h))>-1){y=T>12;break}}else y=c===(h?"pm":"PM");return y},S={A:[o,function(c){this.afternoon=p(c,!1)}],a:[o,function(c){this.afternoon=p(c,!0)}],S:[/\d/,function(c){this.milliseconds=100*+c}],SS:[a,function(c){this.milliseconds=10*+c}],SSS:[/\d{3}/,function(c){this.milliseconds=+c}],s:[i,l("seconds")],ss:[i,l("seconds")],m:[i,l("minutes")],mm:[i,l("minutes")],H:[i,l("hours")],h:[i,l("hours")],HH:[i,l("hours")],hh:[i,l("hours")],D:[i,l("day")],DD:[a,l("day")],Do:[o,function(c){var h=s.ordinal,y=c.match(/\d+/);if(this.day=y[0],h)for(var R=1;R<=31;R+=1)h(R).replace(/\[|\]/g,"")===c&&(this.day=R)}],M:[i,l("month")],MM:[a,l("month")],MMM:[o,function(c){var h=f("months"),y=(f("monthsShort")||h.map(function(R){return R.slice(0,3)})).indexOf(c)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(c){var h=f("months").indexOf(c)+1;if(h<1)throw new Error;this.month=h%12||h}],Y:[/[+-]?\d+/,l("year")],YY:[a,function(c){this.year=u(c)}],YYYY:[/\d{4}/,l("year")],Z:d,ZZ:d};function x(c){var h,y;h=c,y=s&&s.formats;for(var R=(c=h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,g,A){var F=A&&A.toUpperCase();return g||y[A]||r[A]||y[F].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(q,v,w){return v||w.slice(1)})})).match(n),T=R.length,N=0;N<T;N+=1){var L=R[N],B=S[L],Q=B&&B[0],O=B&&B[1];R[N]=O?{regex:Q,parser:O}:L.replace(/^\[|\]$/g,"")}return function(j){for(var g={},A=0,F=0;A<T;A+=1){var q=R[A];if(typeof q=="string")F+=q.length;else{var v=q.regex,w=q.parser,b=j.slice(F),C=v.exec(b)[0];w.call(g,C),j=j.replace(C,"")}}return function(k){var P=k.afternoon;if(P!==void 0){var z=k.hours;P?z<12&&(k.hours+=12):z===12&&(k.hours=0),delete k.afternoon}}(g),g}}return function(c,h,y){y.p.customParseFormat=!0,c&&c.parseTwoDigitYear&&(u=c.parseTwoDigitYear);var R=h.prototype,T=R.parse;R.parse=function(N){var L=N.date,B=N.utc,Q=N.args;this.$u=B;var O=Q[1];if(typeof O=="string"){var j=Q[2]===!0,g=Q[3]===!0,A=j||g,F=Q[2];g&&(F=Q[2]),s=this.$locale(),!j&&F&&(s=y.Ls[F]),this.$d=function(b,C,k){try{if(["x","X"].indexOf(C)>-1)return new Date((C==="X"?1e3:1)*b);var P=x(C)(b),z=P.year,H=P.month,D=P.day,G=P.hours,me=P.minutes,he=P.seconds,je=P.milliseconds,qe=P.zone,ie=new Date,se=D||(z||H?1:ie.getDate()),we=z||ie.getFullYear(),Ve=0;z&&!H||(Ve=H>0?H-1:ie.getMonth());var De=G||0,On=me||0,qn=he||0,xn=je||0;return qe?new Date(Date.UTC(we,Ve,se,De,On,qn,xn+60*qe.offset*1e3)):k?new Date(Date.UTC(we,Ve,se,De,On,qn,xn)):new Date(we,Ve,se,De,On,qn,xn)}catch{return new Date("")}}(L,O,B),this.init(),F&&F!==!0&&(this.$L=this.locale(F).$L),A&&L!=this.format(O)&&(this.$d=new Date("")),s={}}else if(O instanceof Array)for(var q=O.length,v=1;v<=q;v+=1){Q[1]=O[v-1];var w=y.apply(this,Q);if(w.isValid()){this.$d=w.$d,this.$L=w.$L,this.init();break}v===q&&(this.$d=new Date(""))}else T.call(this,N)}}})}),ms=X((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&Re.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,function(){var r="month",n="quarter";return function(a,i){var o=i.prototype;o.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var s=o.add;o.add=function(l,d){return l=Number(l),this.$utils().p(d)===n?this.add(3*l,r):s.bind(this)(l,d)};var u=o.startOf;o.startOf=function(l,d){var f=this.$utils(),p=!!f.u(d)||d;if(f.p(l)===n){var S=this.quarter()-1;return p?this.month(3*S).startOf(r).startOf("day"):this.month(3*S+2).endOf(r).endOf("day")}return u.bind(this)(l,d)}}})}),bs=X((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?n(e):typeof define=="function"&&Re.amdO?define(["exports"],n):(r=typeof globalThis!="undefined"?globalThis:r||self,n(r["fast-equals"]={}))})(e,function(r){var n=typeof WeakSet=="function",a=Object.keys;function i(g,A){return g===A||g!==g&&A!==A}function o(g){return g.constructor===Object||g.constructor==null}function s(g){return!!g&&typeof g.then=="function"}function u(g){return!!(g&&g.$$typeof)}function l(){var g=[];return{add:function(A){g.push(A)},has:function(A){return g.indexOf(A)!==-1}}}var d=function(g){return g?function(){return new WeakSet}:l}(n);function f(g){return function(A){var F=g||A;return function(q,v,w){w===void 0&&(w=d());var b=!!q&&typeof q=="object",C=!!v&&typeof v=="object";if(b||C){var k=b&&w.has(q),P=C&&w.has(v);if(k||P)return k&&P;b&&w.add(q),C&&w.add(v)}return F(q,v,w)}}}function p(g,A,F,q){var v=g.length;if(A.length!==v)return!1;for(;v-- >0;)if(!F(g[v],A[v],q))return!1;return!0}function S(g,A,F,q){var v=g.size===A.size;if(v&&g.size){var w={};g.forEach(function(b,C){if(v){var k=!1,P=0;A.forEach(function(z,H){!k&&!w[P]&&(k=F(C,H,q)&&F(b,z,q),k&&(w[P]=!0)),P++}),v=k}})}return v}var x="_owner",c=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function h(g,A,F,q){var v=a(g),w=v.length;if(a(A).length!==w)return!1;if(w)for(var b=void 0;w-- >0;){if(b=v[w],b===x){var C=u(g),k=u(A);if((C||k)&&C!==k)return!1}if(!c(A,b)||!F(g[b],A[b],q))return!1}return!0}function y(g,A){return g.source===A.source&&g.global===A.global&&g.ignoreCase===A.ignoreCase&&g.multiline===A.multiline&&g.unicode===A.unicode&&g.sticky===A.sticky&&g.lastIndex===A.lastIndex}function R(g,A,F,q){var v=g.size===A.size;if(v&&g.size){var w={};g.forEach(function(b){if(v){var C=!1,k=0;A.forEach(function(P){!C&&!w[k]&&(C=F(b,P,q),C&&(w[k]=!0)),k++}),v=C}})}return v}var T=typeof Map=="function",N=typeof Set=="function";function L(g){var A=typeof g=="function"?g(F):F;function F(q,v,w){if(q===v)return!0;if(q&&v&&typeof q=="object"&&typeof v=="object"){if(o(q)&&o(v))return h(q,v,A,w);var b=Array.isArray(q),C=Array.isArray(v);return b||C?b===C&&p(q,v,A,w):(b=q instanceof Date,C=v instanceof Date,b||C?b===C&&i(q.getTime(),v.getTime()):(b=q instanceof RegExp,C=v instanceof RegExp,b||C?b===C&&y(q,v):s(q)||s(v)?q===v:T&&(b=q instanceof Map,C=v instanceof Map,b||C)?b===C&&S(q,v,A,w):N&&(b=q instanceof Set,C=v instanceof Set,b||C)?b===C&&R(q,v,A,w):h(q,v,A,w)))}return q!==q&&v!==v}return F}var B=L(),Q=L(function(){return i}),O=L(f()),j=L(f(i));r.circularDeepEqual=O,r.circularShallowEqual=j,r.createCustomEqual=L,r.deepEqual=B,r.sameValueZeroEqual=i,r.shallowEqual=Q,Object.defineProperty(r,"__esModule",{value:!0})})}),ws=X((e,t)=>{function r(a){try{return JSON.stringify(a)}catch{return'"[Circular]"'}}t.exports=n;function n(a,i,o){var s=o&&o.stringify||r,u=1;if(typeof a=="object"&&a!==null){var l=i.length+u;if(l===1)return a;var d=new Array(l);d[0]=s(a);for(var f=1;f<l;f++)d[f]=s(i[f]);return d.join(" ")}if(typeof a!="string")return a;var p=i.length;if(p===0)return a;for(var S="",x=1-u,c=-1,h=a&&a.length||0,y=0;y<h;){if(a.charCodeAt(y)===37&&y+1<h){switch(c=c>-1?c:0,a.charCodeAt(y+1)){case 100:case 102:if(x>=p||i[x]==null)break;c<y&&(S+=a.slice(c,y)),S+=Number(i[x]),c=y+2,y++;break;case 105:if(x>=p||i[x]==null)break;c<y&&(S+=a.slice(c,y)),S+=Math.floor(Number(i[x])),c=y+2,y++;break;case 79:case 111:case 106:if(x>=p||i[x]===void 0)break;c<y&&(S+=a.slice(c,y));var R=typeof i[x];if(R==="string"){S+="'"+i[x]+"'",c=y+2,y++;break}if(R==="function"){S+=i[x].name||"<anonymous>",c=y+2,y++;break}S+=s(i[x]),c=y+2,y++;break;case 115:if(x>=p)break;c<y&&(S+=a.slice(c,y)),S+=String(i[x]),c=y+2,y++;break;case 37:c<y&&(S+=a.slice(c,y)),S+="%",c=y+2,y++,x--;break}++x}++y}return c===-1?a:(c<h&&(S+=a.slice(c)),S)}}),Ss=X((e,t)=>{var r=ws();t.exports=o;var n=Q().console||{},a={mapHttpRequest:h,mapHttpResponse:h,wrapRequestSerializer:y,wrapResponseSerializer:y,wrapErrorSerializer:y,req:h,res:h,err:x};function i(O,j){return Array.isArray(O)?O.filter(function(g){return g!=="!stdSerializers.err"}):O===!0?Object.keys(j):!1}function o(O){O=O||{},O.browser=O.browser||{};let j=O.browser.transmit;if(j&&typeof j.send!="function")throw Error("pino: transmit option must have a send function");let g=O.browser.write||n;O.browser.write&&(O.browser.asObject=!0);let A=O.serializers||{},F=i(O.browser.serialize,A),q=O.browser.serialize;Array.isArray(O.browser.serialize)&&O.browser.serialize.indexOf("!stdSerializers.err")>-1&&(q=!1);let v=["error","fatal","warn","info","debug","trace"];typeof g=="function"&&(g.error=g.fatal=g.warn=g.info=g.debug=g.trace=g),O.enabled===!1&&(O.level="silent");let w=O.level||"info",b=Object.create(g);b.log||(b.log=R),Object.defineProperty(b,"levelVal",{get:k}),Object.defineProperty(b,"level",{get:P,set:z});let C={transmit:j,serialize:F,asObject:O.browser.asObject,levels:v,timestamp:c(O)};b.levels=o.levels,b.level=w,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=R,b.serializers=A,b._serialize=F,b._stdErrSerialize=q,b.child=H,j&&(b._logEvent=S());function k(){return this.level==="silent"?1/0:this.levels.values[this.level]}function P(){return this._level}function z(D){if(D!=="silent"&&!this.levels.values[D])throw Error("unknown level "+D);this._level=D,s(C,b,"error","log"),s(C,b,"fatal","error"),s(C,b,"warn","error"),s(C,b,"info","log"),s(C,b,"debug","log"),s(C,b,"trace","log")}function H(D,G){if(!D)throw new Error("missing bindings for child Pino");G=G||{},F&&D.serializers&&(G.serializers=D.serializers);let me=G.serializers;if(F&&me){var he=Object.assign({},A,me),je=O.browser.serialize===!0?Object.keys(he):F;delete D.serializers,d([D],je,he,this._stdErrSerialize)}function qe(ie){this._childLevel=(ie._childLevel|0)+1,this.error=f(ie,D,"error"),this.fatal=f(ie,D,"fatal"),this.warn=f(ie,D,"warn"),this.info=f(ie,D,"info"),this.debug=f(ie,D,"debug"),this.trace=f(ie,D,"trace"),he&&(this.serializers=he,this._serialize=je),j&&(this._logEvent=S([].concat(ie._logEvent.bindings,D)))}return qe.prototype=this,new qe(this)}return b}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=a,o.stdTimeFunctions=Object.assign({},{nullTime:T,epochTime:N,unixTime:L,isoTime:B});function s(O,j,g,A){let F=Object.getPrototypeOf(j);j[g]=j.levelVal>j.levels.values[g]?R:F[g]?F[g]:n[g]||n[A]||R,u(O,j,g)}function u(O,j,g){!O.transmit&&j[g]===R||(j[g]=function(A){return function(){let F=O.timestamp(),q=new Array(arguments.length),v=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var w=0;w<q.length;w++)q[w]=arguments[w];if(O.serialize&&!O.asObject&&d(q,this._serialize,this.serializers,this._stdErrSerialize),O.asObject?A.call(v,l(this,g,q,F)):A.apply(v,q),O.transmit){let b=O.transmit.level||j.level,C=o.levels.values[b],k=o.levels.values[g];if(k<C)return;p(this,{ts:F,methodLevel:g,methodValue:k,transmitLevel:b,transmitValue:o.levels.values[O.transmit.level||j.level],send:O.transmit.send,val:j.levelVal},q)}}}(j[g]))}function l(O,j,g,A){O._serialize&&d(g,O._serialize,O.serializers,O._stdErrSerialize);let F=g.slice(),q=F[0],v={};A&&(v.time=A),v.level=o.levels.values[j];let w=(O._childLevel|0)+1;if(w<1&&(w=1),q!==null&&typeof q=="object"){for(;w--&&typeof F[0]=="object";)Object.assign(v,F.shift());q=F.length?r(F.shift(),F):void 0}else typeof q=="string"&&(q=r(F.shift(),F));return q!==void 0&&(v.msg=q),v}function d(O,j,g,A){for(let F in O)if(A&&O[F]instanceof Error)O[F]=o.stdSerializers.err(O[F]);else if(typeof O[F]=="object"&&!Array.isArray(O[F]))for(let q in O[F])j&&j.indexOf(q)>-1&&q in g&&(O[F][q]=g[q](O[F][q]))}function f(O,j,g){return function(){let A=new Array(1+arguments.length);A[0]=j;for(var F=1;F<A.length;F++)A[F]=arguments[F-1];return O[g].apply(this,A)}}function p(O,j,g){let A=j.send,F=j.ts,q=j.methodLevel,v=j.methodValue,w=j.val,b=O._logEvent.bindings;d(g,O._serialize||Object.keys(O.serializers),O.serializers,O._stdErrSerialize===void 0?!0:O._stdErrSerialize),O._logEvent.ts=F,O._logEvent.messages=g.filter(function(C){return b.indexOf(C)===-1}),O._logEvent.level.label=q,O._logEvent.level.value=v,A(q,O._logEvent,w),O._logEvent=S(b)}function S(O){return{ts:0,messages:[],bindings:O||[],level:{label:"",value:0}}}function x(O){let j={type:O.constructor.name,msg:O.message,stack:O.stack};for(let g in O)j[g]===void 0&&(j[g]=O[g]);return j}function c(O){return typeof O.timestamp=="function"?O.timestamp:O.timestamp===!1?T:N}function h(){return{}}function y(O){return O}function R(){}function T(){return!1}function N(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function B(){return new Date(Date.now()).toISOString()}function Q(){function O(j){return typeof j!="undefined"&&j}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return O(self)||O(window)||O(this)||{}}}}),Rn=e=>e,Cs=ge(ns()),Os=ge(ds()),An=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Gt=class extends Error{constructor(e,t){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};function qs(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}function xs(e){return typeof e!="object"||!e?!1:Object.values(e).every(Is)}function Is(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function kn(e){return e===429}var Ae=class{static async call(e){let t=js(e),{preprocessRequest:r,logger:n}=e,a={...t,...r?await r(t,"searchApiFetch"):{}};n.info(a,"Platform request");let{url:i,...o}=a,s=async()=>{let u=await(0,Cs.default)(i,o);if(kn(u.status))throw u;return u};try{let u=await(0,Os.backOff)(s,{retry:l=>{let d=l&&kn(l.status);return d&&n.info("Platform retrying request"),d}});if(u.status===419)throw n.info("Platform renewing token"),new An;if(u.status===404)throw new Gt(i,u.status);return n.info({response:u,requestInfo:a},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Gt(i):u}}};function Tn(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function Fn(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Tn("platform",e)}function Es(e){return Tn("analytics",e)}function js(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=e,s=e.method==="POST"||e.method==="PUT",u=Rs(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...e.headers},...s&&{body:u},signal:o}}function Rs(e,t){return t==="application/x-www-form-urlencoded"?xs(e)?qs(e):"":JSON.stringify(e)}function As(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function Xt(e){if(e instanceof Gt)return{error:As(e)};throw e}var ke=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${ks(e)}`}),ks=e=>`organizationId=${e.organizationId}`;function Pn(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function _e(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:Pn(),pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""}}function Ts(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new $n(r)}var $n=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},We=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let a in this.definition){let i=this.definition[a].validate(r[a]);i&&n.push(`${a}: ${i}`)}if(n.length)throw Ts(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},de=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&re(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ue(e){return e===void 0}function Fs(e){return e===null}function re(e){return ue(e)||Fs(e)}var U=class{constructor(e={}){this.config=e,this.value=new de(e)}validate(e){return this.value.validate(e)||(Ps(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Ps(e){return ue(e)||Mn(e)}function Mn(e){return typeof e=="number"&&!isNaN(e)}var Z=class{constructor(e={}){this.value=new de(e)}validate(e){return this.value.validate(e)||($s(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function $s(e){return ue(e)||Ln(e)}function Ln(e){return typeof e=="boolean"}var Ms=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,V=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new de(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(ue(e)?null:er(e)?!t&&!e.length?"value is an empty string.":r&&!Ms.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function er(e){return Object.prototype.toString.call(e)==="[object String]"}var Y=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(ue(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Vn(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&re(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);i!==null&&(t+=" "+i)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Vn(e){return e!==void 0&&typeof e=="object"}var oe=class{constructor(e={}){this.config=e,this.value=new de(this.config)}validate(e){if(!re(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(re(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&re(n)&&(r=`value is null or undefined: ${e.join(",")}`);let a=this.validatePrimitiveValue(n,this.config.each);a!==null&&(r+=" "+a)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Ln(e)||er(e)||Mn(e)||Vn(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Dn(e){return Array.isArray(e)}var _n=class{constructor(e){this.config=e,this.value=new de(e)}validate(e){let t=this.value.validate(e);return t!==null?t:ue(e)||Object.values(this.config.enum).find(r=>r===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};function Ls(e){return((e.headers.get("content-type")||"").split(";").find(t=>t.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var Vs=TextDecoder;function ze(e){let{url:t,accessToken:r,organizationId:n,...a}=e;return a}var Ne=e=>{let{response:t}=e;return t.body?Ds(e):_s(t)},Ds=e=>Ns(e)?Us(e):zs(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},_s=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function zs(e){return e.body.statusCode!==void 0}function Ns(e){return e.body.exception!==void 0}var Us=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Qs=async(e,t)=>{let r=await Ae.call({...ke(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:ze(e),...t});if(r instanceof Error)throw r;let n=Ls(r),a=await r.arrayBuffer(),i=new Vs(n).decode(a);return Bs(i)?{success:i}:{error:Ne({response:r,body:i})}};function Bs(e){return typeof e=="string"}var Hs=class{constructor(e){this.options=e,this.searchAbortController=null}async plan(e){let t=await Ae.call({...ke(e,"POST","application/json","/plan"),requestParams:ze(e),...this.options});if(t instanceof Error)return Xt(t);let r=await t.json();return Ws(r)?{success:r}:{error:Ne({response:t,body:r})}}async querySuggest(e){let t=await Ae.call({...ke(e,"POST","application/json","/querySuggest"),requestParams:ze(e),...this.options});if(t instanceof Error)return Xt(t);let r=await t.json(),n={response:t,body:r};return Ys(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:Ne(n)}}async search(e){var t;this.searchAbortController&&(this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();let r=await Ae.call({...ke(e,"POST","application/json",""),requestParams:ze(e),...this.options,signal:(t=this.searchAbortController)==null?void 0:t.signal});if(r instanceof Error)return Xt(r);this.searchAbortController=null;let n=await r.json(),a={response:r,body:n};return tr(n)?(a.body=Ks(n),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:Ne(a)}}async facetSearch(e){let t=await Ae.call({...ke(e,"POST","application/json","/facet"),requestParams:ze(e),...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await Ae.call({...ke(e,"POST","application/json",""),requestParams:ze(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return tr(r)?{success:r}:{error:Ne({response:t,body:r})}}async html(e){return Qs(e,this.options)}async productRecommendations(e){let t=await Ae.call({...ke(e,"POST","application/json",""),requestParams:ze(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return tr(r)?{success:r}:{error:Ne({response:t,body:r})}}async fieldDescriptions(e){let t=await Ae.call({...ke(e,"GET","application/json","/fields"),requestParams:{},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Js(r)?{success:r}:{error:Ne({response:t,body:r})}}getAbortControllerInstanceIfAvailable(){if(typeof window=="undefined"){let e=fs();return new e}return typeof AbortController=="undefined"?null:new AbortController}},ae=e=>e.error!==void 0;function Ys(e){return e.completions!==void 0}function Ws(e){return e.preprocessingOutput!==void 0}function Js(e){return e.fields!==void 0}function tr(e){return e.results!==void 0}function Ks(e){let t=Pn();return re(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}var Zs=e=>e,Gs=e=>e,Xs=e=>e;function Se(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Te(e){return!!e&&!!e[J]}function Fe(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===uu}(e)||Array.isArray(e)||!!e[Kn]||!!e.constructor[Kn]||rr(e)||nr(e))}function Ue(e,t,r){r===void 0&&(r=!1),Je(e)===0?(r?Object.keys:Ze)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Je(e){var t=e[J];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:rr(e)?2:nr(e)?3:0}function Ke(e,t){return Je(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function eu(e,t){return Je(e)===2?e.get(t):e[t]}function zn(e,t,r){var n=Je(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function Nn(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function rr(e){return ou&&e instanceof Map}function nr(e){return su&&e instanceof Set}function Qe(e){return e.o||e.t}function ar(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Zn(e);delete t[J];for(var r=Ze(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function ir(e,t){return t===void 0&&(t=!1),or(e)||Te(e)||!Fe(e)||(Je(e)>1&&(e.set=e.add=e.clear=e.delete=tu),Object.freeze(e),t&&Ue(e,function(r,n){return ir(n,!0)},!0)),e}function tu(){Se(2)}function or(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function xe(e){var t=gr[e];return t||Se(18,e),t}function ru(e,t){gr[e]||(gr[e]=t)}function sr(){return ut}function ur(e,t){t&&(xe("Patches"),e.u=[],e.s=[],e.v=t)}function Et(e){lr(e),e.p.forEach(nu),e.p=null}function lr(e){e===ut&&(ut=e.l)}function Un(e){return ut={p:[],l:ut,h:e,m:!0,_:0}}function nu(e){var t=e[J];t.i===0||t.i===1?t.j():t.O=!0}function cr(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||xe("ES5").S(t,e,n),n?(r[J].P&&(Et(t),Se(4)),Fe(e)&&(e=jt(t,e),t.l||Rt(t,e)),t.u&&xe("Patches").M(r[J].t,e,t.u,t.s)):e=jt(t,r,[]),Et(t),t.u&&t.v(t.u,t.s),e!==Jn?e:void 0}function jt(e,t,r){if(or(t))return t;var n=t[J];if(!n)return Ue(t,function(i,o){return Qn(e,n,t,i,o,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Rt(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=ar(n.k):n.o;Ue(n.i===3?new Set(a):a,function(i,o){return Qn(e,n,a,i,o,r)}),Rt(e,a,!1),r&&e.u&&xe("Patches").R(n,r,e.u,e.s)}return n.o}function Qn(e,t,r,n,a,i){if(Te(a)){var o=jt(e,a,i&&t&&t.i!==3&&!Ke(t.D,n)?i.concat(n):void 0);if(zn(r,n,o),!Te(o))return;e.m=!1}if(Fe(a)&&!or(a)){if(!e.h.F&&e._<1)return;jt(e,a),t&&t.A.l||Rt(e,a)}}function Rt(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&ir(t,r)}function dr(e,t){var r=e[J];return(r?Qe(r):e)[t]}function Bn(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Pe(e){e.P||(e.P=!0,e.l&&Pe(e.l))}function fr(e){e.o||(e.o=ar(e.t))}function pr(e,t,r){var n=rr(t)?xe("MapSet").N(t,r):nr(t)?xe("MapSet").T(t,r):e.g?function(a,i){var o=Array.isArray(a),s={i:o?1:0,A:i?i.A:sr(),P:!1,I:!1,D:{},l:i,t:a,k:null,o:null,j:null,C:!1},u=s,l=lt;o&&(u=[s],l=ct);var d=Proxy.revocable(u,l),f=d.revoke,p=d.proxy;return s.k=p,s.j=f,p}(t,r):xe("ES5").J(t,r);return(r?r.A:sr()).p.push(n),n}function au(e){return Te(e)||Se(22,e),function t(r){if(!Fe(r))return r;var n,a=r[J],i=Je(r);if(a){if(!a.P&&(a.i<4||!xe("ES5").K(a)))return a.t;a.I=!0,n=Hn(r,i),a.I=!1}else n=Hn(r,i);return Ue(n,function(o,s){a&&eu(a.t,o)===s||zn(n,o,t(s))}),i===3?new Set(n):n}(e)}function Hn(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ar(e)}function iu(){function e(i,o){var s=a[i];return s?s.enumerable=o:a[i]=s={configurable:!0,enumerable:o,get:function(){var u=this[J];return lt.get(u,i)},set:function(u){var l=this[J];lt.set(l,i,u)}},s}function t(i){for(var o=i.length-1;o>=0;o--){var s=i[o][J];if(!s.P)switch(s.i){case 5:n(s)&&Pe(s);break;case 4:r(s)&&Pe(s)}}}function r(i){for(var o=i.t,s=i.k,u=Ze(s),l=u.length-1;l>=0;l--){var d=u[l];if(d!==J){var f=o[d];if(f===void 0&&!Ke(o,d))return!0;var p=s[d],S=p&&p[J];if(S?S.t!==f:!Nn(p,f))return!0}}var x=!!o[J];return u.length!==Ze(o).length+(x?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var a={};ru("ES5",{J:function(i,o){var s=Array.isArray(i),u=function(d,f){if(d){for(var p=Array(f.length),S=0;S<f.length;S++)Object.defineProperty(p,""+S,e(S,!0));return p}var x=Zn(f);delete x[J];for(var c=Ze(x),h=0;h<c.length;h++){var y=c[h];x[y]=e(y,d||!!x[y].enumerable)}return Object.create(Object.getPrototypeOf(f),x)}(s,i),l={i:s?5:4,A:o?o.A:sr(),P:!1,I:!1,D:{},l:o,t:i,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,J,{value:l,writable:!0}),u},S:function(i,o,s){s?Te(o)&&o[J].A===i&&t(i.p):(i.u&&function u(l){if(l&&typeof l=="object"){var d=l[J];if(d){var f=d.t,p=d.k,S=d.D,x=d.i;if(x===4)Ue(p,function(T){T!==J&&(f[T]!==void 0||Ke(f,T)?S[T]||u(p[T]):(S[T]=!0,Pe(d)))}),Ue(f,function(T){p[T]!==void 0||Ke(p,T)||(S[T]=!1,Pe(d))});else if(x===5){if(n(d)&&(Pe(d),S.length=!0),p.length<f.length)for(var c=p.length;c<f.length;c++)S[c]=!1;else for(var h=f.length;h<p.length;h++)S[h]=!0;for(var y=Math.min(p.length,f.length),R=0;R<y;R++)p.hasOwnProperty(R)||(S[R]=!0),S[R]===void 0&&u(p[R])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var Yn,ut,hr=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",ou=typeof Map!="undefined",su=typeof Set!="undefined",Wn=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Jn=hr?Symbol.for("immer-nothing"):((Yn={})["immer-nothing"]=!0,Yn),Kn=hr?Symbol.for("immer-draftable"):"__$immer_draftable",J=hr?Symbol.for("immer-state"):"__$immer_state",uu=""+Object.prototype.constructor,Ze=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Zn=Object.getOwnPropertyDescriptors||function(e){var t={};return Ze(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},gr={},lt={get:function(e,t){if(t===J)return e;var r=Qe(e);if(!Ke(r,t))return function(a,i,o){var s,u=Bn(i,o);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!Fe(n)?n:n===dr(e.t,t)?(fr(e),e.o[t]=pr(e.A.h,n,e)):n},has:function(e,t){return t in Qe(e)},ownKeys:function(e){return Reflect.ownKeys(Qe(e))},set:function(e,t,r){var n=Bn(Qe(e),t);if(n==null?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=dr(Qe(e),t),i=a==null?void 0:a[J];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(Nn(r,a)&&(r!==void 0||Ke(e.t,t)))return!0;fr(e),Pe(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return dr(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,fr(e),Pe(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Qe(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Se(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Se(12)}},ct={};Ue(lt,function(e,t){ct[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ct.deleteProperty=function(e,t){return ct.set.call(this,e,t,void 0)},ct.set=function(e,t,r){return lt.set.call(this,e[0],t,r,e[0])};var lu=function(){function e(r){var n=this;this.g=Wn,this.F=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var s=i;i=a;var u=n;return function(c){var h=this;c===void 0&&(c=s);for(var y=arguments.length,R=Array(y>1?y-1:0),T=1;T<y;T++)R[T-1]=arguments[T];return u.produce(c,function(N){var L;return(L=i).call.apply(L,[h,N].concat(R))})}}var l;if(typeof i!="function"&&Se(6),o!==void 0&&typeof o!="function"&&Se(7),Fe(a)){var d=Un(n),f=pr(n,a,void 0),p=!0;try{l=i(f),p=!1}finally{p?Et(d):lr(d)}return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(c){return ur(d,o),cr(c,d)},function(c){throw Et(d),c}):(ur(d,o),cr(l,d))}if(!a||typeof a!="object"){if((l=i(a))===void 0&&(l=a),l===Jn&&(l=void 0),n.F&&ir(l,!0),o){var S=[],x=[];xe("Patches").M(a,l,S,x),o(S,x)}return l}Se(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(l){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return n.produceWithPatches(l,function(S){return a.apply(void 0,[S].concat(f))})};var o,s,u=n.produce(a,i,function(l,d){o=l,s=d});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(l){return[l,o,s]}):[u,o,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Fe(r)||Se(8),Te(r)&&(r=au(r));var n=Un(this),a=pr(this,r,void 0);return a[J].C=!0,lr(n),a},t.finishDraft=function(r,n){var a=r&&r[J],i=a.A;return ur(i,n),cr(void 0,i)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!Wn&&Se(20),this.g=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=xe("Patches").$;return Te(r)?o(r,n):this.produce(r,function(s){return o(s,n)})},e}(),ve=new lu,cu=ve.produce;ve.produceWithPatches.bind(ve),ve.setAutoFreeze.bind(ve),ve.setUseProxies.bind(ve),ve.applyPatches.bind(ve),ve.createDraft.bind(ve),ve.finishDraft.bind(ve);var yr=cu;function du(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gn(Object(r),!0).forEach(function(n){du(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ea=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),vr=function(){return Math.random().toString(36).substring(7).split("").join(".")},At={INIT:"@@redux/INIT"+vr(),REPLACE:"@@redux/REPLACE"+vr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+vr()}};function fu(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ta(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(fe(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(fe(1));return r(ta)(e,t)}if(typeof e!="function")throw new Error(fe(2));var a=e,i=t,o=[],s=o,u=!1;function l(){s===o&&(s=o.slice())}function d(){if(u)throw new Error(fe(3));return i}function f(c){if(typeof c!="function")throw new Error(fe(4));if(u)throw new Error(fe(5));var h=!0;return l(),s.push(c),function(){if(h){if(u)throw new Error(fe(6));h=!1,l();var y=s.indexOf(c);s.splice(y,1),o=null}}}function p(c){if(!fu(c))throw new Error(fe(7));if(typeof c.type=="undefined")throw new Error(fe(8));if(u)throw new Error(fe(9));try{u=!0,i=a(i,c)}finally{u=!1}for(var h=o=s,y=0;y<h.length;y++){var R=h[y];R()}return c}function S(c){if(typeof c!="function")throw new Error(fe(10));a=c,p({type:At.REPLACE})}function x(){var c,h=f;return c={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(fe(11));function R(){y.next&&y.next(d())}R();var T=h(R);return{unsubscribe:T}}},c[ea]=function(){return this},c}return p({type:At.INIT}),n={dispatch:p,subscribe:f,getState:d,replaceReducer:S},n[ea]=x,n}function pu(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:At.INIT});if(typeof n=="undefined")throw new Error(fe(12));if(typeof r(void 0,{type:At.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(fe(13))})}function ra(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),o;try{pu(r)}catch(s){o=s}return function(s,u){if(s===void 0&&(s={}),o)throw o;for(var l=!1,d={},f=0;f<i.length;f++){var p=i[f],S=r[p],x=s[p],c=S(x,u);if(typeof c=="undefined")throw new Error(fe(14));d[p]=c,l=l||c!==x}return l=l||i.length!==Object.keys(s).length,l?d:s}}function kt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function hu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(fe(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(u){return u(o)});return i=kt.apply(void 0,s)(a.dispatch),Xn(Xn({},a),{},{dispatch:i})}}}function na(e){var t=function(r){var n=r.dispatch,a=r.getState;return function(i){return function(o){return typeof o=="function"?o(n,a,e):i(o)}}};return t}var aa=na();aa.withExtraArgument=na;var ia=aa,gu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yu=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(d){return u([l,d])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(d){l=[6,d],a=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Tt=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},vu=Object.defineProperty,mu=Object.defineProperties,bu=Object.getOwnPropertyDescriptors,oa=Object.getOwnPropertySymbols,wu=Object.prototype.hasOwnProperty,Su=Object.prototype.propertyIsEnumerable,sa=function(e,t,r){return t in e?vu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Ge=function(e,t){for(var r in t||(t={}))wu.call(t,r)&&sa(e,r,t[r]);if(oa)for(var n=0,a=oa(t);n<a.length;n++){var r=a[n];Su.call(t,r)&&sa(e,r,t[r])}return e},mr=function(e,t){return mu(e,bu(t))},Cu=function(e,t,r){return new Promise(function(n,a){var i=function(u){try{s(r.next(u))}catch(l){a(l)}},o=function(u){try{s(r.throw(u))}catch(l){a(l)}},s=function(u){return u.done?n(u.value):Promise.resolve(u.value).then(i,o)};s((r=r.apply(e,t)).next())})},Ou=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?kt:kt.apply(null,arguments)};function qu(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var xu=function(e){gu(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Tt([void 0],r[0].concat(this)))):new(t.bind.apply(t,Tt([void 0],r.concat(this))))},t}(Array);function Iu(e){return typeof e=="boolean"}function Eu(){return function(e){return ju(e)}}function ju(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t,n=new xu;return r&&(Iu(r)?n.push(ia):n.push(ia.withExtraArgument(r.extraArgument))),n}var ua=!0;function Ru(e){var t=Eu(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,s=r.devTools,u=s===void 0?!0:s,l=r.preloadedState,d=l===void 0?void 0:l,f=r.enhancers,p=f===void 0?void 0:f,S;if(typeof a=="function")S=a;else if(qu(a))S=ra(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var x=o;if(typeof x=="function"&&(x=x(t),!ua))throw new Error("when using a middleware builder function, an array of middleware must be returned");var c=hu.apply(void 0,x),h=kt;u&&(h=Ou(Ge({trace:!ua},typeof u=="object"&&u)));var y=[c];Array.isArray(p)?y=Tt([c],p):typeof p=="function"&&(y=p(y));var R=h.apply(void 0,y);return ta(S,d,R)}function m(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Ge(Ge({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}function Au(e){var t={},r=[],n,a={addCase:function(i,o){var s=typeof i=="string"?i:i.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function ku(e){return typeof e=="function"}function M(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?Au(t):[t,r,n],i=a[0],o=a[1],s=a[2],u;if(ku(e))u=function(){return yr(e(),function(){})};else{var l=yr(e,function(){});u=function(){return l}}function d(f,p){f===void 0&&(f=u());var S=Tt([i[p.type]],o.filter(function(x){var c=x.matcher;return c(p)}).map(function(x){var c=x.reducer;return c}));return S.filter(function(x){return!!x}).length===0&&(S=[s]),S.reduce(function(x,c){if(c)if(Te(x)){var h=x,y=c(h,p);return typeof y=="undefined"?x:y}else{if(Fe(x))return yr(x,function(T){return c(T,p)});var y=c(x,p);if(typeof y=="undefined"){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return x},f)}return d.getInitialState=u,d}var Tu="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fu=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=Tu[Math.random()*64|0];return t},Pu=["name","message","stack","code"],br=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),la=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),$u=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=Pu;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}};function K(e,t,r){var n=m(e+"/fulfilled",function(u,l,d,f){return{payload:u,meta:mr(Ge({},f||{}),{arg:d,requestId:l,requestStatus:"fulfilled"})}}),a=m(e+"/pending",function(u,l,d){return{payload:void 0,meta:mr(Ge({},d||{}),{arg:l,requestId:u,requestStatus:"pending"})}}),i=m(e+"/rejected",function(u,l,d,f,p){return{payload:f,error:(r&&r.serializeError||$u)(u||"Rejected"),meta:mr(Ge({},p||{}),{arg:d,requestId:l,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),o=typeof AbortController!="undefined"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return u.prototype.abort=function(){},u}();function s(u){return function(l,d,f){var p=(r==null?void 0:r.idGenerator)?r.idGenerator(u):Fu(),S=new o,x,c=new Promise(function(T,N){return S.signal.addEventListener("abort",function(){return N({name:"AbortError",message:x||"Aborted"})})}),h=!1;function y(T){h&&(x=T,S.abort())}var R=function(){return Cu(this,null,function(){var T,N,L,B,Q,O;return yu(this,function(j){switch(j.label){case 0:return j.trys.push([0,4,,5]),B=(T=r==null?void 0:r.condition)==null?void 0:T.call(r,u,{getState:d,extra:f}),Lu(B)?[4,B]:[3,2];case 1:B=j.sent(),j.label=2;case 2:if(B===!1)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return h=!0,l(a(p,u,(N=r==null?void 0:r.getPendingMeta)==null?void 0:N.call(r,{requestId:p,arg:u},{getState:d,extra:f}))),[4,Promise.race([c,Promise.resolve(t(u,{dispatch:l,getState:d,extra:f,requestId:p,signal:S.signal,rejectWithValue:function(g,A){return new br(g,A)},fulfillWithValue:function(g,A){return new la(g,A)}})).then(function(g){if(g instanceof br)throw g;return g instanceof la?n(g.payload,p,u,g.meta):n(g,p,u)})])];case 3:return L=j.sent(),[3,5];case 4:return Q=j.sent(),L=Q instanceof br?i(null,p,u,Q.payload,Q.meta):i(Q,p,u),[3,5];case 5:return O=r&&!r.dispatchConditionRejection&&i.match(L)&&L.meta.condition,O||l(L),[2,L]}})})}();return Object.assign(R,{abort:y,requestId:p,arg:u,unwrap:function(){return R.then(Mu)}})}}return Object.assign(s,{pending:a,rejected:i,fulfilled:n,typePrefix:e})}function Mu(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Lu(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var wr="listenerMiddleware";m(wr+"/add"),m(wr+"/removeAll"),m(wr+"/remove"),iu();var $=new V({required:!0,emptyAllowed:!1}),te=new V({required:!1,emptyAllowed:!1}),le=new V({required:!0,emptyAllowed:!0}),Xe=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Be=(e,t)=>{if("required"in t)return{payload:new We({value:t}).validate({value:e}).value};let r=new Y({options:{required:!0},values:t}).validate(e);if(r)throw new $n(r);return{payload:e}},E=(e,t)=>{try{return Be(e,t)}catch(r){return{payload:e,error:Xe(r)}}},ca=(e,t,r,n)=>{let a=`Check the options of ${n}`;return Vu(e,t,r,a,"Controller initialization error")},Vu=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(i){throw e.logger.error(i,a),i}},Sr=()=>te,da=()=>$,Cr=m("configuration/updateBasicConfiguration",e=>E(e,{accessToken:te,organizationId:te,platformUrl:te})),Ft=m("configuration/updateSearchConfiguration",e=>E(e,{apiBaseUrl:te,pipeline:te,searchHub:te,timezone:te,locale:te})),fa=m("configuration/updateAnalyticsConfiguration",e=>E(e,{enabled:new Z({default:!0}),originContext:Sr(),originLevel2:Sr(),originLevel3:Sr(),apiBaseUrl:te,runtimeEnvironment:new de,anonymous:new Z({default:!1}),deviceId:te,userDisplayName:te,documentLocation:te})),pa=m("configuration/analytics/disable"),ha=m("configuration/analytics/enable"),Du=m("configuration/analytics/originlevel2",e=>E(e,{originLevel2:da()})),_u=m("configuration/analytics/originlevel3",e=>E(e,{originLevel3:da()}));function zu(e){let t={...e},r,n=a=>(i,o)=>{let s=a(i,o);return r?r(s,o):s};return{get combinedReducer(){return n(ra(t))},containsAll(a){return Object.keys(a).every(i=>i in t)},add(a){Object.keys(a).filter(i=>!(i in t)).forEach(i=>t[i]=a[i])},addCrossReducer(a){r=a}}}var Nu=e=>()=>t=>r=>{if(!r.error)return t(r);let n=r.error;if(e.error(n.stack||n.message||n.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},Uu=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function Qu({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return Ru({reducer:e,preloadedState:t,devTools:{stateSanitizer:i=>i.history?{...i,history:"<<OMIT>>"}:i,name:a,shouldHotReload:!1},middleware:i=>[...r,...i({thunk:{extraArgument:n}}),Uu(n.logger)]})}var Bu=m("history/undo"),Hu=m("history/redo"),et=m("history/snapshot");K("history/back",async(e,{dispatch:t})=>{t(Bu()),await t(ce())}),K("history/forward",async(e,{dispatch:t})=>{t(Hu()),await t(ce())});var ce=K("history/change",async(e,{getState:t})=>t().history.present),$e=()=>new V({required:!1,emptyAllowed:!0}),Yu=m("advancedSearchQueries/update",e=>E(e,{aq:$e(),cq:$e(),lq:$e(),dq:$e()})),Wu=m("advancedSearchQueries/register",e=>E(e,{aq:$e(),cq:$e(),lq:$e(),dq:$e()})),Pt=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}}),Ju={q:new V,enableQuerySyntax:new Z,aq:new V,cq:new V,firstResult:new U({min:0}),numberOfResults:new U({min:0}),sortCriteria:new V,f:new Y,cf:new Y,nf:new Y,df:new Y,debug:new Z,sf:new Y,tab:new V},ye=m("searchParameters/restore",e=>E(e,Ju));M(Pt(),e=>{e.addCase(Yu,(t,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;ue(n)||(t.aq=n,t.aqWasSet=!0),ue(a)||(t.cq=a,t.cqWasSet=!0),ue(i)||(t.lq=i,t.lqWasSet=!0),ue(o)||(t.dq=o,t.dqWasSet=!0)}).addCase(Wu,(t,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;ue(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),ue(a)||(t.defaultFilters.cq=a,t.cqWasSet||(t.cq=a)),ue(i)||(t.defaultFilters.lq=i,t.lqWasSet||(t.lq=i)),ue(o)||(t.defaultFilters.dq=o,t.dqWasSet||(t.dq=o))}).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.advancedSearchQueries)!=null?a:t}).addCase(ye,(t,r)=>{let{aq:n,cq:a}=r.payload;ue(n)||(t.aq=n,t.aqWasSet=!0),ue(a)||(t.cq=a,t.cqWasSet=!0)})});var Ku=m("tab/register",e=>{let t=new Y({values:{id:$,expression:le}});return E(e,t)}),ga=m("tab/updateActiveTab",e=>E(e,$)),Or=ge(st()),Zu=ge(ps()),Gu=ge(hs());function $t(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function _(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{l(n.next(d))}catch(f){o(f)}}function u(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?i(d.value):a(d.value).then(s,u)}l((n=n.apply(e,t||[])).next())})}var ne;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ne||(ne={}));function Xu(){return typeof window!="undefined"}function qr(){return typeof navigator!="undefined"}function ya(){return typeof document!="undefined"}function xr(){try{return typeof localStorage!="undefined"}catch{return!1}}function el(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function va(){return qr()&&navigator.cookieEnabled}function tl(){return typeof crypto!="undefined"}function rl(){return tl()&&typeof crypto.getRandomValues!="undefined"}var nl=[ne.click,ne.custom,ne.search,ne.view],al=(e,t)=>nl.indexOf(e)!==-1?Object.assign({language:ya()?document.documentElement.lang:"unknown",userAgent:qr()?navigator.userAgent:"unknown"},t):t,tt=class{static set(e,t,r){var n,a,i,o,s;r?(i=new Date,i.setTime(i.getTime()+r),o="; expires="+i.toGMTString()):o="",s=location.hostname,s.indexOf(".")===-1?document.cookie=e+"="+t+o+"; path=/":(a=s.split("."),a.shift(),n="."+a.join("."),ma({name:e,value:t,expires:o,domain:n}),(tt.get(e)==null||tt.get(e)!=t)&&(n="."+s,ma({name:e,value:t,expires:o,domain:n})))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(a=a.replace(/^\s+/,""),a.indexOf(t)==0)return a.substring(t.length,a.length)}return null}static erase(e){tt.set(e,"",-1)}};function ma(e){let{name:t,value:r,expires:n,domain:a}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${a}; SameSite=Lax`}function il(){return xr()?localStorage:va()?new rt:el()?sessionStorage:new dt}var rt=class{getItem(e){return tt.get(`${rt.prefix}${e}`)}removeItem(e){tt.erase(`${rt.prefix}${e}`)}setItem(e,t){tt.set(`${rt.prefix}${e}`,t)}};rt.prefix="coveo_";var ol=class{constructor(){this.cookieStorage=new rt}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)}},dt=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},ft="__coveo.analytics.history",ba=20,wa=1e3*60,Sa=75,Mt=class{constructor(e){this.store=e||il()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return _(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return _(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(ft);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return _(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(ft);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(ft,JSON.stringify(e.slice(0,ba)))}catch{}}clear(){try{this.store.removeItem(ft)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return e!=null?e.sort((t,r)=>(r.internalTime||0)-(t.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Sa)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>wa:!0}stripInternalTime(e){return e.map(t=>{let{name:r,time:n,value:a}=t;return{name:r,time:n,value:a}})}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(t=>this.stripEmptyQuery(t))}},sl=Object.freeze({__proto__:null,STORE_KEY:ft,MAX_NUMBER_OF_HISTORY_ELEMENTS:ba,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:wa,MAX_VALUE_SIZE:Sa,HistoryStore:Mt,default:Mt}),ul=(e,t)=>_(void 0,void 0,void 0,function*(){return e===ne.view?(yield ll(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),ll=e=>_(void 0,void 0,void 0,function*(){let t=new Mt,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)}),Lt=e=>e?(Number(e)^cl(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):(`${1e7}`+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,Lt),cl=e=>{if(rl())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)(t&3)==0&&(r=Math.random()*4294967296),e[t]=r>>>((t&3)<<3)&255;return e},Ce=Object.keys,Ca={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},dl=Ce(Ca).map(e=>Ca[e]),fl=[...dl].join("|"),pl=new RegExp(`^(${fl}$)`),hl={svcAction:"svc_action",svcActionData:"svc_action_data"},gl=e=>pl.test(e),yl=[gl],Oa={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},qa={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},pe={action:"pa",list:"pal",listSource:"pls"},Vt={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},vl=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Ir={id:"quoteId",affiliation:"quoteAffiliation"},Er={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},ml={add:pe,bookmark_add:pe,bookmark_remove:pe,click:pe,checkout:pe,checkout_option:pe,detail:pe,impression:pe,remove:pe,refund:Object.assign(Object.assign({},pe),Vt),purchase:Object.assign(Object.assign({},pe),Vt),quickview:pe,quote:Object.assign(Object.assign({},pe),Ir),review:Object.assign(Object.assign({},pe),Er)},bl=Ce(Oa).map(e=>Oa[e]),wl=Ce(qa).map(e=>qa[e]),Sl=Ce(pe).map(e=>pe[e]),Cl=Ce(Vt).map(e=>Vt[e]),Ol=Ce(Er).map(e=>Er[e]),ql=Ce(Ir).map(e=>Ir[e]),xl=[...bl,"custom"].join("|"),Il=[...wl,"custom"].join("|"),xa="(pr[0-9]+)",Ia="(il[0-9]+pi[0-9]+)",El=new RegExp(`^${xa}(${xl})$`),jl=new RegExp(`^(${Ia}(${Il}))|(il[0-9]+nm)$`),Rl=new RegExp(`^(${Sl.join("|")})$`),Al=new RegExp(`^(${Cl.join("|")})$`),kl=new RegExp(`^${xa}custom$`),Tl=new RegExp(`^${Ia}custom$`),Fl=new RegExp(`^(${[...vl,...Ol,...ql].join("|")})$`),Pl=e=>El.test(e),$l=e=>jl.test(e),Ml=e=>Rl.test(e),Ll=e=>Al.test(e),Vl=e=>Fl.test(e),Dl=[$l,Pl,Ml,Ll,Vl],_l=[kl,Tl],zl={anonymizeIp:"aip"},Nl={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Ul={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Ql=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale"],Bl=Object.assign(Object.assign(Object.assign(Object.assign({},zl),Nl),Ul),Ql.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),jr=Object.assign(Object.assign({},Bl),hl),Hl=e=>{let t=!!e.action&&ml[e.action]||{};return Ce(e).reduce((r,n)=>{let a=t[n]||jr[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})},{})},Yl=Ce(jr).map(e=>jr[e]),Wl=e=>Yl.indexOf(e)!==-1,Jl=e=>e==="custom",Kl=e=>[...Dl,...yl,Wl,Jl].some(t=>t(e)),Zl=e=>Ce(e).reduce((t,r)=>{let n=Gl(r);return n?Object.assign(Object.assign({},t),Xl(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Gl=e=>{let t;return[..._l].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!Boolean(t)}),t},Xl=(e,t)=>Ce(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),ec=class{constructor(e){this.opts=e}sendEvent(e,t){return _(this,void 0,void 0,function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=this.encodeForEventType(e,t),i=yield this.getQueryParamsForEventType(e),o={url:`${r}/analytics/${e}?${i}`,body:new Blob([a],{type:"application/x-www-form-urlencoded"})},{url:s,body:u}=Object.assign(Object.assign({},o),n?yield n(o,"analyticsBeacon"):{});console.log(`Sending beacon for "${e}" with: `,JSON.stringify(t)),navigator.sendBeacon(s,u)})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return _(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(e){return[ne.click,ne.custom,ne.search,ne.view].indexOf(e)!==-1}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(t=>!!e[t]).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},tc=class{sendEvent(e,t){return _(this,void 0,void 0,function*(){return Promise.resolve()})}},rc=window.fetch,Ea=class{constructor(e){this.opts=e}sendEvent(e,t){return _(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),a?yield a(o,"analyticsFetch"):{}),{url:u}=s,l=$t(s,["url"]),d=yield rc(u,l);if(d.ok){let f=yield d.json();return f.visitorId&&n.setCurrentVisitorId(f.visitorId),f}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,d,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}shouldAppendVisitorId(e){return[ne.click,ne.custom,ne.search,ne.view].indexOf(e)!==-1}getVisitorIdParam(){return _(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},nc=class{constructor(e,t){xr()&&va()?this.storage=new ol:xr()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new dt),this.client=new Ea(e),this.beaconClient=new ec(e),window.addEventListener("beforeunload",()=>{let r=t();for(let{eventType:n,payload:a}of r)this.beaconClient.sendEvent(n,a)})}},ac=class{constructor(e,t){this.storage=t||new dt,this.client=new Ea(e)}},ic=class{constructor(){this.storage=new dt,this.client=new tc}},oc="xx",sc=e=>(e==null?void 0:e.startsWith(oc))||!1,uc=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please install @react-native-async-storage/async-storage and instantiate 
        your analytics client as follows:
        
        import {ReactNativeRuntime} from 'coveo.analytics/react-native';
        
        const analytics = new CoveoAnalytics({
            ...your options,
            runtimeEnvironment: new ReactNativeRuntime();
        })
    `;function lc(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var cc=["1",1,"yes",!0];function dc(){return qr()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>cc.indexOf(e)!==-1)}var fc="v15",pc={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"},pt=class{constructor(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[ul,al].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),dc()&&(this.clear(),this.runtime.storage=new dt)}get defaultOptions(){return{endpoint:pc.default,token:"",version:fc,beforeSendHooks:[],afterSendHooks:[]}}initRuntime(e){return Xu()&&ya()?new nc(e,()=>{let t=[...this.bufferedRequests];return this.bufferedRequests=[],t}):(lc()&&console.warn(uc),new ac(e))}get storage(){return this.runtime.storage}determineVisitorId(){return _(this,void 0,void 0,function*(){try{return(yield this.storage.getItem("visitorId"))||Lt()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Lt()}})}getCurrentVisitorId(){return _(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return _(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}getParameters(e,...t){return _(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...t)})}getPayload(e,...t){return _(this,void 0,void 0,function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Lt()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}resolveParameters(e,...t){return _(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[i=>r.length>0?this.parseVariableArgumentsPayload(r,i):i[0],i=>_(this,void 0,void 0,function*(){return Object.assign(Object.assign({},i),{visitorId:n?yield this.getCurrentVisitorId():""})}),i=>a?this.ensureAnonymousUserWhenUsingApiKey(i):i,i=>this.beforeSendHooks.reduce((o,s)=>_(this,void 0,void 0,function*(){let u=yield o;return yield s(e,u)}),i)].reduce((i,o)=>_(this,void 0,void 0,function*(){let s=yield i;return yield o(s)}),Promise.resolve(t))})}resolvePayloadForParameters(e,t){return _(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[n=>this.removeEmptyPayloadValues(n,e),n=>this.validateParams(n),n=>r?Hl(n):n,n=>r?this.removeUnknownParameters(n):n,n=>r?this.processCustomParameters(n):n].reduce((n,a)=>_(this,void 0,void 0,function*(){let i=yield n;return yield a(i)}),Promise.resolve(t))})}sendEvent(e,...t){return _(this,void 0,void 0,function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return this.bufferedRequests.push({eventType:r,payload:a}),yield Promise.all(this.afterSendHooks.map(i=>i(e,n))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBufferWithFetch(){return _(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.client.sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new Mt().clear()}sendSearchEvent(e){return _(this,void 0,void 0,function*(){return this.sendEvent(ne.search,e)})}sendClickEvent(e){return _(this,void 0,void 0,function*(){return this.sendEvent(ne.click,e)})}sendCustomEvent(e){return _(this,void 0,void 0,function*(){return this.sendEvent(ne.custom,e)})}sendViewEvent(e){return _(this,void 0,void 0,function*(){return this.sendEvent(ne.view,e)})}getVisit(){return _(this,void 0,void 0,function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e})}getHealth(){return _(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[ne.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(t,n)||r(e[n])).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:e[a]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(t=>{if(Kl(t))return!0;console.log(t,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=$t(e,["custom"]),n=this.lowercaseKeys(t),a=Zl(r);return Object.assign(Object.assign({},n),a)}lowercaseKeys(e){return Object.keys(e||{}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r.toLowerCase()]:e[r]}),{})}validateParams(e){let{anonymizeIp:t}=e,r=$t(e,["anonymizeIp"]);return t!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${t}`.toLowerCase())==-1&&(r.anonymizeIp=1),r}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=$t(e,["userId"]);return sc(this.options.token)&&!t?(r.userId="anonymous",r):e}get baseUrl(){let{version:e,endpoint:t}=this.options,r=t.indexOf(".cloud.coveo.com")!==-1;return`${t}${r?"":"/rest"}/${e}`}},I;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults"})(I||(I={}));var hc={[I.triggerNotify]:"queryPipelineTriggers",[I.triggerExecute]:"queryPipelineTriggers",[I.triggerQuery]:"queryPipelineTriggers",[I.triggerRedirect]:"queryPipelineTriggers",[I.queryError]:"errors",[I.queryErrorBack]:"errors",[I.queryErrorClear]:"errors",[I.queryErrorRetry]:"errors",[I.pagerNext]:"getMoreResults",[I.pagerPrevious]:"getMoreResults",[I.pagerNumber]:"getMoreResults",[I.pagerResize]:"getMoreResults",[I.pagerScrolling]:"getMoreResults",[I.facetSearch]:"facet",[I.facetShowLess]:"facet",[I.facetShowMore]:"facet",[I.recommendation]:"recommendation",[I.likeSmartSnippet]:"smartSnippet",[I.dislikeSmartSnippet]:"smartSnippet",[I.expandSmartSnippet]:"smartSnippet",[I.collapseSmartSnippet]:"smartSnippet",[I.openSmartSnippetFeedbackModal]:"smartSnippet",[I.closeSmartSnippetFeedbackModal]:"smartSnippet",[I.sendSmartSnippetReason]:"smartSnippet",[I.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.clearRecentQueries]:"recentQueries",[I.recentResultClick]:"recentlyClickedDocuments",[I.clearRecentResults]:"recentlyClickedDocuments",[I.showLessFoldedResults]:"folding"},ja=class{constructor(){this.runtime=new ic,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}};function gc(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function yc(e){return e.map(t=>t.replace(/;/g,""))}function Ra(e){let t=256,r=e.join(";");return r.length<=t?r:Ra(e.slice(1))}var Aa=e=>{let t=yc(e),r=gc(t);return Ra(r)};function ka(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Aa(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Aa(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var vc=class{constructor(e,t){this.opts=e,this.provider=t,this.coveoAnalyticsClient=e.enableAnalytics===!1?new ja:new pt(e)}disable(){this.coveoAnalyticsClient instanceof pt&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ja}enable(){this.coveoAnalyticsClient=new pt(this.opts)}logInterfaceLoad(){return this.logSearchEvent(I.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(I.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(I.recommendation)}logRecommendationOpen(e,t){return this.logClickEvent(I.recommendationOpen,e,t)}logStaticFilterClearAll(e){return this.logSearchEvent(I.staticFilterClearAll,e)}logStaticFilterSelect(e){return this.logSearchEvent(I.staticFilterSelect,e)}logStaticFilterDeselect(e){return this.logSearchEvent(I.staticFilterDeselect,e)}logFetchMoreResults(){return this.logCustomEvent(I.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(e){return this.logSearchEvent(I.interfaceChange,e)}logDidYouMeanAutomatic(){return this.logSearchEvent(I.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(I.didyoumeanClick)}logResultsSort(e){return this.logSearchEvent(I.resultsSort,e)}logSearchboxSubmit(){return this.logSearchEvent(I.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(I.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(I.searchboxAsYouType)}logBreadcrumbFacet(e){return this.logSearchEvent(I.breadcrumbFacet,e)}logBreadcrumbResetAll(){return this.logSearchEvent(I.breadcrumbResetAll)}logDocumentQuickview(e,t){return this.logClickEvent(I.documentQuickview,e,t)}logDocumentOpen(e,t){return this.logClickEvent(I.documentOpen,e,t)}logOmniboxAnalytics(e){return this.logSearchEvent(I.omniboxAnalytics,ka(e))}logOmniboxFromLink(e){return this.logSearchEvent(I.omniboxFromLink,ka(e))}logSearchFromLink(){return this.logSearchEvent(I.searchFromLink)}logTriggerNotify(e){return this.logCustomEvent(I.triggerNotify,e)}logTriggerExecute(e){return this.logCustomEvent(I.triggerExecute,e)}logTriggerQuery(){let e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(I.triggerQuery,e)}logTriggerRedirect(e){let t=Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(I.triggerRedirect,t)}logPagerResize(e){return this.logCustomEvent(I.pagerResize,e)}logPagerNumber(e){return this.logCustomEvent(I.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(I.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(I.pagerPrevious,e)}logPagerScrolling(){return this.logCustomEvent(I.pagerScrolling)}logFacetClearAll(e){return this.logSearchEvent(I.facetClearAll,e)}logFacetSearch(e){return this.logSearchEvent(I.facetSearch,e)}logFacetSelect(e){return this.logSearchEvent(I.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(I.facetDeselect,e)}logFacetExclude(e){return this.logSearchEvent(I.facetExclude,e)}logFacetUnexclude(e){return this.logSearchEvent(I.facetUnexclude,e)}logFacetSelectAll(e){return this.logSearchEvent(I.facetSelectAll,e)}logFacetUpdateSort(e){return this.logSearchEvent(I.facetUpdateSort,e)}logFacetShowMore(e){return this.logCustomEvent(I.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(I.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(I.queryError,e)}logQueryErrorBack(){return _(this,void 0,void 0,function*(){return yield this.logCustomEvent(I.queryErrorBack),this.logSearchEvent(I.queryErrorBack)})}logQueryErrorRetry(){return _(this,void 0,void 0,function*(){return yield this.logCustomEvent(I.queryErrorRetry),this.logSearchEvent(I.queryErrorRetry)})}logQueryErrorClear(){return _(this,void 0,void 0,function*(){return yield this.logCustomEvent(I.queryErrorClear),this.logSearchEvent(I.queryErrorClear)})}logLikeSmartSnippet(){return this.logCustomEvent(I.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(I.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(I.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(I.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(I.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(I.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(e,t){return this.logCustomEvent(I.sendSmartSnippetReason,{reason:e,details:t})}logExpandSmartSnippetSuggestion(e){return this.logCustomEvent(I.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return this.logCustomEvent(I.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logShowMoreSmartSnippetSuggestion(e){return this.logCustomEvent(I.showMoreSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return this.logCustomEvent(I.showLessSmartSnippetSuggestion,e)}logOpenSmartSnippetSource(e,t){return this.logClickEvent(I.openSmartSnippetSource,e,t)}logOpenSmartSnippetSuggestionSource(e,t){return this.logClickEvent(I.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logRecentQueryClick(){return this.logSearchEvent(I.recentQueryClick)}logClearRecentQueries(){return this.logCustomEvent(I.clearRecentQueries)}logRecentResultClick(e,t){return this.logCustomEvent(I.recentResultClick,{info:e,identifier:t})}logClearRecentResults(){return this.logCustomEvent(I.clearRecentResults)}logNoResultsBack(){return this.logSearchEvent(I.noResultsBack)}logShowMoreFoldedResults(e,t){return this.logClickEvent(I.showMoreFoldedResults,e,t)}logShowLessFoldedResults(){return this.logCustomEvent(I.showLessFoldedResults)}logCustomEvent(e,t){return _(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(r)),{eventType:hc[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logCustomEventWithType(e,t,r){return _(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:t,eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(a)})}logSearchEvent(e,t){return _(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,t))})}logClickEvent(e,t,r,n){return _(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(a)})}getBaseSearchEventRequest(e,t){return _(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseCustomEventRequest(e){return _(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseEventRequest(e){return _(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof pt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},mc={pageview:"pageview",event:"event"},Ta=Object.assign({},mc);Object.keys(Ta).map(e=>Ta[e]);var Fa;(function(e){e.click="click",e.flowStart="flowStart"})(Fa||(Fa={}));var Pa;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Pa||(Pa={}));var $a;(function(e){e.quit="Quit",e.solved="Solved"})($a||($a={}));var nt=()=>({q:"",enableQuerySyntax:!1}),Rr=()=>"default",Ma="1.71.0",bc=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Ar=class{constructor(e){this.stateNeededByBaseAnalyticsProvider=e}getLanguage(){return bc(this.stateNeededByBaseAnalyticsProvider)}getBaseMetadata(){let{context:e}=this.stateNeededByBaseAnalyticsProvider,t=(e==null?void 0:e.contextValues)||{},r={};for(let[n,a]of Object.entries(t)){let i=`context_${n}`;r[i]=a}return r.coveoHeadlessVersion=Ma,r}getOriginContext(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originContext}getOriginLevel1(){return this.stateNeededByBaseAnalyticsProvider.searchHub||Rr()}getOriginLevel2(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originLevel2}getOriginLevel3(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originLevel3}getIsAnonymous(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.anonymous}};function kr(){return{}}function Tr(){return{}}function Fr(){return{}}function Pr(){return{}}var wc=(e,t)=>{if("productListing"in e&&e.productListing)return e.productListing.facets.results.find(r=>r.facetId===t);if("search"in e&&e.search)return e.search.response.facets.find(r=>r.facetId===t)};function ht(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(a=>a.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function Sc(e,t){return!!t&&t.facetId in e.categoryFacetSet}var Cc=(e,t)=>{let r=wc(e,t);if(Sc(e,r))return r},La=(e,t)=>{let r=Cc(e,t);return ht(r==null?void 0:r.values).parents},Va=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),Oc=(e,t)=>{let r=_a(t,e),n=r?r.field:"",a=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:a}};function Da(e){return{facetSet:e.facetSet||Pr(),categoryFacetSet:e.categoryFacetSet||kr(),dateFacetSet:e.dateFacetSet||Tr(),numericFacetSet:e.numericFacetSet||Fr(),..."search"in e&&{search:e.search?e.search:_e()},..."productListing"in e&&{productListing:e.productListing?e.productListing:Va()}}}var qc=e=>{let t=[];return xc(e).forEach((r,n)=>{let a=Tc(e,r.facetId),i=kc(r,n+1);if(a==="hierarchical"){if(!La(e,r.facetId).length)return;t.push({...i,...Ac(e,r.facetId),facetType:a,state:"selected"});return}r.values.forEach((o,s)=>{if(o.state==="idle")return;let u=Ic(o,s+1,a),l=a==="specific"?jc(o):Ec(o);t.push({...i,...u,...l})})}),t},xc=e=>"productListing"in e&&e.productListing?e.productListing.facets.results:"search"in e&&e.search?e.search.response.facets:[],Ic=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Ec=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),jc=e=>({displayValue:e.value,value:e.value}),Rc=(e,t)=>La(e,t).map(r=>r.value).join(";"),Ac=(e,t)=>{let r=1,n=Rc(e,t);return{value:n,valuePosition:r,displayValue:n}},kc=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),_a=(e,t)=>{var r;return e.facetSet[t]||((r=e.categoryFacetSet[t])==null?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},Tc=(e,t)=>{let r=_a(e,t);return r?r.type:"specific"},za=class extends Ar{constructor(e){super(e);this.state=e}getFacetState(){return qc(Da(this.state))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;return((e=this.state.search)==null?void 0:e.searchResponseId)||((t=this.state.search)==null?void 0:t.response.searchUid)||_e().response.searchUid}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||nt().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||_e().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||_e().response.results.length}},Fc=({logger:e,state:t,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new za(t)})=>{let i=t.configuration.accessToken,o=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=t.configuration.analytics.enabled,l=new vc({token:i,endpoint:o,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(d,f)=>(e.info({...f,type:d,endpoint:o,token:i},"Analytics request"),f)]},a);return u||l.disable(),l},Ie=()=>new pt({}).getCurrentVisitorId(),at=new sl.HistoryStore,Na=()=>{let e=at.getHistory().reverse().find(t=>t.name==="PageView"&&t.value);return e?e.value:""};Or.default.extend(Zu.default),Or.default.extend(Gu.default);var Ua="/rest/search/v2",$r="/rest/ua",Pc=()=>({organizationId:"",accessToken:"",platformUrl:Fn(),search:{apiBaseUrl:`${Fn()}${Ua}`,locale:"en-US",timezone:Or.default.tz.guess()},analytics:{enabled:!0,apiBaseUrl:`${Es()}${$r}`,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:""}}),Dt=async e=>({analytics:{clientId:await Ie(),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Na()&&{pageId:Na()}}});function $c(e,t){if(/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+$r;let r=e.match(new RegExp(`^https://(${t}\\.org)\\.coveo.com`));return r?e.replace(r[1],"analytics.cloud")+$r:e}var Mc=M(Pc(),e=>e.addCase(Cr,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Ua}`,t.analytics.apiBaseUrl=$c(r.payload.platformUrl,t.organizationId))}).addCase(Ft,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone)}).addCase(fa,(t,r)=>{re(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),re(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),re(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),re(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),re(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),re(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),re(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),re(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),re(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),re(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(pa,t=>{t.analytics.enabled=!1}).addCase(ha,t=>{t.analytics.enabled=!0}).addCase(Du,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(_u,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(ga,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(ye,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2})),Lc=new oe({each:$,required:!0}),Qa=(e,t)=>(E(e,$),er(t)?E(t,$):E(t,Lc),{payload:{contextKey:e,contextValue:t}}),Vc=m("context/set",e=>{for(let[t,r]of Object.entries(e))Qa(t,r);return{payload:e}}),Dc=m("context/add",e=>Qa(e.contextKey,e.contextValue)),_c=m("context/remove",e=>E(e,$));function Ba(){return{contextValues:{}}}M(Ba(),e=>{e.addCase(Vc,(t,r)=>{t.contextValues=r.payload}).addCase(Dc,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(_c,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})});var zc=m("debug/enable"),Nc=m("debug/disable"),Ha=()=>!1;M(Ha(),e=>{e.addCase(zc,()=>!0).addCase(Nc,()=>!1).addCase(ye,(t,r)=>{var n;return(n=r.payload.debug)!=null?n:t})});var Uc=M(Ma,e=>e),Qc=m("didYouMean/enable"),Bc=m("didYouMean/disable"),Mr=m("didYouMean/correction",e=>E(e,$)),Ya=()=>"",Hc=ge(vs());function Yc(e){return Array.isArray(e)}function Wc(e,t){return Object.values(e.reduce((r,n,a)=>({...r,[t(n,a)]:n}),{}))}function Jc(e){return(typeof btoa!="undefined"?btoa:Hc.btoa)(encodeURI(e))}function Kc(e){let t=Wa(e),r=[e,...t].filter(n=>n.parentResult).map(n=>n.parentResult);return Wc([e,...t,...r],n=>n.uniqueId)}function Wa(e){return e.childResults?e.childResults.flatMap(t=>[t,...Wa(t)]):[]}var Oe=(e=>(e[e.Search=0]="Search",e[e.Custom=1]="Custom",e[e.Click=2]="Click",e))(Oe||{}),Zc=e=>e(),Ee=(e,t,r,n=a=>new za(a))=>K(e,async(a,{getState:i,extra:{analyticsClientMiddleware:o,preprocessRequest:s,logger:u}})=>{let l=Zc(i),d=Fc({state:l,logger:u,analyticsClientMiddleware:o,preprocessRequest:s,provider:n(l)}),f=await r(d,l);return u.info({client:d.coveoAnalyticsClient,response:f},"Analytics response"),{analyticsType:t}}),Gc=e=>K("analytics/noop",async()=>({analyticsType:e}));Gc(0);var Ja={urihash:new V,sourcetype:new V,permanentid:new V},Lr={uniqueId:$,raw:new Y({values:Ja}),title:$,uri:$,clickUri:$,rankingModifier:new V({required:!1,emptyAllowed:!0})};function Xc(e){return Object.assign({},...Object.keys(Ja).map(t=>({[t]:e[t]})))}function ed(e){return Object.assign({},...Object.keys(Lr).map(t=>({[t]:e[t]})),{raw:Xc(e.raw)})}var td=e=>new We(Lr).validate(ed(e));Ee("analytics/didyoumean/click",Oe.Search,e=>e.logDidYouMeanClick());var rd=Ee("analytics/didyoumean/automatic",Oe.Search,e=>e.logDidYouMeanAutomatic()),Vr=m("query/updateQuery",e=>E(e,{q:new V,enableQuerySyntax:new Z}));function Ka(){return{contextValues:{}}}function gt(){return{enabled:!0}}function Za(){return{freezeFacetOrder:!1,facets:{}}}function Ga(){return[]}function Dr(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Xa(){return{}}function nd(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}function ei(){return{}}var ad=(e=>(e.Ascending="ascending",e.Descending="descending",e))(ad||{}),ti=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(ti||{}),_t=e=>{if(Dn(e))return e.map(t=>_t(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},id=()=>({by:"relevancy"});function ri(){return _t(id())}function ni(){return{}}function ai(){return{}}function od(){return it({})}function it(e){var t,r;return{context:e.context||Ba(),dictionaryFieldContext:e.dictionaryFieldContext||Ka(),facetSet:e.facetSet||Pr(),numericFacetSet:e.numericFacetSet||Fr(),dateFacetSet:e.dateFacetSet||Tr(),categoryFacetSet:e.categoryFacetSet||kr(),pagination:e.pagination||Dr(),query:e.query||nt(),tabSet:e.tabSet||ai(),advancedSearchQueries:e.advancedSearchQueries||Pt(),staticFilterSet:e.staticFilterSet||ni(),querySet:e.querySet||ei(),instantResults:e.instantResults||Xa(),sortCriteria:e.sortCriteria||ri(),pipeline:e.pipeline||Ya(),searchHub:e.searchHub||Rr(),facetOptions:e.facetOptions||Za(),facetOrder:(t=e.facetOrder)!=null?t:Ga(),debug:(r=e.debug)!=null?r:Ha()}}var sd=Ee("search/logFetchMoreResults",Oe.Search,e=>e.logFetchMoreResults()),Me=e=>Ee("search/queryError",Oe.Search,(t,r)=>{var n,a,i;return t.logQueryError({query:((n=r.query)==null?void 0:n.q)||nt().q,aq:((a=r.advancedSearchQueries)==null?void 0:a.aq)||Pt().aq,cq:((i=r.advancedSearchQueries)==null?void 0:i.cq)||Pt().cq,dq:"",errorType:e.type,errorMessage:e.message})})(),zt=ge(st()),ii=ge(st()),ud=ge(jn());ii.default.extend(ud.default);var ld="YYYY/MM/DD@HH:mm:ss",cd="1401-01-01";function oi(e){return e.format(ld)}function dd(e,t){let r=(0,ii.default)(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",a=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?a:n}`)}si(r)}function si(e){if(e.isBefore(cd))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var fd=ge(ms());zt.default.extend(fd.default);var ui=["past","now","next"],li=["minute","hour","day","week","month","quarter","year"],pd=e=>{let t=e==="now";return{amount:new U({required:!t,min:1}),unit:new V({required:!t,constrainTo:li}),period:new V({required:!0,constrainTo:ui})}};function ci(e){if(typeof e=="string"&&!yt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?pi(e):e;new We(pd(t.period)).validate(t);let r=di(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);si(r)}function hd(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function di(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,zt.default)().subtract(r,n);case"next":return(0,zt.default)().add(r,n);case"now":return(0,zt.default)()}}function _r(e){return oi(di(pi(e)))}function fi(e){return e.toLocaleLowerCase().split("-")}function yt(e){let[t,r,n]=fi(e);if(t==="now")return!0;if(!ui.includes(t)||!li.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function gd(e){return!!e&&typeof e=="object"&&"period"in e}function pi(e){let[t,r,n]=fi(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function yd(e){return e.type==="dateRange"}function hi(e){return`start${e}`}function gi(e){return`end${e}`}var vd=()=>({dateFacetValueMap:{}});function md(e,t,r){let n=e.start,a=e.end;return yt(n)&&(n=_r(n),r.dateFacetValueMap[t][hi(n)]=e.start),yt(a)&&(a=_r(a),r.dateFacetValueMap[t][gi(a)]=e.end),{...e,start:n,end:a}}function bd(e,t){if(yd(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(a=>md(a,r,t))}}return e}function yi(e){var t;let r=vd();return{request:{...e,facets:(t=e.facets)==null?void 0:t.map(n=>bd(n,r))},mappings:r}}function wd(e,t,r){return{...e,start:r.dateFacetValueMap[t][hi(e.start)]||e.start,end:r.dateFacetValueMap[t][gi(e.end)]||e.end}}function Sd(e,t){return e.facetId in t.dateFacetValueMap}function Cd(e,t){return Sd(e,t)?{...e,values:e.values.map(r=>wd(r,e.facetId,t))}:e}function vi(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>Cd(n,t))}}:e}var Nt=new U({required:!0,min:0}),Od=m("pagination/registerNumberOfResults",e=>E(e,Nt)),qd=m("pagination/updateNumberOfResults",e=>E(e,Nt)),xd=m("pagination/registerPage",e=>E(e,Nt)),mi=m("pagination/updatePage",e=>E(e,Nt)),Id=m("pagination/nextPage"),Ed=m("pagination/previousPage");function bi(e,t){let r={};e.forEach(i=>r[i.facetId]=i);let n=[];t.forEach(i=>{i in r&&(n.push(r[i]),delete r[i])});let a=Object.values(r);return[...n,...a]}var zr=async e=>{var t,r,n,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Ie(),actionsHistory:at.getHistory()},...((t=e.advancedSearchQueries)==null?void 0:t.aq)&&{aq:e.advancedSearchQueries.aq},...((r=e.advancedSearchQueries)==null?void 0:r.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((a=e.advancedSearchQueries)==null?void 0:a.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Dt(e.configuration.analytics),...e.excerptLength&&!re(e.excerptLength.length)&&{excerptLength:e.excerptLength.length}}},He=async e=>{var t;let r=Td(e),n=jd(e),a=await zr(e);return yi({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((t=e.folding)==null?void 0:t.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}})};function jd(e){var t;return bi(Rd(e),(t=e.facetOrder)!=null?t:[])}function Rd(e){return Ad(e).filter(({facetId:t})=>{var r,n,a;return(a=(n=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:n.enabled)!=null?a:!0})}function Ad(e){return[...Nr(e.facetSet),...Nr(e.numericFacetSet),...Nr(e.dateFacetSet),...kd(e.categoryFacetSet)]}function kd(e){return Object.values(e||{}).map(t=>t.request)}function Nr(e={}){return Object.keys(e).map(t=>e[t])}function Td(e){var t;let r=((t=e.advancedSearchQueries)==null?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find(o=>o.isActive),a=(n==null?void 0:n.expression.trim())||"",i=Fd(e);return[r,a,...i].filter(o=>!!o).join(" AND ")}function Fd(e){return Object.values(e.staticFilterSet||{}).map(t=>{let r=t.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),n=r.map(a=>a.expression).join(" OR ");return r.length>1?`(${n})`:n})}var Ye=m("breadcrumb/deselectAll"),vt=m("facet/deselectAllFacets"),Ur=m("facet/updateFacetAutoSelection",e=>E(e,{allow:new Z({required:!0})})),Qr={id:$},Pd={...Qr,q:le},$d=m("instantResults/register",e=>E(e,Qr)),wi=m("instantResults/updateQuery",e=>E(e,Pd)),Md=m("instantResults/clearExpired",e=>E(e,Qr)),mt=async(e,t,{request:r,mappings:n})=>{var a;let i=new Date().getTime(),o=vi(await e.search(r),n),s=new Date().getTime()-i,u=((a=t.query)==null?void 0:a.q)||"";return{response:o,duration:s,queryExecuted:u,requestExecuted:r}};K("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;E(e,{q:new V,enableQuerySyntax:new Z}),r(Ye()),r(Ur({allow:!0})),r(Vr(e)),r(mi(1))});var ee=K("search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();Oi(i);let o=await mt(a.apiClient,i,await He(i));if(ae(o.response))return r(Me(o.response.error)),n(o.response.error);if(!Ci(i,o.response.success))return r(et(it(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:bt(i),analyticsAction:e};let{correctedQuery:s}=o.response.success.queryCorrections[0],u=await Vd(a.apiClient,s,t,r);if(ae(u.response))return r(Me(u.response.error)),n(u.response.error);let l=o.response.success;return e(r,()=>Ld(o.queryExecuted,o.duration,i,l),a),r(et(it(t()))),{...u,response:{...u.response.success,queryCorrections:o.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:bt(i),analyticsAction:rd()}}),Br=K("search/fetchPage",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();Oi(i);let o=await mt(a.apiClient,i,await He(i));return ae(o.response)?(r(Me(o.response.error)),n(o.response.error)):(r(et(it(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:bt(i),analyticsAction:e})}),Ut=K("search/fetchMoreResults",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await mt(a,i,await Dd(i));return ae(o.response)?(r(Me(o.response.error)),n(o.response.error)):(r(et(it(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:bt(i),analyticsAction:sd()})}),Hr=K("search/fetchFacetValues",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await mt(a,i,await zd(i));return ae(o.response)?(r(Me(o.response.error)),n(o.response.error)):(r(et(it(i))),{...o,analyticsAction:e,response:o.response.success,automaticallyCorrected:!1,originalQuery:bt(i)})}),Yr=K("instantResults/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:$,q:$,maxResultsPerQuery:new U({required:!0,min:1}),cacheTimeout:new U});let o=e.q,s=t(),u=await Si(a,s,o);if(ae(u))return r(Me(u.error)),n(u.error);let l=p=>p.success.results.slice(0,e.maxResultsPerQuery);if(!Ci(s,u.success))return{results:l(u)};let{correctedQuery:d}=u.success.queryCorrections[0];r(wi({q:d,id:e.id}));let f=await Si(a,s,d);return ae(f)?(r(Me(f.error)),n(f.error)):{results:l(f)}});async function Si(e,t,r){let{request:n,mappings:a}=await _d(t,r);return vi(await e.search(n),a)}var Ld=(e,t,r,n)=>{var a,i;return{...r,query:{q:e,enableQuerySyntax:(i=(a=r.query)==null?void 0:a.enableQuerySyntax)!=null?i:nt().enableQuerySyntax},search:{..._e(),duration:t,response:n,results:n.results}}},Vd=async(e,t,r,n)=>{n(Vr({q:t}));let a=await mt(e,r(),await He(r()));return n(Mr(t)),a},Ci=(e,t)=>{var r;return((r=e.didYouMean)==null?void 0:r.enableDidYouMean)===!0&&t.results.length===0&&t.queryCorrections.length!==0},Dd=async e=>{var t,r,n,a;let i=await He(e);return i.request={...i.request,firstResult:((r=(t=e.pagination)==null?void 0:t.firstResult)!=null?r:0)+((a=(n=e.search)==null?void 0:n.results.length)!=null?a:0)},i},_d=async(e,t)=>{let r=await zr(e);return yi({...r,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},q:t})},zd=async e=>{let t=await He(e);return t.request.numberOfResults=0,t},Oi=e=>{var t;e.configuration.analytics.enabled&&at.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},bt=e=>{var t;return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""},Wr=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function Nd(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Wr(),originalQuery:""}}M(Nd(),e=>{e.addCase(Qc,t=>{t.enableDidYouMean=!0}).addCase(Bc,t=>{t.enableDidYouMean=!1}).addCase(ee.pending,t=>{t.queryCorrection=Wr(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(ee.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||Wr(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(Mr,(t,r)=>{t.wasCorrectedTo=r.payload})});var W=$,Ud={state:new de({required:!0}),numberOfResults:new U({required:!0,min:0}),value:new V({required:!0,emptyAllowed:!0}),path:new oe({required:!0,each:$}),moreValuesAvailable:new Z({required:!1})};function qi(e){e.children.forEach(t=>{qi(t)}),Be({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Ud)}var Qd={facetId:W,field:$,delimitingCharacter:new V({required:!1,emptyAllowed:!0}),filterFacetCount:new Z({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1}),basePath:new oe({required:!1,each:$}),filterByBasePath:new Z({required:!1})},xi=m("categoryFacet/register",e=>E(e,Qd)),Ii=m("categoryFacet/toggleSelectValue",e=>{try{return Be(e.facetId,$),qi(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Xe(t)}}}),Ei=m("categoryFacet/deselectAll",e=>E(e,W)),Bd=m("categoryFacet/updateNumberOfValues",e=>E(e,{facetId:W,numberOfValues:new U({required:!0,min:1})})),Hd=m("categoryFacet/updateSortCriterion",e=>E(e,{facetId:W,criterion:new de})),Yd={value:$,numberOfResults:new U({min:0}),state:$},Wd={facetId:W,field:new V({required:!0,emptyAllowed:!0}),delimitingCharacter:new V({required:!1,emptyAllowed:!0}),filterFacetCount:new Z({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1})},ji=m("facet/register",e=>E(e,Wd)),Ri=m("facet/toggleSelectValue",e=>E(e,{facetId:W,selection:new Y({values:Yd})})),Qt=m("facet/deselectAll",e=>E(e,W)),Jd=m("facet/updateSortCriterion",e=>E(e,{facetId:W,criterion:new de({required:!0})})),Kd=m("facet/updateNumberOfValues",e=>E(e,{facetId:W,numberOfValues:new U({required:!0,min:1})})),Zd=m("facet/updateIsFieldExpanded",e=>E(e,{facetId:W,isFieldExpanded:new Z({required:!0})})),Gd=m("facet/updateFreezeCurrentValues",e=>E(e,{facetId:W,freezeCurrentValues:new Z({required:!0})})),Ai=ge(st()),ki={state:$,start:new U({required:!0}),end:new U({required:!0}),endInclusive:new Z({required:!0}),numberOfResults:new U({required:!0,min:0})},Ti={start:$,end:$,endInclusive:new Z({required:!0}),state:$,numberOfResults:new U({required:!0,min:0})},Fi=m("rangeFacet/updateSortCriterion",e=>E(e,{facetId:W,criterion:new de({required:!0})})),Pi=ge(st()),Xd=ge(jn());Pi.default.extend(Xd.default);function ef(e){var t,r;ue(e.useLocalTime)||console.warn('The "useLocalTime" option for "buildDateRange" is deprecated. Please use the "timezone" engine configuration option instead.');let n=$i(e.start,e),a=$i(e.end,e),i=(t=e.endInclusive)!=null?t:!1,o=(r=e.state)!=null?r:"idle";return{start:n,end:a,endInclusive:i,state:o}}function $i(e,t){let{dateFormat:r}=t;return gd(e)?(ci(e),hd(e)):typeof e=="string"&&yt(e)?(ci(e),e):(dd(e,r),oi((0,Pi.default)(e,r)))}var tf={start:$,end:$,endInclusive:new Z({required:!0}),state:$},rf={facetId:W,field:$,currentValues:new oe({required:!1,each:new Y({values:tf})}),generateAutomaticRanges:new Z({required:!0}),filterFacetCount:new Z({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1}),rangeAlgorithm:new de({required:!1})};function Mi(e){return yt(e)?_r(e):e}function Li(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:n}=ef(t);if((0,Ai.default)(Mi(r)).isAfter((0,Ai.default)(Mi(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var Vi=m("dateFacet/register",e=>{try{return Be(e,rf),Li(e),{payload:e,error:null}}catch(t){return{payload:e,error:Xe(t)}}}),Di=m("dateFacet/toggleSelectValue",e=>E(e,{facetId:W,selection:new Y({values:Ti})})),_i=m("dateFacet/updateFacetValues",e=>{try{return Be(e,{facetId:W,values:new oe({each:new Y({values:Ti})})}),Li({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Xe(t)}}}),nf=Fi,af=Qt,of={state:$,start:new U({required:!0}),end:new U({required:!0}),endInclusive:new Z({required:!0})},sf={facetId:W,field:$,currentValues:new oe({required:!1,each:new Y({values:of})}),generateAutomaticRanges:new Z({required:!0}),filterFacetCount:new Z({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1}),rangeAlgorithm:new de({required:!1})};function zi(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Ni=m("numericFacet/register",e=>{try{return E(e,sf),zi(e),{payload:e,error:null}}catch(t){return{payload:e,error:Xe(t)}}}),Ui=m("numericFacet/toggleSelectValue",e=>E(e,{facetId:W,selection:new Y({values:ki})})),Qi=m("numericFacet/updateFacetValues",e=>{try{return Be(e,{facetId:W,values:new oe({each:new Y({values:ki})})}),zi({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Xe(t)}}}),uf=Fi,lf=Qt,cf=m("facetOptions/update",e=>E(e,{freezeFacetOrder:new Z({required:!1})})),df=m("facetOptions/facet/enable",e=>E(e,W)),wt=m("facetOptions/facet/disable",e=>E(e,W));M(Za(),e=>{e.addCase(cf,(t,r)=>({...t,...r.payload})).addCase(ee.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(ee.rejected,t=>{t.freezeFacetOrder=!1}).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOptions)!=null?a:t}).addCase(xi,(t,r)=>{t.facets[r.payload.facetId]=gt()}).addCase(ji,(t,r)=>{t.facets[r.payload.facetId]=gt()}).addCase(Vi,(t,r)=>{t.facets[r.payload.facetId]=gt()}).addCase(Ni,(t,r)=>{t.facets[r.payload.facetId]=gt()}).addCase(df,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(wt,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(ye,(t,r)=>{var n,a,i,o;[...Object.keys((n=r.payload.f)!=null?n:{}),...Object.keys((a=r.payload.cf)!=null?a:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((o=r.payload.df)!=null?o:{})].forEach(s=>{s in t||(t.facets[s]=gt()),t.facets[s].enabled=!0})})});function Jr(e,t){let{facetId:r,criterion:n}=t,a=e[r];!a||(a.sortCriteria=n)}function Bt(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function Bi(e,t){!e||(e.numberOfValues=t)}var Kr={facetId:W,captions:new Y({options:{required:!1}}),numberOfValues:new U({required:!1,min:1}),query:new V({required:!1,emptyAllowed:!0})},ff={path:new oe({required:!0,each:$}),displayValue:le,rawValue:le,count:new U({required:!0,min:0})},Hi=m("categoryFacet/selectSearchResult",e=>E(e,{facetId:W,value:new Y({values:ff})})),pf=m("categoryFacetSearch/register",e=>E(e,Kr));function Ht(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Yi(e,t,r){e.currentValues=hf(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function hf(e,t){if(!e.length)return[];let r=Wi(e[0],t),n=r;for(let a of e.splice(1)){let i=Wi(a,t);n.children.push(i),n=i}return n.state="selected",n.retrieveChildren=!0,[r]}function Wi(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}M(kr(),e=>{e.addCase(xi,(t,r)=>{let n=r.payload,{facetId:a}=n;if(a in t)return;let i=vf(n),o=i.numberOfValues;t[a]={request:i,initialNumberOfValues:o}}).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.categoryFacetSet)!=null?a:t}).addCase(ye,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(a=>{let i=t[a].request,o=n[a]||[];(o.length||i.currentValues.length)&&Yi(i,o,t[a].initialNumberOfValues)})}).addCase(Hd,(t,r)=>{var n;let{facetId:a,criterion:i}=r.payload,o=(n=t[a])==null?void 0:n.request;!o||(o.sortCriteria=i)}).addCase(Ii,(t,r)=>{var n;let{facetId:a,selection:i,retrieveCount:o}=r.payload,s=(n=t[a])==null?void 0:n.request;if(!s)return;let{path:u}=i,l=u.slice(0,u.length-1),d=yf(s,l,o);if(d.length){let p=d[0];p.retrieveChildren=!0,p.state="selected",p.children=[];return}let f=Ji(i.value,o);f.state="selected",d.push(f),s.numberOfValues=1}).addCase(Ei,(t,r)=>{let n=r.payload;Ht(t,n)}).addCase(vt,t=>{Object.keys(t).forEach(r=>Ht(t,r))}).addCase(Ye,t=>{Object.keys(t).forEach(r=>Ht(t,r))}).addCase(Ur,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(Bd,(t,r)=>{var n;let{facetId:a,numberOfValues:i}=r.payload,o=(n=t[a])==null?void 0:n.request;if(o){if(!o.currentValues.length)return Bi(o,i);mf(t,r.payload)}}).addCase(Hi,(t,r)=>{let{facetId:n,value:a}=r.payload,i=t[n];if(!i)return;let o=[...a.path,a.rawValue];Yi(i.request,o,i.initialNumberOfValues)}).addCase(Hr.fulfilled,(t,r)=>{Ki(t,r.payload.response.facets)}).addCase(ee.fulfilled,(t,r)=>{Ki(t,r.payload.response.facets)}).addCase(wt,(t,r)=>{Ht(t,r.payload)})});var gf={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function yf(e,t,r){let n=e.currentValues;for(let a of t){let i=n[0];(!i||a!==i.value)&&(i=Ji(a,r),n.length=0,n.push(i)),i.retrieveChildren=!1,i.state="idle",n=i.children}return n}function vf(e){return{...gf,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function Ji(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function Ki(e,t){t.forEach(r=>{var n;if(!bf(e,r))return;let a=r.facetId,i=(n=e[a])==null?void 0:n.request;if(!i)return;let o=wf(i,r);i.currentValues=o?[]:i.currentValues,i.preventAutoSelect=!1})}function mf(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=(r=e[n])==null?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&(i==null?void 0:i.state)!=="selected";)i=i.children[0];i.retrieveCount=a}}function bf(e,t){return t.facetId in e}function wf(e,t){let r=ht(e.currentValues).parents,n=ht(t.values).parents;return r.length!==n.length}M(Ga(),e=>{e.addCase(ee.fulfilled,(t,r)=>r.payload.response.facets.map(n=>n.facetId)).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOrder)!=null?a:t})});function Zi(e,t,r){let{facetId:n}=t;if(e[n])return;let a=!1,i={...no,...t},o=r();e[n]={options:i,isLoading:a,response:o,initialNumberOfValues:i.numberOfValues,requestId:""}}function Gi(e,t){let{facetId:r,...n}=t,a=e[r];!a||(a.options={...a.options,...n})}function Xi(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function eo(e,t){let r=e[t];!r||(r.isLoading=!1)}function to(e,t,r){let{facetId:n,response:a}=t,i=e[n];!i||i.requestId===r&&(i.isLoading=!1,i.response=a)}function Zr(e,t,r){let{facetId:n}=t,a=e[n];!a||(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=no.query)}function ro(e,t){Object.keys(e).forEach(r=>Zr(e,{facetId:r},t))}var no={captions:{},numberOfValues:10,query:""},Sf={facetId:W,value:new Y({values:{displayValue:le,rawValue:le,count:new U({required:!0,min:0})}})},Cf=m("facetSearch/register",e=>E(e,Kr)),ao=m("facetSearch/update",e=>E(e,Kr)),io=m("facetSearch/toggleSelectValue",e=>E(e,Sf));function Of(){return{}}var qf=e=>Ee("analytics/facet/search",Oe.Search,(t,r)=>{E(e,W);let n=Da(r),a=Oc(e,n);return t.logFacetSearch(a)})(),xf=async(e,t)=>{let{captions:r,query:n,numberOfValues:a}=t.facetSearchSet[e].options,{field:i,currentValues:o,filterFacetCount:s}=t.facetSet[e],u=(await He(t)).request,l=o.filter(f=>f.state!=="idle").map(f=>f.value),d=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,captions:r,numberOfValues:a,query:d,field:i,ignoreValues:l,searchContext:u,filterFacetCount:s,type:"specific"}},If=async(e,t)=>{let r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:a,query:i,numberOfValues:o}=r,{field:s,delimitingCharacter:u,basePath:l,filterFacetCount:d}=n,f=(await He(t)).request,p=Ef(n),S=p.length?[p]:[],x=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,basePath:l,captions:a,numberOfValues:o,query:x,field:s,delimitingCharacter:u,ignorePaths:S,searchContext:f,filterFacetCount:d,type:"hierarchical"}},Ef=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},ot=K("facetSearch/executeSearch",async(e,{dispatch:t,getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i=r(),o;a(e,$),jf(i,e)?o=await xf(e,i):o=await If(e,i);let s=await n.facetSearch(o);return t(qf(e)),{facetId:e,response:s}}),oo=m("facetSearch/clearResults",e=>E(e,{facetId:W})),jf=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;M(Of(),e=>{e.addCase(pf,(t,r)=>{let n=r.payload;Zi(t,n,Gr)}).addCase(ao,(t,r)=>{Gi(t,r.payload)}).addCase(ot.pending,(t,r)=>{let n=r.meta.arg;Xi(t,n,r.meta.requestId)}).addCase(ot.rejected,(t,r)=>{let n=r.meta.arg;eo(t,n)}).addCase(ot.fulfilled,(t,r)=>{to(t,r.payload,r.meta.requestId)}).addCase(oo,(t,{payload:{facetId:r}})=>{Zr(t,{facetId:r},Gr)}).addCase(ee.fulfilled,t=>{ro(t,Gr)})});function Gr(){return{moreValuesAvailable:!1,values:[]}}function Rf(){return{}}M(Rf(),e=>{e.addCase(Cf,(t,r)=>{let n=r.payload;Zi(t,n,Xr)}).addCase(ao,(t,r)=>{Gi(t,r.payload)}).addCase(ot.pending,(t,r)=>{let n=r.meta.arg;Xi(t,n,r.meta.requestId)}).addCase(ot.rejected,(t,r)=>{let n=r.meta.arg;eo(t,n)}).addCase(ot.fulfilled,(t,r)=>{to(t,r.payload,r.meta.requestId)}).addCase(oo,(t,{payload:r})=>{Zr(t,r,Xr)}).addCase(ee.fulfilled,t=>{ro(t,Xr)})});function Xr(){return{moreValuesAvailable:!1,values:[]}}var Yt=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Yt||{}),Af=(e=>(e.Ascending="asc",e.Descending="desc",e))(Af||{}),kf=()=>({by:"relevance"}),Tf=m("productlisting/setUrl",e=>E(e,{url:new V({required:!0,url:!0})})),Ff=m("productlisting/setAdditionalFields",e=>E(e,{additionalFields:new oe({required:!0,each:new V({required:!0,emptyAllowed:!1})})})),St=K("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProducts(await Pf(i));return ae(s)?(r(Me(s.error)),n(s.error)):{response:s.success}}),Pf=async e=>{var t,r,n;let a=Mf(e),i=await Ie();return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(t=e.productListing)==null?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...((r=e.productListing.additionalFields)==null?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&$f(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((n=e.sort)==null?void 0:n.by)||Yt.Relevance)!==Yt.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function $f(e){return e.debug}function Mf(e){var t;return bi(Lf(e),(t=e.facetOrder)!=null?t:[])}function Lf(e){return[...en(e.facetSet),...en(e.numericFacetSet),...en(e.dateFacetSet),...Vf(e.categoryFacetSet)]}function Vf(e){return Object.values(e||{}).map(t=>t.request)}function en(e={}){return Object.keys(e).map(t=>e[t])}M(Pr(),e=>{e.addCase(ji,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=_f(r.payload))}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(ye,(t,r)=>{let n=r.payload.f||{};Object.keys(t).forEach(a=>{let i=t[a],o=n[a]||[];i.currentValues=o.map(uo),i.preventAutoSelect=o.length>0,i.numberOfValues=Math.max(o.length,i.numberOfValues)})}).addCase(Ri,(t,r)=>{let{facetId:n,selection:a}=r.payload,i=t[n];if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(u=>u.value===a.value);if(!o){so(i,a);return}let s=o.state==="selected";o.state=s?"idle":"selected",i.freezeCurrentValues=!0}).addCase(Gd,(t,r)=>{let{facetId:n,freezeCurrentValues:a}=r.payload,i=t[n];!i||(i.freezeCurrentValues=a)}).addCase(Qt,(t,r)=>{let n=t[r.payload];Bt(n)}).addCase(vt,t=>{Object.keys(t).forEach(r=>{let n=t[r];Bt(n)})}).addCase(Ye,t=>{Object.keys(t).forEach(r=>{let n=t[r];Bt(n)})}).addCase(Ur,(t,r)=>Object.keys(t).forEach(n=>{t[n].preventAutoSelect=!r.payload.allow})).addCase(Jd,(t,r)=>{Jr(t,r.payload)}).addCase(Kd,(t,r)=>{let{facetId:n,numberOfValues:a}=r.payload;Bi(t[n],a)}).addCase(Zd,(t,r)=>{let{facetId:n,isFieldExpanded:a}=r.payload,i=t[n];!i||(i.isFieldExpanded=a)}).addCase(ee.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>tn(t[n.facetId],n))}).addCase(St.fulfilled,(t,r)=>{var n,a;(((a=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:a.results)||[]).forEach(i=>tn(t[i.facetId],i))}).addCase(Hr.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>tn(t[n.facetId],n))}).addCase(io,(t,r)=>{let{facetId:n,value:a}=r.payload,i=t[n];if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,u=s.find(d=>d.value===o);if(u){u.state="selected";return}let l=uo(o);so(i,l),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(wt,(t,r)=>{if(!(r.payload in t))return;let n=t[r.payload];Bt(n)})});function so(e,t){let{currentValues:r}=e,n=r.findIndex(s=>s.state==="idle"),a=n===-1?r.length:n,i=r.slice(0,a),o=r.slice(a+1);e.currentValues=[...i,t,...o],e.numberOfValues=e.currentValues.length}function tn(e,t){!e||(e.currentValues=t.values.map(zf),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var Df={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function _f(e){return{...Df,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function zf(e){let{value:t,state:r}=e;return{value:t,state:r}}function uo(e){return{value:e,state:"selected"}}var lo={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function co(e,t){let{facetId:r}=t;if(r in e)return;let n=yo(t);e[r]={...t,numberOfValues:n}}function fo(e,t,r){let n=e[t];!n||(n.currentValues=r,n.numberOfValues=yo(n))}function po(e,t,r){let n=e[t];if(!n)return;let a=rn(n.currentValues,r);if(!a)return;let i=a.state==="selected";a.state=i?"idle":"selected",n.preventAutoSelect=!0}function Le(e,t){let r=e[t];!r||r.currentValues.forEach(n=>n.state="idle")}function ho(e,t){Object.entries(e).forEach(([r,n])=>{let a=t[r]||[];n.currentValues.forEach(s=>{let u=!!rn(a,s);return s.state=u?"selected":"idle",s});let i=a.filter(s=>!rn(n.currentValues,s)),o=n.currentValues;o.push(...i),n.numberOfValues=Math.max(n.numberOfValues,o.length)})}function go(e,t,r){t.forEach(n=>{let a=n.facetId,i=e[a];if(!i)return;let o=r(n.values);i.currentValues=o,i.preventAutoSelect=!1})}function rn(e,t){let{start:r,end:n}=t;return e.find(a=>a.start===r&&a.end===n)}function yo(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}M(Tr(),e=>{e.addCase(Vi,(t,r)=>{let{payload:n}=r,a=Nf(n);co(t,a)}).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.dateFacetSet)!=null?a:t}).addCase(ye,(t,r)=>{let n=r.payload.df||{};ho(t,n)}).addCase(Di,(t,r)=>{let{facetId:n,selection:a}=r.payload;po(t,n,a)}).addCase(_i,(t,r)=>{let{facetId:n,values:a}=r.payload;fo(t,n,a)}).addCase(af,(t,r)=>{Le(t,r.payload)}).addCase(vt,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(Ye,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(nf,(t,r)=>{Jr(t,r.payload)}).addCase(ee.fulfilled,(t,r)=>{let n=r.payload.response.facets;go(t,n,Uf)}).addCase(wt,(t,r)=>{Le(t,r.payload)})});function Nf(e){return{...lo,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function Uf(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}M(Fr(),e=>{e.addCase(Ni,(t,r)=>{let{payload:n}=r,a=Qf(n);co(t,a)}).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.numericFacetSet)!=null?a:t}).addCase(ye,(t,r)=>{let n=r.payload.nf||{};ho(t,n)}).addCase(Ui,(t,r)=>{let{facetId:n,selection:a}=r.payload;po(t,n,a)}).addCase(Qi,(t,r)=>{let{facetId:n,values:a}=r.payload;fo(t,n,a)}).addCase(lf,(t,r)=>{Le(t,r.payload)}).addCase(vt,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(Ye,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(uf,(t,r)=>{Jr(t,r.payload)}).addCase(ee.fulfilled,(t,r)=>{let n=r.payload.response.facets;go(t,n,Bf)}).addCase(wt,(t,r)=>{Le(t,r.payload)})});function Qf(e){return{...lo,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Bf(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var Hf=["author","language","urihash","objecttype","collection","source","permanentid"],Yf=()=>({fieldsToInclude:Hf,fetchAllFields:!1,fieldsDescription:[]}),Wf=new oe({each:$,required:!0}),Jf=m("fields/registerFieldsToInclude",e=>E(e,Wf)),Kf=m("fields/fetchall/enable"),Zf=m("fields/fetchall/disable"),Gf=K("fields/description",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return ae(u)?n(u.error):u.success.fields}),Xf={collectionField:new V({emptyAllowed:!1,required:!1}),parentField:new V({emptyAllowed:!1,required:!1}),childField:new V({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new U({min:0,required:!1})},vo=m("folding/register",e=>E(e,Xf)),nn=K("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await zr(a),o=await n.search({...i,q:ep(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}=${e}`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100});return ae(o)?r(o.error):{collectionId:e,results:o.success.results,rootResult:a.folding.collections[e].result}});function ep(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}Ee("analytics/folding/showLess",Oe.Custom,e=>e.logShowLessFoldedResults());var mo=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});M(Yf(),e=>e.addCase(Jf,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Kf,t=>{t.fetchAllFields=!0}).addCase(Zf,t=>{t.fetchAllFields=!1}).addCase(Gf.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(vo,(t,{payload:r})=>{var n,a,i;let o=mo().fields;t.fieldsToInclude.push((n=r.collectionField)!=null?n:o.collection,(a=r.parentField)!=null?a:o.parent,(i=r.childField)!=null?i:o.child)}));function tp(e,t){return e.raw[t.collection]}function an(e,t){return e.raw[t.parent]}function Ct(e,t){let r=e.raw[t.child];return Yc(r)?r[0]:r}function rp(e,t){return(e||t)!==void 0&&e===t}function bo(e,t,r,n=[]){let a=Ct(e,r);return a?n.indexOf(a)!==-1?[]:t.filter(i=>{let o=Ct(i,r)===Ct(e,r);return an(i,r)===a&&!o}).map(i=>({result:i,children:bo(i,t,r,[...n,a])})):[]}function np(e,t){return e.find(r=>{let n=an(r,t)===void 0,a=rp(an(r,t),Ct(r,t));return n||a})}function wo(e){return e.parentResult?wo(e.parentResult):e}function ap(e,t,r){var n;let a=Kc(e),i=(n=r??np(a,t))!=null?n:wo(e);return{result:i,children:bo(i,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function on(e,t,r){let n={};return e.forEach(a=>{let i=tp(a,t);!i||!Ct(a,t)&&!a.parentResult||(n[i]=ap(a,t,r))}),n}function So(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}M(mo(),e=>e.addCase(ee.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?on(r.response.results,t.fields):{}}).addCase(Ut.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...on(r.response.results,t.fields)}:{}}).addCase(vo,(t,{payload:r})=>{var n,a,i,o;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(n=r.collectionField)!=null?n:t.fields.collection,parent:(a=r.parentField)!=null?a:t.fields.parent,child:(i=r.childField)!=null?i:t.fields.child},filterFieldRange:(o=r.numberOfFoldedResults)!=null?o:t.filterFieldRange}}).addCase(nn.pending,(t,{meta:r})=>{let n=r.arg;So(t,n).isLoadingMoreResults=!0}).addCase(nn.rejected,(t,{meta:r})=>{let n=r.arg;So(t,n).isLoadingMoreResults=!1}).addCase(nn.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:a}})=>{let i=on(n,t.fields,a);if(!i||!i[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=i[r],t.collections[r].moreResultsAvailable=!1}));var ip=ge(bs());function op(e,t,r=(n,a)=>n===a){return e.length===t.length&&e.findIndex((n,a)=>!r(t[a],n))===-1}(0,ip.createCustomEqual)(e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length!==r.length?!1:t.every(n=>r.findIndex(a=>e(n,a))!==-1):e(t,r)),M(od(),e=>{e.addCase(et,(t,r)=>sp(t,r.payload)?void 0:r.payload)});var sp=(e,t)=>up(e.context,t.context)&&lp(e.dictionaryFieldContext,t.dictionaryFieldContext)&&gp(e.advancedSearchQueries,t.advancedSearchQueries)&&cp(e.tabSet,t.tabSet)&&dp(e.staticFilterSet,t.staticFilterSet)&&sn(e.facetSet,t.facetSet)&&sn(e.dateFacetSet,t.dateFacetSet)&&sn(e.numericFacetSet,t.numericFacetSet)&&fp(e.categoryFacetSet,t.categoryFacetSet)&&pp(e.pagination,t.pagination)&&hp(e.query,t.query)&&yp(e,t)&&vp(e.pipeline,t.pipeline)&&mp(e.searchHub,t.searchHub)&&bp(e.facetOrder,t.facetOrder)&&wp(e.debug,t.debug),up=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),lp=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),cp=(e,t)=>{let r=Co(e),n=Co(t);return(r==null?void 0:r.id)===(n==null?void 0:n.id)},Co=e=>Object.values(e).find(t=>t.isActive),dp=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=Oo(e[r]),i=Oo(n);if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},Oo=e=>e.values.filter(t=>t.state!=="idle"),sn=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=e[r].currentValues.filter(o=>o.state==="selected"),i=n.currentValues.filter(o=>o.state==="selected");if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},fp=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let i=ht((r=e[n])==null?void 0:r.request.currentValues).parents.map(({value:s})=>s),o=ht(a==null?void 0:a.request.currentValues).parents.map(({value:s})=>s);if(JSON.stringify(i)!==JSON.stringify(o))return!1}return!0},pp=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,hp=(e,t)=>JSON.stringify(e)===JSON.stringify(t),gp=(e,t)=>JSON.stringify(e)===JSON.stringify(t),yp=(e,t)=>e.sortCriteria===t.sortCriteria,vp=(e,t)=>e===t,mp=(e,t)=>e===t,bp=(e,t)=>op(e,t),wp=(e,t)=>e===t,Sp=1,Cp=5e3;M(Dr(),e=>{e.addCase(Od,(t,r)=>{let n=un(t),a=r.payload;t.defaultNumberOfResults=t.numberOfResults=a,t.firstResult=Ot(n,a)}).addCase(qd,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(xd,(t,r)=>{let n=r.payload;t.firstResult=Ot(n,t.numberOfResults)}).addCase(mi,(t,r)=>{let n=r.payload;t.firstResult=Ot(n,t.numberOfResults)}).addCase(Ed,t=>{let r=un(t),n=Math.max(r-1,Sp);t.firstResult=Ot(n,t.numberOfResults)}).addCase(Id,t=>{let r=un(t),n=Op(t),a=Math.min(r+1,n);t.firstResult=Ot(a,t.numberOfResults)}).addCase(ce.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(ye,(t,r)=>{var n,a;t.firstResult=(n=r.payload.firstResult)!=null?n:t.firstResult,t.numberOfResults=(a=r.payload.numberOfResults)!=null?a:t.defaultNumberOfResults}).addCase(ee.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(St.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.pagination.totalCount}).addCase(Qt,t=>{be(t)}).addCase(Ri,t=>{be(t)}).addCase(Ei,t=>{be(t)}).addCase(Ii,t=>{be(t)}).addCase(Hi,t=>{be(t)}).addCase(Di,t=>{be(t)}).addCase(Ui,t=>{be(t)}).addCase(vt,t=>{be(t)}).addCase(Ye,t=>{be(t)}).addCase(_i,t=>{be(t)}).addCase(Qi,t=>{be(t)}).addCase(io,t=>{be(t)})});function be(e){e.firstResult=Dr().firstResult}function un(e){let{firstResult:t,numberOfResults:r}=e;return qp(t,r)}function Op(e){let{totalCountFiltered:t,numberOfResults:r}=e;return xp(t,r)}function Ot(e,t){return(e-1)*t}function qp(e,t){return e/t+1}function xp(e,t){let r=Math.min(e,Cp);return Math.ceil(r/t)}var Ip=m("pipeline/set",e=>E(e,new V({required:!0,emptyAllowed:!0})));M(Ya(),e=>{e.addCase(Ip,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.pipeline)!=null?a:t}).addCase(Ft,(t,r)=>r.payload.pipeline||t)}),M(Va(),e=>{e.addCase(Tf,(t,r)=>{t.url=r.payload.url}).addCase(Ff,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(St.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(St.fulfilled,(t,r)=>{t.error=null,t.facets=r.payload.response.facets,t.products=r.payload.response.products,t.responseId=r.payload.response.responseId,t.isLoading=!1}).addCase(St.pending,t=>{t.isLoading=!0})});var Ep=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"],qo=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}),jp=class extends Ar{constructor(e){super(e);this.state=e,this.initialState=qo()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.state.productRecommendations)==null?void 0:e.searchUid)||this.initialState.searchUid}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var e;return((e=this.state.productRecommendations)==null?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return((e=this.state.productRecommendations)==null?void 0:e.recommendations.length)||this.initialState.recommendations.length}},Rp=Ee("analytics/productrecommendations/load",Oe.Search,e=>e.logRecommendationInterfaceLoad(),e=>new jp(e));function Ap(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var xo=m("productrecommendations/setId",e=>E(e,{id:$})),ln=m("productrecommendations/setSku",e=>E(e,{skus:new oe({required:!0,min:1,each:te})})),kp=m("productrecommendations/setBrand",e=>E(e,{brand:new V({required:!0,emptyAllowed:!0})})),Tp=m("productrecommendations/setCategory",e=>E(e,{category:new V({required:!0,emptyAllowed:!0})})),Io=m("productrecommendations/setAdditionalFields",e=>E(e,{additionalFields:new oe({required:!0,each:te})})),Eo=m("productrecommendations/setMaxNumberOfRecommendations",e=>E(e,{number:new U({required:!0,max:50,min:1})})),qt=K("productrecommendations/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=new Date().getTime(),o=await n.productRecommendations(await Fp(a)),s=new Date().getTime()-i;if(ae(o))return r(o.error);let u=a.productRecommendations.additionalFields||[];return{recommendations:o.success.results.map(l=>jo(l,{additionalFields:u})),analyticsAction:Rp(),searchUid:o.success.searchUid,duration:s}}),jo=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,a=e.raw.ec_in_stock,i={permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:a===void 0?void 0:a.toLowerCase()==="yes"||a.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce((o,s)=>({...o,[s]:e.raw[s]}),{}),childResults:[],totalNumberOfChildResults:0};return Ap(e)&&(i.childResults=e.childResults.map(o=>jo(o,{additionalFields:t})),i.totalNumberOfChildResults=e.totalNumberOfChildResults),i},Fp=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Ie()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Ep,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?at.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}}),Pp=M(qo(),e=>{e.addCase(xo,(t,r)=>{t.id=r.payload.id}).addCase(ln,(t,r)=>{t.skus=r.payload.skus}).addCase(kp,(t,r)=>{t.filter.brand=r.payload.brand}).addCase(Tp,(t,r)=>{t.filter.category=r.payload.category}).addCase(Eo,(t,r)=>{t.maxNumberOfRecommendations=r.payload.number}).addCase(Io,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(qt.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(qt.fulfilled,(t,r)=>{t.error=null,t.searchUid=r.payload.searchUid,t.recommendations=r.payload.recommendations,t.isLoading=!1}).addCase(qt.pending,t=>{t.isLoading=!0})}),Ro={id:$,query:le},$p=m("querySet/register",e=>E(e,Ro)),Ao=m("querySet/update",e=>E(e,Ro)),xt={id:$},Mp=m("querySuggest/register",e=>E(e,{...xt,q:new V,count:new U({min:0})})),Lp=m("querySuggest/unregister",e=>E(e,xt)),cn=m("querySuggest/selectSuggestion",e=>E(e,{...xt,expression:le})),Vp=m("querySuggest/clear",e=>E(e,xt)),dn=K("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,xt);let i=e.id,o=await Dp(i,t()),s=await n.querySuggest(o);return ae(s)?r(s.error):{id:i,q:o.q,...s.success}}),Dp=async(e,t)=>{var r;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:(r=t.querySet)==null?void 0:r[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?at.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await Ie(),...t.configuration.analytics.enabled&&await Dt(t.configuration.analytics)}}};M(ei(),e=>{e.addCase($p,(t,r)=>{let{id:n,query:a}=r.payload;n in t||(t[n]=a)}).addCase(Ao,(t,r)=>{let{id:n,query:a}=r.payload;fn(t,n,a)}).addCase(cn,(t,r)=>{let{id:n,expression:a}=r.payload;fn(t,n,a)}).addCase(ee.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;ko(t,n)}).addCase(ye,(t,r)=>{re(r.payload.q)||ko(t,r.payload.q)}).addCase(ce.fulfilled,(t,r)=>{if(r.payload)for(let[n,a]of Object.entries(r.payload.querySet))fn(t,n,a)})});function ko(e,t){Object.keys(e).forEach(r=>e[r]=t)}var fn=(e,t,r)=>{t in e&&(e[t]=r)},_p=()=>({});M(_p(),e=>e.addCase(Mp,(t,r)=>{let n=r.payload.id;n in t||(t[n]=zp(r.payload))}).addCase(Lp,(t,r)=>{delete t[r.payload.id]}).addCase(dn.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.currentRequestId=r.meta.requestId,n.isLoading=!0)}).addCase(dn.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:a}=r.payload;a&&n.partialQueries.push(a.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(dn.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.error=r.payload||null,n.isLoading=!1)}).addCase(Ao,(t,r)=>{let{id:n,query:a}=r.payload;n in t&&To(t[n],a)}).addCase(Vp,(t,r)=>{let n=t[r.payload.id];!n||(n.responseId="",n.completions=[],n.partialQueries=[])}).addCase(cn,(t,r)=>{let{id:n,expression:a}=r.payload,i=t[n];!i||(i.q=a)}).addCase(ye,(t,r)=>{re(r.payload.q)||Fo(t,r.payload.q)}).addCase(ee.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Fo(t,n)}));function To(e,t){e.q=t}function Fo(e,t){Object.keys(e).forEach(r=>To(e[r],t))}function zp(e){return{id:"",completions:[],responseId:"",count:5,q:"",currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}M(nt(),e=>e.addCase(Vr,(t,r)=>({...t,...r.payload})).addCase(Mr,(t,r)=>{t.q=r.payload}).addCase(cn,(t,r)=>{t.q=r.payload.expression}).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.query)!=null?a:t}).addCase(ye,(t,r)=>{var n,a;t.q=(n=r.payload.q)!=null?n:t.q,t.enableQuerySyntax=(a=r.payload.enableQuerySyntax)!=null?a:t.enableQuerySyntax}));var Np=()=>new Y({values:{documentId:new Y({values:{contentIdKey:$,contentIdValue:$}})},options:{required:!0}}),Up=()=>new Y({values:{questionAnswerId:$},options:{required:!0}});function Po(e){return!("contentIdKey"in e||"contentIdValue"in e)}function $o(e){return Po(e)?E(e,Up()):E(e,Np())}var Qp=m("smartSnippet/expand"),Bp=m("smartSnippet/collapse"),Hp=m("smartSnippet/like"),Yp=m("smartSnippet/dislike"),Wp=m("smartSnippet/feedbackModal/open"),Jp=m("smartSnippet/feedbackModal/close"),Kp=m("smartSnippet/related/expand",e=>$o(e)),Zp=m("smartSnippet/related/collapse",e=>$o(e)),Mo=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]}),Lo=(e,t)=>e.findIndex(r=>Po(t)?r.questionAnswerId===t.questionAnswerId:r.contentIdValue===t.contentIdValue&&r.contentIdKey===t.contentIdKey);function Vo({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Jc(JSON.stringify({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n}))}function Gp(e,t){let r=Vo(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}M(Mo(),e=>e.addCase(Qp,t=>{t.expanded=!0}).addCase(Bp,t=>{t.expanded=!1}).addCase(Hp,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Yp,t=>{t.liked=!1,t.disliked=!0}).addCase(Wp,t=>{t.feedbackModalOpen=!0}).addCase(Jp,t=>{t.feedbackModalOpen=!1}).addCase(ee.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((i,o)=>Gp(i,t.relatedQuestions[o])),a=Vo(r.payload.response.questionAnswer);return t.questionAnswerId===a?{...t,relatedQuestions:n}:{...Mo(),relatedQuestions:n,questionAnswerId:a}}).addCase(Kp,(t,r)=>{let n=Lo(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(Zp,(t,r)=>{let n=Lo(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)}));var Xp={results:new oe({required:!0,each:new Y({values:Lr})}),maxLength:new U({required:!0,min:1,default:10})},eh=m("recentResults/registerRecentResults",e=>E(e,Xp)),th=m("recentResults/pushRecentResult",e=>(td(e),{payload:e})),rh=m("recentResults/clearRecentResults");function nh(){return{results:[],maxLength:10}}M(nh(),e=>{e.addCase(eh,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(rh,t=>{t.results=[]}).addCase(th,(t,r)=>{let n=r.payload;t.results=t.results.filter(i=>i.uniqueId!==n.uniqueId);let a=t.results.slice(0,t.maxLength-1);t.results=[n,...a]})});var ah={queries:new oe({required:!0,each:new V({emptyAllowed:!1})}),maxLength:new U({required:!0,min:1,default:10})},ih=m("recentQueries/registerRecentQueries",e=>E(e,ah)),oh=m("recentQueries/clearRecentQueries");function sh(){return{queries:[],maxLength:10}}M(sh(),e=>{e.addCase(ih,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(oh,t=>{t.queries=[]}).addCase(ee.fulfilled,(t,r)=>{let n=r.payload.queryExecuted.trim();if(!n.length)return;t.queries=t.queries.filter(i=>i!==n);let a=t.queries.slice(0,t.maxLength-1);t.queries=[n,...a]})});var Wt=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""}),uh=class extends Ar{constructor(e){super(e);this.state=e}getPipeline(){return this.state.pipeline||"default"}getSearchEventRequestPayload(){return{queryText:nt().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.state.recommendation)==null?void 0:e.searchUid)||Wt().searchUid}get responseTime(){var e;return((e=this.state.recommendation)==null?void 0:e.duration)||Wt().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.recommendation)==null?void 0:e.recommendations.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.recommendation)==null?void 0:e.recommendations.length)||Wt().recommendations.length}},lh=Ee("analytics/recommendation/update",Oe.Search,e=>e.logRecommendationInterfaceLoad(),e=>new uh(e)),ch=m("recommendation/set",e=>E(e,{id:$})),Jt=K("recommendation/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=new Date().getTime(),o=await n.recommendations(await dh(a)),s=new Date().getTime()-i;return ae(o)?r(o.error):{recommendations:o.success.results,analyticsAction:lh(),duration:s,searchUid:o.success.searchUid}}),dh=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?at.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await Ie()},...e.configuration.analytics.enabled&&await Dt(e.configuration.analytics)});M(Wt(),e=>{e.addCase(ch,(t,r)=>{t.id=r.payload.id}).addCase(Jt.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Jt.fulfilled,(t,r)=>{t.error=null,t.recommendations=r.payload.recommendations,t.duration=r.payload.duration,t.isLoading=!1,t.searchUid=r.payload.searchUid}).addCase(Jt.pending,t=>{t.isLoading=!0})});function fh(e){return e.type==="redirect"}var Do=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(fh);return e.length?e[0].content:null}},ph=Ee("analytics/redirection",Oe.Search,(e,t)=>{var r;if((r=t.redirection)==null?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})}),hh=m("standaloneSearchBox/register",e=>E(e,{id:$,redirectionUrl:$})),gh=m("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>E(e,{id:$})),yh=m("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),pn=K("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new V({emptyAllowed:!1})});let o=await _o(r()),s=await a.plan(o);if(ae(s))return n(s.error);let{redirectionUrl:u}=new Do(s.success);return u&&t(vh(u)),u||""}),vh=e=>Ee("analytics/standaloneSearchBox/redirect",Oe.Custom,t=>t.logTriggerRedirect({redirectedTo:e}))(),_o=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Ie()},...e.configuration.analytics.enabled&&await Dt(e.configuration.analytics)}),mh=K("redirection/check",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{defaultRedirectionUrl:new V({emptyAllowed:!1})});let o=await a.plan(await _o(r()));if(ae(o))return n(o.error);let s=new Do(o.success).redirectionUrl;return s&&t(ph()),s||e.defaultRedirectionUrl}),bh=()=>({redirectTo:null});M(bh(),e=>e.addCase(mh.fulfilled,(t,r)=>{t.redirectTo=r.payload}));async function wh(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=((r=e.query)==null?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await Ie()},q:s,...t,requestedOutputSize:t.requestedOutputSize||0}}var zo=K("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await wh(a,e),o=await t.apiClient.html(i);return ae(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}});function Sh(){return{uniqueId:"",content:"",isLoading:!1}}M(Sh(),e=>{e.addCase(zo.pending,t=>{t.isLoading=!0}).addCase(zo.fulfilled,(t,r)=>{let{content:n,uniqueId:a}=r.payload;t.content=n,t.uniqueId=a,t.isLoading=!1})});var hn=m("searchHub/set",e=>E(e,new V({required:!0,emptyAllowed:!0}))),Ch=M(Rr(),e=>{e.addCase(hn,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.searchHub)!=null?a:t}).addCase(Ft,(t,r)=>r.payload.searchHub||t)});function gn(e,t){var r;let n=(r=t.payload)!=null?r:null;n&&(e.response=_e().response,e.results=[]),e.error=n,e.isLoading=!1}function yn(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function vn(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}M(_e(),e=>{e.addCase(ee.rejected,(t,r)=>gn(t,r)),e.addCase(Ut.rejected,(t,r)=>gn(t,r)),e.addCase(Br.rejected,(t,r)=>gn(t,r)),e.addCase(ee.fulfilled,(t,r)=>{yn(t,r),t.results=r.payload.response.results,t.searchResponseId=r.payload.response.searchUid}),e.addCase(Ut.fulfilled,(t,r)=>{yn(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(Br.fulfilled,(t,r)=>{yn(t,r),t.results=r.payload.response.results}),e.addCase(Hr.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(ee.pending,vn),e.addCase(Ut.pending,vn),e.addCase(Br.pending,vn)});var No={by:new _n({enum:ti,required:!0})},Oh=m("sortCriteria/register",e=>Uo(e)),qh=m("sortCriteria/update",e=>Uo(e)),Uo=e=>Dn(e)?(e.forEach(t=>E(t,No)),{payload:e}):E(e,No);M(ri(),e=>{e.addCase(Oh,(t,r)=>_t(r.payload)).addCase(qh,(t,r)=>_t(r.payload)).addCase(ce.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.sortCriteria)!=null?a:t}).addCase(ye,(t,r)=>{var n;return(n=r.payload.sortCriteria)!=null?n:t})});function xh(){return{}}M(xh(),e=>e.addCase(hh,(t,r)=>{let{id:n,redirectionUrl:a}=r.payload;n in t||(t[n]=Ih(a))}).addCase(pn.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!0)}).addCase(pn.fulfilled,(t,r)=>{let n=r.payload,a=t[r.meta.arg.id];!a||(a.redirectTo=n||a.defaultRedirectionUrl,a.isLoading=!1)}).addCase(pn.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!1)}).addCase(gh,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="searchFromLink")}).addCase(yh,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function Ih(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Eh=()=>({redirectTo:"",query:"",execute:{functionName:"",params:[]},executions:[],notification:"",notifications:[]});M(Eh(),e=>e.addCase(ee.fulfilled,(t,r)=>{var n,a,i,o;let s=[],u=[],l=[],d=[];r.payload.response.triggers.forEach(f=>{switch(f.type){case"redirect":s.push(f.content);break;case"query":u.push(f.content);break;case"execute":l.push({functionName:f.content.name,params:f.content.params});break;case"notify":d.push(f.content);break}}),t.redirectTo=(n=s[0])!=null?n:"",t.query=(a=u[0])!=null?a:"",t.execute=(i=l[0])!=null?i:{functionName:"",params:[]},t.executions=l,t.notification=(o=d[0])!=null?o:"",t.notifications=d}));function jh(){return kf()}var Rh={by:new _n({enum:Yt,required:!0})},Ah=m("sort/register",e=>Qo(e)),kh=m("sort/update",e=>Qo(e)),Qo=e=>E(e,Rh);M(jh(),e=>{e.addCase(Ah,(t,r)=>r.payload).addCase(kh,(t,r)=>r.payload)});var Th=m("dictionaryFieldContext/set",e=>{let t=new Y({options:{required:!0}}),r=E(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new oe({each:le}),i=E(n,a).error;return i?{payload:e,error:i}:{payload:e}}),Fh=m("dictionaryFieldContext/add",e=>{let t=new Y({options:{required:!0},values:{field:le,key:le}});return E(e,t)}),Ph=m("dictionaryFieldContext/remove",e=>E(e,le));M(Ka(),e=>{e.addCase(Th,(t,r)=>{t.contextValues=r.payload}).addCase(Fh,(t,r)=>{let{field:n,key:a}=r.payload;t.contextValues[n]=a}).addCase(Ph,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})}),M(ai(),e=>{e.addCase(Ku,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]={...n,isActive:!1})}).addCase(ga,(t,r)=>{let n=r.payload;Bo(t,n)}).addCase(ye,(t,r)=>{let n=r.payload.tab||"";Bo(t,n)})});function Bo(e,t){t in e&&Object.keys(e).forEach(r=>{e[r].isActive=r===t})}var mn=$,Ho=new Y({options:{required:!0},values:{caption:le,expression:le,state:new V({constrainTo:["idle","selected"]})}}),$h=new oe({required:!0,each:Ho}),Mh=m("staticFilter/register",e=>E(e,{id:mn,values:$h})),Lh=m("staticFilter/toggleSelect",e=>E(e,{id:mn,value:Ho})),Vh=m("staticFilter/deselectAllFilterValues",e=>E(e,mn));M(ni(),e=>e.addCase(Mh,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]=n)}).addCase(Lh,(t,r)=>{let{id:n,value:a}=r.payload,i=t[n];if(!i)return;let o=i.values.find(u=>u.caption===a.caption);if(!o)return;let s=o.state==="selected";o.state=s?"idle":"selected"}).addCase(Vh,(t,r)=>{let n=r.payload,a=t[n];!a||a.values.forEach(i=>i.state="idle")}).addCase(Ye,t=>{Object.values(t).forEach(r=>{r.values.forEach(n=>n.state="idle")})}).addCase(ye,(t,r)=>{let n=r.payload.sf||{};Object.entries(t).forEach(([a,i])=>{let o=n[a]||[];i.values.forEach(s=>{s.state=o.includes(s.caption)?"selected":"idle"})})}));var Dh=m("caseAssistConfiguration/set",e=>E(e,{caseAssistId:$,locale:te})),_h=()=>({caseAssistId:"",locale:"en-US"});M(_h(),e=>{e.addCase(Dh,(t,r)=>{t.caseAssistId=r.payload.caseAssistId,t.locale=r.payload.locale})});var zh=m("caseAssist/caseInput/update",e=>E(e,{fieldName:$,fieldValue:le})),Nh=()=>({});M(Nh(),e=>{e.addCase(zh,(t,r)=>{t[r.payload.fieldName]={value:r.payload.fieldValue}})});var Yo=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>({...t,[r]:e[r].value}),{}),Uh=m("caseAssist/caseField/register",e=>E(e,{fieldName:$,fieldValue:le})),Qh=m("caseAssist/caseField/update",e=>E(e,{fieldName:$,fieldValue:le})),bn=K("caseAssist/classifications/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getCaseClassifications(await Bh(a));return ae(i)?r(i.error):{response:i.success}}),Bh=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Ie()},fields:e.caseInput,context:e.caseField?Yo(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),Hh=()=>({status:{loading:!1,error:null,lastResponseId:""},fields:{}});M(Hh(),e=>{e.addCase(Uh,(t,r)=>{let{fieldName:n,fieldValue:a}=r.payload;t.fields[n]={value:a,suggestions:[]}}).addCase(Qh,(t,r)=>{let{fieldName:n,fieldValue:a}=r.payload;t.fields[n].value=a}).addCase(bn.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(bn.fulfilled,(t,r)=>{let n={value:"",suggestions:[]};Object.entries(r.payload.response.fields).forEach(([a,i])=>{t.fields[a]||(t.fields[a]={...n}),t.fields[a].suggestions=i.predictions}),t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(bn.pending,t=>{t.status.loading=!0})});var wn=K("caseAssist/documentSuggestions/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getDocumentSuggestions(await Yh(a));return ae(i)?r(i.error):{response:i.success}}),Yh=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Ie()},fields:e.caseInput,context:e.caseField?Yo(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),Wh=()=>({status:{loading:!1,error:null,lastResponseId:""},documents:[]});M(Wh(),e=>{e.addCase(wn.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(wn.fulfilled,(t,r)=>{t.documents=r.payload.response.documents,t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(wn.pending,t=>{t.status.loading=!0})});var Jh=m("excerptLength/set",e=>E(e,new U({min:0,required:!0})));function Kh(){return{length:void 0}}M(Kh(),e=>{e.addCase(Jh,(t,r)=>{t.length=r.payload})}),M(Xa(),e=>{e.addCase($d,(t,r)=>{let{id:n}=r.payload;t[n]||(t[n]={q:"",cache:{}})}),e.addCase(wi,(t,r)=>{let{q:n,id:a}=r.payload;!n||(t[a].q=n)}),e.addCase(Md,(t,r)=>{let{id:n}=r.payload;Object.entries(t[n].cache).forEach(([a,i])=>{nd(i)&&delete t[n].cache[a]})}),e.addCase(Yr.pending,(t,r)=>{if(!Kt(t,r.meta))Zh(t,r.meta);else{let n=Kt(t,r.meta);n.isLoading=!0,n.error=null}}),e.addCase(Yr.fulfilled,(t,r)=>{let{results:n}=r.payload,{cacheTimeout:a}=r.meta.arg,i=Kt(t,r.meta);i.isLoading=!1,i.error=null,i.results=n,i.expiresAt=a?a+Date.now():0}),e.addCase(Yr.rejected,(t,r)=>{let n=Kt(t,r.meta);n.error=r.error||null,n.isLoading=!1})});var Zh=(e,t)=>{let{q:r,id:n}=t.arg;e[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0}},Kt=(e,t)=>{let{q:r,id:n}=t.arg;return e[n].cache[r]||null},Gh=m("insightConfiguration/set",e=>E(e,{insightId:$})),Xh=()=>({insightId:""});M(Xh(),e=>{e.addCase(Gh,(t,r)=>{t.insightId=r.payload.insightId})});var Sn=K("insight/interface/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await a.getInterface(eg(i));return ae(o)?n(o.error):(r(hn(o.success.searchHub)),{response:o.success})}),eg=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,insightId:e.insightConfiguration.insightId}),tg=()=>({loading:!1,config:void 0});M(tg(),e=>{e.addCase(Sn.pending,t=>{t.loading=!0,t.error=void 0}).addCase(Sn.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Sn.fulfilled,(t,r)=>{t.loading=!1,t.error=void 0;let{searchHub:n,...a}=r.payload.response;t.config=a})});var Wo=Mc,rg=Ch,ng=Uc,Jo=Pp;function ag(e,t,r){var n,a,i;t===void 0&&(t=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,s=(a=r.callback)!=null&&a,u=r.maxWait,l=Date.now(),d=[];function f(){if(u!==void 0){var S=Date.now()-l;if(S+t>=u)return u-S}return t}var p=function(){var S=[].slice.call(arguments),x=this;return new Promise(function(c,h){var y=o&&i===void 0;if(i!==void 0&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,l=Date.now(),!o){var T=e.apply(x,S);s&&s(T),d.forEach(function(N){return(0,N.resolve)(T)}),d=[]}},f()),y){var R=e.apply(x,S);return s&&s(R),c(R)}d.push({resolve:c,reject:h})})};return p.cancel=function(S){i!==void 0&&clearTimeout(i),d.forEach(function(x){return(0,x.reject)(S)}),d=[]},p}function ig(e,t){let r=0,n=ag(()=>r=0,500);return a=>i=>async o=>{if(typeof o!="function")return i(o);let s=await i(o);if(!og(s))return s;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let u=await sg(t);a.dispatch(Cr({accessToken:u})),a.dispatch(o)}}function og(e){var t;return((t=e.error)==null?void 0:t.name)===new An().name}async function sg(e){try{return await e()}catch{return""}}var ug=e=>t=>r=>{var n,a;let i=(n=r.payload)==null?void 0:n.analyticsAction;i!==void 0&&((a=r.payload)==null||delete a.analyticsAction);let o=t(r);return r.type===ee.fulfilled.type&&i===void 0&&console.error("No analytics action associated with search:",r),r.type===Jt.fulfilled&&i===void 0&&console.error("No analytics action associated with recommendation:",r),r.type===qt.fulfilled&&i===void 0&&console.error("No analytics action associated with product recommendation:",r),i!==void 0&&e.dispatch(i),o},lg={configuration:Wo,version:ng};function cg(e,t){let r=dg(e,t),{accessToken:n,organizationId:a,platformUrl:i,analytics:o}=e.configuration;if(r.dispatch(Cr({accessToken:n,organizationId:a,platformUrl:i})),o){let{analyticsClientMiddleware:s,...u}=o;r.dispatch(fa(u))}return r}function dg(e,t){let{reducers:r}=e,n=zu({...lg,...r});e.crossReducer&&n.addCrossReducer(e.crossReducer);let a=t.logger,i=fg(e,t,n);return{addReducers(o){n.containsAll(o)||(n.add(o),i.replaceReducer(n.combinedReducer))},dispatch:i.dispatch,subscribe:i.subscribe,enableAnalytics(){i.dispatch(ha())},disableAnalytics(){i.dispatch(pa())},get state(){return i.getState()},logger:a,store:i}}function fg(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=pg(e,t.logger);return Qu({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}function pg(e,t){let{renewAccessToken:r}=e.configuration;return[ig(t,r),Nu(t),ug].concat(e.middlewares||[])}var hg=ge(Ss());function gg(e){return(0,hg.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter},browser:{transmit:{send:(e==null?void 0:e.browserPostLogHook)||(()=>{})}}})}function yg(e,t){let r=vg(e),n=Be,a=mg(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:a,logger:t}}function vg(e){let{analytics:t}=e,r=(n,a)=>a;return(t==null?void 0:t.analyticsClientMiddleware)||r}function mg(e){return e.preprocessRequest||Rn}var bg={organizationId:$,accessToken:$,platformUrl:new V({required:!1,emptyAllowed:!1}),name:new V({required:!1,emptyAllowed:!1}),analytics:new Y({options:{required:!1},values:{enabled:new Z({required:!1}),originContext:new V({required:!1}),originLevel2:new V({required:!1}),originLevel3:new V({required:!1})}})};function wg(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var Sg=new We({...bg,searchHub:te,locale:te,timezone:te});function Cg(){return{...wg(),searchHub:"default"}}var Og={searchHub:rg,productRecommendations:Jo};function qg(e){let t=gg(e.loggerOptions);xg(e.configuration,t);let r=Ig(e.configuration,t),n={...yg(e.configuration,t),apiClient:r,searchAPIClient:r},a={...e,reducers:Og},i=cg(a,n),{searchHub:o,timezone:s,locale:u}=e.configuration;return i.dispatch(Ft({timezone:s,locale:u})),re(o)||i.dispatch(hn(o)),{...i,get state(){return i.state}}}function xg(e,t){try{Sg.validate(e)}catch(r){throw t.error("Product Recommendation engine configuration error",r),r}}function Ig(e,t){return new Hs({logger:t,preprocessRequest:e.preprocessRequest||Rn,postprocessSearchResponseMiddleware:Zs,postprocessFacetSearchResponseMiddleware:Gs,postprocessQuerySuggestResponseMiddleware:Xs})}function Eg(e){let t,r=new Map,n=()=>r.size===0,a=i=>{try{let o=JSON.stringify(i),s=t!==o;return t=o,s}catch(o){return console.warn('Could not detect if state has changed, check the controller "get state method"',o),!0}};return{subscribe(i){i();let o=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{a(this.state)&&r.forEach(u=>u())})),r.set(o,i),()=>{r.delete(o),n()&&s&&s()}},get state(){return{}}}}var Cn={additionalFields:new oe({required:!1,each:te}),skus:new oe({required:!1,each:te}),maxNumberOfRecommendations:new U({required:!1,max:50,min:1,default:5})},jg=new We({id:$,...Cn}),Rg=(e,t={})=>{!Ag(e);let r=Eg(e),{dispatch:n}=e,a=()=>e.state,i=ca(e,jg,t.options,"buildBaseProductRecommendationsList");return n(xo({id:i.id})),n(Eo({number:i.maxNumberOfRecommendations})),i.additionalFields&&n(Io({additionalFields:i.additionalFields})),i.skus&&n(ln({skus:i.skus})),{...r,setSkus(o){n(ln({skus:o}))},refresh(){n(qt())},get state(){let{skus:o,maxNumberOfRecommendations:s,recommendations:u,error:l,isLoading:d}=a().productRecommendations;return{skus:o,maxNumberOfRecommendations:s,recommendations:u,error:l,isLoading:d}}}};function Ag(e){return e.addReducers({productRecommendations:Jo,configuration:Wo}),!0}var kg=new We({sku:new V({required:!0,emptyAllowed:!1}),maxNumberOfRecommendations:Cn.maxNumberOfRecommendations,additionalFields:Cn.additionalFields}),Tg=(e,t)=>{let r=ca(e,kg,t.options,"buildFrequentlyBoughtTogetherList"),n=Rg(e,{...t,options:{maxNumberOfRecommendations:r.maxNumberOfRecommendations,additionalFields:r.additionalFields,skus:[r.sku],id:"frequentBought"}}),{setSkus:a,...i}=n;return{...i,setSku(o){a([o])},get state(){let{skus:o,...s}=n.state;return{...s,sku:o[0]}}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** *//**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=class{constructor(e){(0,It.r)(this,e),this.unsubscribe=()=>{}}componentWillLoad(){const e=Cg();this.engine=qg({configuration:{...e,searchHub:"frequently_bought_recommendations"}}),this.frequentlyBoughtTogether=Tg(this.engine,{options:{sku:"abc"}}),this.unsubscribe=this.frequentlyBoughtTogether.subscribe(()=>this.updateState()),this.frequentlyBoughtTogether.refresh()}disconnectedCallback(){this.unsubscribe()}updateState(){this.state=this.frequentlyBoughtTogether.state}render(){return(0,It.h)("div",null,"FREQUENTLY BOUGHT TOGETHER:",(0,It.h)("ul",null,this.state.recommendations.map(e=>(0,It.h)("li",null,e.ec_name))))}}}}]);

//# sourceMappingURL=7318.bundle.js.map