{"version":3,"sources":["webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/atomic-result-template.entry.js","webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/props-utils-fc565e68.js","webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/result-template-common-509ef54f.js"],"names":[],"mappings":"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","file":"scripts/8630.bundle.js","sourcesContent":["import { r as registerInstance, g as getElement } from './index-a326e2b3.js';\nimport { M as MapProp } from './props-utils-fc565e68.js';\nimport { R as ResultTemplateCommon } from './result-template-common-509ef54f.js';\nimport './utils-2f0ee174.js';\nimport './purify-e45d59ef.js';\nimport './_commonjsHelpers-5ec8f9b7.js';\nimport './headless.esm-36d42fef.js';\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n    r = Reflect.decorate(decorators, target, key, desc);\n  else\n    for (var i = decorators.length - 1; i >= 0; i--)\n      if (d = decorators[i])\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst AtomicResultTemplate = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    /**\n     * A function that must return true on results for the result template to apply.\n     *\n     * For example, a template with the following condition only applies to results whose `title` contains `singapore`:\n     * `[(result) => /singapore/i.test(result.title)]`\n     */\n    this.conditions = [];\n    /**\n     * The field and values that define which result items the condition must be applied to.\n     *\n     * For example, a template with the following attribute only applies to result items whose `filetype` is `lithiummessage` or `YouTubePlaylist`: `must-match-filetype=\"lithiummessage,YouTubePlaylist\"`\n     */\n    this.mustMatch = {};\n    /**\n     * The field and values that define which result items the condition must not be applied to.\n     *\n     * For example, a template with the following attribute only applies to result items whose `filetype` is not `lithiummessage`: `must-not-match-filetype=\"lithiummessage\"`\n     */\n    this.mustNotMatch = {};\n    this.resultTemplateCommon = new ResultTemplateCommon({\n      host: this.host,\n      setError: (err) => {\n        this.error = err;\n      },\n      validParents: ['atomic-result-list', 'atomic-folded-result-list'],\n      allowEmpty: true,\n    });\n  }\n  componentWillLoad() {\n    this.resultTemplateCommon.addMatchConditions(this.mustMatch, this.mustNotMatch);\n  }\n  /**\n   * Gets the appropriate result template based on conditions applied.\n   */\n  async getTemplate() {\n    return this.resultTemplateCommon.getTemplate(this.conditions, this.error);\n  }\n  render() {\n    return this.resultTemplateCommon.renderIfError(this.error);\n  }\n  get host() { return getElement(this); }\n};\n__decorate([\n  MapProp({ splitValues: true })\n], AtomicResultTemplate.prototype, \"mustMatch\", void 0);\n__decorate([\n  MapProp({ splitValues: true })\n], AtomicResultTemplate.prototype, \"mustNotMatch\", void 0);\n\nexport { AtomicResultTemplate as atomic_result_template };\n\n//# sourceMappingURL=atomic-result-template.entry.js.map","import { g as getElement } from './index-a326e2b3.js';\nimport { a as camelToKebab, k as kebabToCamel } from './utils-2f0ee174.js';\n\nfunction MapProp(opts) {\n  return (component, variableName) => {\n    const { componentWillLoad } = component;\n    if (!componentWillLoad) {\n      console.error('The \"componentWillLoad\" lifecycle method has to be defined for the MapProp decorator to work.');\n      return;\n    }\n    component.componentWillLoad = function () {\n      var _a;\n      const prefix = (opts && opts.attributePrefix) || variableName;\n      const variable = this[variableName];\n      const attributes = getElement(this).attributes;\n      mapAttributesToProp(prefix, variable, Array.from(attributes), (_a = opts === null || opts === void 0 ? void 0 : opts.splitValues) !== null && _a !== void 0 ? _a : false);\n      componentWillLoad.call(this);\n    };\n  };\n}\nfunction mapAttributesToProp(prefix, mapVariable, attributes, splitValues) {\n  const map = attributesToStringMap(prefix, attributes);\n  Object.assign(mapVariable, splitValues ? stringMapToStringArrayMap(map) : map);\n}\nfunction stringMapToStringArrayMap(map) {\n  return Object.entries(map).reduce((acc, [key, value]) => ({\n    ...acc,\n    [key]: value.split(',').map((subValue) => subValue.trim()),\n  }), {});\n}\nfunction attributesToStringMap(prefix, attributes) {\n  const mapVariable = {};\n  const kebabPrefix = camelToKebab(prefix) + '-';\n  for (let i = 0; i < attributes.length; i++) {\n    const attribute = attributes[i];\n    if (attribute.name.indexOf(kebabPrefix) !== 0) {\n      continue;\n    }\n    const property = kebabToCamel(attribute.name.replace(kebabPrefix, ''));\n    mapVariable[property] = `${attribute.value}`;\n  }\n  return mapVariable;\n}\n\nexport { MapProp as M };\n\n//# sourceMappingURL=props-utils-fc565e68.js.map","import { h } from './index-a326e2b3.js';\nimport { k as kS } from './headless.esm-36d42fef.js';\n\nclass ResultTemplateCommon {\n  constructor({ host, setError, validParents, allowEmpty = false, }) {\n    this.matchConditions = [];\n    this.host = host;\n    this.validateTemplate(host, setError, validParents, allowEmpty);\n  }\n  validateTemplate(host, setError, validParents, allowEmpty = true) {\n    var _a;\n    const hasValidParent = validParents\n      .map((p) => p.toUpperCase())\n      .includes(((_a = host.parentElement) === null || _a === void 0 ? void 0 : _a.nodeName) || '');\n    const tagName = host.nodeName.toLowerCase();\n    if (!hasValidParent) {\n      setError(new Error(`The \"${tagName}\" component has to be the child of one of the following: ${validParents\n        .map((p) => `\"${p.toLowerCase()}\"`)\n        .join(', ')}.`));\n      return;\n    }\n    const template = host.querySelector('template');\n    if (!template) {\n      setError(new Error(`The \"${tagName}\" component has to contain a \"template\" element as a child.`));\n      return;\n    }\n    if (!allowEmpty && !(template === null || template === void 0 ? void 0 : template.innerHTML.trim())) {\n      setError(new Error(`The \"template\" tag inside \"${tagName}\" cannot be empty`));\n      return;\n    }\n    if (template === null || template === void 0 ? void 0 : template.content.querySelector('script')) {\n      console.warn('Any \"script\" tags defined inside of \"template\" elements are not supported and will not be executed when the results are rendered', host);\n    }\n  }\n  addMatchConditions(mustMatch, mustNotMatch) {\n    for (const field in mustMatch) {\n      this.matchConditions.push(kS.fieldMustMatch(field, mustMatch[field]));\n    }\n    for (const field in mustNotMatch) {\n      this.matchConditions.push(kS.fieldMustNotMatch(field, mustNotMatch[field]));\n    }\n  }\n  getTemplate(conditions, error) {\n    if (error) {\n      return null;\n    }\n    return {\n      conditions: conditions.concat(this.matchConditions),\n      content: getTemplateElement(this.host).content,\n      priority: 1,\n    };\n  }\n  renderIfError(error) {\n    if (error) {\n      return (h(\"atomic-component-error\", { element: this.host, error: error }));\n    }\n  }\n}\nfunction getTemplateElement(host) {\n  return host.querySelector('template');\n}\n\nexport { ResultTemplateCommon as R };\n\n//# sourceMappingURL=result-template-common-509ef54f.js.map"],"sourceRoot":""}