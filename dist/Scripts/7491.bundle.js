"use strict";(self.webpackChunk_verndale_toolkit=self.webpackChunk_verndale_toolkit||[]).push([[7491],{87491:function(Rx,Fp,yt){yt.d(Fp,{Lv:function(){return Rf},MV:function(){return Q0},Om:function(){return fC},q:function(){return Yf},ff:function(){return Xf},us:function(){return $w},W0:function(){return xO},wn:function(){return xw},vP:function(){return sx},wP:function(){return ux}});/**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ap=Object.create,wn=Object.defineProperty,Ep=Object.getOwnPropertyDescriptor,jp=Object.getOwnPropertyNames,kp=Object.getPrototypeOf,Pp=Object.prototype.hasOwnProperty,zs=e=>wn(e,"__esModule",{value:!0}),oe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ta=(e,t)=>{zs(e);for(var r in t)wn(e,r,{get:t[r],enumerable:!0})},Ns=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of jp(t))!Pp.call(e,n)&&n!=="default"&&wn(e,n,{get:()=>t[n],enumerable:!(r=Ep(t,n))||r.enumerable});return e},le=e=>Ns(zs(wn(e!=null?Ap(kp(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Tp=oe((e,t)=>{t.exports=fetch}),Vp=oe(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(a){var i=t(t({},r),a);return i.numOfAttempts<1&&(i.numOfAttempts=1),i}e.getSanitizedOptions=n}),Mp=oe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(r){var n=Math.random()*r;return Math.round(n)}e.fullJitter=t}),$p=oe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(r){return r}e.noJitter=t}),Lp=oe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Mp(),r=$p();function n(a){switch(a.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}),Us=oe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Lp(),r=function(){function n(a){this.options=a,this.attempt=0}return n.prototype.apply=function(){var a=this;return new Promise(function(i){return setTimeout(i,a.jitteredDelay)})},n.prototype.setAttemptNumber=function(a){this.attempt=a},Object.defineProperty(n.prototype,"jitteredDelay",{get:function(){var a=t.JitterFactory(this.options);return a(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){var a=this.options.startingDelay,i=this.options.timeMultiple,o=this.numOfDelayedAttempts,s=a*Math.pow(i,o);return Math.min(s,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),n}();e.Delay=r}),Dp=oe(e=>{"use strict";var t=e&&e.__extends||function(){var o=function(s,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var c in f)f.hasOwnProperty(c)&&(l[c]=f[c])},o(s,u)};return function(s,u){o(s,u);function l(){this.constructor=s}s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),r=e&&e.__awaiter||function(o,s,u,l){function f(c){return c instanceof u?c:new u(function(p){p(c)})}return new(u||(u=Promise))(function(c,p){function h(y){try{d(l.next(y))}catch(v){p(v)}}function g(y){try{d(l.throw(y))}catch(v){p(v)}}function d(y){y.done?c(y.value):f(y.value).then(h,g)}d((l=l.apply(o,s||[])).next())})},n=e&&e.__generator||function(o,s){var u={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},l,f,c,p;return p={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function h(d){return function(y){return g([d,y])}}function g(d){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,f&&(c=d[0]&2?f.return:d[0]?f.throw||((c=f.return)&&c.call(f),0):f.next)&&!(c=c.call(f,d[1])).done)return c;switch(f=0,c&&(d=[d[0]&2,c.value]),d[0]){case 0:case 1:c=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,f=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(c=u.trys,!(c=c.length>0&&c[c.length-1])&&(d[0]===6||d[0]===2)){u=0;continue}if(d[0]===3&&(!c||d[1]>c[0]&&d[1]<c[3])){u.label=d[1];break}if(d[0]===6&&u.label<c[1]){u.label=c[1],c=d;break}if(c&&u.label<c[2]){u.label=c[2],u.ops.push(d);break}c[2]&&u.ops.pop(),u.trys.pop();continue}d=s.call(o,u)}catch(y){d=[6,y],f=0}finally{l=c=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=Us(),i=function(o){t(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return s.prototype.apply=function(){return r(this,void 0,void 0,function(){return n(this,function(u){return[2,this.isFirstAttempt?!0:o.prototype.apply.call(this)]})})},Object.defineProperty(s.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),s}(a.Delay);e.SkipFirstDelay=i}),_p=oe(e=>{"use strict";var t=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var l in u)u.hasOwnProperty(l)&&(s[l]=u[l])},a(i,o)};return function(i,o){a(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=Us(),n=function(a){t(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i}(r.Delay);e.AlwaysDelay=n}),zp=oe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Dp(),r=_p();function n(i,o){var s=a(i);return s.setAttemptNumber(o),s}e.DelayFactory=n;function a(i){return i.delayFirstAttempt?new r.AlwaysDelay(i):new t.SkipFirstDelay(i)}}),Np=oe(e=>{"use strict";var t=e&&e.__awaiter||function(s,u,l,f){function c(p){return p instanceof l?p:new l(function(h){h(p)})}return new(l||(l=Promise))(function(p,h){function g(v){try{y(f.next(v))}catch(m){h(m)}}function d(v){try{y(f.throw(v))}catch(m){h(m)}}function y(v){v.done?p(v.value):c(v.value).then(g,d)}y((f=f.apply(s,u||[])).next())})},r=e&&e.__generator||function(s,u){var l={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},f,c,p,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(y){return function(v){return d([y,v])}}function d(y){if(f)throw new TypeError("Generator is already executing.");for(;l;)try{if(f=1,c&&(p=y[0]&2?c.return:y[0]?c.throw||((p=c.return)&&p.call(c),0):c.next)&&!(p=p.call(c,y[1])).done)return p;switch(c=0,p&&(y=[y[0]&2,p.value]),y[0]){case 0:case 1:p=y;break;case 4:return l.label++,{value:y[1],done:!1};case 5:l.label++,c=y[1],y=[0];continue;case 7:y=l.ops.pop(),l.trys.pop();continue;default:if(p=l.trys,!(p=p.length>0&&p[p.length-1])&&(y[0]===6||y[0]===2)){l=0;continue}if(y[0]===3&&(!p||y[1]>p[0]&&y[1]<p[3])){l.label=y[1];break}if(y[0]===6&&l.label<p[1]){l.label=p[1],p=y;break}if(p&&l.label<p[2]){l.label=p[2],l.ops.push(y);break}p[2]&&l.ops.pop(),l.trys.pop();continue}y=u.call(s,l)}catch(v){y=[6,v],c=0}finally{f=p=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=Vp(),a=zp();function i(s,u){return u===void 0&&(u={}),t(this,void 0,void 0,function(){var l,f;return r(this,function(c){switch(c.label){case 0:return l=n.getSanitizedOptions(u),f=new o(s,l),[4,f.execute()];case 1:return[2,c.sent()]}})})}e.backOff=i;var o=function(){function s(u,l){this.request=u,this.options=l,this.attemptNumber=0}return s.prototype.execute=function(){return t(this,void 0,void 0,function(){var u,l;return r(this,function(f){switch(f.label){case 0:if(this.attemptLimitReached)return[3,7];f.label=1;case 1:return f.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return f.sent(),[4,this.request()];case 3:return[2,f.sent()];case 4:return u=f.sent(),this.attemptNumber++,[4,this.options.retry(u,this.attemptNumber)];case 5:if(l=f.sent(),!l||this.attemptLimitReached)throw u;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(s.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),s.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){var u;return r(this,function(l){switch(l.label){case 0:return u=a.DelayFactory(this.options,this.attemptNumber),[4,u.apply()];case 1:return l.sent(),[2]}})})},s}()}),cr=oe((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&yt.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=n()})(e,function(){"use strict";var r=1e3,n=6e4,a=36e5,i="millisecond",o="second",s="minute",u="hour",l="day",f="week",c="month",p="quarter",h="year",g="date",d="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},b=function(F,O,R){var C=String(F);return!C||C.length>=O?F:""+Array(O+1-C.length).join(R)+F},I={s:b,z:function(F){var O=-F.utcOffset(),R=Math.abs(O),C=Math.floor(R/60),q=R%60;return(O<=0?"+":"-")+b(C,2,"0")+":"+b(q,2,"0")},m:function F(O,R){if(O.date()<R.date())return-F(R,O);var C=12*(R.year()-O.year())+(R.month()-O.month()),q=O.clone().add(C,c),T=R-q<0,M=O.clone().add(C+(T?-1:1),c);return+(-(C+(R-q)/(T?q-M:M-q))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:c,y:h,w:f,d:l,D:g,h:u,m:s,s:o,ms:i,Q:p}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},P="en",L={};L[P]=m;var U=function(F){return F instanceof k},w=function F(O,R,C){var q;if(!O)return P;if(typeof O=="string"){var T=O.toLowerCase();L[T]&&(q=T),R&&(L[T]=R,q=T);var M=O.split("-");if(!q&&M.length>1)return F(M[0])}else{var K=O.name;L[K]=O,q=K}return!C&&q&&(P=q),q||!C&&P},j=function(F,O){if(U(F))return F.clone();var R=typeof O=="object"?O:{};return R.date=F,R.args=arguments,new k(R)},S=I;S.l=w,S.i=U,S.w=function(F,O){return j(F,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var k=function(){function F(R){this.$L=w(R.locale,null,!0),this.parse(R)}var O=F.prototype;return O.parse=function(R){this.$d=function(C){var q=C.date,T=C.utc;if(q===null)return new Date(NaN);if(S.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var M=q.match(y);if(M){var K=M[2]-1||0,ie=(M[7]||"0").substring(0,3);return T?new Date(Date.UTC(M[1],K,M[3]||1,M[4]||0,M[5]||0,M[6]||0,ie)):new Date(M[1],K,M[3]||1,M[4]||0,M[5]||0,M[6]||0,ie)}}return new Date(q)}(R),this.$x=R.x||{},this.init()},O.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},O.$utils=function(){return S},O.isValid=function(){return this.$d.toString()!==d},O.isSame=function(R,C){var q=j(R);return this.startOf(C)<=q&&q<=this.endOf(C)},O.isAfter=function(R,C){return j(R)<this.startOf(C)},O.isBefore=function(R,C){return this.endOf(C)<j(R)},O.$g=function(R,C,q){return S.u(R)?this[C]:this.set(q,R)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(R,C){var q=this,T=!!S.u(C)||C,M=S.p(R),K=function(ye,me){var Ve=S.w(q.$u?Date.UTC(q.$y,me,ye):new Date(q.$y,me,ye),q);return T?Ve:Ve.endOf(l)},ie=function(ye,me){return S.w(q.toDate()[ye].apply(q.toDate("s"),(T?[0,0,0,0]:[23,59,59,999]).slice(me)),q)},J=this.$W,ce=this.$M,Ae=this.$D,xe="set"+(this.$u?"UTC":"");switch(M){case h:return T?K(1,0):K(31,11);case c:return T?K(1,ce):K(0,ce+1);case f:var Ue=this.$locale().weekStart||0,Le=(J<Ue?J+7:J)-Ue;return K(T?Ae-Le:Ae+(6-Le),ce);case l:case g:return ie(xe+"Hours",0);case u:return ie(xe+"Minutes",1);case s:return ie(xe+"Seconds",2);case o:return ie(xe+"Milliseconds",3);default:return this.clone()}},O.endOf=function(R){return this.startOf(R,!1)},O.$set=function(R,C){var q,T=S.p(R),M="set"+(this.$u?"UTC":""),K=(q={},q[l]=M+"Date",q[g]=M+"Date",q[c]=M+"Month",q[h]=M+"FullYear",q[u]=M+"Hours",q[s]=M+"Minutes",q[o]=M+"Seconds",q[i]=M+"Milliseconds",q)[T],ie=T===l?this.$D+(C-this.$W):C;if(T===c||T===h){var J=this.clone().set(g,1);J.$d[K](ie),J.init(),this.$d=J.set(g,Math.min(this.$D,J.daysInMonth())).$d}else K&&this.$d[K](ie);return this.init(),this},O.set=function(R,C){return this.clone().$set(R,C)},O.get=function(R){return this[S.p(R)]()},O.add=function(R,C){var q,T=this;R=Number(R);var M=S.p(C),K=function(ce){var Ae=j(T);return S.w(Ae.date(Ae.date()+Math.round(ce*R)),T)};if(M===c)return this.set(c,this.$M+R);if(M===h)return this.set(h,this.$y+R);if(M===l)return K(1);if(M===f)return K(7);var ie=(q={},q[s]=n,q[u]=a,q[o]=r,q)[M]||1,J=this.$d.getTime()+R*ie;return S.w(J,this)},O.subtract=function(R,C){return this.add(-1*R,C)},O.format=function(R){var C=this,q=this.$locale();if(!this.isValid())return q.invalidDate||d;var T=R||"YYYY-MM-DDTHH:mm:ssZ",M=S.z(this),K=this.$H,ie=this.$m,J=this.$M,ce=q.weekdays,Ae=q.months,xe=function(me,Ve,ht,vt){return me&&(me[Ve]||me(C,T))||ht[Ve].slice(0,vt)},Ue=function(me){return S.s(K%12||12,me,"0")},Le=q.meridiem||function(me,Ve,ht){var vt=me<12?"AM":"PM";return ht?vt.toLowerCase():vt},ye={YY:String(this.$y).slice(-2),YYYY:this.$y,M:J+1,MM:S.s(J+1,2,"0"),MMM:xe(q.monthsShort,J,Ae,3),MMMM:xe(Ae,J),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:xe(q.weekdaysMin,this.$W,ce,2),ddd:xe(q.weekdaysShort,this.$W,ce,3),dddd:ce[this.$W],H:String(K),HH:S.s(K,2,"0"),h:Ue(1),hh:Ue(2),a:Le(K,ie,!0),A:Le(K,ie,!1),m:String(ie),mm:S.s(ie,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:M};return T.replace(v,function(me,Ve){return Ve||ye[me]||M.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(R,C,q){var T,M=S.p(C),K=j(R),ie=(K.utcOffset()-this.utcOffset())*n,J=this-K,ce=S.m(this,K);return ce=(T={},T[h]=ce/12,T[c]=ce,T[p]=ce/3,T[f]=(J-ie)/6048e5,T[l]=(J-ie)/864e5,T[u]=J/a,T[s]=J/n,T[o]=J/r,T)[M]||J,q?ce:S.a(ce)},O.daysInMonth=function(){return this.endOf(c).$D},O.$locale=function(){return L[this.$L]},O.locale=function(R,C){if(!R)return this.$L;var q=this.clone(),T=w(R,C,!0);return T&&(q.$L=T),q},O.clone=function(){return S.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},F}(),V=k.prototype;return j.prototype=V,[["$ms",i],["$s",o],["$m",s],["$H",u],["$W",l],["$M",c],["$y",h],["$D",g]].forEach(function(F){V[F[1]]=function(O){return this.$g(O,F[0],F[1])}}),j.extend=function(F,O){return F.$i||(F(O,k,j),F.$i=!0),j},j.locale=w,j.isDayjs=U,j.unix=function(F){return j(1e3*F)},j.en=L[P],j.Ls=L,j.p={},j})}),Up=oe((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&yt.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_utc=n()})(e,function(){"use strict";var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,s){var u=o.prototype;s.utc=function(d){var y={date:d,utc:!0,args:arguments};return new o(y)},u.utc=function(d){var y=s(this.toDate(),{locale:this.$L,utc:!0});return d?y.add(this.utcOffset(),r):y},u.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),l.call(this,d)};var f=u.init;u.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else f.call(this)};var c=u.utcOffset;u.utcOffset=function(d,y){var v=this.$utils().u;if(v(d))return this.$u?0:v(this.$offset)?c.call(this):this.$offset;if(typeof d=="string"&&(d=function(P){P===void 0&&(P="");var L=P.match(n);if(!L)return null;var U=(""+L[0]).match(a)||["-",0,0],w=U[0],j=60*+U[1]+ +U[2];return j===0?0:w==="+"?j:-j}(d),d===null))return this;var m=Math.abs(d)<=16?60*d:d,b=this;if(y)return b.$offset=m,b.$u=d===0,b;if(d!==0){var I=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(m+I,r)).$offset=m,b.$x.$localOffset=I}else b=this.utc();return b};var p=u.format;u.format=function(d){var y=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,y)},u.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(d){return d==="s"&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var g=u.diff;u.diff=function(d,y,v){if(d&&this.$u===d.$u)return g.call(this,d,y,v);var m=this.local(),b=s(d).local();return g.call(m,b,y,v)}}})}),Qp=oe((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&yt.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,function(){"use strict";var r={year:0,month:1,day:2,hour:3,minute:4,second:5},n={};return function(a,i,o){var s,u=function(p,h,g){g===void 0&&(g={});var d=new Date(p),y=function(v,m){m===void 0&&(m={});var b=m.timeZoneName||"short",I=v+"|"+b,P=n[I];return P||(P=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),n[I]=P),P}(h,g);return y.formatToParts(d)},l=function(p,h){for(var g=u(p,h),d=[],y=0;y<g.length;y+=1){var v=g[y],m=v.type,b=v.value,I=r[m];I>=0&&(d[I]=parseInt(b,10))}var P=d[3],L=P===24?0:P,U=d[0]+"-"+d[1]+"-"+d[2]+" "+L+":"+d[4]+":"+d[5]+":000",w=+p;return(o.utc(U).valueOf()-(w-=w%1e3))/6e4},f=i.prototype;f.tz=function(p,h){p===void 0&&(p=s);var g=this.utcOffset(),d=this.toDate(),y=d.toLocaleString("en-US",{timeZone:p}),v=Math.round((d-new Date(y))/1e3/60),m=o(y).$set("millisecond",this.$ms).utcOffset(15*-Math.round(d.getTimezoneOffset()/15)-v,!0);if(h){var b=m.utcOffset();m=m.add(g-b,"minute")}return m.$x.$timezone=p,m},f.offsetName=function(p){var h=this.$x.$timezone||o.tz.guess(),g=u(this.valueOf(),h,{timeZoneName:p}).find(function(d){return d.type.toLowerCase()==="timezonename"});return g&&g.value};var c=f.startOf;f.startOf=function(p,h){if(!this.$x||!this.$x.$timezone)return c.call(this,p,h);var g=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return c.call(g,p,h).tz(this.$x.$timezone,!0)},o.tz=function(p,h,g){var d=g&&h,y=g||h||s,v=l(+o(),y);if(typeof p!="string")return o(p).tz(y);var m=function(L,U,w){var j=L-60*U*1e3,S=l(j,w);if(U===S)return[j,U];var k=l(j-=60*(S-U)*1e3,w);return S===k?[j,S]:[L-60*Math.min(S,k)*1e3,Math.max(S,k)]}(o.utc(p,d).valueOf(),v,y),b=m[0],I=m[1],P=o(b).utcOffset(I);return P.$x.$timezone=y,P},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(p){s=p}}})}),Bp=oe((e,t)=>{function r(n,a,i){return a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}),Hp=oe((e,t)=>{var r=Bp();function n(i,o){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),s.push.apply(s,u)}return s}function a(i){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?n(Object(s),!0).forEach(function(u){r(i,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(s,u))})}return i}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),Cn=oe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Hp();function r(v){return v&&typeof v=="object"&&"default"in v?v:{default:v}}var n=r(t);function a(v){return"Minified Redux error #"+v+"; visit https://redux.js.org/Errors?code="+v+" for the full message or use the non-minified dev environment for full errors. "}var i=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function u(v){if(typeof v!="object"||v===null)return!1;for(var m=v;Object.getPrototypeOf(m)!==null;)m=Object.getPrototypeOf(m);return Object.getPrototypeOf(v)===m}function l(v,m,b){var I;if(typeof m=="function"&&typeof b=="function"||typeof b=="function"&&typeof arguments[3]=="function")throw new Error(a(0));if(typeof m=="function"&&typeof b=="undefined"&&(b=m,m=void 0),typeof b!="undefined"){if(typeof b!="function")throw new Error(a(1));return b(l)(v,m)}if(typeof v!="function")throw new Error(a(2));var P=v,L=m,U=[],w=U,j=!1;function S(){w===U&&(w=U.slice())}function k(){if(j)throw new Error(a(3));return L}function V(C){if(typeof C!="function")throw new Error(a(4));if(j)throw new Error(a(5));var q=!0;return S(),w.push(C),function(){if(q){if(j)throw new Error(a(6));q=!1,S();var T=w.indexOf(C);w.splice(T,1),U=null}}}function F(C){if(!u(C))throw new Error(a(7));if(typeof C.type=="undefined")throw new Error(a(8));if(j)throw new Error(a(9));try{j=!0,L=P(L,C)}finally{j=!1}for(var q=U=w,T=0;T<q.length;T++){var M=q[T];M()}return C}function O(C){if(typeof C!="function")throw new Error(a(10));P=C,F({type:s.REPLACE})}function R(){var C,q=V;return C={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(a(11));function M(){T.next&&T.next(k())}M();var K=q(M);return{unsubscribe:K}}},C[i]=function(){return this},C}return F({type:s.INIT}),I={dispatch:F,subscribe:V,getState:k,replaceReducer:O},I[i]=R,I}var f=l;function c(v){Object.keys(v).forEach(function(m){var b=v[m],I=b(void 0,{type:s.INIT});if(typeof I=="undefined")throw new Error(a(12));if(typeof b(void 0,{type:s.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(a(13))})}function p(v){for(var m=Object.keys(v),b={},I=0;I<m.length;I++){var P=m[I];typeof v[P]=="function"&&(b[P]=v[P])}var L=Object.keys(b),U,w;try{c(b)}catch(j){w=j}return function(j,S){if(j===void 0&&(j={}),w)throw w;if(!1)var k;for(var V=!1,F={},O=0;O<L.length;O++){var R=L[O],C=b[R],q=j[R],T=C(q,S);if(typeof T=="undefined"){var M=S&&S.type;throw new Error(a(14))}F[R]=T,V=V||T!==q}return V=V||L.length!==Object.keys(j).length,V?F:j}}function h(v,m){return function(){return m(v.apply(this,arguments))}}function g(v,m){if(typeof v=="function")return h(v,m);if(typeof v!="object"||v===null)throw new Error(a(16));var b={};for(var I in v){var P=v[I];typeof P=="function"&&(b[I]=h(P,m))}return b}function d(){for(var v=arguments.length,m=new Array(v),b=0;b<v;b++)m[b]=arguments[b];return m.length===0?function(I){return I}:m.length===1?m[0]:m.reduce(function(I,P){return function(){return I(P.apply(void 0,arguments))}})}function y(){for(var v=arguments.length,m=new Array(v),b=0;b<v;b++)m[b]=arguments[b];return function(I){return function(){var P=I.apply(void 0,arguments),L=function(){throw new Error(a(15))},U={getState:P.getState,dispatch:function(){return L.apply(void 0,arguments)}},w=m.map(function(j){return j(U)});return L=d.apply(void 0,w)(P.dispatch),n.default(n.default({},P),{},{dispatch:L})}}}e.__DO_NOT_USE__ActionTypes=s,e.applyMiddleware=y,e.bindActionCreators=g,e.combineReducers=p,e.compose=d,e.createStore=l,e.legacy_createStore=f}),Yp=oe((e,t)=>{var r="[object Object]";function n(g){var d=!1;if(g!=null&&typeof g.toString!="function")try{d=!!(g+"")}catch{}return d}function a(g,d){return function(y){return g(d(y))}}var i=Function.prototype,o=Object.prototype,s=i.toString,u=o.hasOwnProperty,l=s.call(Object),f=o.toString,c=a(Object.getPrototypeOf,Object);function p(g){return!!g&&typeof g=="object"}function h(g){if(!p(g)||f.call(g)!=r||n(g))return!1;var d=c(g);if(d===null)return!0;var y=u.call(d,"constructor")&&d.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==l}t.exports=h}),Wp=oe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=Cn(),r=Yp(),n=a(r);function a(u){return u&&u.__esModule?u:{default:u}}function i(u){if(Array.isArray(u)){for(var l=0,f=Array(u.length);l<u.length;l++)f[l]=u[l];return f}else return Array.from(u)}var o=function(u){return typeof u=="function"};function s(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function f(){var p=[],h=[],g={getState:function(){return o(l)?l(p):l},getActions:function(){return p},dispatch:function(d){if(!(0,n.default)(d))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof d.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(d));p.push(d);for(var y=0;y<h.length;y++)h[y]();return d},clearActions:function(){p=[]},subscribe:function(d){return o(d)&&h.push(d),function(){var y=h.indexOf(d);y<0||h.splice(y,1)}},replaceReducer:function(d){if(!o(d))throw new Error("Expected the nextReducer to be a function.")}};return g}var c=t.applyMiddleware.apply(void 0,i(u))(f);return c()}}}),Jp=oe((e,t)=>{"use strict";var r=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports=r.AbortController,t.exports.default=r.AbortController}),Kp=oe((e,t)=>{"use strict";function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(i=`${i}`,i=i.replace(/[ \t\n\f\r]/g,""),i.length%4==0&&(i=i.replace(/==?$/,"")),i.length%4==1||/[^+/0-9A-Za-z]/.test(i))return null;let o="",s=0,u=0;for(let l=0;l<i.length;l++)s<<=6,s|=a(i[l]),u+=6,u===24&&(o+=String.fromCharCode((s&16711680)>>16),o+=String.fromCharCode((s&65280)>>8),o+=String.fromCharCode(s&255),s=u=0);return u===12?(s>>=4,o+=String.fromCharCode(s)):u===18&&(s>>=2,o+=String.fromCharCode((s&65280)>>8),o+=String.fromCharCode(s&255)),o}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(i){let o=n.indexOf(i);return o<0?void 0:o}t.exports=r}),Zp=oe((e,t)=>{"use strict";function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let o;for(i=`${i}`,o=0;o<i.length;o++)if(i.charCodeAt(o)>255)return null;let s="";for(o=0;o<i.length;o+=3){let u=[void 0,void 0,void 0,void 0];u[0]=i.charCodeAt(o)>>2,u[1]=(i.charCodeAt(o)&3)<<4,i.length>o+1&&(u[1]|=i.charCodeAt(o+1)>>4,u[2]=(i.charCodeAt(o+1)&15)<<2),i.length>o+2&&(u[2]|=i.charCodeAt(o+2)>>6,u[3]=i.charCodeAt(o+2)&63);for(let l=0;l<u.length;l++)typeof u[l]=="undefined"?s+="=":s+=a(u[l])}return s}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(i){if(i>=0&&i<64)return n[i]}t.exports=r}),Qs=oe((e,t)=>{"use strict";var r=Kp(),n=Zp();t.exports={atob:r,btoa:n}}),Bs=oe((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&yt.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,function(){"use strict";var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,s={},u=function(d){return(d=+d)+(d>68?1900:2e3)},l=function(d){return function(y){this[d]=+y}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(d){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var v=y.match(/([+-]|\d\d)/g),m=60*v[1]+(+v[2]||0);return m===0?0:v[0]==="+"?-m:m}(d)}],c=function(d){var y=s[d];return y&&(y.indexOf?y:y.s.concat(y.f))},p=function(d,y){var v,m=s.meridiem;if(m){for(var b=1;b<=24;b+=1)if(d.indexOf(m(b,0,y))>-1){v=b>12;break}}else v=d===(y?"pm":"PM");return v},h={A:[o,function(d){this.afternoon=p(d,!1)}],a:[o,function(d){this.afternoon=p(d,!0)}],S:[/\d/,function(d){this.milliseconds=100*+d}],SS:[a,function(d){this.milliseconds=10*+d}],SSS:[/\d{3}/,function(d){this.milliseconds=+d}],s:[i,l("seconds")],ss:[i,l("seconds")],m:[i,l("minutes")],mm:[i,l("minutes")],H:[i,l("hours")],h:[i,l("hours")],HH:[i,l("hours")],hh:[i,l("hours")],D:[i,l("day")],DD:[a,l("day")],Do:[o,function(d){var y=s.ordinal,v=d.match(/\d+/);if(this.day=v[0],y)for(var m=1;m<=31;m+=1)y(m).replace(/\[|\]/g,"")===d&&(this.day=m)}],M:[i,l("month")],MM:[a,l("month")],MMM:[o,function(d){var y=c("months"),v=(c("monthsShort")||y.map(function(m){return m.slice(0,3)})).indexOf(d)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[o,function(d){var y=c("months").indexOf(d)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,l("year")],YY:[a,function(d){this.year=u(d)}],YYYY:[/\d{4}/,l("year")],Z:f,ZZ:f};function g(d){var y,v;y=d,v=s&&s.formats;for(var m=(d=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,S,k){var V=k&&k.toUpperCase();return S||v[k]||r[k]||v[V].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(F,O,R){return O||R.slice(1)})})).match(n),b=m.length,I=0;I<b;I+=1){var P=m[I],L=h[P],U=L&&L[0],w=L&&L[1];m[I]=w?{regex:U,parser:w}:P.replace(/^\[|\]$/g,"")}return function(j){for(var S={},k=0,V=0;k<b;k+=1){var F=m[k];if(typeof F=="string")V+=F.length;else{var O=F.regex,R=F.parser,C=j.slice(V),q=O.exec(C)[0];R.call(S,q),j=j.replace(q,"")}}return function(T){var M=T.afternoon;if(M!==void 0){var K=T.hours;M?K<12&&(T.hours+=12):K===12&&(T.hours=0),delete T.afternoon}}(S),S}}return function(d,y,v){v.p.customParseFormat=!0,d&&d.parseTwoDigitYear&&(u=d.parseTwoDigitYear);var m=y.prototype,b=m.parse;m.parse=function(I){var P=I.date,L=I.utc,U=I.args;this.$u=L;var w=U[1];if(typeof w=="string"){var j=U[2]===!0,S=U[3]===!0,k=j||S,V=U[2];S&&(V=U[2]),s=this.$locale(),!j&&V&&(s=v.Ls[V]),this.$d=function(C,q,T){try{if(["x","X"].indexOf(q)>-1)return new Date((q==="X"?1e3:1)*C);var M=g(q)(C),K=M.year,ie=M.month,J=M.day,ce=M.hours,Ae=M.minutes,xe=M.seconds,Ue=M.milliseconds,Le=M.zone,ye=new Date,me=J||(K||ie?1:ye.getDate()),Ve=K||ye.getFullYear(),ht=0;K&&!ie||(ht=ie>0?ie-1:ye.getMonth());var vt=ce||0,Ls=Ae||0,Ds=xe||0,_s=Ue||0;return Le?new Date(Date.UTC(Ve,ht,me,vt,Ls,Ds,_s+60*Le.offset*1e3)):T?new Date(Date.UTC(Ve,ht,me,vt,Ls,Ds,_s)):new Date(Ve,ht,me,vt,Ls,Ds,_s)}catch{return new Date("")}}(P,w,L),this.init(),V&&V!==!0&&(this.$L=this.locale(V).$L),k&&P!=this.format(w)&&(this.$d=new Date("")),s={}}else if(w instanceof Array)for(var F=w.length,O=1;O<=F;O+=1){U[1]=w[O-1];var R=v.apply(this,U);if(R.isValid()){this.$d=R.$d,this.$L=R.$L,this.init();break}O===F&&(this.$d=new Date(""))}else b.call(this,I)}}})}),Gp=oe((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?t.exports=n():typeof define=="function"&&yt.amdO?define(n):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,function(){"use strict";var r="month",n="quarter";return function(a,i){var o=i.prototype;o.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var s=o.add;o.add=function(l,f){return l=Number(l),this.$utils().p(f)===n?this.add(3*l,r):s.bind(this)(l,f)};var u=o.startOf;o.startOf=function(l,f){var c=this.$utils(),p=!!c.u(f)||f;if(c.p(l)===n){var h=this.quarter()-1;return p?this.month(3*h).startOf(r).startOf("day"):this.month(3*h+2).endOf(r).endOf("day")}return u.bind(this)(l,f)}}})}),Xp=oe((e,t)=>{"use strict";function r(a){try{return JSON.stringify(a)}catch{return'"[Circular]"'}}t.exports=n;function n(a,i,o){var s=o&&o.stringify||r,u=1;if(typeof a=="object"&&a!==null){var l=i.length+u;if(l===1)return a;var f=new Array(l);f[0]=s(a);for(var c=1;c<l;c++)f[c]=s(i[c]);return f.join(" ")}if(typeof a!="string")return a;var p=i.length;if(p===0)return a;for(var h="",g=1-u,d=-1,y=a&&a.length||0,v=0;v<y;){if(a.charCodeAt(v)===37&&v+1<y){switch(d=d>-1?d:0,a.charCodeAt(v+1)){case 100:case 102:if(g>=p||i[g]==null)break;d<v&&(h+=a.slice(d,v)),h+=Number(i[g]),d=v+2,v++;break;case 105:if(g>=p||i[g]==null)break;d<v&&(h+=a.slice(d,v)),h+=Math.floor(Number(i[g])),d=v+2,v++;break;case 79:case 111:case 106:if(g>=p||i[g]===void 0)break;d<v&&(h+=a.slice(d,v));var m=typeof i[g];if(m==="string"){h+="'"+i[g]+"'",d=v+2,v++;break}if(m==="function"){h+=i[g].name||"<anonymous>",d=v+2,v++;break}h+=s(i[g]),d=v+2,v++;break;case 115:if(g>=p)break;d<v&&(h+=a.slice(d,v)),h+=String(i[g]),d=v+2,v++;break;case 37:d<v&&(h+=a.slice(d,v)),h+="%",d=v+2,v++,g--;break}++g}++v}return d===-1?a:(d<y&&(h+=a.slice(d)),h)}}),On=oe((e,t)=>{"use strict";var r=Xp();t.exports=o;var n=U().console||{},a={mapHttpRequest:y,mapHttpResponse:y,wrapRequestSerializer:v,wrapResponseSerializer:v,wrapErrorSerializer:v,req:y,res:y,err:g};function i(w,j){return Array.isArray(w)?w.filter(function(S){return S!=="!stdSerializers.err"}):w===!0?Object.keys(j):!1}function o(w){w=w||{},w.browser=w.browser||{};let j=w.browser.transmit;if(j&&typeof j.send!="function")throw Error("pino: transmit option must have a send function");let S=w.browser.write||n;w.browser.write&&(w.browser.asObject=!0);let k=w.serializers||{},V=i(w.browser.serialize,k),F=w.browser.serialize;Array.isArray(w.browser.serialize)&&w.browser.serialize.indexOf("!stdSerializers.err")>-1&&(F=!1);let O=["error","fatal","warn","info","debug","trace"];typeof S=="function"&&(S.error=S.fatal=S.warn=S.info=S.debug=S.trace=S),w.enabled===!1&&(w.level="silent");let R=w.level||"info",C=Object.create(S);C.log||(C.log=m),Object.defineProperty(C,"levelVal",{get:T}),Object.defineProperty(C,"level",{get:M,set:K});let q={transmit:j,serialize:V,asObject:w.browser.asObject,levels:O,timestamp:d(w)};C.levels=o.levels,C.level=R,C.setMaxListeners=C.getMaxListeners=C.emit=C.addListener=C.on=C.prependListener=C.once=C.prependOnceListener=C.removeListener=C.removeAllListeners=C.listeners=C.listenerCount=C.eventNames=C.write=C.flush=m,C.serializers=k,C._serialize=V,C._stdErrSerialize=F,C.child=ie,j&&(C._logEvent=h());function T(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function K(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,s(q,C,"error","log"),s(q,C,"fatal","error"),s(q,C,"warn","error"),s(q,C,"info","log"),s(q,C,"debug","log"),s(q,C,"trace","log")}function ie(J,ce){if(!J)throw new Error("missing bindings for child Pino");ce=ce||{},V&&J.serializers&&(ce.serializers=J.serializers);let Ae=ce.serializers;if(V&&Ae){var xe=Object.assign({},k,Ae),Ue=w.browser.serialize===!0?Object.keys(xe):V;delete J.serializers,f([J],Ue,xe,this._stdErrSerialize)}function Le(ye){this._childLevel=(ye._childLevel|0)+1,this.error=c(ye,J,"error"),this.fatal=c(ye,J,"fatal"),this.warn=c(ye,J,"warn"),this.info=c(ye,J,"info"),this.debug=c(ye,J,"debug"),this.trace=c(ye,J,"trace"),xe&&(this.serializers=xe,this._serialize=Ue),j&&(this._logEvent=h([].concat(ye._logEvent.bindings,J)))}return Le.prototype=this,new Le(this)}return C}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=a,o.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:I,unixTime:P,isoTime:L});function s(w,j,S,k){let V=Object.getPrototypeOf(j);j[S]=j.levelVal>j.levels.values[S]?m:V[S]?V[S]:n[S]||n[k]||m,u(w,j,S)}function u(w,j,S){!w.transmit&&j[S]===m||(j[S]=function(k){return function(){let V=w.timestamp(),F=new Array(arguments.length),O=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var R=0;R<F.length;R++)F[R]=arguments[R];if(w.serialize&&!w.asObject&&f(F,this._serialize,this.serializers,this._stdErrSerialize),w.asObject?k.call(O,l(this,S,F,V)):k.apply(O,F),w.transmit){let C=w.transmit.level||j.level,q=o.levels.values[C],T=o.levels.values[S];if(T<q)return;p(this,{ts:V,methodLevel:S,methodValue:T,transmitLevel:C,transmitValue:o.levels.values[w.transmit.level||j.level],send:w.transmit.send,val:j.levelVal},F)}}}(j[S]))}function l(w,j,S,k){w._serialize&&f(S,w._serialize,w.serializers,w._stdErrSerialize);let V=S.slice(),F=V[0],O={};k&&(O.time=k),O.level=o.levels.values[j];let R=(w._childLevel|0)+1;if(R<1&&(R=1),F!==null&&typeof F=="object"){for(;R--&&typeof V[0]=="object";)Object.assign(O,V.shift());F=V.length?r(V.shift(),V):void 0}else typeof F=="string"&&(F=r(V.shift(),V));return F!==void 0&&(O.msg=F),O}function f(w,j,S,k){for(let V in w)if(k&&w[V]instanceof Error)w[V]=o.stdSerializers.err(w[V]);else if(typeof w[V]=="object"&&!Array.isArray(w[V]))for(let F in w[V])j&&j.indexOf(F)>-1&&F in S&&(w[V][F]=S[F](w[V][F]))}function c(w,j,S){return function(){let k=new Array(1+arguments.length);k[0]=j;for(var V=1;V<k.length;V++)k[V]=arguments[V-1];return w[S].apply(this,k)}}function p(w,j,S){let k=j.send,V=j.ts,F=j.methodLevel,O=j.methodValue,R=j.val,C=w._logEvent.bindings;f(S,w._serialize||Object.keys(w.serializers),w.serializers,w._stdErrSerialize===void 0?!0:w._stdErrSerialize),w._logEvent.ts=V,w._logEvent.messages=S.filter(function(q){return C.indexOf(q)===-1}),w._logEvent.level.label=F,w._logEvent.level.value=O,k(F,w._logEvent,R),w._logEvent=h(C)}function h(w){return{ts:0,messages:[],bindings:w||[],level:{label:"",value:0}}}function g(w){let j={type:w.constructor.name,msg:w.message,stack:w.stack};for(let S in w)j[S]===void 0&&(j[S]=w[S]);return j}function d(w){return typeof w.timestamp=="function"?w.timestamp:w.timestamp===!1?b:I}function y(){return{}}function v(w){return w}function m(){}function b(){return!1}function I(){return Date.now()}function P(){return Math.round(Date.now()/1e3)}function L(){return new Date(Date.now()).toISOString()}function U(){function w(j){return typeof j!="undefined"&&j}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return w(self)||w(window)||w(this)||{}}}}),eg=oe((e,t)=>{(function(r,n){typeof e=="object"&&typeof t!="undefined"?n(e):typeof define=="function"&&yt.amdO?define(["exports"],n):(r=typeof globalThis!="undefined"?globalThis:r||self,n(r["fast-equals"]={}))})(e,function(r){"use strict";var n=typeof WeakSet=="function",a=Object.keys;function i(S,k){return S===k||S!==S&&k!==k}function o(S){return S.constructor===Object||S.constructor==null}function s(S){return!!S&&typeof S.then=="function"}function u(S){return!!(S&&S.$$typeof)}function l(){var S=[];return{add:function(k){S.push(k)},has:function(k){return S.indexOf(k)!==-1}}}var f=function(S){return S?function(){return new WeakSet}:l}(n);function c(S){return function(k){var V=S||k;return function(F,O,R){R===void 0&&(R=f());var C=!!F&&typeof F=="object",q=!!O&&typeof O=="object";if(C||q){var T=C&&R.has(F),M=q&&R.has(O);if(T||M)return T&&M;C&&R.add(F),q&&R.add(O)}return V(F,O,R)}}}function p(S,k,V,F){var O=S.length;if(k.length!==O)return!1;for(;O-- >0;)if(!V(S[O],k[O],F))return!1;return!0}function h(S,k,V,F){var O=S.size===k.size;if(O&&S.size){var R={};S.forEach(function(C,q){if(O){var T=!1,M=0;k.forEach(function(K,ie){!T&&!R[M]&&(T=V(q,ie,F)&&V(C,K,F),T&&(R[M]=!0)),M++}),O=T}})}return O}var g="_owner",d=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function y(S,k,V,F){var O=a(S),R=O.length;if(a(k).length!==R)return!1;if(R)for(var C=void 0;R-- >0;){if(C=O[R],C===g){var q=u(S),T=u(k);if((q||T)&&q!==T)return!1}if(!d(k,C)||!V(S[C],k[C],F))return!1}return!0}function v(S,k){return S.source===k.source&&S.global===k.global&&S.ignoreCase===k.ignoreCase&&S.multiline===k.multiline&&S.unicode===k.unicode&&S.sticky===k.sticky&&S.lastIndex===k.lastIndex}function m(S,k,V,F){var O=S.size===k.size;if(O&&S.size){var R={};S.forEach(function(C){if(O){var q=!1,T=0;k.forEach(function(M){!q&&!R[T]&&(q=V(C,M,F),q&&(R[T]=!0)),T++}),O=q}})}return O}var b=typeof Map=="function",I=typeof Set=="function";function P(S){var k=typeof S=="function"?S(V):V;function V(F,O,R){if(F===O)return!0;if(F&&O&&typeof F=="object"&&typeof O=="object"){if(o(F)&&o(O))return y(F,O,k,R);var C=Array.isArray(F),q=Array.isArray(O);return C||q?C===q&&p(F,O,k,R):(C=F instanceof Date,q=O instanceof Date,C||q?C===q&&i(F.getTime(),O.getTime()):(C=F instanceof RegExp,q=O instanceof RegExp,C||q?C===q&&v(F,O):s(F)||s(O)?F===O:b&&(C=F instanceof Map,q=O instanceof Map,C||q)?C===q&&h(F,O,k,R):I&&(C=F instanceof Set,q=O instanceof Set,C||q)?C===q&&m(F,O,k,R):y(F,O,k,R)))}return F!==F&&O!==O}return V}var L=P(),U=P(function(){return i}),w=P(c()),j=P(c(i));r.circularDeepEqual=w,r.circularShallowEqual=j,r.createCustomEqual=P,r.deepEqual=L,r.sameValueZeroEqual=i,r.shallowEqual=U,Object.defineProperty(r,"__esModule",{value:!0})})}),tg={};Ta(tg,{buildMockCaseAssistEngine:()=>Jm,buildMockProductListingEngine:()=>Wm,buildMockProductRecommendationsAppEngine:()=>Ym,buildMockRaw:()=>Ac,buildMockRecommendationAppEngine:()=>Hm,buildMockResult:()=>Gm,buildMockSearchAppEngine:()=>Bm,createMockState:()=>Nu});var rg=le(Tp()),ng=le(Np()),H=new Error("Failed to load reducers."),Hs=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Va=class extends Error{constructor(e,t){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};function ag(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}function ig(e){return typeof e!="object"||!e?!1:Object.values(e).every(og)}function og(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Ys(e){return e===429}var Ze=class{static async call(e){let t=ug(e),{preprocessRequest:r,logger:n}=e,a={...t,...r?await r(t,"searchApiFetch"):{}};n.info(a,"Platform request");let{url:i,...o}=a,s=async()=>{let u=await(0,rg.default)(i,o);if(Ys(u.status))throw u;return u};try{let u=await(0,ng.backOff)(s,{retry:l=>{let f=l&&Ys(l.status);return f&&n.info("Platform retrying request"),f}});if(u.status===419)throw n.info("Platform renewing token"),new Hs;if(u.status===404)throw new Va(i,u.status);return n.info({response:u,requestInfo:a},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Va(i):u}}};function Ws(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function Js(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Ws("platform",e)}function sg(e){return Ws("analytics",e)}function ug(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=e,s=e.method==="POST"||e.method==="PUT",u=lg(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...e.headers},...s&&{body:u},signal:o}}function lg(e,t){return t==="application/x-www-form-urlencoded"?ig(e)?ag(e):"":JSON.stringify(e)}var Ma=le(cr()),cg=le(Up()),dg=le(Qp());function xn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function W(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(f){try{l(n.next(f))}catch(c){o(c)}}function u(f){try{l(n.throw(f))}catch(c){o(c)}}function l(f){f.done?i(f.value):a(f.value).then(s,u)}l((n=n.apply(e,t||[])).next())})}var de;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(de||(de={}));function fg(){return typeof window!="undefined"}function $a(){return typeof navigator!="undefined"}function Ks(){return typeof document!="undefined"}function La(){try{return typeof localStorage!="undefined"}catch{return!1}}function pg(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function Zs(){return $a()&&navigator.cookieEnabled}function gg(){return typeof crypto!="undefined"}function hg(){return gg()&&typeof crypto.getRandomValues!="undefined"}var vg=[de.click,de.custom,de.search,de.view],yg=(e,t)=>vg.indexOf(e)!==-1?Object.assign({language:Ks()?document.documentElement.lang:"unknown",userAgent:$a()?navigator.userAgent:"unknown"},t):t,At=class{static set(e,t,r){var n,a,i,o,s;r?(i=new Date,i.setTime(i.getTime()+r),o="; expires="+i.toGMTString()):o="",s=location.hostname,s.indexOf(".")===-1?document.cookie=e+"="+t+o+"; path=/":(a=s.split("."),a.shift(),n="."+a.join("."),Gs({name:e,value:t,expires:o,domain:n}),(At.get(e)==null||At.get(e)!=t)&&(n="."+s,Gs({name:e,value:t,expires:o,domain:n})))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(a=a.replace(/^\s+/,""),a.indexOf(t)==0)return a.substring(t.length,a.length)}return null}static erase(e){At.set(e,"",-1)}};function Gs(e){let{name:t,value:r,expires:n,domain:a}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${a}; SameSite=Lax`}function mg(){return La()?localStorage:Zs()?new Et:pg()?sessionStorage:new dr}var Et=class{getItem(e){return At.get(`${Et.prefix}${e}`)}removeItem(e){At.erase(`${Et.prefix}${e}`)}setItem(e,t){At.set(`${Et.prefix}${e}`,t)}};Et.prefix="coveo_";var bg=class{constructor(){this.cookieStorage=new Et}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)}},dr=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},fr="__coveo.analytics.history",Xs=20,eu=1e3*60,tu=75,qn=class{constructor(e){this.store=e||mg()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return W(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return W(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(fr);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return W(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(fr);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(fr,JSON.stringify(e.slice(0,Xs)))}catch{}}clear(){try{this.store.removeItem(fr)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return e!=null?e.sort((t,r)=>(r.internalTime||0)-(t.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,tu)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>eu:!0}stripInternalTime(e){return e.map(t=>{let{name:r,time:n,value:a}=t;return{name:r,time:n,value:a}})}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(t=>this.stripEmptyQuery(t))}},ru=Object.freeze({__proto__:null,STORE_KEY:fr,MAX_NUMBER_OF_HISTORY_ELEMENTS:Xs,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:eu,MAX_VALUE_SIZE:tu,HistoryStore:qn,default:qn}),Sg=(e,t)=>W(void 0,void 0,void 0,function*(){return e===de.view?(yield wg(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),wg=e=>W(void 0,void 0,void 0,function*(){let t=new qn,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)}),jt=e=>e?(Number(e)^Cg(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):(`${1e7}`+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,jt),Cg=e=>{if(hg())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)(t&3)==0&&(r=Math.random()*4294967296),e[t]=r>>>((t&3)<<3)&255;return e},Ee=Object.keys,Da={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Og=Ee(Da).map(e=>Da[e]),xg=[...Og].join("|"),qg=new RegExp(`^(${xg}$)`),Ig={svcAction:"svc_action",svcActionData:"svc_action_data"},Rg=e=>Ee(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Da[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),Fg=e=>qg.test(e),Ag=[Fg],nu={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},au={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Oe={action:"pa",list:"pal",listSource:"pls"},In={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Eg=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],_a={id:"quoteId",affiliation:"quoteAffiliation"},za={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},jg={add:Oe,bookmark_add:Oe,bookmark_remove:Oe,click:Oe,checkout:Oe,checkout_option:Oe,detail:Oe,impression:Oe,remove:Oe,refund:Object.assign(Object.assign({},Oe),In),purchase:Object.assign(Object.assign({},Oe),In),quickview:Oe,quote:Object.assign(Object.assign({},Oe),_a),review:Object.assign(Object.assign({},Oe),za)},kg=Ee(nu).map(e=>nu[e]),Pg=Ee(au).map(e=>au[e]),Tg=Ee(Oe).map(e=>Oe[e]),Vg=Ee(In).map(e=>In[e]),Mg=Ee(za).map(e=>za[e]),$g=Ee(_a).map(e=>_a[e]),Lg=[...kg,"custom"].join("|"),Dg=[...Pg,"custom"].join("|"),iu="(pr[0-9]+)",ou="(il[0-9]+pi[0-9]+)",_g=new RegExp(`^${iu}(${Lg})$`),zg=new RegExp(`^(${ou}(${Dg}))|(il[0-9]+nm)$`),Ng=new RegExp(`^(${Tg.join("|")})$`),Ug=new RegExp(`^(${Vg.join("|")})$`),Qg=new RegExp(`^${iu}custom$`),Bg=new RegExp(`^${ou}custom$`),Hg=new RegExp(`^(${[...Eg,...Mg,...$g].join("|")})$`),Yg=e=>_g.test(e),Wg=e=>zg.test(e),Jg=e=>Ng.test(e),Kg=e=>Ug.test(e),Zg=e=>Hg.test(e),Gg=[Wg,Yg,Jg,Kg,Zg],Xg=[Qg,Bg],eh={anonymizeIp:"aip"},th={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},rh={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},nh=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale"],ah=Object.assign(Object.assign(Object.assign(Object.assign({},eh),th),rh),nh.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Na=Object.assign(Object.assign({},ah),Ig),ih=e=>{let t=!!e.action&&jg[e.action]||{};return Ee(e).reduce((r,n)=>{let a=t[n]||Na[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})},{})},oh=Ee(Na).map(e=>Na[e]),sh=e=>oh.indexOf(e)!==-1,uh=e=>e==="custom",lh=e=>[...Gg,...Ag,sh,uh].some(t=>t(e)),ch=e=>Ee(e).reduce((t,r)=>{let n=dh(r);return n?Object.assign(Object.assign({},t),fh(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),dh=e=>{let t;return[...Xg].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!Boolean(t)}),t},fh=(e,t)=>Ee(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),ph=class{constructor(e){this.opts=e}sendEvent(e,t){return W(this,void 0,void 0,function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=this.encodeForEventType(e,t),i=yield this.getQueryParamsForEventType(e),o={url:`${r}/analytics/${e}?${i}`,body:new Blob([a],{type:"application/x-www-form-urlencoded"})},{url:s,body:u}=Object.assign(Object.assign({},o),n?yield n(o,"analyticsBeacon"):{});console.log(`Sending beacon for "${e}" with: `,JSON.stringify(t)),navigator.sendBeacon(s,u)})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return W(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(e){return[de.click,de.custom,de.search,de.view].indexOf(e)!==-1}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(t=>!!e[t]).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},gh=class{sendEvent(e,t){return W(this,void 0,void 0,function*(){return Promise.resolve()})}},hh=window.fetch,su=class{constructor(e){this.opts=e}sendEvent(e,t){return W(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),a?yield a(o,"analyticsFetch"):{}),{url:u}=s,l=xn(s,["url"]),f=yield hh(u,l);if(f.ok){let c=yield f.json();return c.visitorId&&n.setCurrentVisitorId(c.visitorId),c}else{try{f.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,f,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}shouldAppendVisitorId(e){return[de.click,de.custom,de.search,de.view].indexOf(e)!==-1}getVisitorIdParam(){return W(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},vh=class{constructor(e,t){La()&&Zs()?this.storage=new bg:La()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new dr),this.client=new su(e),this.beaconClient=new ph(e),window.addEventListener("beforeunload",()=>{let r=t();for(let{eventType:n,payload:a}of r)this.beaconClient.sendEvent(n,a)})}},yh=class{constructor(e,t){this.storage=t||new dr,this.client=new su(e)}},mh=class{constructor(){this.storage=new dr,this.client=new gh}},bh="xx",Sh=e=>(e==null?void 0:e.startsWith(bh))||!1,wh=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please install @react-native-async-storage/async-storage and instantiate 
        your analytics client as follows:
        
        import {ReactNativeRuntime} from 'coveo.analytics/react-native';
        
        const analytics = new CoveoAnalytics({
            ...your options,
            runtimeEnvironment: new ReactNativeRuntime();
        })
    `;function Ch(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var Oh=["1",1,"yes",!0];function Ua(){return $a()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Oh.indexOf(e)!==-1)}var xh="v15",qh={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"},Qe=class{constructor(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Sg,yg].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),Ua()&&(this.clear(),this.runtime.storage=new dr)}get defaultOptions(){return{endpoint:qh.default,token:"",version:xh,beforeSendHooks:[],afterSendHooks:[]}}initRuntime(e){return fg()&&Ks()?new vh(e,()=>{let t=[...this.bufferedRequests];return this.bufferedRequests=[],t}):(Ch()&&console.warn(wh),new yh(e))}get storage(){return this.runtime.storage}determineVisitorId(){return W(this,void 0,void 0,function*(){try{return(yield this.storage.getItem("visitorId"))||jt()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),jt()}})}getCurrentVisitorId(){return W(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return W(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}getParameters(e,...t){return W(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...t)})}getPayload(e,...t){return W(this,void 0,void 0,function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(jt()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}resolveParameters(e,...t){return W(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[i=>r.length>0?this.parseVariableArgumentsPayload(r,i):i[0],i=>W(this,void 0,void 0,function*(){return Object.assign(Object.assign({},i),{visitorId:n?yield this.getCurrentVisitorId():""})}),i=>a?this.ensureAnonymousUserWhenUsingApiKey(i):i,i=>this.beforeSendHooks.reduce((o,s)=>W(this,void 0,void 0,function*(){let u=yield o;return yield s(e,u)}),i)].reduce((i,o)=>W(this,void 0,void 0,function*(){let s=yield i;return yield o(s)}),Promise.resolve(t))})}resolvePayloadForParameters(e,t){return W(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[n=>this.removeEmptyPayloadValues(n,e),n=>this.validateParams(n),n=>r?ih(n):n,n=>r?this.removeUnknownParameters(n):n,n=>r?this.processCustomParameters(n):n].reduce((n,a)=>W(this,void 0,void 0,function*(){let i=yield n;return yield a(i)}),Promise.resolve(t))})}sendEvent(e,...t){return W(this,void 0,void 0,function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return this.bufferedRequests.push({eventType:r,payload:a}),yield Promise.all(this.afterSendHooks.map(i=>i(e,n))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBufferWithFetch(){return W(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.client.sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new qn().clear()}sendSearchEvent(e){return W(this,void 0,void 0,function*(){return this.sendEvent(de.search,e)})}sendClickEvent(e){return W(this,void 0,void 0,function*(){return this.sendEvent(de.click,e)})}sendCustomEvent(e){return W(this,void 0,void 0,function*(){return this.sendEvent(de.custom,e)})}sendViewEvent(e){return W(this,void 0,void 0,function*(){return this.sendEvent(de.view,e)})}getVisit(){return W(this,void 0,void 0,function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e})}getHealth(){return W(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[de.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(t,n)||r(e[n])).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:e[a]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(t=>{if(lh(t))return!0;console.log(t,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=xn(e,["custom"]),n=this.lowercaseKeys(t),a=ch(r);return Object.assign(Object.assign({},n),a)}lowercaseKeys(e){return Object.keys(e||{}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r.toLowerCase()]:e[r]}),{})}validateParams(e){let{anonymizeIp:t}=e,r=xn(e,["anonymizeIp"]);return t!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${t}`.toLowerCase())==-1&&(r.anonymizeIp=1),r}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=xn(e,["userId"]);return Sh(this.options.token)&&!t?(r.userId="anonymous",r):e}get baseUrl(){let{version:e,endpoint:t}=this.options,r=t.indexOf(".cloud.coveo.com")!==-1;return`${t}${r?"":"/rest"}/${e}`}},A;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults"})(A||(A={}));var uu={[A.triggerNotify]:"queryPipelineTriggers",[A.triggerExecute]:"queryPipelineTriggers",[A.triggerQuery]:"queryPipelineTriggers",[A.triggerRedirect]:"queryPipelineTriggers",[A.queryError]:"errors",[A.queryErrorBack]:"errors",[A.queryErrorClear]:"errors",[A.queryErrorRetry]:"errors",[A.pagerNext]:"getMoreResults",[A.pagerPrevious]:"getMoreResults",[A.pagerNumber]:"getMoreResults",[A.pagerResize]:"getMoreResults",[A.pagerScrolling]:"getMoreResults",[A.facetSearch]:"facet",[A.facetShowLess]:"facet",[A.facetShowMore]:"facet",[A.recommendation]:"recommendation",[A.likeSmartSnippet]:"smartSnippet",[A.dislikeSmartSnippet]:"smartSnippet",[A.expandSmartSnippet]:"smartSnippet",[A.collapseSmartSnippet]:"smartSnippet",[A.openSmartSnippetFeedbackModal]:"smartSnippet",[A.closeSmartSnippetFeedbackModal]:"smartSnippet",[A.sendSmartSnippetReason]:"smartSnippet",[A.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[A.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[A.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[A.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[A.clearRecentQueries]:"recentQueries",[A.recentResultClick]:"recentlyClickedDocuments",[A.clearRecentResults]:"recentlyClickedDocuments",[A.showLessFoldedResults]:"folding"},Rn=class{constructor(){this.runtime=new mh,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}};function Ih(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function Rh(e){return e.map(t=>t.replace(/;/g,""))}function lu(e){let t=256,r=e.join(";");return r.length<=t?r:lu(e.slice(1))}var cu=e=>{let t=Rh(e),r=Ih(t);return lu(r)};function du(e){let t=typeof e.partialQueries=="string"?e.partialQueries:cu(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:cu(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Fh=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||Ua();this.coveoAnalyticsClient=r?new Rn:new Qe(e)}disable(){this.coveoAnalyticsClient instanceof Qe&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Rn}enable(){this.coveoAnalyticsClient=new Qe(this.opts)}logInterfaceLoad(){return this.logSearchEvent(A.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(A.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(A.recommendation)}logRecommendationOpen(e,t){return this.logClickEvent(A.recommendationOpen,e,t)}logStaticFilterClearAll(e){return this.logSearchEvent(A.staticFilterClearAll,e)}logStaticFilterSelect(e){return this.logSearchEvent(A.staticFilterSelect,e)}logStaticFilterDeselect(e){return this.logSearchEvent(A.staticFilterDeselect,e)}logFetchMoreResults(){return this.logCustomEvent(A.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(e){return this.logSearchEvent(A.interfaceChange,e)}logDidYouMeanAutomatic(){return this.logSearchEvent(A.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(A.didyoumeanClick)}logResultsSort(e){return this.logSearchEvent(A.resultsSort,e)}logSearchboxSubmit(){return this.logSearchEvent(A.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(A.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(A.searchboxAsYouType)}logBreadcrumbFacet(e){return this.logSearchEvent(A.breadcrumbFacet,e)}logBreadcrumbResetAll(){return this.logSearchEvent(A.breadcrumbResetAll)}logDocumentQuickview(e,t){return this.logClickEvent(A.documentQuickview,e,t)}logDocumentOpen(e,t){return this.logClickEvent(A.documentOpen,e,t)}logOmniboxAnalytics(e){return this.logSearchEvent(A.omniboxAnalytics,du(e))}logOmniboxFromLink(e){return this.logSearchEvent(A.omniboxFromLink,du(e))}logSearchFromLink(){return this.logSearchEvent(A.searchFromLink)}logTriggerNotify(e){return this.logCustomEvent(A.triggerNotify,e)}logTriggerExecute(e){return this.logCustomEvent(A.triggerExecute,e)}logTriggerQuery(){let e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(A.triggerQuery,e)}logTriggerRedirect(e){let t=Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(A.triggerRedirect,t)}logPagerResize(e){return this.logCustomEvent(A.pagerResize,e)}logPagerNumber(e){return this.logCustomEvent(A.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(A.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(A.pagerPrevious,e)}logPagerScrolling(){return this.logCustomEvent(A.pagerScrolling)}logFacetClearAll(e){return this.logSearchEvent(A.facetClearAll,e)}logFacetSearch(e){return this.logSearchEvent(A.facetSearch,e)}logFacetSelect(e){return this.logSearchEvent(A.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(A.facetDeselect,e)}logFacetExclude(e){return this.logSearchEvent(A.facetExclude,e)}logFacetUnexclude(e){return this.logSearchEvent(A.facetUnexclude,e)}logFacetSelectAll(e){return this.logSearchEvent(A.facetSelectAll,e)}logFacetUpdateSort(e){return this.logSearchEvent(A.facetUpdateSort,e)}logFacetShowMore(e){return this.logCustomEvent(A.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(A.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(A.queryError,e)}logQueryErrorBack(){return W(this,void 0,void 0,function*(){return yield this.logCustomEvent(A.queryErrorBack),this.logSearchEvent(A.queryErrorBack)})}logQueryErrorRetry(){return W(this,void 0,void 0,function*(){return yield this.logCustomEvent(A.queryErrorRetry),this.logSearchEvent(A.queryErrorRetry)})}logQueryErrorClear(){return W(this,void 0,void 0,function*(){return yield this.logCustomEvent(A.queryErrorClear),this.logSearchEvent(A.queryErrorClear)})}logLikeSmartSnippet(){return this.logCustomEvent(A.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(A.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(A.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(A.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(A.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(A.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(e,t){return this.logCustomEvent(A.sendSmartSnippetReason,{reason:e,details:t})}logExpandSmartSnippetSuggestion(e){return this.logCustomEvent(A.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return this.logCustomEvent(A.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logShowMoreSmartSnippetSuggestion(e){return this.logCustomEvent(A.showMoreSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return this.logCustomEvent(A.showLessSmartSnippetSuggestion,e)}logOpenSmartSnippetSource(e,t){return this.logClickEvent(A.openSmartSnippetSource,e,t)}logOpenSmartSnippetSuggestionSource(e,t){return this.logClickEvent(A.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logRecentQueryClick(){return this.logSearchEvent(A.recentQueryClick)}logClearRecentQueries(){return this.logCustomEvent(A.clearRecentQueries)}logRecentResultClick(e,t){return this.logCustomEvent(A.recentResultClick,{info:e,identifier:t})}logClearRecentResults(){return this.logCustomEvent(A.clearRecentResults)}logNoResultsBack(){return this.logSearchEvent(A.noResultsBack)}logShowMoreFoldedResults(e,t){return this.logClickEvent(A.showMoreFoldedResults,e,t)}logShowLessFoldedResults(){return this.logCustomEvent(A.showLessFoldedResults)}logCustomEvent(e,t){return W(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(r)),{eventType:uu[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logCustomEventWithType(e,t,r){return W(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:t,eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(a)})}logSearchEvent(e,t){return W(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,t))})}logClickEvent(e,t,r,n){return W(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(a)})}getBaseSearchEventRequest(e,t){return W(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseCustomEventRequest(e){return W(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseEventRequest(e){return W(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Qe?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},fu=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,pr={pageview:"pageview",event:"event"},Ah=class{constructor({client:e,uuidGenerator:t=jt}){this.actionData={},this.client=e,this.uuidGenerator=t,this.pageViewId=t(),this.nextPageViewId=this.pageViewId,this.currentLocation=fu(window.location),this.lastReferrer=document.referrer,this.addHooks()}setAction(e,t){this.action=e,this.actionData=t}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,t){return Object.assign({hitType:e},this.getNextValues(e,t))}updateLocationInformation(e,t){this.updateLocationForNextPageView(e,t)}getDefaultContextInformation(e){let t={title:document.title,encoding:document.characterSet},r={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now().toString(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),r),n),t)}updateLocationForNextPageView(e,t){let{pageViewId:r,referrer:n,location:a}=this.getNextValues(e,t);this.lastReferrer=n,this.pageViewId=r,this.currentLocation=a,e===pr.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,t){return{pageViewId:e===pr.pageview?this.nextPageViewId:this.pageViewId,referrer:e===pr.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===pr.pageview?this.getCurrentLocationFromPayload(t):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let t=r=>r.replace(/^\/?(.*)$/,"/$1");return`${(r=>r.split("/").slice(0,3).join("/"))(this.currentLocation)}${t(e.page)}`}else return fu(window.location)}},Fn=Object.assign({},pr),pu=Object.keys(Fn).map(e=>Fn[e]),Eh=class extends Ah{constructor({client:e,uuidGenerator:t=jt}){super({client:e,uuidGenerator:t});this.ticket={}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[t])=>pu.indexOf(e)!==-1?this.addSVCDataToPayload(e,t):t),this.client.registerAfterSendEventHook((e,...[t])=>(pu.indexOf(e)!==-1&&this.updateLocationInformation(e,t),t))}addHooksForPageView(){this.client.addEventTypeMapping(Fn.pageview,{newEventType:de.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Fn.event,{newEventType:de.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,t){var r;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((r=this.actionData)!==null&&r!==void 0?r:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),n),t)}getTicketPayload(){return Rg(this.ticket)}};Eh.Id="svc";var gu;(function(e){e.click="click",e.flowStart="flowStart"})(gu||(gu={}));var hu;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(hu||(hu={}));var vu;(function(e){e.quit="Quit",e.solved="Solved"})(vu||(vu={}));var jh=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||Ua();this.coveoAnalyticsClient=r?new Rn:new Qe(e)}disable(){this.coveoAnalyticsClient instanceof Qe&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Rn}enable(){this.coveoAnalyticsClient=new Qe(this.opts)}logInterfaceLoad(){return this.logSearchEvent(A.interfaceLoad)}logInterfaceChange(e){return this.logSearchEvent(A.interfaceChange,e)}logFetchMoreResults(){return this.logCustomEvent(A.pagerScrolling,{type:"getMoreResults"})}logFacetSelect(e){return this.logSearchEvent(A.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(A.facetDeselect,e)}logFacetUpdateSort(e){return this.logSearchEvent(A.facetUpdateSort,e)}logFacetClearAll(e){return this.logSearchEvent(A.facetClearAll,e)}logFacetShowMore(e){return this.logCustomEvent(A.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(A.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(A.queryError,e)}logCustomEvent(e,t){return W(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(r)),{eventType:uu[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(e,t){return W(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,t))})}logPagerNumber(e){return this.logCustomEvent(A.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(A.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(A.pagerPrevious,e)}logResultsSort(e){return this.logSearchEvent(A.resultsSort,e)}getBaseCustomEventRequest(e){return W(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,t){return W(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return W(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Qe?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},je=()=>({q:"",enableQuerySyntax:!1});function yu(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Me(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:yu(),pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""}}var Ge=()=>"default",mu="1.87.1",kh=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},An=class{constructor(e){this.stateNeededByBaseAnalyticsProvider=e}getLanguage(){return kh(this.stateNeededByBaseAnalyticsProvider)}getBaseMetadata(){let{context:e}=this.stateNeededByBaseAnalyticsProvider,t=(e==null?void 0:e.contextValues)||{},r={};for(let[n,a]of Object.entries(t)){let i=`context_${n}`;r[i]=a}return r.coveoHeadlessVersion=mu,r}getOriginContext(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originContext}getOriginLevel1(){return this.stateNeededByBaseAnalyticsProvider.searchHub||Ge()}getOriginLevel2(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originLevel2}getOriginLevel3(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.originLevel3}getIsAnonymous(){return this.stateNeededByBaseAnalyticsProvider.configuration.analytics.anonymous}};function gr(){return{}}function hr(){return{}}function vr(){return{}}function yr(){return{}}var mr=(e,t)=>{if("productListing"in e&&e.productListing)return e.productListing.facets.results.find(r=>r.facetId===t);if("search"in e&&e.search)return e.search.response.facets.find(r=>r.facetId===t)},Ph=(e,t)=>e.facetSet[t];function Th(e,t){return!!t&&t.facetId in e.facetSet}var bu=(e,t)=>{let r=mr(e,t);if(Th(e,r))return r},Vh=(e,t)=>{let r=bu(e,t);return r?r.values.filter(n=>n.state==="selected"):[]},br=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function mt(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(a=>a.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function Mh(e,t){return!!t&&t.facetId in e.categoryFacetSet}var Su=(e,t)=>{let r=mr(e,t);if(Mh(e,r))return r},$h=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},Qa=(e,t)=>{let r=Su(e,t);return mt(r==null?void 0:r.values).parents},Ba=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),kt=(e,t)=>{let r=Ou(t,e),n=r?r.field:"",a=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:a}};function Ha(e,t){let{facetId:r,facetValue:n}=e,a=kt(r,t),i=xu(t,r);return{...a,facetValue:i==="hierarchical"?Cu(t,r):n}}function De(e){return{facetSet:e.facetSet||yr(),categoryFacetSet:e.categoryFacetSet||gr(),dateFacetSet:e.dateFacetSet||hr(),numericFacetSet:e.numericFacetSet||vr(),..."search"in e&&{search:e.search?e.search:Me()},..."productListing"in e&&{productListing:e.productListing?e.productListing:Ba()}}}var wu=e=>{let t=[];return Lh(e).forEach((r,n)=>{let a=xu(e,r.facetId),i=Uh(r,n+1);if(a==="hierarchical"){if(!Qa(e,r.facetId).length)return;t.push({...i,...Nh(e,r.facetId),facetType:a,state:"selected"});return}r.values.forEach((o,s)=>{if(o.state==="idle")return;let u=Dh(o,s+1,a),l=a==="specific"?zh(o):_h(o);t.push({...i,...u,...l})})}),t},Lh=e=>"productListing"in e&&e.productListing?e.productListing.facets.results:"search"in e&&e.search?e.search.response.facets:[],Dh=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),_h=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),zh=e=>({displayValue:e.value,value:e.value}),Cu=(e,t)=>Qa(e,t).map(r=>r.value).join(";"),Nh=(e,t)=>{let r=1,n=Cu(e,t);return{value:n,valuePosition:r,displayValue:n}},Uh=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),Ou=(e,t)=>{var r;return e.facetSet[t]||((r=e.categoryFacetSet[t])==null?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},xu=(e,t)=>{let r=Ou(e,t);return r?r.type:"specific"},qu=class extends An{constructor(e){super(e);this.state=e}getFacetState(){return wu(De(this.state))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;return((e=this.state.search)==null?void 0:e.searchResponseId)||((t=this.state.search)==null?void 0:t.response.searchUid)||Me().response.searchUid}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||je().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Me().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Me().response.results.length}},Qh=({logger:e,state:t,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new qu(t)})=>{let i=t.configuration.accessToken,o=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=t.configuration.analytics.enabled,l=new Fh({token:i,endpoint:o,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(f,c)=>(e.info({...c,type:f,endpoint:o,token:i},"Analytics request"),c)]},a);return u||l.disable(),l},_e=()=>new Qe({}).getCurrentVisitorId(),Pt=new ru.HistoryStore,Iu=()=>{let e=Pt.getHistory().reverse().find(t=>t.name==="PageView"&&t.value);return e?e.value:""};Ma.default.extend(cg.default),Ma.default.extend(dg.default);var Ru="/rest/search/v2",Ya="/rest/ua",Xe=()=>({organizationId:"",accessToken:"",platformUrl:Js(),search:{apiBaseUrl:`${Js()}${Ru}`,locale:"en-US",timezone:Ma.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${sg()}${Ya}`,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:""}}),En=async e=>({analytics:{clientId:await _e(),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Iu()&&{pageId:Iu()}}}),Fu=()=>({redirectTo:null});function Wa(){return{}}function Be(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Bh(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Ja(r)}var Ja=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},ne=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let a in this.definition){let i=this.definition[a].validate(r[a]);i&&n.push(`${a}: ${i}`)}if(n.length)throw Bh(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},be=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&ee(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Se(e){return e===void 0}function Hh(e){return e===null}function ee(e){return Se(e)||Hh(e)}var B=class{constructor(e={}){this.config=e,this.value=new be(e)}validate(e){return this.value.validate(e)||(Yh(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Yh(e){return Se(e)||Au(e)}function Au(e){return typeof e=="number"&&!isNaN(e)}var X=class{constructor(e={}){this.value=new be(e)}validate(e){return this.value.validate(e)||(Wh(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Wh(e){return Se(e)||Eu(e)}function Eu(e){return typeof e=="boolean"}var Jh=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,D=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new be(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(Se(e)?null:jn(e)?!t&&!e.length?"value is an empty string.":r&&!Jh.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function jn(e){return Object.prototype.toString.call(e)==="[object String]"}var Y=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Se(e))return this.config.options.required?"value is required and is currently undefined":null;if(!ju(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&ee(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);i!==null&&(t+=" "+i)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function ju(e){return e!==void 0&&typeof e=="object"}var te=class{constructor(e={}){this.config=e,this.value=new be(this.config)}validate(e){if(!ee(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(ee(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&ee(n)&&(r=`value is null or undefined: ${e.join(",")}`);let a=this.validatePrimitiveValue(n,this.config.each);a!==null&&(r+=" "+a)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Eu(e)||jn(e)||Au(e)||ju(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Ka(e){return Array.isArray(e)}var Tt=class{constructor(e){this.config=e,this.value=new be(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Se(e)||Object.values(this.config.enum).find(r=>r===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},Vt=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Vt||{}),bt=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(bt||{}),Sr=e=>{if(Ka(e))return e.map(t=>Sr(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},ku=()=>({by:"relevancy"}),Kh=e=>({by:"date",order:e}),Zh=(e,t)=>({by:"field",order:t,field:e}),Gh=()=>({by:"qre"}),Xh=()=>({by:"nosort"}),ev=new Y({values:{by:new Tt({enum:bt,required:!0}),order:new Tt({enum:Vt}),field:new D}});function Mt(){return Sr(ku())}function $t(){return{contextValues:{}}}var Za=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function Pu(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Za(),originalQuery:""}}var Tu=["author","language","urihash","objecttype","collection","source","permanentid"],tv=[...Tu,"date","filetype","parents"],Fx=[...tv,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Ga=()=>({fieldsToInclude:Tu,fetchAllFields:!1,fieldsDescription:[]}),Lt=()=>"",Xa=e=>({past:[],present:e,future:[]}),rv=e=>{let{past:t,present:r,future:n}=e;if(!r||t.length===0)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}},nv=e=>{let{past:t,present:r,future:n}=e;if(!r||n.length===0)return e;let a=n[0],i=n.slice(1);return{past:[...t,r],present:a,future:i}},av=e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:i}=r,o=n(i,t);return i?i===o?r:{past:[...a,i],present:o,future:[]}:Xa(o)},iv=e=>{let{actionTypes:t,reducer:r}=e,n=Xa();return(a=n,i)=>{switch(i.type){case t.undo:return rv(a);case t.redo:return nv(a);case t.snapshot:return av({state:a,reducer:r,action:i});default:return a}}};function ei(){return{}}function ti(){return{}}var et=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});function wr(){return{enabled:!0}}function kn(){return{freezeFacetOrder:!1,facets:{}}}var St=()=>!1;function Cr(){return{contextValues:{}}}function Pn(){return[]}function ri(){return{}}function Vu(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}function ni(){return{}}function ai(){return{}}function Mu(){return Dt({})}function Dt(e){var t,r;return{context:e.context||$t(),dictionaryFieldContext:e.dictionaryFieldContext||Cr(),facetSet:e.facetSet||yr(),numericFacetSet:e.numericFacetSet||vr(),dateFacetSet:e.dateFacetSet||hr(),categoryFacetSet:e.categoryFacetSet||gr(),pagination:e.pagination||Be(),query:e.query||je(),tabSet:e.tabSet||ai(),advancedSearchQueries:e.advancedSearchQueries||et(),staticFilterSet:e.staticFilterSet||ni(),querySet:e.querySet||Wa(),instantResults:e.instantResults||ri(),sortCriteria:e.sortCriteria||Mt(),pipeline:e.pipeline||Lt(),searchHub:e.searchHub||Ge(),facetOptions:e.facetOptions||kn(),facetOrder:(t=e.facetOrder)!=null?t:Pn(),debug:(r=e.debug)!=null?r:St()}}function ii(){return{uniqueId:"",content:"",isLoading:!1}}var oi=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}}),$u=()=>({redirectTo:"",query:"",execute:{functionName:"",params:[]},executions:[],notification:"",notifications:[]}),si=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});function Lu(){return{}}function Du(){return{results:[],maxLength:10}}function _u(){return{queries:[],maxLength:10}}function zu(){return{length:void 0}}function Nu(e={}){return{configuration:Xe(),advancedSearchQueries:et(),staticFilterSet:ni(),facetSet:yr(),dateFacetSet:hr(),numericFacetSet:vr(),categoryFacetSet:gr(),facetSearchSet:ei(),categoryFacetSearchSet:ti(),facetOptions:kn(),pagination:Be(),query:je(),querySet:Wa(),instantResults:ri(),tabSet:ai(),querySuggest:{},redirection:Fu(),search:Me(),sortCriteria:Mt(),context:$t(),dictionaryFieldContext:Cr(),didYouMean:Pu(),fields:Ga(),history:Xa(Mu()),pipeline:Lt(),facetOrder:Pn(),searchHub:Ge(),debug:St(),resultPreview:ii(),version:"unit-testing-version",folding:oi(),triggers:$u(),questionAnswering:si(),standaloneSearchBoxSet:Lu(),recentResults:Du(),recentQueries:_u(),excerptLength:zu(),...e}}var ov=le(Wp()),ui={};Ta(ui,{MiddlewareArray:()=>sl,TaskAbortError:()=>Er,addListener:()=>Tl,clearAllListeners:()=>Vl,configureStore:()=>pl,createAction:()=>x,createAsyncThunk:()=>ae,createDraftSafeSelector:()=>He,createEntityAdapter:()=>Zv,createImmutableStateInvariantMiddleware:()=>Mv,createListenerMiddleware:()=>gy,createNextState:()=>Ut,createReducer:()=>Q,createSelector:()=>el,createSerializableStateInvariantMiddleware:()=>$v,createSlice:()=>Bv,current:()=>Si,findNonSerializableValue:()=>zn,freeze:()=>Tn,getDefaultMiddleware:()=>Ii,getType:()=>Nv,isAllOf:()=>Ei,isAnyOf:()=>Fr,isAsyncThunkAction:()=>xl,isDraft:()=>ke,isFulfilled:()=>Ol,isImmutableDefault:()=>cl,isPending:()=>wl,isPlain:()=>qi,isPlainObject:()=>_n,isRejected:()=>Un,isRejectedWithValue:()=>Cl,miniSerializeError:()=>ml,nanoid:()=>Fi,original:()=>sv,removeListener:()=>Ml,unwrapResult:()=>bl});function Re(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!1)var a,i;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ke(e){return!!e&&!!e[se]}function tt(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===hv}(e)||Array.isArray(e)||!!e[Gu]||!!e.constructor[Gu]||li(e)||ci(e))}function sv(e){return ke(e)||Re(23,e),e[se].t}function wt(e,t,r){r===void 0&&(r=!1),_t(e)===0?(r?Object.keys:Nt)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function _t(e){var t=e[se];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:li(e)?2:ci(e)?3:0}function zt(e,t){return _t(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uv(e,t){return _t(e)===2?e.get(t):e[t]}function Uu(e,t,r){var n=_t(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function Qu(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function li(e){return pv&&e instanceof Map}function ci(e){return gv&&e instanceof Set}function rt(e){return e.o||e.t}function di(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Xu(e);delete t[se];for(var r=Nt(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Tn(e,t){return t===void 0&&(t=!1),fi(e)||ke(e)||!tt(e)||(_t(e)>1&&(e.set=e.add=e.clear=e.delete=lv),Object.freeze(e),t&&wt(e,function(r,n){return Tn(n,!0)},!0)),e}function lv(){Re(2)}function fi(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ze(e){var t=Ci[e];return t||Re(18,e),t}function cv(e,t){Ci[e]||(Ci[e]=t)}function pi(){return Or}function gi(e,t){t&&(ze("Patches"),e.u=[],e.s=[],e.v=t)}function Vn(e){hi(e),e.p.forEach(dv),e.p=null}function hi(e){e===Or&&(Or=e.l)}function Bu(e){return Or={p:[],l:Or,h:e,m:!0,_:0}}function dv(e){var t=e[se];t.i===0||t.i===1?t.j():t.O=!0}function vi(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||ze("ES5").S(t,e,n),n?(r[se].P&&(Vn(t),Re(4)),tt(e)&&(e=Mn(t,e),t.l||$n(t,e)),t.u&&ze("Patches").M(r[se].t,e,t.u,t.s)):e=Mn(t,r,[]),Vn(t),t.u&&t.v(t.u,t.s),e!==Zu?e:void 0}function Mn(e,t,r){if(fi(t))return t;var n=t[se];if(!n)return wt(t,function(i,o){return Hu(e,n,t,i,o,r)},!0),t;if(n.A!==e)return t;if(!n.P)return $n(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=di(n.k):n.o;wt(n.i===3?new Set(a):a,function(i,o){return Hu(e,n,a,i,o,r)}),$n(e,a,!1),r&&e.u&&ze("Patches").R(n,r,e.u,e.s)}return n.o}function Hu(e,t,r,n,a,i){if(ke(a)){var o=Mn(e,a,i&&t&&t.i!==3&&!zt(t.D,n)?i.concat(n):void 0);if(Uu(r,n,o),!ke(o))return;e.m=!1}if(tt(a)&&!fi(a)){if(!e.h.F&&e._<1)return;Mn(e,a),t&&t.A.l||$n(e,a)}}function $n(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&Tn(t,r)}function yi(e,t){var r=e[se];return(r?rt(r):e)[t]}function Yu(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function nt(e){e.P||(e.P=!0,e.l&&nt(e.l))}function mi(e){e.o||(e.o=di(e.t))}function bi(e,t,r){var n=li(t)?ze("MapSet").N(t,r):ci(t)?ze("MapSet").T(t,r):e.g?function(a,i){var o=Array.isArray(a),s={i:o?1:0,A:i?i.A:pi(),P:!1,I:!1,D:{},l:i,t:a,k:null,o:null,j:null,C:!1},u=s,l=xr;o&&(u=[s],l=qr);var f=Proxy.revocable(u,l),c=f.revoke,p=f.proxy;return s.k=p,s.j=c,p}(t,r):ze("ES5").J(t,r);return(r?r.A:pi()).p.push(n),n}function Si(e){return ke(e)||Re(22,e),function t(r){if(!tt(r))return r;var n,a=r[se],i=_t(r);if(a){if(!a.P&&(a.i<4||!ze("ES5").K(a)))return a.t;a.I=!0,n=Wu(r,i),a.I=!1}else n=Wu(r,i);return wt(n,function(o,s){a&&uv(a.t,o)===s||Uu(n,o,t(s))}),i===3?new Set(n):n}(e)}function Wu(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return di(e)}function fv(){function e(o,s){var u=i[o];return u?u.enumerable=s:i[o]=u={configurable:!0,enumerable:s,get:function(){var l=this[se];return xr.get(l,o)},set:function(l){var f=this[se];xr.set(f,o,l)}},u}function t(o){for(var s=o.length-1;s>=0;s--){var u=o[s][se];if(!u.P)switch(u.i){case 5:n(u)&&nt(u);break;case 4:r(u)&&nt(u)}}}function r(o){for(var s=o.t,u=o.k,l=Nt(u),f=l.length-1;f>=0;f--){var c=l[f];if(c!==se){var p=s[c];if(p===void 0&&!zt(s,c))return!0;var h=u[c],g=h&&h[se];if(g?g.t!==p:!Qu(h,p))return!0}}var d=!!s[se];return l.length!==Nt(s).length+(d?0:1)}function n(o){var s=o.k;if(s.length!==o.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var l=0;l<s.length;l++)if(!s.hasOwnProperty(l))return!0;return!1}function a(o){o.O&&Re(3,JSON.stringify(rt(o)))}var i={};cv("ES5",{J:function(o,s){var u=Array.isArray(o),l=function(c,p){if(c){for(var h=Array(p.length),g=0;g<p.length;g++)Object.defineProperty(h,""+g,e(g,!0));return h}var d=Xu(p);delete d[se];for(var y=Nt(d),v=0;v<y.length;v++){var m=y[v];d[m]=e(m,c||!!d[m].enumerable)}return Object.create(Object.getPrototypeOf(p),d)}(u,o),f={i:u?5:4,A:s?s.A:pi(),P:!1,I:!1,D:{},l:s,t:o,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,se,{value:f,writable:!0}),l},S:function(o,s,u){u?ke(s)&&s[se].A===o&&t(o.p):(o.u&&function l(f){if(f&&typeof f=="object"){var c=f[se];if(c){var p=c.t,h=c.k,g=c.D,d=c.i;if(d===4)wt(h,function(I){I!==se&&(p[I]!==void 0||zt(p,I)?g[I]||l(h[I]):(g[I]=!0,nt(c)))}),wt(p,function(I){h[I]!==void 0||zt(h,I)||(g[I]=!1,nt(c))});else if(d===5){if(n(c)&&(nt(c),g.length=!0),h.length<p.length)for(var y=h.length;y<p.length;y++)g[y]=!1;else for(var v=p.length;v<h.length;v++)g[v]=!0;for(var m=Math.min(h.length,p.length),b=0;b<m;b++)h.hasOwnProperty(b)||(g[b]=!0),g[b]===void 0&&l(h[b])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?r(o):n(o)}})}var Ju,Or,wi=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",pv=typeof Map!="undefined",gv=typeof Set!="undefined",Ku=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Zu=wi?Symbol.for("immer-nothing"):((Ju={})["immer-nothing"]=!0,Ju),Gu=wi?Symbol.for("immer-draftable"):"__$immer_draftable",se=wi?Symbol.for("immer-state"):"__$immer_state",Ax=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",hv=""+Object.prototype.constructor,Nt=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Xu=Object.getOwnPropertyDescriptors||function(e){var t={};return Nt(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Ci={},xr={get:function(e,t){if(t===se)return e;var r=rt(e);if(!zt(r,t))return function(a,i,o){var s,u=Yu(i,o);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!tt(n)?n:n===yi(e.t,t)?(mi(e),e.o[t]=bi(e.A.h,n,e)):n},has:function(e,t){return t in rt(e)},ownKeys:function(e){return Reflect.ownKeys(rt(e))},set:function(e,t,r){var n=Yu(rt(e),t);if(n==null?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=yi(rt(e),t),i=a==null?void 0:a[se];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(Qu(r,a)&&(r!==void 0||zt(e.t,t)))return!0;mi(e),nt(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return yi(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,mi(e),nt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=rt(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Re(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Re(12)}},qr={};wt(xr,function(e,t){qr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),qr.deleteProperty=function(e,t){return qr.set.call(this,e,t,void 0)},qr.set=function(e,t,r){return xr.set.call(this,e[0],t,r,e[0])};var vv=function(){function e(r){var n=this;this.g=Ku,this.F=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var s=i;i=a;var u=n;return function(d){var y=this;d===void 0&&(d=s);for(var v=arguments.length,m=Array(v>1?v-1:0),b=1;b<v;b++)m[b-1]=arguments[b];return u.produce(d,function(I){var P;return(P=i).call.apply(P,[y,I].concat(m))})}}var l;if(typeof i!="function"&&Re(6),o!==void 0&&typeof o!="function"&&Re(7),tt(a)){var f=Bu(n),c=bi(n,a,void 0),p=!0;try{l=i(c),p=!1}finally{p?Vn(f):hi(f)}return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(d){return gi(f,o),vi(d,f)},function(d){throw Vn(f),d}):(gi(f,o),vi(l,f))}if(!a||typeof a!="object"){if((l=i(a))===void 0&&(l=a),l===Zu&&(l=void 0),n.F&&Tn(l,!0),o){var h=[],g=[];ze("Patches").M(a,l,h,g),o(h,g)}return l}Re(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(l){for(var f=arguments.length,c=Array(f>1?f-1:0),p=1;p<f;p++)c[p-1]=arguments[p];return n.produceWithPatches(l,function(h){return a.apply(void 0,[h].concat(c))})};var o,s,u=n.produce(a,i,function(l,f){o=l,s=f});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(l){return[l,o,s]}):[u,o,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){tt(r)||Re(8),ke(r)&&(r=Si(r));var n=Bu(this),a=bi(this,r,void 0);return a[se].C=!0,hi(n),a},t.finishDraft=function(r,n){var a=r&&r[se],i=a.A;return gi(i,n),vi(void 0,i)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!Ku&&Re(20),this.g=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=ze("Patches").$;return ke(r)?o(r,n):this.produce(r,function(s){return o(s,n)})},e}(),Fe=new vv,yv=Fe.produce,Ex=Fe.produceWithPatches.bind(Fe),jx=Fe.setAutoFreeze.bind(Fe),kx=Fe.setUseProxies.bind(Fe),Px=Fe.applyPatches.bind(Fe),Tx=Fe.createDraft.bind(Fe),Vx=Fe.finishDraft.bind(Fe),Ut=yv;Ns(ui,le(Cn()));var Ln="NOT_FOUND";function mv(e){var t;return{get:function(r){return t&&e(t.key,r)?t.value:Ln},put:function(r,n){t={key:r,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function bv(e,t){var r=[];function n(s){var u=r.findIndex(function(f){return t(s,f.key)});if(u>-1){var l=r[u];return u>0&&(r.splice(u,1),r.unshift(l)),l.value}return Ln}function a(s,u){n(s)===Ln&&(r.unshift({key:s,value:u}),r.length>e&&r.pop())}function i(){return r}function o(){r=[]}return{get:n,put:a,getEntries:i,clear:o}}var Sv=function(e,t){return e===t};function wv(e){return function(t,r){if(t===null||r===null||t.length!==r.length)return!1;for(var n=t.length,a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}}function Cv(e,t){var r=typeof t=="object"?t:{equalityCheck:t},n=r.equalityCheck,a=n===void 0?Sv:n,i=r.maxSize,o=i===void 0?1:i,s=r.resultEqualityCheck,u=wv(a),l=o===1?mv(u):bv(o,u);function f(){var c=l.get(arguments);if(c===Ln){if(c=e.apply(null,arguments),s){var p=l.getEntries(),h=p.find(function(g){return s(g.value,c)});h&&(c=h.value)}l.put(arguments,c)}return c}return f.clearCache=function(){return l.clear()},f}function Ov(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(n){return typeof n=="function"})){var r=t.map(function(n){return typeof n=="function"?"function "+(n.name||"unnamed")+"()":typeof n}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function xv(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var u=0,l,f={memoizeOptions:void 0},c=o.pop();if(typeof c=="object"&&(f=c,c=o.pop()),typeof c!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var p=f,h=p.memoizeOptions,g=h===void 0?r:h,d=Array.isArray(g)?g:[g],y=Ov(o),v=e.apply(void 0,[function(){return u++,c.apply(null,arguments)}].concat(d)),m=e(function(){for(var b=[],I=y.length,P=0;P<I;P++)b.push(y[P].apply(null,arguments));return l=v.apply(null,b),l});return Object.assign(m,{resultFunc:c,memoizedResultFunc:v,dependencies:y,lastResult:function(){return l},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),m};return a}var el=xv(Cv),Dn=le(Cn()),tl=le(Cn());function rl(e){var t=function(r){var n=r.dispatch,a=r.getState;return function(i){return function(o){return typeof o=="function"?o(n,a,e):i(o)}}};return t}var nl=rl();nl.withExtraArgument=rl;var Oi=nl,qv=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ir=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(f){return u([l,f])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(f){l=[6,f],a=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Qt=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},Iv=Object.defineProperty,Rv=Object.defineProperties,Fv=Object.getOwnPropertyDescriptors,al=Object.getOwnPropertySymbols,Av=Object.prototype.hasOwnProperty,Ev=Object.prototype.propertyIsEnumerable,il=function(e,t,r){return t in e?Iv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},qe=function(e,t){for(var r in t||(t={}))Av.call(t,r)&&il(e,r,t[r]);if(al)for(var n=0,a=al(t);n<a.length;n++){var r=a[n];Ev.call(t,r)&&il(e,r,t[r])}return e},xi=function(e,t){return Rv(e,Fv(t))},Rr=function(e,t,r){return new Promise(function(n,a){var i=function(u){try{s(r.next(u))}catch(l){a(l)}},o=function(u){try{s(r.throw(u))}catch(l){a(l)}},s=function(u){return u.done?n(u.value):Promise.resolve(u.value).then(i,o)};s((r=r.apply(e,t)).next())})},He=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=el.apply(void 0,e),n=function(a){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return r.apply(void 0,Qt([ke(a)?Si(a):a],i))};return n},jv=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?tl.compose:tl.compose.apply(null,arguments)},Mx=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};function _n(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function ol(e,t){var r=0;return{measureTime:function(n){var a=Date.now();try{return n()}finally{var i=Date.now();r+=i-a}},warnIfExceeded:function(){r>e&&console.warn(t+" took "+r+"ms, which is more than the warning threshold of "+e+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var sl=function(e){qv(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Qt([void 0],r[0].concat(this)))):new(t.bind.apply(t,Qt([void 0],r.concat(this))))},t}(Array),kv=!0,ul="Invariant failed";function ll(e,t){if(!e)throw kv?new Error(ul):new Error(ul+": "+(t||""))}function Pv(e,t,r,n){return JSON.stringify(e,Tv(t,n),r)}function Tv(e,t){var r=[],n=[];return t||(t=function(a,i){return r[0]===i?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(i)).join(".")+"]"}),function(a,i){if(r.length>0){var o=r.indexOf(this);~o?r.splice(o+1):r.push(this),~o?n.splice(o,1/0,a):n.push(a),~r.indexOf(i)&&(i=t.call(this,a,i))}else r.push(i);return e==null?i:e.call(this,a,i)}}function cl(e){return typeof e!="object"||e===null||typeof e=="undefined"||Object.isFrozen(e)}function Vv(e,t,r){var n=dl(e,t,r);return{detectMutations:function(){return fl(e,t,n,r)}}}function dl(e,t,r,n){t===void 0&&(t=[]),n===void 0&&(n="");var a={value:r};if(!e(r)){a.children={};for(var i in r){var o=n?n+"."+i:i;t.length&&t.indexOf(o)!==-1||(a.children[i]=dl(e,t,r[i],o))}}return a}function fl(e,t,r,n,a,i){t===void 0&&(t=[]),a===void 0&&(a=!1),i===void 0&&(i="");var o=r?r.value:void 0,s=o===n;if(a&&!s&&!Number.isNaN(n))return{wasMutated:!0,path:i};if(e(o)||e(n))return{wasMutated:!1};var u={};for(var l in r.children)u[l]=!0;for(var l in n)u[l]=!0;for(var l in u){var f=i?i+"."+l:l;if(!(t.length&&t.indexOf(f)!==-1)){var c=fl(e,t,r.children[l],n[l],s,f);if(c.wasMutated)return c}}return{wasMutated:!1}}function Mv(e){return e===void 0&&(e={}),function(){return function(u){return function(l){return u(l)}}};var t,r,n,a,i,o,s}function qi(e){var t=typeof e;return t==="undefined"||e===null||t==="string"||t==="boolean"||t==="number"||Array.isArray(e)||_n(e)}function zn(e,t,r,n,a){t===void 0&&(t=""),r===void 0&&(r=qi),a===void 0&&(a=[]);var i;if(!r(e))return{keyPath:t||"<root>",value:e};if(typeof e!="object"||e===null)return!1;for(var o=n!=null?n(e):Object.entries(e),s=a.length>0,u=0,l=o;u<l.length;u++){var f=l[u],c=f[0],p=f[1],h=t?t+"."+c:c;if(!(s&&a.indexOf(h)>=0)){if(!r(p))return{keyPath:h,value:p};if(typeof p=="object"&&(i=zn(p,h,r,n,a),i))return i}}return!1}function $v(e){return e===void 0&&(e={}),function(){return function(y){return function(v){return y(v)}}};var t,r,n,a,i,o,s,u,l,f,c,p,h,g,d}function Lv(e){return typeof e=="boolean"}function Dv(){return function(e){return Ii(e)}}function Ii(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t,n=e.immutableCheck,a=n===void 0?!0:n,i=e.serializableCheck,o=i===void 0?!0:i,s=new sl;if(r&&(Lv(r)?s.push(Oi):s.push(Oi.withExtraArgument(r.extraArgument))),!1){if(a)var u;if(o)var l}return s}var Ri=!0;function pl(e){var t=Dv(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,s=r.devTools,u=s===void 0?!0:s,l=r.preloadedState,f=l===void 0?void 0:l,c=r.enhancers,p=c===void 0?void 0:c,h;if(typeof a=="function")h=a;else if(_n(a))h=(0,Dn.combineReducers)(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;if(typeof g=="function"&&(g=g(t),!Ri&&!Array.isArray(g)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!Ri&&g.some(function(b){return typeof b!="function"}))throw new Error("each middleware provided to configureStore must be a function");var d=Dn.applyMiddleware.apply(void 0,g),y=Dn.compose;u&&(y=jv(qe({trace:!Ri},typeof u=="object"&&u)));var v=[d];Array.isArray(p)?v=Qt([d],p):typeof p=="function"&&(v=p(v));var m=y.apply(void 0,v);return(0,Dn.createStore)(h,f,m)}function x(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return qe(qe({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}function _v(e){return _n(e)&&typeof e.type=="string"&&Object.keys(e).every(zv)}function zv(e){return["type","payload","error","meta"].indexOf(e)>-1}function Nv(e){return""+e}function gl(e){var t={},r=[],n,a={addCase:function(i,o){var s=typeof i=="string"?i:i.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function Uv(e){return typeof e=="function"}function Q(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?gl(t):[t,r,n],i=a[0],o=a[1],s=a[2],u;if(Uv(e))u=function(){return Ut(e(),function(){})};else{var l=Ut(e,function(){});u=function(){return l}}function f(c,p){c===void 0&&(c=u());var h=Qt([i[p.type]],o.filter(function(g){var d=g.matcher;return d(p)}).map(function(g){var d=g.reducer;return d}));return h.filter(function(g){return!!g}).length===0&&(h=[s]),h.reduce(function(g,d){if(d)if(ke(g)){var y=g,v=d(y,p);return typeof v=="undefined"?g:v}else{if(tt(g))return Ut(g,function(b){return d(b,p)});var v=d(g,p);if(typeof v=="undefined"){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return g},c)}return f.getInitialState=u,f}function Qv(e,t){return e+"/"+t}function Bv(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:Ut(e.initialState,function(){}),n=e.reducers||{},a=Object.keys(n),i={},o={},s={};a.forEach(function(f){var c=n[f],p=Qv(t,f),h,g;"reducer"in c?(h=c.reducer,g=c.prepare):h=c,i[f]=h,o[p]=h,s[f]=g?x(p,g):x(p)});function u(){var f=typeof e.extraReducers=="function"?gl(e.extraReducers):[e.extraReducers],c=f[0],p=c===void 0?{}:c,h=f[1],g=h===void 0?[]:h,d=f[2],y=d===void 0?void 0:d,v=qe(qe({},p),o);return Q(r,v,g,y)}var l;return{name:t,reducer:function(f,c){return l||(l=u()),l(f,c)},actions:s,caseReducers:i,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}function Hv(){return{ids:[],entities:{}}}function Yv(){function e(t){return t===void 0&&(t={}),Object.assign(Hv(),t)}return{getInitialState:e}}function Wv(){function e(t){var r=function(l){return l.ids},n=function(l){return l.entities},a=He(r,n,function(l,f){return l.map(function(c){return f[c]})}),i=function(l,f){return f},o=function(l,f){return l[f]},s=He(r,function(l){return l.length});if(!t)return{selectIds:r,selectEntities:n,selectAll:a,selectTotal:s,selectById:He(n,i,o)};var u=He(t,n);return{selectIds:He(t,r),selectEntities:u,selectAll:He(t,a),selectTotal:He(t,s),selectById:He(u,i,o)}}return{getSelectors:e}}function Jv(e){var t=ge(function(r,n){return e(n)});return function(r){return t(r,void 0)}}function ge(e){return function(t,r){function n(i){return _v(i)}var a=function(i){n(r)?e(r.payload,i):e(r,i)};return ke(t)?(a(t),t):Ut(t,a)}}function Bt(e,t){var r=t(e);return r}function Ct(e){return Array.isArray(e)||(e=Object.values(e)),e}function hl(e,t,r){e=Ct(e);for(var n=[],a=[],i=0,o=e;i<o.length;i++){var s=o[i],u=Bt(s,t);u in r.entities?a.push({id:u,changes:s}):n.push(s)}return[n,a]}function vl(e){function t(g,d){var y=Bt(g,e);y in d.entities||(d.ids.push(y),d.entities[y]=g)}function r(g,d){g=Ct(g);for(var y=0,v=g;y<v.length;y++){var m=v[y];t(m,d)}}function n(g,d){var y=Bt(g,e);y in d.entities||d.ids.push(y),d.entities[y]=g}function a(g,d){g=Ct(g);for(var y=0,v=g;y<v.length;y++){var m=v[y];n(m,d)}}function i(g,d){g=Ct(g),d.ids=[],d.entities={},r(g,d)}function o(g,d){return s([g],d)}function s(g,d){var y=!1;g.forEach(function(v){v in d.entities&&(delete d.entities[v],y=!0)}),y&&(d.ids=d.ids.filter(function(v){return v in d.entities}))}function u(g){Object.assign(g,{ids:[],entities:{}})}function l(g,d,y){var v=y.entities[d.id],m=Object.assign({},v,d.changes),b=Bt(m,e),I=b!==d.id;return I&&(g[d.id]=b,delete y.entities[d.id]),y.entities[b]=m,I}function f(g,d){return c([g],d)}function c(g,d){var y={},v={};g.forEach(function(I){I.id in d.entities&&(v[I.id]={id:I.id,changes:qe(qe({},v[I.id]?v[I.id].changes:null),I.changes)})}),g=Object.values(v);var m=g.length>0;if(m){var b=g.filter(function(I){return l(y,I,d)}).length>0;b&&(d.ids=d.ids.map(function(I){return y[I]||I}))}}function p(g,d){return h([g],d)}function h(g,d){var y=hl(g,e,d),v=y[0],m=y[1];c(m,d),r(v,d)}return{removeAll:Jv(u),addOne:ge(t),addMany:ge(r),setOne:ge(n),setMany:ge(a),setAll:ge(i),updateOne:ge(f),updateMany:ge(c),upsertOne:ge(p),upsertMany:ge(h),removeOne:ge(o),removeMany:ge(s)}}function Kv(e,t){var r=vl(e),n=r.removeOne,a=r.removeMany,i=r.removeAll;function o(m,b){return s([m],b)}function s(m,b){m=Ct(m);var I=m.filter(function(P){return!(Bt(P,e)in b.entities)});I.length!==0&&v(I,b)}function u(m,b){return l([m],b)}function l(m,b){m=Ct(m),m.length!==0&&v(m,b)}function f(m,b){m=Ct(m),b.entities={},b.ids=[],s(m,b)}function c(m,b){return h([m],b)}function p(m,b,I){if(!(b.id in I.entities))return!1;var P=I.entities[b.id],L=Object.assign({},P,b.changes),U=Bt(L,e);return delete I.entities[b.id],m.push(L),U!==b.id}function h(m,b){var I=[];m.forEach(function(P){return p(I,P,b)}),I.length!==0&&v(I,b)}function g(m,b){return d([m],b)}function d(m,b){var I=hl(m,e,b),P=I[0],L=I[1];h(L,b),s(P,b)}function y(m,b){if(m.length!==b.length)return!1;for(var I=0;I<m.length&&I<b.length;I++)if(m[I]!==b[I])return!1;return!0}function v(m,b){m.forEach(function(U){b.entities[e(U)]=U});var I=Object.values(b.entities);I.sort(t);var P=I.map(e),L=b.ids;y(L,P)||(b.ids=P)}return{removeOne:n,removeMany:a,removeAll:i,addOne:ge(o),updateOne:ge(c),upsertOne:ge(g),setOne:ge(u),setMany:ge(l),setAll:ge(f),addMany:ge(s),updateMany:ge(h),upsertMany:ge(d)}}function Zv(e){e===void 0&&(e={});var t=qe({sortComparer:!1,selectId:function(s){return s.id}},e),r=t.selectId,n=t.sortComparer,a=Yv(),i=Wv(),o=n?Kv(r,n):vl(r);return qe(qe(qe({selectId:r,sortComparer:n},a),i),o)}var Gv="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fi=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=Gv[Math.random()*64|0];return t},Xv=["name","message","stack","code"],Ai=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),yl=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),ml=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=Xv;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}};function ae(e,t,r){var n=x(e+"/fulfilled",function(l,f,c,p){return{payload:l,meta:xi(qe({},p||{}),{arg:c,requestId:f,requestStatus:"fulfilled"})}}),a=x(e+"/pending",function(l,f,c){return{payload:void 0,meta:xi(qe({},c||{}),{arg:f,requestId:l,requestStatus:"pending"})}}),i=x(e+"/rejected",function(l,f,c,p,h){return{payload:p,error:(r&&r.serializeError||ml)(l||"Rejected"),meta:xi(qe({},h||{}),{arg:c,requestId:f,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),o=!1,s=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(f,c,p){var h=(r==null?void 0:r.idGenerator)?r.idGenerator(l):Fi(),g=new s,d,y=new Promise(function(I,P){return g.signal.addEventListener("abort",function(){return P({name:"AbortError",message:d||"Aborted"})})}),v=!1;function m(I){v&&(d=I,g.abort())}var b=function(){return Rr(this,null,function(){var I,P,L,U,w,j;return Ir(this,function(S){switch(S.label){case 0:return S.trys.push([0,4,,5]),U=(I=r==null?void 0:r.condition)==null?void 0:I.call(r,l,{getState:c,extra:p}),ey(U)?[4,U]:[3,2];case 1:U=S.sent(),S.label=2;case 2:if(U===!1)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=!0,f(a(h,l,(P=r==null?void 0:r.getPendingMeta)==null?void 0:P.call(r,{requestId:h,arg:l},{getState:c,extra:p}))),[4,Promise.race([y,Promise.resolve(t(l,{dispatch:f,getState:c,extra:p,requestId:h,signal:g.signal,rejectWithValue:function(k,V){return new Ai(k,V)},fulfillWithValue:function(k,V){return new yl(k,V)}})).then(function(k){if(k instanceof Ai)throw k;return k instanceof yl?n(k.payload,h,l,k.meta):n(k,h,l)})])];case 3:return L=S.sent(),[3,5];case 4:return w=S.sent(),L=w instanceof Ai?i(null,h,l,w.payload,w.meta):i(w,h,l),[3,5];case 5:return j=r&&!r.dispatchConditionRejection&&i.match(L)&&L.meta.condition,j||f(L),[2,L]}})})}();return Object.assign(b,{abort:m,requestId:h,arg:l,unwrap:function(){return b.then(bl)}})}}return Object.assign(u,{pending:a,rejected:i,fulfilled:n,typePrefix:e})}function bl(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function ey(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var ty=function(e){return e&&typeof e.match=="function"},Sl=function(e,t){return ty(e)?e.match(t):e(t)};function Fr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.some(function(n){return Sl(n,r)})}}function Ei(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.every(function(n){return Sl(n,r)})}}function Nn(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function Ar(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function wl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Nn(r,["pending"])}:Ar(e)?function(r){var n=e.map(function(i){return i.pending}),a=Fr.apply(void 0,n);return a(r)}:wl()(e[0])}function Un(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Nn(r,["rejected"])}:Ar(e)?function(r){var n=e.map(function(i){return i.rejected}),a=Fr.apply(void 0,n);return a(r)}:Un()(e[0])}function Cl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(n){return n&&n.meta&&n.meta.rejectedWithValue};return e.length===0?function(n){var a=Ei(Un.apply(void 0,e),r);return a(n)}:Ar(e)?function(n){var a=Ei(Un.apply(void 0,e),r);return a(n)}:Cl()(e[0])}function Ol(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Nn(r,["fulfilled"])}:Ar(e)?function(r){var n=e.map(function(i){return i.fulfilled}),a=Fr.apply(void 0,n);return a(r)}:Ol()(e[0])}function xl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Nn(r,["pending","fulfilled","rejected"])}:Ar(e)?function(r){for(var n=[],a=0,i=e;a<i.length;a++){var o=i[a];n.push(o.pending,o.rejected,o.fulfilled)}var s=Fr.apply(void 0,n);return s(r)}:xl()(e[0])}var ji=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},ry=function(){},ki=function(e,t){return t===void 0&&(t=ry),e.catch(t),e},ql=function(e,t){e.addEventListener("abort",t,{once:!0})},Ht=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ny="task",Il="listener",Rl="completed",Pi="cancelled",ay="task-"+Pi,iy="task-"+Rl,Fl=Il+"-"+Pi,oy=Il+"-"+Rl,Er=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=ny+" "+Pi+" (reason: "+t+")"}return e}(),Yt=function(e){if(e.aborted)throw new Er(e.reason)},Al=function(e){return ki(new Promise(function(t,r){var n=function(){return r(new Er(e.reason))};e.aborted?n():ql(e,n)}))},sy=function(e,t){return Rr(void 0,null,function(){var r,n;return Ir(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return a.sent(),[4,e()];case 2:return r=a.sent(),[2,{status:"ok",value:r}];case 3:return n=a.sent(),[2,{status:n instanceof Er?"cancelled":"rejected",error:n}];case 4:return t==null||t(),[7];case 5:return[2]}})})},Qn=function(e){return function(t){return ki(Promise.race([Al(e),t]).then(function(r){return Yt(e),r}))}},El=function(e){var t=Qn(e);return function(r){return t(new Promise(function(n){return setTimeout(n,r)}))}},uy=Object.assign,jl={},jr="listenerMiddleware",ly=function(e){var t=function(r){return ql(e,function(){return Ht(r,e.reason)})};return function(r){ji(r,"taskExecutor");var n=new AbortController;t(n);var a=sy(function(){return Rr(void 0,null,function(){var i;return Ir(this,function(o){switch(o.label){case 0:return Yt(e),Yt(n.signal),[4,r({pause:Qn(n.signal),delay:El(n.signal),signal:n.signal})];case 1:return i=o.sent(),Yt(n.signal),[2,i]}})})},function(){return Ht(n,iy)});return{result:Qn(e)(a),cancel:function(){Ht(n,ay)}}}},cy=function(e,t){var r=function(n,a){return Rr(void 0,null,function(){var i,o,s,u;return Ir(this,function(l){switch(l.label){case 0:Yt(t),i=function(){},o=new Promise(function(f){i=e({predicate:n,effect:function(c,p){p.unsubscribe(),f([c,p.getState(),p.getOriginalState()])}})}),s=[Al(t),o],a!=null&&s.push(new Promise(function(f){return setTimeout(f,a,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Promise.race(s)];case 2:return u=l.sent(),Yt(t),[2,u];case 3:return i(),[7];case 4:return[2]}})})};return function(n,a){return ki(r(n,a))}},kl=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,a=e.predicate,i=e.effect;if(t)a=x(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return ji(i,"options.listener"),{predicate:a,type:t,effect:i}},dy=function(e){var t=kl(e),r=t.type,n=t.predicate,a=t.effect,i=Fi(),o={id:i,effect:a,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},fy=function(e){return function(){e.forEach(Ti),e.clear()}},Pl=function(e,t,r){try{e(t,r)}catch(n){setTimeout(function(){throw n},0)}},Tl=x(jr+"/add"),Vl=x(jr+"/removeAll"),Ml=x(jr+"/remove"),py=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Qt([jr+"/error"],e))},Ti=function(e){e.pending.forEach(function(t){Ht(t,Fl)})};function gy(e){var t=this;e===void 0&&(e={});var r=new Map,n=e.extra,a=e.onError,i=a===void 0?py:a;ji(i,"onError");var o=function(h){return h.unsubscribe=function(){return r.delete(h.id)},r.set(h.id,h),function(g){h.unsubscribe(),(g==null?void 0:g.cancelActive)&&Ti(h)}},s=function(h){for(var g=0,d=r.values();g<d.length;g++){var y=d[g];if(h(y))return y}},u=function(h){var g=s(function(d){return d.effect===h.effect});return g||(g=dy(h)),o(g)},l=function(h){var g=kl(h),d=g.type,y=g.effect,v=g.predicate,m=s(function(b){var I=typeof d=="string"?b.type===d:b.predicate===v;return I&&b.effect===y});return m&&(m.unsubscribe(),h.cancelActive&&Ti(m)),!!m},f=function(h,g,d,y){return Rr(t,null,function(){var v,m,b;return Ir(this,function(I){switch(I.label){case 0:v=new AbortController,m=cy(u,v.signal),I.label=1;case 1:return I.trys.push([1,3,4,5]),h.pending.add(v),[4,Promise.resolve(h.effect(g,uy({},d,{getOriginalState:y,condition:function(P,L){return m(P,L).then(Boolean)},take:m,delay:El(v.signal),pause:Qn(v.signal),extra:n,signal:v.signal,fork:ly(v.signal),unsubscribe:h.unsubscribe,subscribe:function(){r.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(P,L,U){P!==v&&(Ht(P,Fl),U.delete(P))})}})))];case 2:return I.sent(),[3,5];case 3:return b=I.sent(),b instanceof Er||Pl(i,b,{raisedBy:"effect"}),[3,5];case 4:return Ht(v,oy),h.pending.delete(v),[7];case 5:return[2]}})})},c=fy(r),p=function(h){return function(g){return function(d){if(Tl.match(d))return u(d.payload);if(Vl.match(d)){c();return}if(Ml.match(d))return l(d.payload);var y=h.getState(),v=function(){if(y===jl)throw new Error(jr+": getOriginalState can only be called synchronously");return y},m;try{if(m=g(d),r.size>0)for(var b=h.getState(),I=Array.from(r.values()),P=0,L=I;P<L.length;P++){var U=L[P],w=!1;try{w=U.predicate(d,b,y)}catch(j){w=!1,Pl(i,j,{raisedBy:"predicate"})}!w||f(U,d,h,v)}}finally{y=jl}return m}}};return{middleware:p,startListening:u,stopListening:l,clearListeners:c}}fv();function hy(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function vy(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Vi(e,t){if(t&&e.name==="AbortError")return{error:vy(e)};if(e instanceof Va)return{error:hy(e)};throw e}var at=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${yy(e)}${e.authentication?`&${my(e)}`:""}`}),yy=e=>`organizationId=${e.organizationId}`,my=e=>`authentication=${encodeURIComponent(e.authentication)}`;function by(e){return((e.headers.get("content-type")||"").split(";").find(t=>t.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var Sy=TextDecoder;function Ot(e){let{url:t,accessToken:r,organizationId:n,authentication:a,...i}=e;return i}var xt=e=>{let{response:t}=e;return t.body?wy(e):Cy(t)},wy=e=>xy(e)?qy(e):Oy(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},Cy=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function Oy(e){return e.body.statusCode!==void 0}function xy(e){return e.body.exception!==void 0}var qy=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Iy=async(e,t)=>{let r=await Ze.call({...at(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Ot(e),...t});if(r instanceof Error)throw r;let n=by(r),a=await r.arrayBuffer(),i=new Sy(n).decode(a);return Ry(i)?{success:i}:{error:xt({response:r,body:i})}};function Ry(e){return typeof e=="string"}var $l=class{constructor(e){this.options=e,this.searchAbortController=null}async plan(e){let t=await Ze.call({...at(e,"POST","application/json","/plan"),requestParams:Ot(e),...this.options});if(t instanceof Error)return Vi(t);let r=await t.json();return Ay(r)?{success:r}:{error:xt({response:t,body:r})}}async querySuggest(e){let t=await Ze.call({...at(e,"POST","application/json","/querySuggest"),requestParams:Ot(e),...this.options});if(t instanceof Error)return Vi(t);let r=await t.json(),n={response:t,body:r};return Fy(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:xt(n)}}async search(e,t={}){var r;this.searchAbortController&&(!t.disableAbortWarning&&this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();let n=await Ze.call({...at(e,"POST","application/json",""),requestParams:Ot(e),...this.options,signal:(r=this.searchAbortController)==null?void 0:r.signal});if(n instanceof Error)return Vi(n,t.disableAbortWarning);this.searchAbortController=null;let a=await n.json(),i={response:n,body:a};return Mi(a)?(i.body=jy(a),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:xt(i)}}async facetSearch(e){let t=await Ze.call({...at(e,"POST","application/json","/facet"),requestParams:Ot(e),...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await Ze.call({...at(e,"POST","application/json",""),requestParams:Ot(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return Mi(r)?{success:r}:{error:xt({response:t,body:r})}}async html(e){return Iy(e,this.options)}async productRecommendations(e){let t=await Ze.call({...at(e,"POST","application/json",""),requestParams:Ot(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return Mi(r)?{success:r}:{error:xt({response:t,body:r})}}async fieldDescriptions(e){let t=await Ze.call({...at(e,"GET","application/json","/fields"),requestParams:{},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ey(r)?{success:r}:{error:xt({response:t,body:r})}}getAbortControllerInstanceIfAvailable(){if(typeof window=="undefined"){let e=Jp();return new e}return typeof AbortController=="undefined"?null:new AbortController}},he=e=>e.error!==void 0;function Fy(e){return e.completions!==void 0}function Ay(e){return e.preprocessingOutput!==void 0}function Ey(e){return e.fields!==void 0}function Mi(e){return e.results!==void 0}function jy(e){let t=yu();return ee(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}var _=new D({required:!0,emptyAllowed:!1}),fe=new D({required:!1,emptyAllowed:!1}),ve=new D({required:!0,emptyAllowed:!0}),Wt=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),it=(e,t)=>{if("required"in t)return{payload:new ne({value:t}).validate({value:e}).value};let r=new Y({options:{required:!0},values:t}).validate(e);if(r)throw new Ja(r);return{payload:e}},E=(e,t)=>{try{return it(e,t)}catch(r){return{payload:e,error:Wt(r)}}},Ye=(e,t,r,n)=>{let a=`Check the initialState of ${n}`;return Ll(e,t,r,a,"Controller initialization error")},Ie=(e,t,r,n)=>{let a=`Check the options of ${n}`;return Ll(e,t,r,a,"Controller initialization error")},Ll=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(i){throw e.logger.error(i,a),i}},kr=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""}),ky=class extends An{constructor(e){super(e);this.state=e}getPipeline(){return this.state.pipeline||"default"}getSearchEventRequestPayload(){return{queryText:je().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.state.recommendation)==null?void 0:e.searchUid)||kr().searchUid}get responseTime(){var e;return((e=this.state.recommendation)==null?void 0:e.duration)||kr().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.recommendation)==null?void 0:e.recommendations.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.recommendation)==null?void 0:e.recommendations.length)||kr().recommendations.length}},Py=le(Qs()),$i=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Dl(e){return Array.isArray(e)}function Li(e){return e.trim()===""}function Ty(e,t){return Object.values(e.reduce((r,n,a)=>({...r,[t(n,a)]:n}),{}))}function Vy(e){return(typeof btoa!="undefined"?btoa:Py.btoa)(encodeURI(e))}function _l(e,t){let{[e]:r,...n}=t;return n}function zl(e){let t=Nl(e),r=[e,...t].filter(n=>n.parentResult).map(n=>n.parentResult);return Ty([e,...t,...r],n=>n.uniqueId)}function Nl(e){return e.childResults?e.childResults.flatMap(t=>[t,...Nl(t)]):[]}var Ul=class extends An{constructor(e){super(e);this.state=e}getSearchUID(){var e,t;return((e=this.state.search)==null?void 0:e.searchResponseId)||((t=this.state.search)==null?void 0:t.response.searchUid)||Me().response.searchUid}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return wu(De(this.state))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||je().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Me().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Me().response.results.length}},My=({logger:e,state:t,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new Ul(t)})=>{let i=t.configuration.accessToken,o=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=t.configuration.analytics.enabled,l=new jh({enableAnalytics:u,token:i,endpoint:o,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(f,c)=>(e.info({...c,type:f,endpoint:o,token:i},"Analytics request"),c)]},a);return u||l.disable(),l},$x=new ru.HistoryStore,$=(e=>(e[e.Search=0]="Search",e[e.Custom=1]="Custom",e[e.Click=2]="Click",e))($||{}),$y=e=>e(),z=(e,t,r,n=a=>new qu(a))=>ae(e,async(a,{getState:i,extra:{analyticsClientMiddleware:o,preprocessRequest:s,logger:u}})=>{let l=$y(i),f=Qh({state:l,logger:u,analyticsClientMiddleware:o,preprocessRequest:s,provider:n(l)}),c=await r(f,l);return u.info({client:f.coveoAnalyticsClient,response:c},"Analytics response"),{analyticsType:t}}),Ly=e=>ae("analytics/noop",async()=>({analyticsType:e})),Lx=Ly(0),Ql=(e,t,r,n=a=>new Ul(a))=>ae(e,async(a,{getState:i,extra:{analyticsClientMiddleware:o,preprocessRequest:s,logger:u}})=>{let l=i(),f=My({state:l,logger:u,analyticsClientMiddleware:o,preprocessRequest:s,provider:n(l)}),c=await r(f,l);return u.info({client:f.coveoAnalyticsClient,response:c},"Analytics response"),{analyticsType:t}}),qt=(e,t)=>{var r;let n=o=>{var s,u;return o+((u=(s=t.pagination)==null?void 0:s.firstResult)!=null?u:0)},a=-1,i=(r=t.search)==null?void 0:r.results;return a=Hl(e,i),a<0&&(a=Qy(e,i)),a<0&&(a=0),Dy(e,n(a),t)};function Dy(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:Ny(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Uy(e),queryPipeline:r.pipeline||Lt()}}var Jt=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),Bl={urihash:new D,sourcetype:new D,permanentid:new D},Di={uniqueId:_,raw:new Y({values:Bl}),title:_,uri:_,clickUri:_,rankingModifier:new D({required:!1,emptyAllowed:!0})};function _y(e){return Object.assign({},...Object.keys(Bl).map(t=>({[t]:e[t]})))}function zy(e){return Object.assign({},...Object.keys(Di).map(t=>({[t]:e[t]})),{raw:_y(e.raw)})}function Ny(e){let t=e.raw.author;return ee(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Uy(e){let t=e.raw.source;return ee(t)?"unknown":t}var It=e=>new ne(Di).validate(zy(e));function Qy(e,t){for(let[r,n]of t.entries()){let a=zl(n);if(Hl(e,a)!==-1)return r}return-1}function Hl(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}var By=z("analytics/recommendation/update",$.Search,e=>e.logRecommendationInterfaceLoad(),e=>new ky(e)),Hy=x("recommendation/set",e=>E(e,{id:_})),Bn=ae("recommendation/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=new Date().getTime(),o=await n.recommendations(await Yy(a)),s=new Date().getTime()-i;return he(o)?r(o.error):{recommendations:o.success.results,analyticsAction:By(),duration:s,searchUid:o.success.searchUid}}),Yy=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?Pt.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await _e()},...e.configuration.analytics.enabled&&await En(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}),Yl=x("history/undo"),Wl=x("history/redo"),Rt=x("history/snapshot"),_i=ae("history/back",async(e,{dispatch:t})=>{t(Yl()),await t(we())}),Jl=ae("history/forward",async(e,{dispatch:t})=>{t(Wl()),await t(we())}),we=ae("history/change",async(e,{getState:t})=>t().history.present),Kl=z("analytics/didyoumean/click",$.Search,e=>e.logDidYouMeanClick()),Wy=z("analytics/didyoumean/automatic",$.Search,e=>e.logDidYouMeanAutomatic()),zi=x("didYouMean/enable"),Zl=x("didYouMean/disable"),Pr=x("didYouMean/correction",e=>E(e,_)),Kt=x("query/updateQuery",e=>E(e,{q:new D,enableQuerySyntax:new X})),Jy=z("search/logFetchMoreResults",$.Search,e=>e.logFetchMoreResults()),ot=e=>z("search/queryError",$.Search,(t,r)=>{var n,a,i;return t.logQueryError({query:((n=r.query)==null?void 0:n.q)||je().q,aq:((a=r.advancedSearchQueries)==null?void 0:a.aq)||et().aq,cq:((i=r.advancedSearchQueries)==null?void 0:i.cq)||et().cq,dq:"",errorType:e.type,errorMessage:e.message})})(),Hn=le(cr()),Ni=le(cr()),Ky=le(Bs());Ni.default.extend(Ky.default);var Gl="YYYY/MM/DD@HH:mm:ss",Zy="1401-01-01";function Ui(e){return e.format(Gl)}function Gy(e){return Ui((0,Ni.default)(e))===e}function Xl(e,t){let r=(0,Ni.default)(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",a=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?a:n}`)}ec(r)}function ec(e){if(e.isBefore(Zy))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var Xy=le(Gp());Hn.default.extend(Xy.default);var tc=["past","now","next"],rc=["minute","hour","day","week","month","quarter","year"],em=e=>{let t=e==="now";return{amount:new B({required:!t,min:1}),unit:new D({required:!t,constrainTo:rc}),period:new D({required:!0,constrainTo:tc})}};function Yn(e){if(typeof e=="string"&&!Zt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Bi(e):e;new ne(em(t.period)).validate(t);let r=nc(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);ec(r)}function tm(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function nc(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Hn.default)().subtract(r,n);case"next":return(0,Hn.default)().add(r,n);case"now":return(0,Hn.default)()}}function Qi(e){return Ui(nc(Bi(e)))}function ac(e){return e.toLocaleLowerCase().split("-")}function Zt(e){let[t,r,n]=ac(e);if(t==="now")return!0;if(!tc.includes(t)||!rc.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function rm(e){return!!e&&typeof e=="object"&&"period"in e}function Bi(e){let[t,r,n]=ac(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Dx(e){return Yn(e),Bi(e)}var ic=["score","alphanumeric","occurrences","automatic"];function nm(e){return e.hasBreadcrumbs!==void 0}function am(e){return e.type==="dateRange"}function oc(e){return`start${e}`}function sc(e){return`end${e}`}var im=()=>({dateFacetValueMap:{}});function om(e,t,r){let n=e.start,a=e.end;return Zt(n)&&(n=Qi(n),r.dateFacetValueMap[t][oc(n)]=e.start),Zt(a)&&(a=Qi(a),r.dateFacetValueMap[t][sc(a)]=e.end),{...e,start:n,end:a}}function sm(e,t){if(am(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(a=>om(a,r,t))}}if(nm(e)){let{hasBreadcrumbs:r,...n}=e;return n}return e}function uc(e){var t;let r=im();return{request:{...e,facets:(t=e.facets)==null?void 0:t.map(n=>sm(n,r))},mappings:r}}function um(e,t,r){return{...e,start:r.dateFacetValueMap[t][oc(e.start)]||e.start,end:r.dateFacetValueMap[t][sc(e.end)]||e.end}}function lm(e,t){return e.facetId in t.dateFacetValueMap}function cm(e,t){return lm(e,t)?{...e,values:e.values.map(r=>um(r,e.facetId,t))}:e}function lc(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>cm(n,t))}}:e}var Wn=new B({required:!0,min:0}),Hi=x("pagination/registerNumberOfResults",e=>E(e,Wn)),Yi=x("pagination/updateNumberOfResults",e=>E(e,Wn)),Wi=x("pagination/registerPage",e=>E(e,Wn)),Tr=x("pagination/updatePage",e=>E(e,Wn)),Ji=x("pagination/nextPage"),Ki=x("pagination/previousPage");function Zi(e,t){let r={};e.forEach(i=>r[i.facetId]=i);let n=[];t.forEach(i=>{i in r&&(n.push(r[i]),delete r[i])});let a=Object.values(r);return[...n,...a]}var Gi=async e=>{var t,r,n,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await _e(),actionsHistory:Pt.getHistory()},...((t=e.advancedSearchQueries)==null?void 0:t.aq)&&{aq:e.advancedSearchQueries.aq},...((r=e.advancedSearchQueries)==null?void 0:r.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((a=e.advancedSearchQueries)==null?void 0:a.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await En(e.configuration.analytics),...e.excerptLength&&!ee(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},Ft=async e=>{var t;let r=hm(e),n=dm(e),a=await Gi(e);return uc({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((t=e.folding)==null?void 0:t.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}})};function dm(e){var t;return Zi(fm(e),(t=e.facetOrder)!=null?t:[])}function fm(e){return pm(e).filter(({facetId:t})=>{var r,n,a;return(a=(n=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:n.enabled)!=null?a:!0})}function pm(e){return[...Xi(e.facetSet),...Xi(e.numericFacetSet),...Xi(e.dateFacetSet),...gm(e.categoryFacetSet)]}function gm(e){return Object.values(e||{}).map(t=>t.request)}function Xi(e={}){return Object.keys(e).map(t=>e[t])}function hm(e){var t;let r=((t=e.advancedSearchQueries)==null?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find(o=>o.isActive),a=(n==null?void 0:n.expression.trim())||"",i=vm(e);return[r,a,...i].filter(o=>!!o).join(" AND ")}function vm(e){return Object.values(e.staticFilterSet||{}).map(t=>{let r=t.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),n=r.map(a=>a.expression).join(" OR ");return r.length>1?`(${n})`:n})}var We=x("breadcrumb/deselectAll"),Gt=x("facet/deselectAllFacets"),Vr=x("facet/updateFacetAutoSelection",e=>E(e,{allow:new X({required:!0})})),eo={id:_},ym={...eo,q:ve},to=x("instantResults/register",e=>E(e,eo)),Jn=x("instantResults/updateQuery",e=>E(e,ym)),ro=x("instantResults/clearExpired",e=>E(e,eo)),Mr=async(e,t,{request:r,mappings:n})=>{var a;let i=new Date().getTime(),o=lc(await e.search(r),n),s=new Date().getTime()-i,u=((a=t.query)==null?void 0:a.q)||"";return{response:o,duration:s,queryExecuted:u,requestExecuted:r}},cc=ae("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;E(e,{q:new D,enableQuerySyntax:new X}),r(We()),r(Vr({allow:!0})),r(Kt(e)),r(Tr(1))}),N=ae("search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();pc(i);let o=await Mr(a.apiClient,i,await Ft(i));if(he(o.response))return r(ot(o.response.error)),n(o.response.error);if(!fc(i,o.response.success))return r(Rt(Dt(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Lr(i),analyticsAction:e};let{correctedQuery:s}=o.response.success.queryCorrections[0],u=await bm(a.apiClient,s,t,r);if(he(u.response))return r(ot(u.response.error)),n(u.response.error);let l=o.response.success;return e(r,()=>mm(o.queryExecuted,o.duration,i,l),a),r(Rt(Dt(t()))),{...u,response:{...u.response.success,queryCorrections:o.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:Lr(i),analyticsAction:Wy()}}),st=ae("search/fetchPage",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();pc(i);let o=await Mr(a.apiClient,i,await Ft(i));return he(o.response)?(r(ot(o.response.error)),n(o.response.error)):(r(Rt(Dt(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Lr(i),analyticsAction:e})}),Xt=ae("search/fetchMoreResults",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await Mr(a,i,await Sm(i));return he(o.response)?(r(ot(o.response.error)),n(o.response.error)):(r(Rt(Dt(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Lr(i),analyticsAction:Jy()})}),ut=ae("search/fetchFacetValues",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await Mr(a,i,await Cm(i));return he(o.response)?(r(ot(o.response.error)),n(o.response.error)):(r(Rt(Dt(i))),{...o,analyticsAction:e,response:o.response.success,automaticallyCorrected:!1,originalQuery:Lr(i)})}),$r=ae("instantResults/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:_,q:_,maxResultsPerQuery:new B({required:!0,min:1}),cacheTimeout:new B});let{q:o,maxResultsPerQuery:s}=e,u=t(),l=await dc(a,u,o,s);if(he(l))return r(ot(l.error)),n(l.error);if(!fc(u,l.success))return{results:l.success.results};let{correctedQuery:f}=l.success.queryCorrections[0];r(Jn({q:f,id:e.id}));let c=await dc(a,u,f,s);return he(c)?(r(ot(c.error)),n(c.error)):{results:c.success.results}});async function dc(e,t,r,n){let{request:a,mappings:i}=await wm(t,r,n);return lc(await e.search(a,{disableAbortWarning:!0}),i)}var mm=(e,t,r,n)=>{var a,i;return{...r,query:{q:e,enableQuerySyntax:(i=(a=r.query)==null?void 0:a.enableQuerySyntax)!=null?i:je().enableQuerySyntax},search:{...Me(),duration:t,response:n,results:n.results}}},bm=async(e,t,r,n)=>{n(Kt({q:t}));let a=await Mr(e,r(),await Ft(r()));return n(Pr(t)),a},fc=(e,t)=>{var r;return((r=e.didYouMean)==null?void 0:r.enableDidYouMean)===!0&&t.results.length===0&&t.queryCorrections.length!==0},Sm=async e=>{var t,r,n,a;let i=await Ft(e);return i.request={...i.request,firstResult:((r=(t=e.pagination)==null?void 0:t.firstResult)!=null?r:0)+((a=(n=e.search)==null?void 0:n.results.length)!=null?a:0)},i},wm=async(e,t,r)=>{let n=await Gi(e);return uc({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},Cm=async e=>{let t=await Ft(e);return t.request.numberOfResults=0,t},pc=e=>{var t;e.configuration.analytics.enabled&&Pt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},Lr=e=>{var t;return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""},Om=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"],no=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}),xm=class extends An{constructor(e){super(e);this.state=e,this.initialState=no()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.state.productRecommendations)==null?void 0:e.searchUid)||this.initialState.searchUid}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var e;return((e=this.state.productRecommendations)==null?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return((e=this.state.productRecommendations)==null?void 0:e.recommendations.length)||this.initialState.recommendations.length}},qm=z("analytics/productrecommendations/load",$.Search,e=>e.logRecommendationInterfaceLoad(),e=>new xm(e));function Im(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var Rm=x("productrecommendations/setId",e=>E(e,{id:_})),Fm=x("productrecommendations/setSku",e=>E(e,{skus:new te({required:!0,min:1,each:fe})})),Am=x("productrecommendations/setBrand",e=>E(e,{brand:new D({required:!0,emptyAllowed:!0})})),Em=x("productrecommendations/setCategory",e=>E(e,{category:new D({required:!0,emptyAllowed:!0})})),jm=x("productrecommendations/setAdditionalFields",e=>E(e,{additionalFields:new te({required:!0,each:fe})})),km=x("productrecommendations/setMaxNumberOfRecommendations",e=>E(e,{number:new B({required:!0,max:50,min:1})})),Kn=ae("productrecommendations/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=new Date().getTime(),o=await n.productRecommendations(await Pm(a)),s=new Date().getTime()-i;if(he(o))return r(o.error);let u=a.productRecommendations.additionalFields||[];return{recommendations:o.success.results.map(l=>gc(l,{additionalFields:u})),analyticsAction:qm(),searchUid:o.success.searchUid,duration:s}}),gc=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,a=e.raw.ec_in_stock,i={permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:a===void 0?void 0:a.toLowerCase()==="yes"||a.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce((o,s)=>({...o,[s]:e.raw[s]}),{}),childResults:[],totalNumberOfChildResults:0};return Im(e)&&(i.childResults=e.childResults.map(o=>gc(o,{additionalFields:t})),i.totalNumberOfChildResults=e.totalNumberOfChildResults),i},Pm=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await _e()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Om,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?Pt.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}}),hc=e=>t=>r=>{var n,a;let i=(n=r.payload)==null?void 0:n.analyticsAction;i!==void 0&&((a=r.payload)==null||delete a.analyticsAction);let o=t(r);return r.type===N.fulfilled.type&&i===void 0&&console.error("No analytics action associated with search:",r),r.type===Bn.fulfilled&&i===void 0&&console.error("No analytics action associated with recommendation:",r),r.type===Kn.fulfilled&&i===void 0&&console.error("No analytics action associated with product recommendation:",r),i!==void 0&&e.dispatch(i),o};function Tm(e={}){return{configuration:Xe(),advancedSearchQueries:et(),context:$t(),dictionaryFieldContext:Cr(),fields:Ga(),searchHub:Ge(),pipeline:Lt(),recommendation:kr(),debug:St(),version:"unit-testing-version",...e}}function Vm(e={}){return{configuration:Xe(),context:$t(),dictionaryFieldContext:Cr(),searchHub:Ge(),productRecommendations:no(),version:"unit-testing-version",...e}}var Mm=le(On()),vc=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},yc=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n)),$m=le(On()),ao=e=>e,mc=e=>e,bc=e=>e,Sc=e=>e;function wc(e){return new $l({logger:(0,$m.default)({level:"silent"}),preprocessRequest:ao,postprocessSearchResponseMiddleware:mc,postprocessFacetSearchResponseMiddleware:bc,postprocessQuerySuggestResponseMiddleware:Sc,...e})}var Dr=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Dr||{}),Cc=(e=>(e.Ascending="asc",e.Descending="desc",e))(Cc||{}),Lm=()=>({by:"relevance"}),_x=new Y({options:{required:!1},values:{by:new Tt({enum:Dr,required:!0}),fields:new te({each:new Y({values:{name:new D,direction:new Tt({enum:Cc})}})})}});function Oc(){return Lm()}function Dm(e={}){return{configuration:Xe(),productListing:Ba(),sort:Oc(),facetSearchSet:ei(),categoryFacetSet:gr(),categoryFacetSearchSet:ti(),dateFacetSet:hr(),facetOptions:kn(),facetOrder:Pn(),facetSet:yr(),numericFacetSet:vr(),pagination:Be(),version:"unit-testing-version",context:$t(),...e}}var xc=()=>({caseAssistId:"",locale:"en-US"}),qc=()=>({status:{loading:!1,error:null,lastResponseId:""},fields:{}}),Ic=()=>({}),Rc=()=>({status:{loading:!1,error:null,lastResponseId:""},documents:[]});function _m(e={}){return{configuration:Xe(),caseAssistConfiguration:xc(),caseField:qc(),caseInput:Ic(),documentSuggestion:Rc(),debug:St(),version:"unit-testing-version",resultPreview:ii(),searchHub:Ge(),...e}}var zm=()=>({caseContext:{}}),Nm=()=>({insightId:""}),Um=()=>({loading:!1,config:void 0}),Qm=()=>({}),zx=le(On());function Bm(e={}){return{..._r(e,Nu),executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn()}}function Hm(e={}){return _r(e,Tm)}function Ym(e={}){return _r(e,Vm)}function Wm(e={}){return _r(e,Dm)}function Jm(e={}){return _r(e,_m)}function _r(e={},t,r=Km){let n=(0,Mm.default)({level:"silent"}),a=Fc(e,t),i=r(n,a)(a),o=()=>{},{state:s,...u}=e;return{store:i,state:Fc(e,t),subscribe:jest.fn(()=>o),get dispatch(){return i.dispatch},get actions(){return i.getActions()},findAsyncAction(l){let f=this.actions.find(c=>c.type===l.type);return Zm(f)?f:void 0},logger:n,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...u}}function Fc(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var Km=e=>{let t={searchAPIClient:wc({logger:e}),apiClient:wc({logger:e}),validatePayload:it,logger:e};return(0,ov.default)([vc(e),hc,Oi.withExtraArgument(t),...Ii(),yc(e)])};function Zm(e){return e?"meta"in e:!1}function Ac(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function Gm(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:Ac(),...e}}var Xm={};Ta(Xm,{escape:()=>er,getHighlightedSuggestion:()=>Ec,highlightString:()=>eb});function eb(e){if(Li(e.openingDelimiter)||Li(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(ee(e.content)||Li(e.content))return e.content;if(e.highlights.length===0)return er(e.content);let t=e.content.length,r="",n=0;for(let a=0;a<e.highlights.length;a++){let i=e.highlights[a],o=i.offset,s=o+i.length;if(s>t)break;r+=er(e.content.slice(n,o)),r+=e.openingDelimiter,r+=er(e.content.slice(o,s)),r+=e.closingDelimiter,n=s}return n!==t&&(r+=er(e.content.slice(n))),r}function Ec(e,t){return e=er(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,a,i)=>n?io(n,t.notMatchDelimiters):a?io(a,t.exactMatchDelimiters):i?io(i,t.correctionDelimiters):r)}function io(e,t){return t?t.open+e+t.close:e}function er(e){return e.replace(/&/g,"&amp").replace(/</g,"&lt").replace(/>/g,"&gt").replace(/"/g,"&quot").replace(/`/g,"&#96").replace(/'/g,"&#x27")}var oo=()=>fe,jc=()=>_,Zn=x("configuration/updateBasicConfiguration",e=>E(e,{accessToken:fe,organizationId:fe,platformUrl:fe})),tr=x("configuration/updateSearchConfiguration",e=>E(e,{apiBaseUrl:fe,pipeline:fe,searchHub:fe,timezone:fe,locale:fe,authenticationProviders:new te({required:!1,each:_})})),Gn=x("configuration/updateAnalyticsConfiguration",e=>E(e,{enabled:new X({default:!0}),originContext:oo(),originLevel2:oo(),originLevel3:oo(),apiBaseUrl:fe,runtimeEnvironment:new be,anonymous:new X({default:!1}),deviceId:fe,userDisplayName:fe,documentLocation:fe})),so=x("configuration/analytics/disable"),uo=x("configuration/analytics/enable"),kc=x("configuration/analytics/originlevel2",e=>E(e,{originLevel2:jc()})),Pc=x("configuration/analytics/originlevel3",e=>E(e,{originLevel3:jc()}));function tb(e){let t={...e},r,n=a=>(i,o)=>{let s=a(i,o);return r?r(s,o):s};return{get combinedReducer(){return n((0,ui.combineReducers)(t))},containsAll(a){return Object.keys(a).every(i=>i in t)},add(a){Object.keys(a).filter(i=>!(i in t)).forEach(i=>t[i]=a[i])},addCrossReducer(a){r=a}}}function rb({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return pl({reducer:e,preloadedState:t,devTools:{stateSanitizer:i=>i.history?{...i,history:"<<OMIT>>"}:i,name:a,shouldHotReload:!1},middleware:i=>[...r,...i({thunk:{extraArgument:n}}),yc(n.logger)]})}var lt=()=>new D({required:!1,emptyAllowed:!0}),Tc=x("advancedSearchQueries/update",e=>E(e,{aq:lt(),cq:lt(),lq:lt(),dq:lt()})),Vc=x("advancedSearchQueries/register",e=>E(e,{aq:lt(),cq:lt(),lq:lt(),dq:lt()})),Mc={q:new D,enableQuerySyntax:new X,aq:new D,cq:new D,firstResult:new B({min:0}),numberOfResults:new B({min:0}),sortCriteria:new D,f:new Y,cf:new Y,nf:new Y,df:new Y,debug:new X,sf:new Y,tab:new D},Ce=x("searchParameters/restore",e=>E(e,Mc)),nb=Q(et(),e=>{e.addCase(Tc,(t,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;Se(n)||(t.aq=n,t.aqWasSet=!0),Se(a)||(t.cq=a,t.cqWasSet=!0),Se(i)||(t.lq=i,t.lqWasSet=!0),Se(o)||(t.dq=o,t.dqWasSet=!0)}).addCase(Vc,(t,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;Se(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),Se(a)||(t.defaultFilters.cq=a,t.cqWasSet||(t.cq=a)),Se(i)||(t.defaultFilters.lq=i,t.lqWasSet||(t.lq=i)),Se(o)||(t.defaultFilters.dq=o,t.dqWasSet||(t.dq=o))}).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.advancedSearchQueries)!=null?a:t}).addCase(Ce,(t,r)=>{let{aq:n,cq:a}=r.payload;Se(n)||(t.aq=n,t.aqWasSet=!0),Se(a)||(t.cq=a,t.cqWasSet=!0)})}),$c=x("tab/register",e=>{let t=new Y({values:{id:_,expression:ve}});return E(e,t)}),Xn=x("tab/updateActiveTab",e=>E(e,_));function ab(e,t){if(/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Ya;let r=e.match(new RegExp(`^https://(${t}\\.org)\\.coveo.com`));return r?e.replace(r[1],"analytics.cloud")+Ya:e}var ib=Q(Xe(),e=>e.addCase(Zn,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Ru}`,t.analytics.apiBaseUrl=ab(r.payload.platformUrl,t.organizationId))}).addCase(tr,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Gn,(t,r)=>{ee(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),ee(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),ee(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),ee(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),ee(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),ee(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),ee(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),ee(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),ee(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),ee(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(so,t=>{t.analytics.enabled=!1}).addCase(uo,t=>{t.analytics.enabled=!0}).addCase(kc,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Pc,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Xn,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Ce,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2})),ob=new te({each:_,required:!0}),Lc=(e,t)=>(E(e,_),jn(t)?E(t,_):E(t,ob),{payload:{contextKey:e,contextValue:t}}),lo=x("context/set",e=>{for(let[t,r]of Object.entries(e))Lc(t,r);return{payload:e}}),co=x("context/add",e=>Lc(e.contextKey,e.contextValue)),fo=x("context/remove",e=>E(e,_)),Nx=Q($t(),e=>{e.addCase(lo,(t,r)=>{t.contextValues=r.payload}).addCase(co,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(fo,(t,r)=>{delete t.contextValues[r.payload]}).addCase(we.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})}),zr=x("debug/enable"),po=x("debug/disable"),sb=Q(St(),e=>{e.addCase(zr,()=>!0).addCase(po,()=>!1).addCase(Ce,(t,r)=>{var n;return(n=r.payload.debug)!=null?n:t})}),ub=Q(mu,e=>e),Ux=Q(Pu(),e=>{e.addCase(zi,t=>{t.enableDidYouMean=!0}).addCase(Zl,t=>{t.enableDidYouMean=!1}).addCase(N.pending,t=>{t.queryCorrection=Za(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(N.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||Za(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(Pr,(t,r)=>{t.wasCorrectedTo=r.payload})}),Z=_,lb={state:new be({required:!0}),numberOfResults:new B({required:!0,min:0}),value:new D({required:!0,emptyAllowed:!0}),path:new te({required:!0,each:_}),moreValuesAvailable:new X({required:!1})};function Dc(e){e.children.forEach(t=>{Dc(t)}),it({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},lb)}var cb={facetId:Z,field:_,delimitingCharacter:new D({required:!1,emptyAllowed:!0}),filterFacetCount:new X({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new be({required:!1}),basePath:new te({required:!1,each:_}),filterByBasePath:new X({required:!1})},ea=x("categoryFacet/register",e=>E(e,cb)),ta=x("categoryFacet/toggleSelectValue",e=>{try{return it(e.facetId,_),Dc(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}}),Nr=x("categoryFacet/deselectAll",e=>E(e,Z)),ra=x("categoryFacet/updateNumberOfValues",e=>E(e,{facetId:Z,numberOfValues:new B({required:!0,min:1})})),go=x("categoryFacet/updateSortCriterion",e=>E(e,{facetId:Z,criterion:new be})),_c={value:_,numberOfResults:new B({min:0}),state:_},Ur=new D({regex:/^[a-zA-Z0-9-_]+$/}),Qr=new D({required:!0}),db=new te({each:new D}),ho=new D,fb=new X,Br=new X,Hr=new B({min:0}),rr=new B({min:1}),zc=new X({required:!0}),pb=new Y,gb=new D,hb={captions:pb,numberOfValues:rr,query:gb},vo=new Y({values:hb}),Nc=new Y({options:{required:!1},values:{type:new D({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new te({required:!0,max:25,each:new D({emptyAllowed:!1,required:!0})})}}),vb=new X,yb={facetId:Z,field:new D({required:!0,emptyAllowed:!0}),delimitingCharacter:new D({required:!1,emptyAllowed:!0}),filterFacetCount:new X({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new be({required:!1}),allowedValues:Nc},na=x("facet/register",e=>E(e,yb)),Yr=x("facet/toggleSelectValue",e=>E(e,{facetId:Z,selection:new Y({values:_c})})),$e=x("facet/deselectAll",e=>E(e,Z)),yo=x("facet/updateSortCriterion",e=>E(e,{facetId:Z,criterion:new be({required:!0})})),aa=x("facet/updateNumberOfValues",e=>E(e,{facetId:Z,numberOfValues:new B({required:!0,min:1})})),ia=x("facet/updateIsFieldExpanded",e=>E(e,{facetId:Z,isFieldExpanded:new X({required:!0})})),oa=x("facet/updateFreezeCurrentValues",e=>E(e,{facetId:Z,freezeCurrentValues:new X({required:!0})})),Uc=le(cr()),sa={state:_,start:new B({required:!0}),end:new B({required:!0}),endInclusive:new X({required:!0}),numberOfResults:new B({required:!0,min:0})},ua={start:_,end:_,endInclusive:new X({required:!0}),state:_,numberOfResults:new B({required:!0,min:0})},mo=e=>({facetId:Z,selection:typeof e.start=="string"?new Y({values:ua}):new Y({values:sa})}),bo=x("rangeFacet/updateSortCriterion",e=>E(e,{facetId:Z,criterion:new be({required:!0})})),Qc=le(cr()),mb=le(Bs());Qc.default.extend(mb.default);function Bc(e){var t,r;Se(e.useLocalTime)||console.warn('The "useLocalTime" option for "buildDateRange" is deprecated. Please use the "timezone" engine configuration option instead.');let n=Hc(e.start,e),a=Hc(e.end,e),i=(t=e.endInclusive)!=null?t:!1,o=(r=e.state)!=null?r:"idle";return{start:n,end:a,endInclusive:i,state:o}}function Hc(e,t){let{dateFormat:r}=t;return rm(e)?(Yn(e),tm(e)):typeof e=="string"&&Zt(e)?(Yn(e),e):(Xl(e,r),Ui((0,Qc.default)(e,r)))}var bb={start:_,end:_,endInclusive:new X({required:!0}),state:_},Sb={facetId:Z,field:_,currentValues:new te({required:!1,each:new Y({values:bb})}),generateAutomaticRanges:new X({required:!0}),filterFacetCount:new X({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new be({required:!1}),rangeAlgorithm:new be({required:!1})};function Yc(e){return Zt(e)?Qi(e):e}function So(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:n}=Bc(t);if((0,Uc.default)(Yc(r)).isAfter((0,Uc.default)(Yc(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var Wr=x("dateFacet/register",e=>{try{return it(e,Sb),So(e),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}}),Jr=x("dateFacet/toggleSelectValue",e=>E(e,{facetId:Z,selection:new Y({values:ua})})),Kr=x("dateFacet/updateFacetValues",e=>{try{return it(e,{facetId:Z,values:new te({each:new Y({values:ua})})}),So({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}}),Wc=bo,Jc=$e,wb={state:_,start:new B({required:!0}),end:new B({required:!0}),endInclusive:new X({required:!0})},Cb={facetId:Z,field:_,currentValues:new te({required:!1,each:new Y({values:wb})}),generateAutomaticRanges:new X({required:!0}),filterFacetCount:new X({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new be({required:!1}),rangeAlgorithm:new be({required:!1})};function wo(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Zr=x("numericFacet/register",e=>{try{return E(e,Cb),wo(e),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}}),Gr=x("numericFacet/toggleSelectValue",e=>E(e,{facetId:Z,selection:new Y({values:sa})})),Xr=x("numericFacet/updateFacetValues",e=>{try{return it(e,{facetId:Z,values:new te({each:new Y({values:sa})})}),wo({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}}),Kc=bo,Zc=$e,pe=x("facetOptions/update",e=>E(e,{freezeFacetOrder:new X({required:!1})})),ct=x("facetOptions/facet/enable",e=>E(e,Z)),Pe=x("facetOptions/facet/disable",e=>E(e,Z)),Ob=Q(kn(),e=>{e.addCase(pe,(t,r)=>({...t,...r.payload})).addCase(N.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(N.rejected,t=>{t.freezeFacetOrder=!1}).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOptions)!=null?a:t}).addCase(ea,(t,r)=>{t.facets[r.payload.facetId]=wr()}).addCase(na,(t,r)=>{t.facets[r.payload.facetId]=wr()}).addCase(Wr,(t,r)=>{t.facets[r.payload.facetId]=wr()}).addCase(Zr,(t,r)=>{t.facets[r.payload.facetId]=wr()}).addCase(ct,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Pe,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(Ce,(t,r)=>{var n,a,i,o;[...Object.keys((n=r.payload.f)!=null?n:{}),...Object.keys((a=r.payload.cf)!=null?a:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((o=r.payload.df)!=null?o:{})].forEach(s=>{s in t||(t.facets[s]=wr()),t.facets[s].enabled=!0})})});function Co(e,t){let{facetId:r,criterion:n}=t,a=e[r];!a||(a.sortCriteria=n)}function la(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function Gc(e,t){!e||(e.numberOfValues=t)}var Oo={facetId:Z,captions:new Y({options:{required:!1}}),numberOfValues:new B({required:!1,min:1}),query:new D({required:!1,emptyAllowed:!0})},xb={path:new te({required:!0,each:_}),displayValue:ve,rawValue:ve,count:new B({required:!0,min:0})},xo=x("categoryFacet/selectSearchResult",e=>E(e,{facetId:Z,value:new Y({values:xb})})),qo=x("categoryFacetSearch/register",e=>E(e,Oo));function ca(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Xc(e,t,r){e.currentValues=qb(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function qb(e,t){if(!e.length)return[];let r=ed(e[0],t),n=r;for(let a of e.splice(1)){let i=ed(a,t);n.children.push(i),n=i}return n.state="selected",n.retrieveChildren=!0,[r]}function ed(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var Qx=Q(gr(),e=>{e.addCase(ea,(t,r)=>{let n=r.payload,{facetId:a}=n;if(a in t)return;let i=Rb(n),o=i.numberOfValues;t[a]={request:i,initialNumberOfValues:o}}).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.categoryFacetSet)!=null?a:t}).addCase(Ce,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(a=>{let i=t[a].request,o=n[a]||[];(o.length||i.currentValues.length)&&Xc(i,o,t[a].initialNumberOfValues)})}).addCase(go,(t,r)=>{var n;let{facetId:a,criterion:i}=r.payload,o=(n=t[a])==null?void 0:n.request;!o||(o.sortCriteria=i)}).addCase(ta,(t,r)=>{var n;let{facetId:a,selection:i,retrieveCount:o}=r.payload,s=(n=t[a])==null?void 0:n.request;if(!s)return;let{path:u}=i,l=u.slice(0,u.length-1),f=Ib(s,l,o);if(f.length){let p=f[0];p.retrieveChildren=!0,p.state="selected",p.children=[];return}let c=rd(i.value,o);c.state="selected",f.push(c),s.numberOfValues=1}).addCase(Nr,(t,r)=>{let n=r.payload;ca(t,n)}).addCase(Gt,t=>{Object.keys(t).forEach(r=>ca(t,r))}).addCase(We,t=>{Object.keys(t).forEach(r=>ca(t,r))}).addCase(Vr,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(ra,(t,r)=>{var n;let{facetId:a,numberOfValues:i}=r.payload,o=(n=t[a])==null?void 0:n.request;if(o){if(!o.currentValues.length)return Gc(o,i);Fb(t,r.payload)}}).addCase(xo,(t,r)=>{let{facetId:n,value:a}=r.payload,i=t[n];if(!i)return;let o=[...a.path,a.rawValue];Xc(i.request,o,i.initialNumberOfValues)}).addCase(ut.fulfilled,(t,r)=>{nd(t,r.payload.response.facets)}).addCase(N.fulfilled,(t,r)=>{nd(t,r.payload.response.facets)}).addCase(Pe,(t,r)=>{ca(t,r.payload)})}),td={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function Ib(e,t,r){let n=e.currentValues;for(let a of t){let i=n[0];(!i||a!==i.value)&&(i=rd(a,r),n.length=0,n.push(i)),i.retrieveChildren=!1,i.state="idle",n=i.children}return n}function Rb(e){return{...td,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function rd(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function nd(e,t){t.forEach(r=>{var n;if(!Ab(e,r))return;let a=r.facetId,i=(n=e[a])==null?void 0:n.request;if(!i)return;let o=Eb(i,r);i.currentValues=o?[]:i.currentValues,i.preventAutoSelect=!1})}function Fb(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=(r=e[n])==null?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&(i==null?void 0:i.state)!=="selected";)i=i.children[0];i.retrieveCount=a}}function Ab(e,t){return t.facetId in e}function Eb(e,t){let r=mt(e.currentValues).parents,n=mt(t.values).parents;return r.length!==n.length}var jb=Q(Pn(),e=>{e.addCase(N.fulfilled,(t,r)=>r.payload.response.facets.map(n=>n.facetId)).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOrder)!=null?a:t})});function ad(e,t,r){let{facetId:n}=t;if(e[n])return;let a=!1,i={...nr,...t},o=r();e[n]={options:i,isLoading:a,response:o,initialNumberOfValues:i.numberOfValues,requestId:""}}function id(e,t){let{facetId:r,...n}=t,a=e[r];!a||(a.options={...a.options,...n})}function od(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function sd(e,t){let r=e[t];!r||(r.isLoading=!1)}function ud(e,t,r){let{facetId:n,response:a}=t,i=e[n];!i||i.requestId===r&&(i.isLoading=!1,i.response=a)}function Io(e,t,r){let{facetId:n}=t,a=e[n];!a||(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=nr.query)}function ld(e,t){Object.keys(e).forEach(r=>Io(e,{facetId:r},t))}var nr={captions:{},numberOfValues:10,query:""},kb={facetId:Z,value:new Y({values:{displayValue:ve,rawValue:ve,count:new B({required:!0,min:0})}})},cd=x("facetSearch/register",e=>E(e,Oo)),en=x("facetSearch/update",e=>E(e,Oo)),da=x("facetSearch/toggleSelectValue",e=>E(e,kb)),Ro=e=>z("analytics/facet/showMore",$.Search,(t,r)=>{E(e,Z);let n=kt(e,De(r));return t.logFacetShowMore(n)})(),Fo=e=>z("analytics/facet/showLess",$.Search,(t,r)=>{E(e,Z);let n=kt(e,De(r));return t.logFacetShowLess(n)})(),Pb=e=>z("analytics/facet/search",$.Search,(t,r)=>{E(e,Z);let n=De(r),a=kt(e,n);return t.logFacetSearch(a)})(),tn=e=>z("analytics/facet/sortChange",$.Search,(t,r)=>{E(e,{facetId:Z,criterion:new be({required:!0})});let{facetId:n,criterion:a}=e,i=De(r),o={...kt(n,i),criteria:a};return t.logFacetUpdateSort(o)})(),dt=e=>z("analytics/facet/reset",$.Search,(t,r)=>{E(e,Z);let n=De(r),a=kt(e,n);return t.logFacetClearAll(a)})(),Ne=e=>z("analytics/facet/select",$.Search,(t,r)=>{E(e,{facetId:Z,facetValue:_});let n=De(r),a=Ha(e,n);return t.logFacetSelect(a)})(),ar=e=>z("analytics/facet/deselect",$.Search,(t,r)=>{E(e,{facetId:Z,facetValue:_});let n=De(r),a=Ha(e,n);return t.logFacetDeselect(a)})(),dd=e=>z("analytics/facet/breadcrumb",$.Search,(t,r)=>{E(e,{facetId:Z,facetValue:_});let n=Ha(e,De(r));return t.logBreadcrumbFacet(n)})(),Tb=async(e,t)=>{let{captions:r,query:n,numberOfValues:a}=t.facetSearchSet[e].options,{field:i,currentValues:o,filterFacetCount:s}=t.facetSet[e],u=(await Ft(t)).request,l=o.filter(c=>c.state!=="idle").map(c=>c.value),f=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:r,numberOfValues:a,query:f,field:i,ignoreValues:l,searchContext:u,filterFacetCount:s,type:"specific"}},Vb=async(e,t)=>{let r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:a,query:i,numberOfValues:o}=r,{field:s,delimitingCharacter:u,basePath:l,filterFacetCount:f}=n,c=(await Ft(t)).request,p=Mb(n),h=p.length?[p]:[],g=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:a,numberOfValues:o,query:g,field:s,delimitingCharacter:u,ignorePaths:h,searchContext:c,filterFacetCount:f,type:"hierarchical"}},Mb=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},ft=ae("facetSearch/executeSearch",async(e,{dispatch:t,getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i=r(),o;a(e,_),$b(i,e)?o=await Tb(e,i):o=await Vb(e,i);let s=await n.facetSearch(o);return t(Pb(e)),{facetId:e,response:s}}),Ao=x("facetSearch/clearResults",e=>E(e,{facetId:Z})),$b=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0,Bx=Q(ti(),e=>{e.addCase(qo,(t,r)=>{let n=r.payload;ad(t,n,Eo)}).addCase(en,(t,r)=>{id(t,r.payload)}).addCase(ft.pending,(t,r)=>{let n=r.meta.arg;od(t,n,r.meta.requestId)}).addCase(ft.rejected,(t,r)=>{let n=r.meta.arg;sd(t,n)}).addCase(ft.fulfilled,(t,r)=>{ud(t,r.payload,r.meta.requestId)}).addCase(Ao,(t,{payload:{facetId:r}})=>{Io(t,{facetId:r},Eo)}).addCase(N.fulfilled,t=>{ld(t,Eo)})});function Eo(){return{moreValuesAvailable:!1,values:[]}}var Lb=Q(ei(),e=>{e.addCase(cd,(t,r)=>{let n=r.payload;ad(t,n,jo)}).addCase(en,(t,r)=>{id(t,r.payload)}).addCase(ft.pending,(t,r)=>{let n=r.meta.arg;od(t,n,r.meta.requestId)}).addCase(ft.rejected,(t,r)=>{let n=r.meta.arg;sd(t,n)}).addCase(ft.fulfilled,(t,r)=>{ud(t,r.payload,r.meta.requestId)}).addCase(Ao,(t,{payload:r})=>{Io(t,r,jo)}).addCase(N.fulfilled,t=>{ld(t,jo)})});function jo(){return{moreValuesAvailable:!1,values:[]}}var Db=x("productlisting/setUrl",e=>E(e,{url:new D({required:!0,url:!0})})),_b=x("productlisting/setAdditionalFields",e=>E(e,{additionalFields:new te({required:!0,each:new D({required:!0,emptyAllowed:!1})})})),rn=ae("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProducts(await zb(i));return he(s)?(r(ot(s.error)),n(s.error)):{response:s.success}}),zb=async e=>{var t,r,n;let a=Ub(e),i=await _e();return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(t=e.productListing)==null?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...((r=e.productListing.additionalFields)==null?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Nb(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((n=e.sort)==null?void 0:n.by)||Dr.Relevance)!==Dr.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Nb(e){return e.debug}function Ub(e){var t;return Zi(Qb(e),(t=e.facetOrder)!=null?t:[])}function Qb(e){return[...ko(e.facetSet),...ko(e.numericFacetSet),...ko(e.dateFacetSet),...Bb(e.categoryFacetSet)]}function Bb(e){return Object.values(e||{}).map(t=>t.request)}function ko(e={}){return Object.keys(e).map(t=>e[t])}var Hb=Q(yr(),e=>{e.addCase(na,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=Yb(r.payload))}).addCase(we.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(Ce,(t,r)=>{let n=r.payload.f||{};Object.keys(t).forEach(a=>{let i=t[a],o=n[a]||[],s=i.currentValues.filter(u=>!o.includes(u.value));i.currentValues=[...o.map(gd),...s.map(Jb)],i.preventAutoSelect=o.length>0,i.numberOfValues=Math.max(o.length,i.numberOfValues)})}).addCase(Yr,(t,r)=>{let{facetId:n,selection:a}=r.payload,i=t[n];if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(u=>u.value===a.value);if(!o){fd(i,a);return}let s=o.state==="selected";o.state=s?"idle":"selected",i.freezeCurrentValues=!0}).addCase(oa,(t,r)=>{let{facetId:n,freezeCurrentValues:a}=r.payload,i=t[n];!i||(i.freezeCurrentValues=a)}).addCase($e,(t,r)=>{let n=t[r.payload];la(n)}).addCase(Gt,t=>{Object.keys(t).forEach(r=>{let n=t[r];la(n)})}).addCase(We,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(r=>{let n=t[r.facetId];la(n)})}).addCase(Vr,(t,r)=>Object.keys(t).forEach(n=>{t[n].preventAutoSelect=!r.payload.allow})).addCase(yo,(t,r)=>{Co(t,r.payload)}).addCase(aa,(t,r)=>{let{facetId:n,numberOfValues:a}=r.payload;Gc(t[n],a)}).addCase(ia,(t,r)=>{let{facetId:n,isFieldExpanded:a}=r.payload,i=t[n];!i||(i.isFieldExpanded=a)}).addCase(N.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>Po(t[n.facetId],n))}).addCase(rn.fulfilled,(t,r)=>{var n,a;(((a=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:a.results)||[]).forEach(i=>Po(t[i.facetId],i))}).addCase(ut.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>Po(t[n.facetId],n))}).addCase(da,(t,r)=>{let{facetId:n,value:a}=r.payload,i=t[n];if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,u=s.find(f=>f.value===o);if(u){u.state="selected";return}let l=gd(o);fd(i,l),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(Pe,(t,r)=>{if(!(r.payload in t))return;let n=t[r.payload];la(n)})});function fd(e,t){let{currentValues:r}=e,n=r.findIndex(s=>s.state==="idle"),a=n===-1?r.length:n,i=r.slice(0,a),o=r.slice(a+1);e.currentValues=[...i,t,...o],e.numberOfValues=e.currentValues.length}function Po(e,t){!e||(e.currentValues=t.values.map(Wb),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var pd={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function Yb(e){return{...pd,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,hasBreadcrumbs:!0,...e}}function Wb(e){let{value:t,state:r}=e;return{value:t,state:r}}function gd(e){return{value:e,state:"selected"}}function Jb(e){return{...e,state:"idle"}}var hd={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function vd(e,t){let{facetId:r}=t;if(r in e)return;let n=wd(t);e[r]={...t,numberOfValues:n}}function yd(e,t,r){let n=e[t];!n||(n.currentValues=r,n.numberOfValues=wd(n))}function md(e,t,r){let n=e[t];if(!n)return;let a=To(n.currentValues,r);if(!a)return;let i=a.state==="selected";a.state=i?"idle":"selected",n.preventAutoSelect=!0}function pt(e,t){let r=e[t];!r||r.currentValues.forEach(n=>n.state="idle")}function bd(e,t){Object.entries(e).forEach(([r,n])=>{let a=t[r]||[];n.currentValues.forEach(s=>{let u=!!To(a,s);return s.state=u?"selected":"idle",s});let i=a.filter(s=>!To(n.currentValues,s)),o=n.currentValues;o.push(...i),n.numberOfValues=Math.max(n.numberOfValues,o.length)})}function Sd(e,t,r){t.forEach(n=>{let a=n.facetId,i=e[a];if(!i)return;let o=r(n.values);i.currentValues=o,i.preventAutoSelect=!1})}function To(e,t){let{start:r,end:n}=t;return e.find(a=>a.start===r&&a.end===n)}function wd(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Hx=Q(hr(),e=>{e.addCase(Wr,(t,r)=>{let{payload:n}=r,a=Kb(n);vd(t,a)}).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.dateFacetSet)!=null?a:t}).addCase(Ce,(t,r)=>{let n=r.payload.df||{};bd(t,n)}).addCase(Jr,(t,r)=>{let{facetId:n,selection:a}=r.payload;md(t,n,a)}).addCase(Kr,(t,r)=>{let{facetId:n,values:a}=r.payload;yd(t,n,a)}).addCase(Jc,(t,r)=>{pt(t,r.payload)}).addCase(Gt,t=>{Object.keys(t).forEach(r=>{pt(t,r)})}).addCase(We,t=>{Object.keys(t).forEach(r=>{pt(t,r)})}).addCase(Wc,(t,r)=>{Co(t,r.payload)}).addCase(N.fulfilled,(t,r)=>{let n=r.payload.response.facets;Sd(t,n,Zb)}).addCase(Pe,(t,r)=>{pt(t,r.payload)})});function Kb(e){return{...hd,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function Zb(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var Yx=Q(vr(),e=>{e.addCase(Zr,(t,r)=>{let{payload:n}=r,a=Gb(n);vd(t,a)}).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.numericFacetSet)!=null?a:t}).addCase(Ce,(t,r)=>{let n=r.payload.nf||{};bd(t,n)}).addCase(Gr,(t,r)=>{let{facetId:n,selection:a}=r.payload;md(t,n,a)}).addCase(Xr,(t,r)=>{let{facetId:n,values:a}=r.payload;yd(t,n,a)}).addCase(Zc,(t,r)=>{pt(t,r.payload)}).addCase(Gt,t=>{Object.keys(t).forEach(r=>{pt(t,r)})}).addCase(We,t=>{Object.keys(t).forEach(r=>{pt(t,r)})}).addCase(Kc,(t,r)=>{Co(t,r.payload)}).addCase(N.fulfilled,(t,r)=>{let n=r.payload.response.facets;Sd(t,n,Xb)}).addCase(Pe,(t,r)=>{pt(t,r.payload)})});function Gb(e){return{...hd,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Xb(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var eS=new te({each:_,required:!0}),fa=x("fields/registerFieldsToInclude",e=>E(e,eS)),Vo=x("fields/fetchall/enable"),pa=x("fields/fetchall/disable"),Mo=ae("fields/description",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return he(u)?n(u.error):u.success.fields}),Cd={collectionField:new D({emptyAllowed:!1,required:!1}),parentField:new D({emptyAllowed:!1,required:!1}),childField:new D({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new B({min:0,required:!1})},ga=x("folding/register",e=>E(e,Cd)),nn=ae("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await Gi(a),o=await n.search({...i,q:tS(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}=${e}`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100});return he(o)?r(o.error):{collectionId:e,results:o.success.results,rootResult:a.folding.collections[e].result}});function tS(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Od=e=>z("analytics/folding/showMore",$.Click,(t,r)=>(It(e),t.logShowMoreFoldedResults(qt(e,r),Jt(e))))(),rS=z("analytics/folding/showLess",$.Custom,e=>e.logShowLessFoldedResults()),nS=Q(Ga(),e=>e.addCase(fa,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Vo,t=>{t.fetchAllFields=!0}).addCase(pa,t=>{t.fetchAllFields=!1}).addCase(Mo.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(ga,(t,{payload:r})=>{var n,a,i;let o=oi().fields;t.fieldsToInclude.push((n=r.collectionField)!=null?n:o.collection,(a=r.parentField)!=null?a:o.parent,(i=r.childField)!=null?i:o.child)}));function aS(e,t){return e.raw[t.collection]}function $o(e,t){return e.raw[t.parent]}function an(e,t){let r=e.raw[t.child];return Dl(r)?r[0]:r}function iS(e,t){return(e||t)!==void 0&&e===t}function xd(e,t,r,n=[]){let a=an(e,r);return a?n.indexOf(a)!==-1?[]:t.filter(i=>{let o=an(i,r)===an(e,r);return $o(i,r)===a&&!o}).map(i=>({result:i,children:xd(i,t,r,[...n,a])})):[]}function oS(e,t){return e.find(r=>{let n=$o(r,t)===void 0,a=iS($o(r,t),an(r,t));return n||a})}function qd(e){return e.parentResult?qd(e.parentResult):e}function sS(e,t,r){var n;let a=zl(e),i=(n=r??oS(a,t))!=null?n:qd(e);return{result:i,children:xd(i,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Lo(e,t,r){let n={};return e.forEach(a=>{let i=aS(a,t);!i||!an(a,t)&&!a.parentResult||(n[i]=sS(a,t,r))}),n}function Id(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var Wx=Q(oi(),e=>e.addCase(N.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Lo(r.response.results,t.fields):{}}).addCase(Xt.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Lo(r.response.results,t.fields)}:{}}).addCase(ga,(t,{payload:r})=>{var n,a,i,o;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(n=r.collectionField)!=null?n:t.fields.collection,parent:(a=r.parentField)!=null?a:t.fields.parent,child:(i=r.childField)!=null?i:t.fields.child},filterFieldRange:(o=r.numberOfFoldedResults)!=null?o:t.filterFieldRange}}).addCase(nn.pending,(t,{meta:r})=>{let n=r.arg;Id(t,n).isLoadingMoreResults=!0}).addCase(nn.rejected,(t,{meta:r})=>{let n=r.arg;Id(t,n).isLoadingMoreResults=!1}).addCase(nn.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:a}})=>{let i=Lo(n,t.fields,a);if(!i||!i[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=i[r],t.collections[r].moreResultsAvailable=!1})),uS=le(eg());function ha(e,t,r=(n,a)=>n===a){return e.length===t.length&&e.findIndex((n,a)=>!r(t[a],n))===-1}var Rd=(0,uS.createCustomEqual)(e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length!==r.length?!1:t.every(n=>r.findIndex(a=>e(n,a))!==-1):e(t,r)),lS=Q(Mu(),e=>{e.addCase(Rt,(t,r)=>cS(t,r.payload)?void 0:r.payload)}),cS=(e,t)=>dS(e.context,t.context)&&fS(e.dictionaryFieldContext,t.dictionaryFieldContext)&&mS(e.advancedSearchQueries,t.advancedSearchQueries)&&pS(e.tabSet,t.tabSet)&&gS(e.staticFilterSet,t.staticFilterSet)&&Do(e.facetSet,t.facetSet)&&Do(e.dateFacetSet,t.dateFacetSet)&&Do(e.numericFacetSet,t.numericFacetSet)&&hS(e.categoryFacetSet,t.categoryFacetSet)&&vS(e.pagination,t.pagination)&&yS(e.query,t.query)&&bS(e,t)&&SS(e.pipeline,t.pipeline)&&wS(e.searchHub,t.searchHub)&&CS(e.facetOrder,t.facetOrder)&&OS(e.debug,t.debug),dS=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),fS=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),pS=(e,t)=>{let r=Fd(e),n=Fd(t);return(r==null?void 0:r.id)===(n==null?void 0:n.id)},Fd=e=>Object.values(e).find(t=>t.isActive),gS=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=Ad(e[r]),i=Ad(n);if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},Ad=e=>e.values.filter(t=>t.state!=="idle"),Do=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=e[r].currentValues.filter(o=>o.state==="selected"),i=n.currentValues.filter(o=>o.state==="selected");if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},hS=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let i=mt((r=e[n])==null?void 0:r.request.currentValues).parents.map(({value:s})=>s),o=mt(a==null?void 0:a.request.currentValues).parents.map(({value:s})=>s);if(JSON.stringify(i)!==JSON.stringify(o))return!1}return!0},vS=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,yS=(e,t)=>JSON.stringify(e)===JSON.stringify(t),mS=(e,t)=>JSON.stringify(e)===JSON.stringify(t),bS=(e,t)=>e.sortCriteria===t.sortCriteria,SS=(e,t)=>e===t,wS=(e,t)=>e===t,CS=(e,t)=>ha(e,t),OS=(e,t)=>e===t,va=1,xS=5e3,Jx=Q(Be(),e=>{e.addCase(Hi,(t,r)=>{let n=_o(t),a=r.payload;t.defaultNumberOfResults=t.numberOfResults=a,t.firstResult=on(n,a)}).addCase(Yi,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Wi,(t,r)=>{let n=r.payload;t.firstResult=on(n,t.numberOfResults)}).addCase(Tr,(t,r)=>{let n=r.payload;t.firstResult=on(n,t.numberOfResults)}).addCase(Ki,t=>{let r=_o(t),n=Math.max(r-1,va);t.firstResult=on(n,t.numberOfResults)}).addCase(Ji,t=>{let r=_o(t),n=qS(t),a=Math.min(r+1,n);t.firstResult=on(a,t.numberOfResults)}).addCase(we.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(Ce,(t,r)=>{var n,a;t.firstResult=(n=r.payload.firstResult)!=null?n:t.firstResult,t.numberOfResults=(a=r.payload.numberOfResults)!=null?a:t.defaultNumberOfResults}).addCase(N.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(rn.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.pagination.totalCount}).addCase($e,t=>{Te(t)}).addCase(Yr,t=>{Te(t)}).addCase(Nr,t=>{Te(t)}).addCase(ta,t=>{Te(t)}).addCase(xo,t=>{Te(t)}).addCase(Jr,t=>{Te(t)}).addCase(Gr,t=>{Te(t)}).addCase(Gt,t=>{Te(t)}).addCase(We,t=>{Te(t)}).addCase(Kr,t=>{Te(t)}).addCase(Xr,t=>{Te(t)}).addCase(da,t=>{Te(t)})});function Te(e){e.firstResult=Be().firstResult}function _o(e){let{firstResult:t,numberOfResults:r}=e;return Ed(t,r)}function qS(e){let{totalCountFiltered:t,numberOfResults:r}=e;return jd(t,r)}function on(e,t){return(e-1)*t}function Ed(e,t){return e/t+1}function jd(e,t){let r=Math.min(e,xS);return Math.ceil(r/t)}var zo=x("pipeline/set",e=>E(e,new D({required:!0,emptyAllowed:!0}))),IS=Q(Lt(),e=>{e.addCase(zo,(t,r)=>r.payload).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.pipeline)!=null?a:t}).addCase(tr,(t,r)=>r.payload.pipeline||t)}),Kx=Q(Ba(),e=>{e.addCase(Db,(t,r)=>{t.url=r.payload.url}).addCase(_b,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(rn.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(rn.fulfilled,(t,r)=>{t.error=null,t.facets=r.payload.response.facets,t.products=r.payload.response.products,t.responseId=r.payload.response.responseId,t.isLoading=!1}).addCase(rn.pending,t=>{t.isLoading=!0})}),Zx=Q(no(),e=>{e.addCase(Rm,(t,r)=>{t.id=r.payload.id}).addCase(Fm,(t,r)=>{t.skus=r.payload.skus}).addCase(Am,(t,r)=>{t.filter.brand=r.payload.brand}).addCase(Em,(t,r)=>{t.filter.category=r.payload.category}).addCase(km,(t,r)=>{t.maxNumberOfRecommendations=r.payload.number}).addCase(jm,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(Kn.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Kn.fulfilled,(t,r)=>{t.error=null,t.searchUid=r.payload.searchUid,t.recommendations=r.payload.recommendations,t.isLoading=!1}).addCase(Kn.pending,t=>{t.isLoading=!0})}),kd={id:_,query:ve},No=x("querySet/register",e=>E(e,kd)),sn=x("querySet/update",e=>E(e,kd)),un={id:_},Uo=x("querySuggest/register",e=>E(e,{...un,q:new D,count:new B({min:0})})),RS=x("querySuggest/unregister",e=>E(e,un)),ir=x("querySuggest/selectSuggestion",e=>E(e,{...un,expression:ve})),ln=x("querySuggest/clear",e=>E(e,un)),cn=ae("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,un);let i=e.id,o=await FS(i,t()),s=await n.querySuggest(o);return he(s)?r(s.error):{id:i,q:o.q,...s.success}}),FS=async(e,t)=>{var r;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:(r=t.querySet)==null?void 0:r[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Pt.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await _e(),...t.configuration.analytics.enabled&&await En(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}},AS=Q(Wa(),e=>{e.addCase(No,(t,r)=>{let{id:n,query:a}=r.payload;n in t||(t[n]=a)}).addCase(sn,(t,r)=>{let{id:n,query:a}=r.payload;Qo(t,n,a)}).addCase(ir,(t,r)=>{let{id:n,expression:a}=r.payload;Qo(t,n,a)}).addCase(N.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Pd(t,n)}).addCase(Ce,(t,r)=>{ee(r.payload.q)||Pd(t,r.payload.q)}).addCase(we.fulfilled,(t,r)=>{if(r.payload)for(let[n,a]of Object.entries(r.payload.querySet))Qo(t,n,a)})});function Pd(e,t){Object.keys(e).forEach(r=>e[r]=t)}var Qo=(e,t,r)=>{t in e&&(e[t]=r)},ES=Q(Qm(),e=>e.addCase(Uo,(t,r)=>{let n=r.payload.id;n in t||(t[n]=jS(r.payload))}).addCase(RS,(t,r)=>{delete t[r.payload.id]}).addCase(cn.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.currentRequestId=r.meta.requestId,n.isLoading=!0)}).addCase(cn.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:a}=r.payload;a&&n.partialQueries.push(a.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(cn.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.error=r.payload||null,n.isLoading=!1)}).addCase(sn,(t,r)=>{let{id:n,query:a}=r.payload;n in t&&Td(t[n],a)}).addCase(ln,(t,r)=>{let n=t[r.payload.id];!n||(n.responseId="",n.completions=[],n.partialQueries=[])}).addCase(ir,(t,r)=>{let{id:n,expression:a}=r.payload,i=t[n];!i||(i.q=a)}).addCase(Ce,(t,r)=>{ee(r.payload.q)||Vd(t,r.payload.q)}).addCase(N.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Vd(t,n)}));function Td(e,t){e.q=t}function Vd(e,t){Object.keys(e).forEach(r=>Td(e[r],t))}function jS(e){return{id:"",completions:[],responseId:"",count:5,q:"",currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var kS=Q(je(),e=>e.addCase(Kt,(t,r)=>({...t,...r.payload})).addCase(Pr,(t,r)=>{t.q=r.payload}).addCase(ir,(t,r)=>{t.q=r.payload.expression}).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.query)!=null?a:t}).addCase(Ce,(t,r)=>{var n,a;t.q=(n=r.payload.q)!=null?n:t.q,t.enableQuerySyntax=(a=r.payload.enableQuerySyntax)!=null?a:t.enableQuerySyntax})),PS=()=>new Y({values:{documentId:new Y({values:{contentIdKey:_,contentIdValue:_}})},options:{required:!0}}),Md=()=>new Y({values:{questionAnswerId:_},options:{required:!0}});function ya(e){return!("contentIdKey"in e||"contentIdValue"in e)}function ma(e){return ya(e)?E(e,Md()):E(e,PS())}var Bo=x("smartSnippet/expand"),Ho=x("smartSnippet/collapse"),Yo=x("smartSnippet/like"),Wo=x("smartSnippet/dislike"),Jo=x("smartSnippet/feedbackModal/open"),dn=x("smartSnippet/feedbackModal/close"),Ko=x("smartSnippet/related/expand",e=>ma(e)),Zo=x("smartSnippet/related/collapse",e=>ma(e)),$d=(e,t)=>e.findIndex(r=>ya(t)?r.questionAnswerId===t.questionAnswerId:r.contentIdValue===t.contentIdValue&&r.contentIdKey===t.contentIdKey);function Ld({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Vy(JSON.stringify({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n}))}function TS(e,t){let r=Ld(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Gx=Q(si(),e=>e.addCase(Bo,t=>{t.expanded=!0}).addCase(Ho,t=>{t.expanded=!1}).addCase(Yo,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Wo,t=>{t.liked=!1,t.disliked=!0}).addCase(Jo,t=>{t.feedbackModalOpen=!0}).addCase(dn,t=>{t.feedbackModalOpen=!1}).addCase(N.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((i,o)=>TS(i,t.relatedQuestions[o])),a=Ld(r.payload.response.questionAnswer);return t.questionAnswerId===a?{...t,relatedQuestions:n}:{...si(),relatedQuestions:n,questionAnswerId:a}}).addCase(Ko,(t,r)=>{let n=$d(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(Zo,(t,r)=>{let n=$d(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)})),VS={results:new te({required:!0,each:new Y({values:Di})}),maxLength:new B({required:!0,min:1,default:10})},Go=x("recentResults/registerRecentResults",e=>E(e,VS)),fn=x("recentResults/pushRecentResult",e=>(It(e),{payload:e})),Xo=x("recentResults/clearRecentResults"),Xx=Q(Du(),e=>{e.addCase(Go,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Xo,t=>{t.results=[]}).addCase(fn,(t,r)=>{let n=r.payload;t.results=t.results.filter(i=>i.uniqueId!==n.uniqueId);let a=t.results.slice(0,t.maxLength-1);t.results=[n,...a]})}),MS={queries:new te({required:!0,each:new D({emptyAllowed:!1})}),maxLength:new B({required:!0,min:1,default:10})},es=x("recentQueries/registerRecentQueries",e=>E(e,MS)),ts=x("recentQueries/clearRecentQueries"),eq=Q(_u(),e=>{e.addCase(es,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(ts,t=>{t.queries=[]}).addCase(N.fulfilled,(t,r)=>{let n=r.payload.queryExecuted.trim(),a=r.payload.response.results;if(!n.length||!a.length)return;t.queries=t.queries.filter(o=>o!==n);let i=t.queries.slice(0,t.maxLength-1);t.queries=[n,...i]})}),tq=Q(kr(),e=>{e.addCase(Hy,(t,r)=>{t.id=r.payload.id}).addCase(Bn.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Bn.fulfilled,(t,r)=>{t.error=null,t.recommendations=r.payload.recommendations,t.duration=r.payload.duration,t.isLoading=!1,t.searchUid=r.payload.searchUid}).addCase(Bn.pending,t=>{t.isLoading=!0})});function $S(e){return e.type==="redirect"}var Dd=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter($S);return e.length?e[0].content:null}},LS=z("analytics/redirection",$.Search,(e,t)=>{var r;if((r=t.redirection)==null?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})}),rs=x("standaloneSearchBox/register",e=>E(e,{id:_,redirectionUrl:_})),ns=x("standaloneSearchBox/reset",e=>E(e,{id:_})),as=x("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>E(e,{id:_})),is=x("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),pn=ae("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new D({emptyAllowed:!1})});let o=await _d(r()),s=await a.plan(o);if(he(s))return n(s.error);let{redirectionUrl:u}=new Dd(s.success);return u&&t(DS(u)),u||""}),DS=e=>z("analytics/standaloneSearchBox/redirect",$.Custom,t=>t.logTriggerRedirect({redirectedTo:e}))(),_d=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await _e()},...e.configuration.analytics.enabled&&await En(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}),zd=ae("redirection/check",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{defaultRedirectionUrl:new D({emptyAllowed:!1})});let o=await a.plan(await _d(r()));if(he(o))return n(o.error);let s=new Dd(o.success).redirectionUrl;return s&&t(LS()),s||e.defaultRedirectionUrl}),rq=Q(Fu(),e=>e.addCase(zd.fulfilled,(t,r)=>{t.redirectTo=r.payload}));async function _S(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=((r=e.query)==null?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await _e()},q:s,...t,requestedOutputSize:t.requestedOutputSize||0,...n.authenticationProviders.length&&{authentication:n.authenticationProviders.join(",")}}}var os=ae("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await _S(a,e),o=await t.apiClient.html(i);return he(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}}),nq=Q(ii(),e=>{e.addCase(os.pending,t=>{t.isLoading=!0}).addCase(os.fulfilled,(t,r)=>{let{content:n,uniqueId:a}=r.payload;t.content=n,t.uniqueId=a,t.isLoading=!1})}),ba=x("searchHub/set",e=>E(e,new D({required:!0,emptyAllowed:!0}))),zS=Q(Ge(),e=>{e.addCase(ba,(t,r)=>r.payload).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.searchHub)!=null?a:t}).addCase(tr,(t,r)=>r.payload.searchHub||t)});function ss(e,t){var r;let n=(r=t.payload)!=null?r:null;n&&(e.response=Me().response,e.results=[]),e.error=n,e.isLoading=!1}function us(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function ls(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var NS=Q(Me(),e=>{e.addCase(N.rejected,(t,r)=>ss(t,r)),e.addCase(Xt.rejected,(t,r)=>ss(t,r)),e.addCase(st.rejected,(t,r)=>ss(t,r)),e.addCase(N.fulfilled,(t,r)=>{us(t,r),t.results=r.payload.response.results,t.searchResponseId=r.payload.response.searchUid}),e.addCase(Xt.fulfilled,(t,r)=>{us(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(st.fulfilled,(t,r)=>{us(t,r),t.results=r.payload.response.results}),e.addCase(ut.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(N.pending,ls),e.addCase(Xt.pending,ls),e.addCase(st.pending,ls)}),Nd={by:new Tt({enum:bt,required:!0})},cs=x("sortCriteria/register",e=>Ud(e)),ds=x("sortCriteria/update",e=>Ud(e)),Ud=e=>Ka(e)?(e.forEach(t=>E(t,Nd)),{payload:e}):E(e,Nd),aq=Q(Mt(),e=>{e.addCase(cs,(t,r)=>Sr(r.payload)).addCase(ds,(t,r)=>Sr(r.payload)).addCase(we.fulfilled,(t,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.sortCriteria)!=null?a:t}).addCase(Ce,(t,r)=>{var n;return(n=r.payload.sortCriteria)!=null?n:t})}),iq=Q(Lu(),e=>e.addCase(rs,(t,r)=>{let{id:n,redirectionUrl:a}=r.payload;n in t||(t[n]=Qd(a))}).addCase(ns,(t,r)=>{let{id:n}=r.payload,a=t[n];if(a){t[n]=Qd(a.defaultRedirectionUrl);return}}).addCase(pn.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!0)}).addCase(pn.fulfilled,(t,r)=>{let n=r.payload,a=t[r.meta.arg.id];!a||(a.redirectTo=n||a.defaultRedirectionUrl,a.isLoading=!1)}).addCase(pn.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!1)}).addCase(as,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="searchFromLink")}).addCase(is,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function Qd(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var oq=Q($u(),e=>e.addCase(N.fulfilled,(t,r)=>{var n,a,i,o;let s=[],u=[],l=[],f=[];r.payload.response.triggers.forEach(c=>{switch(c.type){case"redirect":s.push(c.content);break;case"query":u.push(c.content);break;case"execute":l.push({functionName:c.content.name,params:c.content.params});break;case"notify":f.push(c.content);break}}),t.redirectTo=(n=s[0])!=null?n:"",t.query=(a=u[0])!=null?a:"",t.execute=(i=l[0])!=null?i:{functionName:"",params:[]},t.executions=l,t.notification=(o=f[0])!=null?o:"",t.notifications=f})),US={by:new Tt({enum:Dr,required:!0})},QS=x("sort/register",e=>Bd(e)),BS=x("sort/update",e=>Bd(e)),Bd=e=>E(e,US),sq=Q(Oc(),e=>{e.addCase(QS,(t,r)=>r.payload).addCase(BS,(t,r)=>r.payload)}),fs=x("dictionaryFieldContext/set",e=>{let t=new Y({options:{required:!0}}),r=E(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new te({each:ve}),i=E(n,a).error;return i?{payload:e,error:i}:{payload:e}}),ps=x("dictionaryFieldContext/add",e=>{let t=new Y({options:{required:!0},values:{field:ve,key:ve}});return E(e,t)}),gs=x("dictionaryFieldContext/remove",e=>E(e,ve)),uq=Q(Cr(),e=>{e.addCase(fs,(t,r)=>{t.contextValues=r.payload}).addCase(ps,(t,r)=>{let{field:n,key:a}=r.payload;t.contextValues[n]=a}).addCase(gs,(t,r)=>{delete t.contextValues[r.payload]}).addCase(we.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})}),lq=Q(ai(),e=>{e.addCase($c,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]={...n,isActive:!1})}).addCase(Xn,(t,r)=>{let n=r.payload;Hd(t,n)}).addCase(Ce,(t,r)=>{let n=r.payload.tab||"";Hd(t,n)})});function Hd(e,t){t in e&&Object.keys(e).forEach(r=>{e[r].isActive=r===t})}var Sa=_,Yd=new Y({options:{required:!0},values:{caption:ve,expression:ve,state:new D({constrainTo:["idle","selected"]})}}),Wd=new te({required:!0,each:Yd}),hs=x("staticFilter/register",e=>E(e,{id:Sa,values:Wd})),gn=x("staticFilter/toggleSelect",e=>E(e,{id:Sa,value:Yd})),wa=x("staticFilter/deselectAllFilterValues",e=>E(e,Sa)),Jd=e=>z("analytics/staticFilter/select",$.Search,t=>t.logStaticFilterSelect(e))(),vs=e=>z("analytics/staticFilter/deselect",$.Search,t=>t.logStaticFilterDeselect(e))(),Kd=e=>z("analytics/staticFilter/clearAll",$.Search,t=>t.logStaticFilterClearAll(e))(),cq=Q(ni(),e=>e.addCase(hs,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]=n)}).addCase(gn,(t,r)=>{let{id:n,value:a}=r.payload,i=t[n];if(!i)return;let o=i.values.find(u=>u.caption===a.caption);if(!o)return;let s=o.state==="selected";o.state=s?"idle":"selected"}).addCase(wa,(t,r)=>{let n=r.payload,a=t[n];!a||a.values.forEach(i=>i.state="idle")}).addCase(We,t=>{Object.values(t).forEach(r=>{r.values.forEach(n=>n.state="idle")})}).addCase(Ce,(t,r)=>{let n=r.payload.sf||{};Object.entries(t).forEach(([a,i])=>{let o=n[a]||[];i.values.forEach(s=>{s.state=o.includes(s.caption)?"selected":"idle"})})})),HS=x("caseAssistConfiguration/set",e=>E(e,{caseAssistId:_,locale:fe})),dq=Q(xc(),e=>{e.addCase(HS,(t,r)=>{t.caseAssistId=r.payload.caseAssistId,t.locale=r.payload.locale})}),YS=x("caseAssist/caseInput/update",e=>E(e,{fieldName:_,fieldValue:ve})),fq=Q(Ic(),e=>{e.addCase(YS,(t,r)=>{t[r.payload.fieldName]={value:r.payload.fieldValue}})}),Zd=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>({...t,[r]:e[r].value}),{}),WS=x("caseAssist/caseField/register",e=>E(e,{fieldName:_,fieldValue:ve})),JS=x("caseAssist/caseField/update",e=>E(e,{fieldName:_,fieldValue:ve})),ys=ae("caseAssist/classifications/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getCaseClassifications(await KS(a));return he(i)?r(i.error):{response:i.success}}),KS=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await _e()},fields:e.caseInput,context:e.caseField?Zd(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),pq=Q(qc(),e=>{e.addCase(WS,(t,r)=>{let{fieldName:n,fieldValue:a}=r.payload;t.fields[n]={value:a,suggestions:[]}}).addCase(JS,(t,r)=>{let{fieldName:n,fieldValue:a}=r.payload;t.fields[n].value=a}).addCase(ys.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(ys.fulfilled,(t,r)=>{let n={value:"",suggestions:[]};Object.entries(r.payload.response.fields).forEach(([a,i])=>{t.fields[a]||(t.fields[a]={...n}),t.fields[a].suggestions=i.predictions}),t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(ys.pending,t=>{t.status.loading=!0})}),ms=ae("caseAssist/documentSuggestions/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getDocumentSuggestions(await ZS(a));return he(i)?r(i.error):{response:i.success}}),ZS=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await _e()},fields:e.caseInput,context:e.caseField?Zd(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),gq=Q(Rc(),e=>{e.addCase(ms.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(ms.fulfilled,(t,r)=>{t.documents=r.payload.response.documents,t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(ms.pending,t=>{t.status.loading=!0})}),Gd=x("excerptLength/set",e=>E(e,new B({min:0,required:!0}))),hq=Q(zu(),e=>{e.addCase(Gd,(t,r)=>{t.length=r.payload})}),vq=Q(ri(),e=>{e.addCase(to,(t,r)=>{let{id:n}=r.payload;t[n]||(t[n]={q:"",cache:{}})}),e.addCase(Jn,(t,r)=>{let{q:n,id:a}=r.payload;!n||(t[a].q=n)}),e.addCase(ro,(t,r)=>{let{id:n}=r.payload;Object.entries(t[n].cache).forEach(([a,i])=>{Vu(i)&&delete t[n].cache[a]})}),e.addCase($r.pending,(t,r)=>{if(!Ca(t,r.meta))GS(t,r.meta);else{let n=Ca(t,r.meta);n.isLoading=!0,n.error=null}}),e.addCase($r.fulfilled,(t,r)=>{let{results:n}=r.payload,{cacheTimeout:a}=r.meta.arg,i=Ca(t,r.meta);i.isLoading=!1,i.error=null,i.results=n,i.expiresAt=a?a+Date.now():0}),e.addCase($r.rejected,(t,r)=>{let n=Ca(t,r.meta);n.error=r.error||null,n.isLoading=!1})}),GS=(e,t)=>{let{q:r,id:n}=t.arg;e[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0}},Ca=(e,t)=>{let{q:r,id:n}=t.arg;return e[n].cache[r]||null},XS=x("insightConfiguration/set",e=>E(e,{insightId:_})),yq=Q(Nm(),e=>{e.addCase(XS,(t,r)=>{t.insightId=r.payload.insightId})}),bs=ae("insight/interface/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await a.getInterface(ew(i));return he(o)?n(o.error):(r(ba(o.success.searchHub)),{response:o.success})}),ew=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,insightId:e.insightConfiguration.insightId}),mq=Q(Um(),e=>{e.addCase(bs.pending,t=>{t.loading=!0,t.error=void 0}).addCase(bs.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(bs.fulfilled,(t,r)=>{t.loading=!1,t.error=void 0;let{searchHub:n,...a}=r.payload.response;t.config=a})}),tw=x("insight/caseContext/set",e=>{let t=new Y({options:{required:!0}}),r=E(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new te({each:ve}),i=E(n,a).error;return i?{payload:e,error:i}:{payload:e}}),bq=Q(zm(),e=>{e.addCase(tw,(t,r)=>{t.caseContext=r.payload})}),re=ib,hn=null,Oa=Hb,Xd=Lb,ue=NS,ef=null,vn=null,tf=jb,or=null,xa=null,Je=Ob,rf=null,sr=kS,rw=nb,nf=null,af=AS,of=null,nw=null,aw=null,Ss=ES,sf=null,uf=null,lf=null,cf=null,qa=nS,ws=IS,Cs=zS,Os=sb,iw=null,ow=ub,Ia=null,Ra=null,df=null,ff=null,pf=null,gf=iv({actionTypes:{redo:Wl.type,undo:Yl.type,snapshot:Rt.type},reducer:lS}),sw=null;function hf(e,t,r){var n,a,i;t===void 0&&(t=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,s=(a=r.callback)!=null&&a,u=r.maxWait,l=Date.now(),f=[];function c(){if(u!==void 0){var h=Date.now()-l;if(h+t>=u)return u-h}return t}var p=function(){var h=[].slice.call(arguments),g=this;return new Promise(function(d,y){var v=o&&i===void 0;if(i!==void 0&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,l=Date.now(),!o){var b=e.apply(g,h);s&&s(b),f.forEach(function(I){return(0,I.resolve)(b)}),f=[]}},c()),v){var m=e.apply(g,h);return s&&s(m),d(m)}f.push({resolve:d,reject:y})})};return p.cancel=function(h){i!==void 0&&clearTimeout(i),f.forEach(function(g){return(0,g.reject)(h)}),f=[]},p}function uw(e,t){let r=0,n=hf(()=>r=0,500);return a=>i=>async o=>{if(typeof o!="function")return i(o);let s=await i(o);if(!lw(s))return s;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let u=await cw(t);a.dispatch(Zn({accessToken:u})),a.dispatch(o)}}function lw(e){var t;return((t=e.error)==null?void 0:t.name)===new Hs().name}async function cw(e){try{return await e()}catch{return""}}var dw={configuration:re,version:ow};function fw(e,t){let r=pw(e,t),{accessToken:n,organizationId:a,platformUrl:i,analytics:o}=e.configuration;if(r.dispatch(Zn({accessToken:n,organizationId:a,platformUrl:i})),o){let{analyticsClientMiddleware:s,...u}=o;r.dispatch(Gn(u))}return r}function pw(e,t){let{reducers:r}=e,n=tb({...dw,...r});e.crossReducer&&n.addCrossReducer(e.crossReducer);let a=t.logger,i=gw(e,t,n);return{addReducers(o){n.containsAll(o)||(n.add(o),i.replaceReducer(n.combinedReducer))},dispatch:i.dispatch,subscribe:i.subscribe,enableAnalytics(){i.dispatch(uo())},disableAnalytics(){i.dispatch(so())},get state(){return i.getState()},logger:a,store:i}}function gw(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=hw(e,t.logger);return rb({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}function hw(e,t){let{renewAccessToken:r}=e.configuration;return[uw(t,r),vc(t),hc].concat(e.middlewares||[])}var vw=le(On());function yw(e){return(0,vw.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter},browser:{transmit:{send:(e==null?void 0:e.browserPostLogHook)||(()=>{})}}})}function mw(e,t){let r=bw(e),n=it,a=Sw(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:a,logger:t}}function bw(e){let{analytics:t}=e,r=(n,a)=>a;return(t==null?void 0:t.analyticsClientMiddleware)||r}function Sw(e){return e.preprocessRequest||ao}var ww={organizationId:_,accessToken:_,platformUrl:new D({required:!1,emptyAllowed:!1}),name:new D({required:!1,emptyAllowed:!1}),analytics:new Y({options:{required:!1},values:{enabled:new X({required:!1}),originContext:new D({required:!1}),originLevel2:new D({required:!1}),originLevel3:new D({required:!1})}})};function Cw(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var Ow=new ne({...ww,search:new Y({options:{required:!1},values:{pipeline:fe,searchHub:fe,locale:fe,timezone:fe,authenticationProviders:new te({required:!1,each:_})}})});function xw(){return{...Cw(),search:{searchHub:"default"}}}var xs=e=>E(e,{evt:_,type:fe}),qw=e=>z("analytics/generic/search",$.Search,t=>{xs(e);let{evt:r,meta:n}=e;return t.logSearchEvent(r,n)})(),Iw=e=>z("analytics/generic/click",$.Click,(t,r)=>(It(e.result),xs(e),t.logClickEvent(e.evt,qt(e.result,r),Jt(e.result),e.meta)))(),Rw=e=>z("analytics/generic/custom",$.Custom,t=>(xs(e),t.logCustomEventWithType(e.evt,e.type,e.meta)))(),vf=z("analytics/interface/load",$.Search,e=>e.logInterfaceLoad()),Sq=Ql("analytics/interface/load",$.Search,e=>e.logInterfaceLoad()),yn=z("analytics/interface/change",$.Search,(e,t)=>e.logInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),wq=Ql("analytics/interface/change",$.Search,(e,t)=>e.logInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),yf=z("analytics/interface/searchFromLink",$.Search,e=>e.logSearchFromLink()),mf=e=>z("analytics/interface/omniboxFromLink",$.Search,t=>t.logOmniboxFromLink(e))(),gt=(e,t)=>{let r=e;return ee(r[t])?ee(e.raw[t])?null:e.raw[t]:r[t]},Fw=e=>t=>e.every(r=>!ee(gt(t,r))),Aw=e=>t=>e.every(r=>ee(gt(t,r))),Ew=(e,t)=>r=>{let n=bf(e,r);return t.some(a=>n.some(i=>`${i}`.toLowerCase()===a.toLowerCase()))},jw=(e,t)=>r=>{let n=bf(e,r);return t.every(a=>n.every(i=>`${i}`.toLowerCase()!==a.toLowerCase()))},bf=(e,t)=>{let r=gt(t,e);return Dl(r)?r:[r]};function Sf(e){return e.search.response.searchUid!==""}function kw(e,t,r){var n;return(n=e.search.results.find(a=>gt(a,t)===r))!=null?n:null}var Pw=le(Qs()),qs=(e,t,r,n,a,i)=>{let o=e[t];ee(o)||r!==o&&(ee(a)||a!==o&&a!==n&&(i.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),i.warn(`To remove this warning, make sure that access token value [${o}] matches engine configuration value [${r}]`)))},Is=(e,t)=>!(ee(e)||t===e),Fa=e=>{try{let t=typeof atob!="undefined"?atob:Pw.atob,r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(r);if(!n)return!1;let a=decodeURIComponent(n.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch{return!1}},wf=(e,t,r,n)=>(qs(e,"searchHub",t.searchHub,Ge(),r,n),Is(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),Cf=(e,t,r,n)=>(qs(e,"pipeline",t.pipeline,Lt(),r,n),Is(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),Tw=(e,t,r,n)=>(qs(e,"userDisplayName",t.configuration.analytics.userDisplayName,Xe().analytics.userDisplayName,r,n),Is(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),Vw=e=>Q({},t=>{t.addCase(ba,(r,n)=>{let a=Fa(r.configuration.accessToken);return a?wf(a,r,n.payload,e):r}).addCase(zo,(r,n)=>{let a=Fa(r.configuration.accessToken);return a?Cf(a,r,n.payload,e):r}).addCase(tr,(r,n)=>{var a;let i=Fa(r.configuration.accessToken);if(!i)return r;let o=wf(i,r,n.payload.searchHub,e);return Cf(i,o,(a=n.payload)==null?void 0:a.pipeline,e)}).addCase(Gn,(r,n)=>{let a=Fa(r.configuration.accessToken);return a?Tw(a,r,n.payload.userDisplayName,e):r})}),Mw={debug:Os,pipeline:ws,searchHub:Cs,search:ue};function $w(e){let t=yw(e.loggerOptions);Lw(e.configuration,t);let r=Dw(e.configuration,t),n={...mw(e.configuration,t),searchAPIClient:r,apiClient:r},a={...e,reducers:Mw,crossReducer:Vw(t)},i=fw(a,n),{search:o}=e.configuration;return o&&i.dispatch(tr(o)),{...i,get state(){return i.state},executeFirstSearch(s=vf()){if(Sf(i.state))return;let u=N(s);i.dispatch(u)},executeFirstSearchAfterStandaloneSearchBoxRedirect(s){let{cause:u,metadata:l}=s,f=l&&u==="omniboxFromLink"?mf(l):yf();this.executeFirstSearch(f)}}}function Lw(e,t){try{Ow.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function Dw(e,t){let{search:r}=e;return new $l({logger:t,preprocessRequest:e.preprocessRequest||ao,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||mc,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||bc,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||Sc})}function G(e){let t,r=new Map,n=()=>r.size===0,a=i=>{try{let o=JSON.stringify(i),s=t!==o;return t=o,s}catch(o){return console.warn('Could not detect if state has changed, check the controller "get state method"',o),!0}};return{subscribe(i){i();let o=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{a(this.state)&&r.forEach(u=>u())})),r.set(o,i),()=>{r.delete(o),n()&&s&&s()}},get state(){return{}}}}var _w=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,n=/Total weight: ([0-9]+)/g;if(!e)return null;let a=t.exec(e),i=r.exec(e),o=n.exec(e),s=Nw(e),u=Of(a?a[1]:null),l=zw(i),f=o?Number(o[1]):null;return{documentWeights:u,termsWeight:l,totalWeight:f,qreWeights:s}},Of=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let n=e.match(t);if(!n)return null;let a={};for(let i of n){let o=i.match(r);if(o){let s=o[1],u=o[2];a[s]=Number(u)}}return a},xf=(e,t)=>{let r=[],n;for(;(n=t.exec(e))!==null;)r.push(n);return r},zw=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let n=xf(e[1],t);if(!n)return null;let a={};for(let i of n){let o=xf(i[1],r),s={};for(let l of o)s[l[1]]={Correlation:Number(l[2]),"TF-IDF":Number(l[3])};let u=Of(i[2]);a[Object.keys(s).join(", ")]={terms:s,Weights:u}}return a},Nw=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function Uw(e){return e.search.response.results.map(t=>{let r=_w(t.rankingInfo);return{result:t,ranking:r}})}var Qw=new ne({enabled:new X({default:!1})});function Cq(e,t={}){if(!Bw(e))throw H;let r=G(e),{dispatch:n}=e,a=()=>e.state;Ye(e,Qw,t.initialState,"buildRelevanceInspector").enabled&&n(zr());let i=o=>{e.logger.warn(`Flag [ ${o} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let o=a(),s=o.debug;if(!o.debug)return{isEnabled:s};let{executionReport:u,basicExpression:l,advancedExpression:f,constantExpression:c,userIdentities:p,rankingExpressions:h}=o.search.response,{fieldsDescription:g,fetchAllFields:d}=o.fields;return{isEnabled:s,rankingInformation:Uw(o),executionReport:u,expressions:{basicExpression:l,advancedExpression:f,constantExpression:c},userIdentities:p,rankingExpressions:h,fieldsDescription:g,fetchAllFields:d}},enable(){n(zr()),i("debug")},disable(){n(po()),n(pa())},enableFetchAllFields(){n(Vo()),i("fetchAllFields")},disableFetchAllFields(){n(pa())},fetchFieldsDescription(){!this.state.isEnabled&&n(zr()),n(Mo()),i("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)},fetchFieldDescriptions(){this.fetchFieldsDescription()}}}function Bw(e){return e.addReducers({debug:Os,search:ue,configuration:re,fields:qa}),!0}function Hw(e){if(!Yw(e))throw H;let t=G(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().context.contextValues}},set(a){r(lo(a))},add(a,i){r(co({contextKey:a,contextValue:i}))},remove(a){r(fo(a))}}}function Yw(e){return e.addReducers({context:uf}),!0}function Oq(e){return Hw(e)}function xq(e){if(!Ww(e))throw H;let t=G(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().dictionaryFieldContext.contextValues}},set(a){r(fs(a))},add(a,i){r(ps({field:a,key:i}))},remove(a){r(gs(a))}}}function Ww(e){return e.addReducers({dictionaryFieldContext:lf}),!0}function qq(e){if(!Jw(e))throw H;let t=G(e),{dispatch:r}=e;r(zi());let n=()=>e.state;return{...t,get state(){let a=n();return{originalQuery:a.didYouMean.originalQuery,wasCorrectedTo:a.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:a.didYouMean.wasAutomaticallyCorrected,queryCorrection:a.didYouMean.queryCorrection,hasQueryCorrection:a.didYouMean.queryCorrection.correctedQuery!==""||a.didYouMean.wasCorrectedTo!==""}},applyCorrection(){r(Pr(this.state.queryCorrection.correctedQuery)),r(N(Kl()))}}}function Jw(e){return e.addReducers({configuration:re,didYouMean:cf}),!0}var Kw=["alphanumeric","occurrences"],Zw=new ne({field:Qr,basePath:db,delimitingCharacter:ho,facetId:Ur,facetSearch:vo,filterByBasePath:fb,filterFacetCount:Br,injectionDepth:Hr,numberOfValues:rr,sortCriteria:new D({constrainTo:Kw})});function Gw(e,t){let{field:r,state:n}=e;if(!Xw(e))return r;let a=`${r}_`,i=e0(a,n);return r0(r,t),`${a}${i}`}function Xw(e){let{field:t,state:r}=e;return qf(r).some(n=>n&&t in n)}function e0(e,t){let r=qf(t).map(n=>Object.keys(n||{})).reduce((n,a)=>n.concat(a),[]);return t0(r,e)+1}function qf(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:a}=e;return[t,r,n,a]}function t0(e,t){let r=0,n=e.map(a=>{let i=a.split(t)[1],o=parseInt(i,10);return Number.isNaN(o)?r:o}).sort().pop();return n??r}function r0(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function ur(e,t){let{state:r,logger:n}=e,{field:a,facetId:i}=t;return i||Gw({field:a,state:r},n)}var mn=(e,t)=>{var r,n;return(n=(r=e.facetOptions.facets[t])==null?void 0:r.enabled)!=null?n:!0};function n0(e,t){if(!a0(e))throw H;let r=G(e),{dispatch:n}=e,a=ur(e,t.options),i={...td,..._l("facetSearch",t.options),field:t.options.field,facetId:a},o={facetSearch:{...nr,...t.options.facetSearch},...i};Ie(e,Zw,o,"buildCategoryFacet");let s=()=>$h(e.state,a),u=()=>Su(e.state,a),l=()=>br(e.state),f=()=>mn(e.state,a);return n(ea(i)),{...r,toggleSelect(c){let p=o.numberOfValues;n(ta({facetId:a,selection:c,retrieveCount:p})),n(pe({freezeFacetOrder:!0}))},deselectAll(){n(Nr(a)),n(pe({freezeFacetOrder:!0}))},sortBy(c){n(go({facetId:a,criterion:c})),n(pe({freezeFacetOrder:!0}))},isSortedBy(c){return s().sortCriteria===c},showMoreValues(){let{numberOfValues:c}=o,{values:p}=this.state,h=p.length+c;n(ra({facetId:a,numberOfValues:h})),n(pe({freezeFacetOrder:!0}))},showLessValues(){let{numberOfValues:c}=o;n(ra({facetId:a,numberOfValues:c})),n(pe({freezeFacetOrder:!0}))},enable(){n(ct(a))},disable(){n(Pe(a))},get state(){let c=s(),p=u(),h=l(),g=f(),{parents:d,values:y}=mt(p==null?void 0:p.values),v=d.length!==0,m=d.length>0?d[d.length-1].moreValuesAvailable:(p==null?void 0:p.moreValuesAvailable)||!1,b=y.length>o.numberOfValues;return{facetId:a,parents:d,values:y,isLoading:h,hasActiveValues:v,canShowMoreValues:m,canShowLessValues:b,sortCriteria:c.sortCriteria,enabled:g}}}}function a0(e){return e.addReducers({categoryFacetSet:xa,categoryFacetSearchSet:rf,facetOptions:Je,configuration:re,search:ue}),!0}function Rs(e,t){let r=e.dispatch,{options:n,getFacetSearch:a}=t,{facetId:i}=n;return{updateText(o){r(en({facetId:i,query:o,numberOfValues:a().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:o,options:s}=a();r(en({facetId:i,numberOfValues:s.numberOfValues+o})),r(ft(i))},search(){r(ft(i))},clear(){r(Ao({facetId:i}))},updateCaptions(o){r(en({facetId:i,captions:o}))},get state(){let{response:o,isLoading:s,options:u}=a(),{query:l}=u,f=o.values;return{...o,values:f,isLoading:s,query:l}}}}function i0(e,t){let{dispatch:r}=e,n={...nr,...t.options},{facetId:a}=n,i=()=>e.state.categoryFacetSearchSet[a];r(qo(n));let o=Rs(e,{options:n,getFacetSearch:i});return{...o,select(s){r(xo({facetId:a,value:s}))},get state(){return o.state}}}function o0(e,t){let{dispatch:r}=e,n={...nr,...t.options},{facetId:a}=n,i=()=>e.state.categoryFacetSearchSet[a],o=i0(e,{options:{...n}});r(qo(n));let s=Rs(e,{options:n,getFacetSearch:i});return{...s,...o,select:u=>{o.select(u),r(pe({freezeFacetOrder:!0})),r(N(Ne({facetId:a,facetValue:u.rawValue})))},get state(){return{...s.state,...o.state}}}}function s0(e,t){if(!u0(e))throw H;let r=n0(e,t),{dispatch:n}=e,a=()=>r.state.facetId,i=o0(e,{options:{facetId:a(),...t.options.facetSearch}}),{state:o,...s}=i;return{...r,facetSearch:s,toggleSelect(u){r.toggleSelect(u);let l=l0(a(),u);n(N(l))},deselectAll(){r.deselectAll(),n(N(dt(a())))},sortBy(u){r.sortBy(u),n(N(tn({facetId:a(),criterion:u})))},showMoreValues(){r.showMoreValues(),n(ut(Ro(a())))},showLessValues(){r.showLessValues(),n(ut(Fo(a())))},get state(){return{...r.state,facetSearch:i.state}}}}function u0(e){return e.addReducers({categoryFacetSet:xa,categoryFacetSearchSet:rf,configuration:re,search:ue}),!0}function l0(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?ar(r):Ne(r)}var c0=new ne({facetId:Ur,field:Qr,delimitingCharacter:ho,filterFacetCount:Br,injectionDepth:Hr,numberOfValues:rr,sortCriteria:new D({constrainTo:ic}),facetSearch:vo,allowedValues:Nc,hasBreadcrumbs:vb}),If=e=>e.state==="selected",d0=(e,t)=>{let r={facetId:e,facetValue:t.value};return If(t)?ar(r):Ne(r)},f0={facetId:Z,selection:new Y({values:_c})},p0=ae("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},f0),n(Yr({facetId:e,selection:t})),n(pe({freezeFacetOrder:!0}))}),g0=new ne({facetId:Ur,field:Qr,delimitingCharacter:ho,filterFacetCount:Br,injectionDepth:Hr,numberOfValues:rr,sortCriteria:new D({constrainTo:ic}),facetSearch:vo});function h0(e,t,r=g0){if(!v0(e))throw H;let{dispatch:n}=e,a=G(e),i=ur(e,t.options),o={...pd,..._l("facetSearch",t.options),field:t.options.field,facetId:i},s={facetSearch:{...nr,...t.options.facetSearch},...o};Ie(e,r,s,"buildFacet");let u=()=>Ph(e.state,i),l=()=>bu(e.state,i),f=()=>br(e.state),c=()=>mn(e.state,i),p=()=>{let{currentValues:g}=u();return g.filter(d=>d.state!=="idle").length},h=()=>{let{currentValues:g}=u(),d=s.numberOfValues,y=!!g.find(v=>v.state==="idle");return d<g.length&&y};return n(na(o)),{...a,toggleSelect:g=>n(p0({facetId:s.facetId,selection:g})),toggleSingleSelect:function(g){g.state==="idle"&&n($e(i)),this.toggleSelect(g)},isValueSelected:If,deselectAll(){n($e(i)),n(pe({freezeFacetOrder:!0}))},sortBy(g){n(yo({facetId:i,criterion:g})),n(pe({freezeFacetOrder:!0}))},isSortedBy(g){return this.state.sortCriterion===g},showMoreValues(){let g=u().numberOfValues,d=s.numberOfValues,y=d-g%d,v=g+y;n(aa({facetId:i,numberOfValues:v})),n(ia({facetId:i,isFieldExpanded:!0})),n(pe({freezeFacetOrder:!0}))},showLessValues(){let g=s.numberOfValues,d=Math.max(g,p());n(aa({facetId:i,numberOfValues:d})),n(ia({facetId:i,isFieldExpanded:!1})),n(pe({freezeFacetOrder:!0}))},enable(){n(ct(i))},disable(){n(Pe(i))},get state(){let g=u(),d=l(),y=f(),v=c(),m=g.sortCriteria,b=d?d.values:[],I=b.some(L=>L.state!=="idle"),P=d?d.moreValuesAvailable:!1;return{facetId:i,values:b,sortCriterion:m,isLoading:y,hasActiveValues:I,canShowMoreValues:P,canShowLessValues:h(),enabled:v}}}}function v0(e){return e.addReducers({facetSet:Oa,facetOptions:Je,configuration:re,facetSearchSet:Xd}),!0}function y0(e,t){let{dispatch:r}=e,{options:n,select:a}=t,{facetId:i}=n,o=()=>e.state.facetSearchSet[i];r(cd(n));let s=Rs(e,{options:n,getFacetSearch:o});return{...s,select(u){r(da({facetId:i,value:u})),a(u)},singleSelect(u){r($e(i)),r(da({facetId:i,value:u})),a(u)},get state(){let{values:u}=s.state;return{...s.state,values:u.map(({count:l,displayValue:f,rawValue:c})=>({count:l,displayValue:f,rawValue:c}))}}}}function Rf(e,t){if(!m0(e))throw H;let{dispatch:r}=e,n=h0(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},c0),a=()=>n.state.facetId,i=(()=>{let{facetSearch:u}=t.options;return y0(e,{options:{facetId:a(),...u},select:l=>{r(pe({freezeFacetOrder:!0})),r(N(Ne({facetId:a(),facetValue:l.rawValue})))}})})(),{state:o,...s}=i;return{...n,facetSearch:s,toggleSelect(u){n.toggleSelect(u),r(N(d0(a(),u)))},deselectAll(){n.deselectAll(),r(N(dt(a())))},sortBy(u){n.sortBy(u),r(N(tn({facetId:a(),criterion:u})))},isSortedBy(u){return this.state.sortCriterion===u},showMoreValues(){n.showMoreValues(),r(ut(Ro(a())))},showLessValues(){n.showLessValues(),r(ut(Fo(a())))},get state(){return{...n.state,facetSearch:i.state}}}}function m0(e){return e.addReducers({facetSet:Oa,configuration:re,facetSearchSet:Xd,search:ue}),!0}var Ff=e=>e.state==="selected",Af=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return Ff(t)?ar(n):Ne(n)};function Ef(e,t){let{facetId:r,getRequest:n}=t,a=G(e),i=e.dispatch,o=()=>mn(e.state,r);return{...a,isValueSelected:Ff,deselectAll(){i($e(r)),i(pe({freezeFacetOrder:!0}))},sortBy(s){i(bo({facetId:r,criterion:s})),i(pe({freezeFacetOrder:!0}))},isSortedBy(s){return this.state.sortCriterion===s},enable(){i(ct(r))},disable(){i(Pe(r))},get state(){let s=n(),u=mr(e.state,r),l=s.sortCriteria,f=u?u.values:[],c=br(e.state),p=o(),h=f.some(g=>g.state!=="idle");return{facetId:r,values:f,sortCriterion:l,hasActiveValues:h,isLoading:c,enabled:p}}}}function jf(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var kf=x("rangeFacet/executeToggleSelect",e=>E(e,mo(e.selection))),b0={facetId:Z,selection:new Y({values:ua})},S0=ae("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,b0),t(Jr(e)),t(kf(e)),t(pe({freezeFacetOrder:!0}))}),Pf=["idle","selected"],Tf=["ascending","descending"],Vf=["even","equiprobable"],w0={start:new D,end:new D,endInclusive:new X,state:new D({constrainTo:Pf})},C0=new ne({facetId:Ur,field:Qr,generateAutomaticRanges:zc,filterFacetCount:Br,injectionDepth:Hr,numberOfValues:rr,currentValues:new te({each:new Y({values:w0})}),sortCriteria:new D({constrainTo:Tf}),rangeAlgorithm:new D({constrainTo:Vf})});function Mf(e,t){Ie(e,C0,t,"buildDateFacet"),So(t)}function O0(e,t){if(!x0(e))throw H;jf(t.options,"buildDateFacet");let r=e.dispatch,n=ur(e,t.options),a={currentValues:[],...t.options,facetId:n};Mf(e,a),r(Wr(a));let i=Ef(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n]});return{...i,toggleSelect:o=>r(S0({facetId:n,selection:o})),toggleSingleSelect:function(o){o.state==="idle"&&r($e(n)),this.toggleSelect(o)},get state(){return i.state}}}function x0(e){return e.addReducers({configuration:re,search:ue,dateFacetSet:vn,facetOptions:Je}),!0}function Iq(e,t){let r=O0(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(N(dt(a())))},sortBy(i){r.sortBy(i),n(N(tn({facetId:a(),criterion:i})))},toggleSelect:i=>{r.toggleSelect(i),n(N(Af(a(),i)))},get state(){return r.state}}}var q0={facetId:Z,selection:new Y({values:sa})},I0="numericFacet/executeToggleSelect",R0=ae(I0,(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,q0),t(Gr(e)),t(kf(e)),t(pe({freezeFacetOrder:!0}))}),F0={start:new B,end:new B,endInclusive:new X,state:new D({constrainTo:Pf})},A0=new ne({facetId:Ur,field:Qr,generateAutomaticRanges:zc,filterFacetCount:Br,injectionDepth:Hr,numberOfValues:rr,currentValues:new te({each:new Y({values:F0})}),sortCriteria:new D({constrainTo:Tf}),rangeAlgorithm:new D({constrainTo:Vf})});function $f(e,t){Ie(e,A0,t,"buildNumericFacet"),wo(t)}function E0(e){return{endInclusive:!1,state:"idle",...e}}function j0(e,t){if(!k0(e))throw H;jf(t.options,"buildNumericFacet");let r=e.dispatch,n=ur(e,t.options),a={currentValues:[],...t.options,facetId:n};$f(e,a),r(Zr(a));let i=Ef(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n]});return{...i,toggleSelect:o=>r(R0({facetId:n,selection:o})),toggleSingleSelect(o){o.state==="idle"&&r($e(n)),this.toggleSelect(o)},get state(){return i.state}}}function k0(e){return e.addReducers({numericFacetSet:or,facetOptions:Je,configuration:re,search:ue}),!0}function Rq(e,t){if(!P0(e))throw H;let r=j0(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(N(dt(a())))},sortBy(i){r.sortBy(i),n(N(tn({facetId:a(),criterion:i})))},toggleSelect:i=>{r.toggleSelect(i),n(N(Af(a(),i)))},get state(){return{...r.state}}}}function P0(e){return e.addReducers({numericFacetSet:or,configuration:re,search:ue}),!0}function T0(e,t){return!!t&&t.facetId in e.numericFacetSet}var V0=(e,t)=>{let r=mr(e,t);if(T0(e,r))return r},Lf=(e,t)=>{let r=V0(e,t);return r?r.values.filter(n=>n.state==="selected"):[]};function M0(e,t){var r;if(!$0(e))throw H;let n=G(e),{dispatch:a}=e,i=()=>e.state,o=ur(e,t.options),s={...t.options,currentValues:((r=t.initialState)==null?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};$f(e,s),a(Zr(s));let u=()=>mn(e.state,o);return{...n,clear:()=>{a(Xr({facetId:o,values:[]})),a(pe({freezeFacetOrder:!0}))},setRange:l=>{let f={...l,state:"selected",numberOfResults:0,endInclusive:!0},c=Xr({facetId:o,values:[f]});return c.error?!1:(a(c),a(pe({freezeFacetOrder:!0})),!0)},enable(){a(ct(o))},disable(){a(Pe(o))},get state(){let l=br(i()),f=u(),c=Lf(i(),o),p=c.length?c[0]:void 0;return{facetId:o,isLoading:l,range:p,enabled:f}}}}function $0(e){return e.addReducers({numericFacetSet:or,facetOptions:Je,configuration:re,search:ue}),!0}function Fq(e,t){if(!L0(e))throw H;let r=M0(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(N(dt(a())))},setRange:i=>{let o=r.setRange(i);return o&&n(N(Ne({facetId:a(),facetValue:`${i.start}..${i.end}`}))),o},get state(){return{...r.state}}}}function L0(e){return e.addReducers({numericFacetSet:or,configuration:re,search:ue}),!0}function D0(e,t){return!!t&&t.facetId in e.dateFacetSet}var _0=(e,t)=>{let r=mr(e,t);if(D0(e,r))return r},Df=(e,t)=>{let r=_0(e,t);return r?r.values.filter(n=>n.state==="selected"):[]};function z0(e,t){var r;if(!N0(e))throw H;let n=G(e),{dispatch:a}=e,i=()=>e.state,o=ur(e,t.options),s={...t.options,currentValues:((r=t.initialState)==null?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Mf(e,s),a(Wr(s));let u=()=>mn(e.state,o);return{...n,clear:()=>{a(Kr({facetId:o,values:[]})),a(pe({freezeFacetOrder:!0}))},setRange:l=>{let f={...l,state:"selected",numberOfResults:0,endInclusive:!0},c=Kr({facetId:o,values:[f]});return c.error?!1:(a(c),a(pe({freezeFacetOrder:!0})),!0)},enable(){a(ct(o))},disable(){a(Pe(o))},get state(){let l=br(i()),f=u(),c=Df(i(),o),p=c.length?c[0]:void 0;return{facetId:o,isLoading:l,range:p,enabled:f}}}}function N0(e){return e.addReducers({dateFacetSet:vn,facetOptions:Je,configuration:re,search:ue}),!0}function Aq(e,t){if(!U0(e))throw H;let r=z0(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(N(dt(a())))},setRange:i=>{let o=r.setRange(i);return o&&n(N(Ne({facetId:a(),facetValue:`${i.start}..${i.end}`}))),o},get state(){return{...r.state}}}}function U0(e){return e.addReducers({dateFacetSet:vn,configuration:re,search:ue}),!0}var _f=z("history/analytics/forward",$.Search,e=>e.logSearchEvent("historyForward")),zf=z("history/analytics/backward",$.Search,e=>e.logSearchEvent("historyBackward")),Nf=z("history/analytics/noresultsback",$.Search,e=>e.logNoResultsBack());function Q0(e){if(!B0(e))throw H;let t=G(e),{dispatch:r}=e,n=()=>e.state,a=i=>i.past.length>0&&!ee(i.present);return{...t,get state(){return n().history},async back(){!a(this.state)||(await r(_i()),r(N(zf())))},async forward(){!this.state.future.length||!this.state.present||(await r(Jl()),r(N(_f())))},async backOnNoResults(){!a(this.state)||(await r(_i()),r(N(Nf())))}}}function B0(e){return e.addReducers({history:gf,configuration:re,facetOrder:tf}),!0}function H0(e){return e.pagination.firstResult}function Uf(e){return e.pagination.numberOfResults}function Y0(e){return e.pagination.totalCountFiltered}var bn=e=>{let t=H0(e),r=Uf(e);return Ed(t,r)},Qf=e=>{let t=Y0(e),r=Uf(e);return jd(t,r)},W0=(e,t)=>{let r=bn(e),n=Qf(e),a=J0(r,t);return a=K0(a),a=Z0(a,n),G0(a)};function J0(e,t){let r=t%2==0,n=Math.floor(t/2),a=r?n-1:n,i=e-n,o=e+a;return{start:i,end:o}}function K0(e){let t=Math.max(va-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}function Z0(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,va),a=e.end-r;return{start:n,end:a}}function G0(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var Fs=z("analytics/pager/resize",$.Search,(e,t)=>{var r;return e.logPagerResize({currentResultsPerPage:((r=t.pagination)==null?void 0:r.numberOfResults)||Be().numberOfResults})}),As=z("analytics/pager/number",$.Search,(e,t)=>e.logPagerNumber({pagerNumber:bn(t)})),Bf=z("analytics/pager/next",$.Search,(e,t)=>e.logPagerNext({pagerNumber:bn(t)})),Hf=z("analytics/pager/previous",$.Search,(e,t)=>e.logPagerPrevious({pagerNumber:bn(t)})),X0=new ne({numberOfPages:new B({default:5,min:0})}),eC=new ne({page:new B({min:1})});function tC(e,t={}){if(!rC(e))throw H;let r=G(e),{dispatch:n}=e,a=Ie(e,X0,t.options,"buildPager"),i=Ye(e,eC,t.initialState,"buildPager").page;i&&n(Wi(i));let o=()=>bn(e.state),s=()=>{let{numberOfPages:l}=a;return W0(e.state,l)},u=()=>Qf(e.state);return{...r,get state(){let l=o(),f=u(),c=l>va&&f>0,p=l<f;return{currentPage:l,currentPages:s(),maxPage:f,hasPreviousPage:c,hasNextPage:p}},selectPage(l){n(Tr(l))},nextPage(){n(Ji())},previousPage(){n(Ki())},isCurrentPage(l){return l===this.state.currentPage}}}function rC(e){return e.addReducers({configuration:re,pagination:hn}),!0}function Eq(e,t={}){let{dispatch:r}=e,n=tC(e,t);return{...n,get state(){return n.state},selectPage(a){n.selectPage(a),r(st(As()))},nextPage(){n.nextPage(),r(st(Bf()))},previousPage(){n.previousPage(),r(st(Hf()))}}}function jq(e){if(!nC(e))throw H;let t=G(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function nC(e){return e.addReducers({search:ue}),!0}function Es(e){if(!aC(e))throw H;let t=G(e),r=()=>e.state;return{...t,get state(){let n=r();return{hasError:n.search.error!==null,isLoading:n.search.isLoading,hasResults:!!n.search.results.length,firstSearchExecuted:Sf(n)}}}}function aC(e){return e.addReducers({search:ue}),!0}function iC(e){if(!oC(e))throw H;let t=G(e),r=Es(e),n=()=>e.state,a=()=>{let i=n().search.duration/1e3;return Math.round((i+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:a(),firstResult:n().pagination.firstResult+1,hasDuration:n().search.duration!==0,hasQuery:n().search.queryExecuted!=="",lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function oC(e){return e.addReducers({search:ue,pagination:hn}),!0}function kq(e){return iC(e)}var sC=new ne({fieldsToInclude:new te({required:!1,each:new D({required:!0,emptyAllowed:!1})})});function uC(e,t){if(!lC(e))throw H;let r=G(e),n=Es(e),{dispatch:a}=e,i=()=>e.state,o=Ie(e,sC,t==null?void 0:t.options,"buildCoreResultList");o.fieldsToInclude&&a(fa(o.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,u=0,l=0,f=5,c=200,p=!1;return{...r,get state(){let h=i();return{...n.state,results:h.search.results,searchUid:h.search.response.searchUid,moreResultsAvailable:s(),searchResponseId:h.search.searchResponseId}},fetchMoreResults:()=>{if(!e.state.search.isLoading){if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-u<c){if(l++,l>=f){u=Date.now(),!p&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${f} times, with little delay. Please verify the conditions under which the function is called.`),p=!0;return}}else l=0;p=!1,(t==null?void 0:t.fetchMoreResultsActionCreator)&&a(t==null?void 0:t.fetchMoreResultsActionCreator()).then(()=>u=Date.now())}}}}function lC(e){return e.addReducers({search:ue,configuration:re,fields:qa}),!0}function Yf(e,t){return uC(e,{...t,fetchMoreResultsActionCreator:Xt})}var cC=e=>z("analytics/result/open",$.Click,(t,r)=>(It(e),t.logDocumentOpen(qt(e,r),Jt(e)))),Wf=e=>cC(e)();function Aa(e,t,r){if(!dC(e))throw H;let n=1e3,a={selectionDelay:n,debounceWait:n,...t.options},i;return{select:hf(r,a.debounceWait,{isImmediate:!0}),beginDelayedSelect(){i=setTimeout(r,a.selectionDelay)},cancelPendingSelect(){i&&clearTimeout(i)}}}function dC(e){return e.addReducers({configuration:re}),!0}function fC(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(Wf(t.options.result)))};return Aa(e,t,()=>{n(),e.dispatch(fn(t.options.result))})}var pC=new ne({numberOfResults:new B({min:0})});function gC(e,t={}){if(!hC(e))throw H;let r=G(e),{dispatch:n}=e,a=()=>e.state,i=Ye(e,pC,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&n(Hi(i)),{...r,get state(){return{numberOfResults:a().pagination.numberOfResults}},set(o){n(Yi(o))},isSetTo(o){return o===this.state.numberOfResults}}}function hC(e){return e.addReducers({pagination:hn,configuration:re}),!0}function Pq(e,t={}){if(!vC(e))throw H;let r=gC(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(a){r.set(a),n(st(Fs()))}}}function vC(e){return e.addReducers({pagination:hn,configuration:re}),!0}var yC={searchBoxId:fe,maxResultsPerQuery:new B({required:!0,min:1}),cacheTimeout:new B},mC=new ne(yC);function Tq(e,t){if(!bC(e))throw H;let r=G(e),{dispatch:n}=e,a=()=>e.state,i={searchBoxId:t.options.searchBoxId||$i("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};Ie(e,mC,i,"buildInstantResults");let o=i.searchBoxId;n(to({id:o}));let s=()=>a().instantResults[o],u=c=>s().cache[c],l=()=>s().q,f=()=>{let c=u(l());return c?c.isLoading?[]:c.results:[]};return{...r,updateQuery(c){if(!c)return;let p=u(c);(!p||!p.isLoading&&(p.error||Vu(p)))&&n($r({id:o,q:c,maxResultsPerQuery:i.maxResultsPerQuery,cacheTimeout:i.cacheTimeout})),n(Jn({id:o,q:c}))},clearExpired(){n(ro({id:o}))},get state(){let c=l(),p=u(c);return{q:c,isLoading:(p==null?void 0:p.isLoading)||!1,error:(p==null?void 0:p.error)||null,results:f()}}}}function bC(e){return e.addReducers({instantResults:of}),!0}var Jf={enableQuerySyntax:!1,numberOfSuggestions:5},js={open:new D,close:new D},Kf={id:_,numberOfSuggestions:new B({min:0}),enableQuerySyntax:new X,highlightOptions:new Y({values:{notMatchDelimiters:new Y({values:js}),exactMatchDelimiters:new Y({values:js}),correctionDelimiters:new Y({values:js})}})},SC=new ne(Kf),Zf=e=>z("analytics/querySuggest",$.Search,(t,r)=>{let n=Gf(r,e);return t.logOmniboxAnalytics(n)})();function Gf(e,t){let{id:r,suggestion:n}=t,a=e.querySuggest&&e.querySuggest[r];if(!a)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let i=a.completions.map(l=>l.expression),o=a.partialQueries.length-1,s=a.partialQueries[o]||"",u=a.responseId;return{suggestionRanking:i.indexOf(n),partialQuery:s,partialQueries:a.partialQueries,suggestions:i,querySuggestResponseId:u}}var ks=z("analytics/searchbox/submit",$.Search,e=>e.logSearchboxSubmit());function wC(e,t){var r,n;if(!OC(e))throw H;let a=G(e),{dispatch:i}=e,o=()=>e.state,s=((r=t.options)==null?void 0:r.id)||$i("search_box"),u={id:s,highlightOptions:{...(n=t.options)==null?void 0:n.highlightOptions},...Jf,...t.options};Ie(e,SC,u,"buildSearchBox"),i(No({id:s,query:e.state.query.q})),u.numberOfSuggestions&&i(Uo({id:s,q:e.state.query.q,count:u.numberOfSuggestions}));let l=()=>e.state.querySet[u.id],f=async c=>{let{enableQuerySyntax:p}=u;i(cc({q:l(),enableQuerySyntax:p})),await i(t.executeSearchActionCreator(c))};return{...a,updateText(c){i(sn({id:s,query:c})),this.showSuggestions()},clear(){i(sn({id:s,query:""})),i(ln({id:s}))},showSuggestions(){u.numberOfSuggestions&&i(t.fetchQuerySuggestionsActionCreator({id:s}))},selectSuggestion(c){i(ir({id:s,expression:c})),f(Zf({id:s,suggestion:c})).then(()=>{i(ln({id:s}))})},submit(){f(ks()),i(ln({id:s}))},get state(){let c=o(),p=c.querySuggest[u.id],h=CC(p,u.highlightOptions),g=p?p.isLoading:!1;return{value:l(),suggestions:h,isLoading:c.search.isLoading,isLoadingSuggestions:g}}}}function CC(e,t){return e?e.completions.map(r=>({highlightedValue:Ec(r.highlighted,t),rawValue:r.expression})):[]}function OC(e){return e.addReducers({query:sr,querySuggest:Ss,configuration:re,querySet:af,search:ue}),!0}function Xf(e,t={}){return wC(e,{...t,executeSearchActionCreator:N,fetchQuerySuggestionsActionCreator:cn})}var Ps=z("analytics/sort/results",$.Search,(e,t)=>e.logResultsSort({resultsSortBy:t.sortCriteria||Mt()}));function xC(e,t){if(!t)return;let r=new ne({criterion:new te({each:ev})}),n=qC(t),a={...t,criterion:n};Ye(e,r,a,"buildSort")}function qC(e){return e.criterion?Ka(e.criterion)?e.criterion:[e.criterion]:[]}function IC(e,t){var r;if(!RC(e))throw H;let n=G(e),{dispatch:a}=e,i=()=>e.state;xC(e,t.initialState);let o=(r=t.initialState)==null?void 0:r.criterion;return o&&a(cs(o)),{...n,sortBy(s){a(ds(s)),a(Tr(1))},isSortedBy(s){return this.state.sortCriteria===Sr(s)},get state(){return{sortCriteria:i().sortCriteria}}}}function RC(e){return e.addReducers({configuration:re,sortCriteria:sf}),!0}function Vq(e,t={}){let{dispatch:r}=e,n=IC(e,t),a=()=>r(N(Ps()));return{...n,get state(){return n.state},sortBy(i){n.sortBy(i),a()}}}function Mq(e){return{state:"idle",...e}}var FC=new ne({id:Sa,values:Wd});function $q(e,t){if(!AC(e))throw H;Ie(e,FC,t.options,"buildStaticFilter");let r=G(e),{dispatch:n}=e,a=()=>e.state,{id:i}=t.options;return n(hs(t.options)),{...r,toggleSelect(o){let s=ep(i,o);n(gn({id:i,value:o})),n(N(s))},toggleSingleSelect(o){let s=ep(i,o);o.state==="idle"&&n(wa(i)),n(gn({id:i,value:o})),n(N(s))},deselectAll(){let o=Kd({staticFilterId:i});n(wa(i)),n(N(o))},isValueSelected(o){return o.state==="selected"},get state(){var o;let s=((o=a().staticFilterSet[i])==null?void 0:o.values)||[],u=s.some(l=>l.state!=="idle");return{id:i,values:s,hasActiveValues:u}}}}function AC(e){return e.addReducers({staticFilterSet:nf}),!0}function ep(e,t){let{caption:r,expression:n,state:a}=t;return(a==="idle"?Jd:vs)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}var EC=new ne({expression:ve,id:_}),jC=new ne({isActive:new X});function Lq(e,t){if(PC(t.options.id),!kC(e))throw H;let r=G(e),{dispatch:n}=e,a=()=>e.state;Ie(e,EC,t.options,"buildTab");let i=Ye(e,jC,t.initialState,"buildTab"),{id:o,expression:s}=t.options;return n($c({id:o,expression:s})),i.isActive&&n(Xn(o)),{...r,select(){n(Xn(o)),n(N(yn()))},get state(){return{isActive:a().tabSet[o].isActive}}}}function kC(e){return e.addReducers({configuration:re,tabSet:nw}),!0}function PC(e){let t=Xe().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function TC(e){if(!VC(e))throw H;let t=G(e),r=()=>e.state;return{...t,sort(n){return Zi(n,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(n=>n.facetId)}}}}function VC(e){return e.addReducers({search:ue,facetOptions:Je}),!0}function Dq(e){return TC(e)}var tp=()=>z("analytics/facet/deselectAllBreadcrumbs",$.Search,e=>e.logBreadcrumbResetAll())(),MC={categoryFacetId:Z,categoryFacetPath:new te({required:!0,each:_})},$C=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let n=e.categoryFacetSet[t],a=n==null?void 0:n.request.field,i=`${a}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:a,categoryFacetTitle:i}},rp=e=>z("analytics/categoryFacet/breadcrumb",$.Search,(t,r)=>(E(e,MC),t.logBreadcrumbFacet($C(r,e))))(),np=(e,{facetId:t,selection:r})=>{let n=e.dateFacetSet[t]||e.numericFacetSet[t],a=n.field,i=`${n.field}_${t}`;return{facetId:t,facetField:a,facetTitle:i,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},ap=e=>z("analytics/numericFacet/breadcrumb",$.Search,(t,r)=>{E(e,mo(e.selection));let n=np(r,e);return t.logBreadcrumbFacet(n)})(),ip=e=>z("analytics/dateFacet/breadcrumb",$.Search,(t,r)=>{E(e,mo(e.selection));let n=np(r,e);return t.logBreadcrumbFacet(n)})();function _q(e){if(!LC(e))throw H;let t=G(e),{dispatch:r}=e,n=(h,g,d)=>Object.keys(h).map(y=>{let v=d(e.state,y).map(m=>({value:m,deselect:()=>g({facetId:y,selection:m})}));return{facetId:y,field:h[y].field,values:v}}).filter(y=>y.values.length),a=()=>n(e.state.facetSet,({facetId:h,selection:g})=>{let d=dd({facetId:h,facetValue:g.value});r(Yr({facetId:h,selection:g})),r(oa({facetId:h,freezeCurrentValues:!1})),r(N(d))},Vh),i=()=>n(e.state.numericFacetSet,h=>{r(Gr(h)),r(N(ap(h)))},Lf),o=()=>n(e.state.dateFacetSet,h=>{r(Jr(h)),r(N(ip(h)))},Df),s=h=>{let g=Qa(e.state,h);return{facetId:h,field:e.state.categoryFacetSet[h].request.field,path:g,deselect:()=>{r(Nr(h)),r(N(rp({categoryFacetPath:g.map(d=>d.value),categoryFacetId:h})))}}},u=()=>Object.keys(e.state.categoryFacetSet).map(s).filter(h=>h.path.length),l=()=>{let h=e.state.staticFilterSet||{};return Object.values(h).map(f)},f=h=>{let{id:g,values:d}=h,y=d.filter(v=>v.state==="selected").map(v=>c(g,v));return{id:g,values:y}},c=(h,g)=>({value:g,deselect:()=>{let{caption:d,expression:y}=g,v=vs({staticFilterId:h,staticFilterValue:{caption:d,expression:y}});r(gn({id:h,value:g})),r(N(v))}});function p(){return!![...a(),...i(),...o(),...u(),...l()].length}return{...t,get state(){return{facetBreadcrumbs:a(),categoryFacetBreadcrumbs:u(),numericFacetBreadcrumbs:i(),dateFacetBreadcrumbs:o(),staticFilterBreadcrumbs:l(),hasBreadcrumbs:p()}},deselectAll:()=>{r(We()),r(N(tp()))},deselectBreadcrumb(h){h.deselect()}}}function LC(e){return e.addReducers({configuration:re,search:ue,facetSet:Oa,numericFacetSet:or,dateFacetSet:vn,categoryFacetSet:xa}),!0}var DC=new ne({...Kf,redirectionUrl:new D({required:!0,emptyAllowed:!1})});function zq(e,t){if(!_C(e))throw H;let{dispatch:r}=e,n=()=>e.state,a=t.options.id||$i("standalone_search_box"),i={id:a,highlightOptions:{...t.options.highlightOptions},...Jf,...t.options};Ie(e,DC,i,"buildStandaloneSearchBox");let o=Xf(e,{options:i});return r(rs({id:a,redirectionUrl:i.redirectionUrl})),{...o,updateText(s){o.updateText(s),r(as({id:a}))},selectSuggestion(s){let u=Gf(n(),{id:a,suggestion:s});r(ir({id:a,expression:s})),r(is({id:a,metadata:u})),this.submit()},afterRedirection(){r(ns({id:a}))},submit(){r(Kt({q:this.state.value,enableQuerySyntax:i.enableQuerySyntax})),r(pn({id:a}))},get state(){let s=n().standaloneSearchBoxSet[a];return{...o.state,isLoading:s.isLoading,redirectTo:s.redirectTo,analytics:s.analytics}}}}function _C(e){return e.addReducers({standaloneSearchBoxSet:df,configuration:re,query:sr,querySuggest:Ss}),!0}function zC(e){var t,r,n,a,i,o;return{q:je().q,enableQuerySyntax:je().enableQuerySyntax,aq:(r=(t=e.advancedSearchQueries)==null?void 0:t.defaultFilters.aq)!=null?r:et().defaultFilters.aq,cq:(a=(n=e.advancedSearchQueries)==null?void 0:n.defaultFilters.cq)!=null?a:et().defaultFilters.cq,firstResult:Be().firstResult,numberOfResults:(o=(i=e.pagination)==null?void 0:i.defaultNumberOfResults)!=null?o:Be().defaultNumberOfResults,sortCriteria:Mt(),f:{},cf:{},nf:{},df:{},debug:St(),sf:{},tab:""}}function NC(e,t){return e.q!==t.q?ks():e.sortCriteria!==t.sortCriteria?Ps():e.firstResult!==t.firstResult?As():e.numberOfResults!==t.numberOfResults?Fs():Ea(e.f,t.f)?Ts(e.f,t.f):Ea(e.cf,t.cf)?Ts(e.cf,t.cf):Ea(e.nf,t.nf)?sp(e.nf,t.nf):Ea(e.df,t.df)?sp(e.df,t.df):yn()}function Ea(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function op(e){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(n=>`${n.start}..${n.end}`)),t}function Ts(e={},t={}){let r=Object.keys(e),n=Object.keys(t),a=r.filter(c=>!n.includes(c));if(a.length){let c=a[0];return e[c].length>1?dt(c):ar({facetId:c,facetValue:e[c][0]})}let i=n.filter(c=>!r.includes(c));if(i.length){let c=i[0];return Ne({facetId:c,facetValue:t[c][0]})}let o=n.find(c=>t[c].filter(p=>e[c].includes(p)));if(!o)return yn();let s=e[o],u=t[o],l=u.filter(c=>!s.includes(c));if(l.length)return Ne({facetId:o,facetValue:l[0]});let f=s.filter(c=>!u.includes(c));return f.length?ar({facetId:o,facetValue:f[0]}):yn()}function sp(e={},t={}){return Ts(op(e),op(t))}var UC=new ne({parameters:new Y({options:{required:!0},values:Mc})});function QC(e,t){let{dispatch:r}=e,n=G(e);return Ye(e,UC,t.initialState,"buildSearchParameterManager"),r(Ce(t.initialState.parameters)),{...n,synchronize(a){let i=lp(e),o=up(e,i),s=up(e,a);Rd(o,s)||(r(Ce(s)),r(N(NC(o,s))))},get state(){return{parameters:lp(e)}}}}function up(e,t){return{...zC(e.state),...t}}function lp(e){let t=e.state;return{...BC(t),...HC(t),...YC(t),...WC(t),...JC(t),...KC(t),...ZC(t),...GC(t),...tO(t),...nO(t),...aO(t),...iO(t),...oO(t),...XC(t)}}function BC(e){if(e.query===void 0)return{};let t=e.query.q;return t!==je().q?{q:t}:{}}function HC(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==je().enableQuerySyntax?{enableQuerySyntax:t}:{}}function YC(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function WC(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function JC(e){let t=Object.values(e.tabSet||{}).find(r=>r.isActive);return t?{tab:t.id}:{}}function KC(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Be().firstResult?{firstResult:t}:{}}function ZC(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function GC(e){if(e.sortCriteria===void 0)return{};let t=e.sortCriteria;return t!==Mt()?{sortCriteria:t}:{}}function XC(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,n])=>{let a=eO(n.values);return a.length?{[r]:a}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{sf:t}:{}}function eO(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function tO(e){if(e.facetSet===void 0)return{};let t=Object.entries(e.facetSet).filter(([r])=>{var n,a,i;return(i=(a=(n=e.facetOptions)==null?void 0:n.facets[r])==null?void 0:a.enabled)!=null?i:!0}).map(([r,n])=>{let a=rO(n.currentValues);return a.length?{[r]:a}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{f:t}:{}}function rO(e){return e.filter(t=>t.state==="selected").map(t=>t.value)}function nO(e){if(e.categoryFacetSet===void 0)return{};let t=Object.entries(e.categoryFacetSet).filter(([r])=>{var n,a,i;return(i=(a=(n=e.facetOptions)==null?void 0:n.facets[r])==null?void 0:a.enabled)!=null?i:!0}).map(([r,n])=>{let{parents:a}=mt(n.request.currentValues),i=a.map(o=>o.value);return i.length?{[r]:i}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{cf:t}:{}}function aO(e){if(e.numericFacetSet===void 0)return{};let t=Object.entries(e.numericFacetSet).filter(([r])=>{var n,a,i;return(i=(a=(n=e.facetOptions)==null?void 0:n.facets[r])==null?void 0:a.enabled)!=null?i:!0}).map(([r,n])=>{let a=cp(n.currentValues);return a.length?{[r]:a}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{nf:t}:{}}function iO(e){if(e.dateFacetSet===void 0)return{};let t=Object.entries(e.dateFacetSet).filter(([r])=>{var n,a,i;return(i=(a=(n=e.facetOptions)==null?void 0:n.facets[r])==null?void 0:a.enabled)!=null?i:!0}).map(([r,n])=>{let a=cp(n.currentValues);return a.length?{[r]:a}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{df:t}:{}}function cp(e){return e.filter(t=>t.state==="selected")}function oO(e){if(e.debug===void 0)return{};let t=e.debug;return t!==St()?{debug:t}:{}}var ja="&",Sn="=",Vs="..";function dp(){return{serialize:sO,deserialize:pO}}function sO(e){return Object.entries(e).map(uO).filter(t=>t).join(ja)}function uO(e){let[t,r]=e;return pp(t)?t==="f"||t==="cf"||t==="sf"?lO(r)?dO(t,r):"":t==="nf"||t==="df"?cO(r)?fO(t,r):"":`${t}${Sn}${encodeURIComponent(r)}`:""}function lO(e){return Ms(e)?fp(e,t=>typeof t=="string"):!1}function cO(e){return Ms(e)?fp(e,t=>Ms(t)&&"start"in t&&"end"in t):!1}function Ms(e){return!!(e&&typeof e=="object")}function fp(e,t){return Object.entries(e).filter(r=>{let n=r[1];return!Array.isArray(n)||!n.every(t)}).length===0}function dO(e,t){return Object.entries(t).map(([r,n])=>`${e}[${r}]${Sn}${n.map(a=>encodeURIComponent(a)).join(",")}`).join(ja)}function fO(e,t){return Object.entries(t).map(([r,n])=>{let a=n.map(({start:i,end:o})=>`${i}${Vs}${o}`).join(",");return`${e}[${r}]${Sn}${a}`}).join(ja)}function pO(e){return e.split(ja).map(t=>gO(t)).map(hO).filter(SO).map(wO).reduce((t,r)=>{let[n,a]=r;if(gp(n)){let i={...t[n],...a};return{...t,[n]:i}}return{...t,[n]:a}},{})}function gO(e){let[t,...r]=e.split(Sn),n=r.join(Sn);return[t,n]}function hO(e){let[t,r]=e,n=/^(f|cf|nf|df|sf)\[(.+)\]$/.exec(t);if(!n)return e;let a=n[1],i=n[2],o=r.split(","),s=vO(a,o),u={[i]:s};return[a,JSON.stringify(u)]}function vO(e,t){return e==="nf"?yO(t):e==="df"?bO(t):t}function yO(e){return e.map(t=>t.split(Vs).map(parseFloat)).filter(t=>t.length===2&&t.every(Number.isFinite)).map(([t,r])=>E0({start:t,end:r,state:"selected"}))}function mO(e){try{return Gy(e)?(Xl(e,Gl),!0):Zt(e)?(Yn(e),!0):!1}catch{return!1}}function bO(e){return e.map(t=>t.split(Vs)).filter(t=>t.length===2&&t.every(r=>mO(r))).map(([t,r])=>Bc({start:t,end:r,state:"selected"}))}function SO(e){let t=pp(e[0]),r=e.length===2;return t&&r}function pp(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0}}function wO(e){let[t,r]=e;return t==="enableQuerySyntax"?[t,r==="true"]:t==="debug"?[t,r==="true"]:t==="firstResult"?[t,parseInt(r)]:t==="numberOfResults"?[t,parseInt(r)]:gp(t)?[t,CO(r)]:[t,decodeURIComponent(r)]}function CO(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(n=>{let[a,i]=n;r[a]=i.map(o=>jn(o)?decodeURIComponent(o):o)}),r}function gp(e){return["f","cf","nf","df","sf"].includes(e)}var OO=new ne({fragment:new D});function xO(e,t){let r;function n(){r=e.state.search.requestId}function a(){return r!==e.state.search.requestId}if(!IO(e))throw H;Ye(e,OO,t.initialState,"buildUrlManager");let i=G(e),o=t.initialState.fragment;n();let s=QC(e,{initialState:{parameters:ka(o)}});return{...i,subscribe(u){let l=()=>{let f=this.state.fragment;!qO(o,f)&&a()&&(o=f,u()),n()};return l(),e.subscribe(l)},get state(){return{fragment:dp().serialize(s.state.parameters)}},synchronize(u){o=u;let l=ka(u);s.synchronize(l)}}}function qO(e,t){if(e===t)return!0;let r=ka(e),n=ka(t);return Rd(r,n)}function ka(e){return dp().deserialize(e)}function IO(e){return e.addReducers({configuration:re}),!0}function Nq(e){return Es(e)}function RO(e,t,r){if(!FO(e))throw H;let{dispatch:n}=e,a=()=>e.state,i=G(e),{result:o,maximumPreviewSize:s}=t.options,u=o.uniqueId;return{...i,fetchResultContent(){n(os({uniqueId:u,requestedOutputSize:s})),r&&r()},get state(){let l=o.hasHtmlVersion,f=a().resultPreview,c=u===f.uniqueId?f.content:"",p=f.isLoading;return{content:c,resultHasPreview:l,isLoading:p}}}}function FO(e){return e.addReducers({configuration:re,resultPreview:iw}),!0}var AO=e=>EO(e)(),EO=e=>z("analytics/resultPreview/open",$.Click,(t,r)=>{It(e);let n=qt(e,r),a=Jt(e);return t.logDocumentQuickview(n,a)});function Uq(e,t){return RO(e,t,()=>{e.dispatch(AO(t.options.result))})}var jO=new ne(Cd);function Qq(e,t={}){var r;if(!kO(e))throw H;let n=Yf(e,t),{dispatch:a}=e,i=()=>e.state,o=((r=t.options)==null?void 0:r.folding)?Ie(e,jO,t.options.folding,"buildFoldedResultList"):{};return a(ga({...o})),{...n,loadCollection:s=>{a(nn(s.result.raw[e.state.folding.fields.collection])),a(Od(s.result))},logShowMoreFoldedResults:s=>{a(Od(s))},logShowLessFoldedResults:()=>{a(rS())},findResultById(s){return $s(this.state.results,u=>u.result.uniqueId===s.result.uniqueId)},findResultByCollection(s){return $s(this.state.results,u=>u.result.raw.foldingcollection===s.result.raw.foldingcollection)},get state(){let s=i();return{...n.state,results:n.state.results.map(u=>{let l=u.raw[s.folding.fields.collection];return!l||!s.folding.collections[l]?{result:u,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:s.folding.collections[l]})}}}}function kO(e){return e.addReducers({search:ue,configuration:re,folding:ef,query:sr}),!0}function $s(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let a=$s(n.children,t);if(a)return a}}return null}var PO=z("analytics/trigger/query",$.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.query)return e.logTriggerQuery()}),TO=z("analytics/trigger/notify",$.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.notification)return e.logTriggerNotify({notification:t.triggers.notification})}),VO=z("analytics/trigger/redirect",$.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.triggers.redirectTo})}),MO=z("analytics/trigger/execute",$.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.execute)return e.logTriggerExecute({executed:t.triggers.execute.functionName})});function Bq(e){if(!$O(e))throw H;let t=G(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.redirectTo;return{...t,subscribe(i){let o=()=>{let s=a!==this.state.redirectTo;a=this.state.redirectTo,s&&this.state.redirectTo&&(i(),r(VO()))};return o(),e.subscribe(o)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function $O(e){return e.addReducers({triggers:Ia}),!0}function Hq(e){if(!LO(e))throw H;let t=G(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.query,i=n().query.q;return{...t,subscribe(o){let s=()=>{let u=a!==this.state.newQuery;if(a=this.state.newQuery,u&&this.state.newQuery){i=n().query.q;let l={q:n().triggers.query};r(Kt(l)),o(),r(N(PO()))}};return s(),e.subscribe(s)},get state(){return{newQuery:n().triggers.query,originalQuery:i,wasQueryModified:n().triggers.query!==""}}}}function LO(e){return e.addReducers({triggers:Ia,query:sr}),!0}function Yq(e){if(!DO(e))throw H;let t=G(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.executions;return{...t,subscribe(i){let o=()=>{let s=!ha(this.state.executions,a,(u,l)=>u.functionName===l.functionName&&ha(u.params,l.params));a=this.state.executions,s&&this.state.executions.length&&(i(),r(MO()))};return o(),e.subscribe(o)},get state(){return{functionName:n().triggers.execute.functionName,params:n().triggers.execute.params,executions:n().triggers.executions}}}}function DO(e){return e.addReducers({triggers:Ia}),!0}function Wq(e){if(!_O(e))throw H;let t=G(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.notifications;return{...t,subscribe(i){let o=()=>{let s=!ha(a,this.state.notifications);a=this.state.notifications,s&&(i(),r(TO()))};return o(),e.subscribe(o)},get state(){return{notification:n().triggers.notification,notifications:n().triggers.notifications}}}}function _O(e){return e.addReducers({triggers:Ia}),!0}function Pa(e,t){var r,n,a,i,o,s;let u=(n=(r=e.questionAnswering)==null?void 0:r.relatedQuestions.findIndex(f=>f.questionAnswerId===t))!=null?n:-1;if(u===-1)return null;let l=(s=(o=(i=(a=e.search)==null?void 0:a.response)==null?void 0:i.questionAnswer)==null?void 0:o.relatedQuestions)==null?void 0:s[u];return l??null}var hp=z("analytics/smartSnippet/expand",$.Custom,e=>e.logExpandSmartSnippet()),vp=z("analytics/smartSnippet/collapse",$.Custom,e=>e.logCollapseSmartSnippet()),yp=z("analytics/smartSnippet/like",$.Custom,e=>e.logLikeSmartSnippet()),mp=z("analytics/smartSnippet/dislike",$.Custom,e=>e.logDislikeSmartSnippet()),bp=e=>z("analytics/smartSnippet/source/open",$.Click,(t,r)=>(It(e),t.logOpenSmartSnippetSource(qt(e,r),Jt(e))))(),Sp=z("analytics/smartSnippet/feedbackModal/open",$.Custom,e=>e.logOpenSmartSnippetFeedbackModal()),wp=z("analytics/smartSnippet/feedbackModal/close",$.Custom,e=>e.logCloseSmartSnippetFeedbackModal()),Cp=e=>z("analytics/smartSnippet/sendFeedback",$.Custom,t=>t.logSmartSnippetFeedbackReason(e))(),Op=e=>z("analytics/smartSnippet/sendFeedback",$.Custom,t=>t.logSmartSnippetFeedbackReason("other",e))(),xp=e=>z("analytics/smartSnippetSuggestion/expand",$.Custom,(t,r)=>{if(ma(e),!ya(e))return t.logExpandSmartSnippetSuggestion(e);let n=Pa(r,e.questionAnswerId);if(n)return t.logExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId})})(),qp=e=>z("analytics/smartSnippetSuggestion/expand",$.Custom,(t,r)=>{if(ma(e),!ya(e))return t.logCollapseSmartSnippetSuggestion(e);let n=Pa(r,e.questionAnswerId);if(n)return t.logCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId})})(),Ip=e=>z("analytics/smartSnippet/source/open",$.Click,(t,r)=>{var n;E(e,Md());let a=Pa(r,e.questionAnswerId);if(!a)return;let i=(n=r.search)==null?void 0:n.results.find(o=>gt(o,a.documentId.contentIdKey)===a.documentId.contentIdValue);if(i)return t.logOpenSmartSnippetSuggestionSource(qt(i,r),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId})})();function Jq(e,t){var r;if(!zO(e))throw H;let n=G(e),a=()=>e.state,i=()=>{let{contentIdKey:u,contentIdValue:l}=a().search.response.questionAnswer.documentId;return e.state.search.results.find(f=>gt(f,u)===l)},o=null,s=Aa(e,{options:{selectionDelay:(r=t==null?void 0:t.options)==null?void 0:r.selectionDelay}},()=>{let u=i();if(!u){o=null;return}let{searchResponseId:l}=a().search;o!==l&&(o=l,e.dispatch(bp(u)),e.dispatch(fn(u)))});return{...n,get state(){let u=a();return{question:u.search.response.questionAnswer.question,answer:u.search.response.questionAnswer.answerSnippet,documentId:u.search.response.questionAnswer.documentId,expanded:u.questionAnswering.expanded,answerFound:u.search.response.questionAnswer.answerSnippet!=="",liked:u.questionAnswering.liked,disliked:u.questionAnswering.disliked,feedbackModalOpen:u.questionAnswering.feedbackModalOpen,source:i()}},expand(){e.dispatch(hp()),e.dispatch(Bo())},collapse(){e.dispatch(vp()),e.dispatch(Ho())},like(){e.dispatch(yp()),e.dispatch(Yo())},dislike(){e.dispatch(mp()),e.dispatch(Wo())},openFeedbackModal(){e.dispatch(Sp()),e.dispatch(Jo())},closeFeedbackModal(){e.dispatch(wp()),e.dispatch(dn())},sendFeedback(u){e.dispatch(Cp(u)),e.dispatch(dn())},sendDetailedFeedback(u){e.dispatch(Op(u)),e.dispatch(dn())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function zO(e){return e.addReducers({search:ue,questionAnswering:Ra}),!0}function NO(e,t){if(!UO(e))throw H;let r=()=>e.state,n=c=>{let p=r(),h=Pa(p,c);return h?kw(p,h.documentId.contentIdKey,h.documentId.contentIdValue):null},a=new Set,i=c=>a.has(c)?!0:(a.add(c),!1),o=null,s=c=>{o!==c&&(o=c,l={},a.clear())},u=(c,p)=>{var h;return Aa(e,{options:{selectionDelay:(h=t==null?void 0:t.options)==null?void 0:h.selectionDelay}},()=>{i(p)||(e.dispatch(Ip({questionAnswerId:p})),e.dispatch(fn(c)))})},l={},f=c=>{let{searchResponseId:p}=r().search;s(p);let h=n(c);return h?(c in l||(l[c]=u(h,c)),l[c]):null};return{selectSource(c){var p;(p=f(c))==null||p.select()},beginDelayedSelectSource(c){var p;(p=f(c))==null||p.beginDelayedSelect()},cancelPendingSelectSource(c){var p;(p=f(c))==null||p.cancelPendingSelect()}}}function UO(e){return e.addReducers({search:ue,questionAnswering:Ra}),!0}function Kq(e,t){var r;if(!QO(e))throw H;let n=G(e),a=()=>e.state,i=u=>{let{contentIdKey:l,contentIdValue:f}=u;return e.state.search.results.find(c=>gt(c,l)===f)},o=NO(e,{options:{selectionDelay:(r=t==null?void 0:t.options)==null?void 0:r.selectionDelay}}),s=u=>typeof u=="string"?{questionAnswerId:u}:u;return{...n,get state(){let u=a();return{questions:u.search.response.questionAnswer.relatedQuestions.map((l,f)=>({question:l.question,answer:l.answerSnippet,documentId:l.documentId,questionAnswerId:u.questionAnswering.relatedQuestions[f].questionAnswerId,expanded:u.questionAnswering.relatedQuestions[f].expanded,source:i(l.documentId)}))}},expand(u){let l=s(u);e.dispatch(xp(l)),e.dispatch(Ko(l))},collapse(u){let l=s(u);e.dispatch(qp(l)),e.dispatch(Zo(l))},selectSource(u){o.selectSource(u)},beginDelayedSelectSource(u){o.beginDelayedSelectSource(u)},cancelPendingSelectSource(u){o.cancelPendingSelectSource(u)}}}function QO(e){return e.addReducers({search:ue,questionAnswering:Ra}),!0}var BO=z("analytics/recentQueries/clear",$.Custom,e=>e.logClearRecentQueries()),HO=z("analytics/recentQueries/click",$.Search,e=>e.logRecentQueryClick()),YO={initialState:{queries:[]},options:{maxLength:10}},WO=new ne({queries:new te({required:!0})}),JO=new ne({maxLength:new B({required:!0,min:1})});function KO(e,t){Ie(e,JO,t==null?void 0:t.options,"buildRecentQueriesList"),Ye(e,WO,t==null?void 0:t.initialState,"buildRecentQueriesList")}function Zq(e,t){if(!ZO(e))throw H;let r=G(e),{dispatch:n}=e,a=()=>e.state,i={...YO,...t};KO(e,i);let o={queries:i.initialState.queries,maxLength:i.options.maxLength};return n(es(o)),{...r,get state(){let s=a();return{...s.recentQueries,analyticsEnabled:s.configuration.analytics.enabled}},clear(){n(BO()),n(ts())},executeRecentQuery(s){let u=new B({required:!0,min:0,max:this.state.queries.length}).validate(s);if(u)throw new Error(u);n(cc({q:this.state.queries[s]})),n(N(HO()))}}}function ZO(e){return e.addReducers({search:ue,recentQueries:pf}),!0}var GO=e=>z("analytics/recentResults/click",$.Custom,(t,r)=>{It(e),t.logRecentResultClick(qt(e,r),Jt(e))}),XO=e=>GO(e)(),ex=z("analytics/recentResults/clear",$.Custom,e=>e.logClearRecentResults()),tx={initialState:{results:[]},options:{maxLength:10}},rx=new ne({results:new te({required:!0})}),nx=new ne({maxLength:new B({required:!0,min:1})});function ax(e,t){Ie(e,nx,t==null?void 0:t.options,"buildRecentResultsList"),Ye(e,rx,t==null?void 0:t.initialState,"buildRecentResultsList")}function Gq(e,t){if(!ix(e))throw H;let r=G(e),{dispatch:n}=e,a=()=>e.state,i={...tx,...t};ax(e,i);let o={results:i.initialState.results,maxLength:i.options.maxLength};return n(Go(o)),{...r,get state(){return a().recentResults},clear(){n(ex()),n(Xo())}}}function ix(e){return e.addReducers({recentResults:ff}),!0}function Xq(e,t){return Aa(e,t,()=>e.dispatch(XO(t.options.result)))}function eI(e,t){if(!ox(e))throw H;let r={},n=f=>{var c,p;return(p=(c=e.state.facetOptions.facets[f])==null?void 0:c.enabled)!=null?p:!0},a=f=>e.state.facetSet&&f in e.state.facetSet?e.state.facetSet[f].currentValues:e.state.categoryFacetSet&&f in e.state.categoryFacetSet?e.state.categoryFacetSet[f].request.currentValues:e.state.numericFacetSet&&f in e.state.numericFacetSet?e.state.numericFacetSet[f].currentValues:e.state.dateFacetSet&&f in e.state.dateFacetSet?e.state.dateFacetSet[f].currentValues:null,i=()=>{let f=!1;return Object.keys(r).forEach(c=>{let p=JSON.stringify(a(c));p!==r[c]&&(r[c]=p,f=!0)}),f},o=()=>t.conditions.some(f=>{if(!n(f.parentFacetId))return!1;let c=a(f.parentFacetId);return c===null?!1:f.condition(c)}),s=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([f,c])=>c.freezeCurrentValues&&e.dispatch(oa({facetId:f,freezeCurrentValues:!1})))},u=()=>{let f=n(t.facetId),c=o();f!==c&&(e.dispatch(c?ct(t.facetId):Pe(t.facetId)),s())};t.conditions.forEach(f=>{f.parentFacetId in r||(r[f.parentFacetId]=JSON.stringify(a(f.parentFacetId)))});let l=t.conditions.length?e.subscribe(()=>{i()&&u()}):()=>{};return t.conditions.length&&u(),{stopWatching(){l()}}}function ox(e){return e.addReducers({facetOptions:Je}),!0}function tI(e,t){let r=Rf(e,t),{facetSearch:n,subscribe:a}=r;return{subscribe:a,...n,updateText:function(i){n.updateText(i),n.search()},get state(){return r.state.facetSearch}}}function rI(e,t){let r=s0(e,t),{facetSearch:n,subscribe:a}=r;return{subscribe:a,...n,updateText:function(i){n.updateText(i),n.search()},get state(){return r.state.facetSearch}}}function sx(e){return e.addReducers({advancedSearchQueries:rw}),{updateAdvancedSearchQueries:Tc,registerAdvancedSearchQueries:Vc}}function nI(e){return e.addReducers({categoryFacetSet:xa}),{deselectAllCategoryFacetValues:Nr,registerCategoryFacet:ea,toggleSelectCategoryFacetValue:ta,updateCategoryFacetNumberOfValues:ra,updateCategoryFacetSortCriterion:go,updateFacetAutoSelection:Vr}}function aI(e){return e.addReducers({facetSet:Oa}),{deselectAllFacetValues:$e,registerFacet:na,toggleSelectFacetValue:Yr,updateFacetIsFieldExpanded:ia,updateFacetNumberOfValues:aa,updateFacetSortCriterion:yo,updateFreezeCurrentValues:oa,updateFacetAutoSelection:Vr}}function iI(e){return e.addReducers({configuration:re}),{disableAnalytics:so,enableAnalytics:uo,setOriginLevel2:kc,setOriginLevel3:Pc,updateAnalyticsConfiguration:Gn,updateBasicConfiguration:Zn}}function oI(e){return e.addReducers({configuration:re,pipeline:ws,searchHub:Cs}),{updateSearchConfiguration:tr}}function sI(e){return e.addReducers({context:uf}),{addContext:co,removeContext:fo,setContext:lo}}function uI(e){return e.addReducers({dictionaryFieldContext:lf}),{addContext:ps,removeContext:gs,setContext:fs}}function lI(e){return e.addReducers({debug:Os}),{disableDebug:po,enableDebug:zr}}function cI(e){return e.addReducers({dateFacetSet:vn}),{deselectAllDateFacetValues:Jc,registerDateFacet:Wr,toggleSelectDateFacetValue:Jr,updateDateFacetSortCriterion:Wc,updateDateFacetValues:Kr}}function dI(e){return e.addReducers({facetOptions:Je}),{updateFacetOptions:pe,enableFacet:ct,disableFacet:Pe}}function fI(e){return e.addReducers({didYouMean:cf,query:sr}),{applyDidYouMeanCorrection:Pr,disableDidYouMean:Zl,enableDidYouMean:zi}}function pI(e){return e.addReducers({fields:qa}),{registerFieldsToInclude:fa,enableFetchAllFields:Vo,disableFetchAllFields:pa,fetchFieldsDescription:Mo}}function gI(e){return e.addReducers({history:gf,facetOrder:tf}),{back:_i,forward:Jl}}function hI(e){return e.addReducers({numericFacetSet:or}),{deselectAllNumericFacetValues:Zc,registerNumericFacet:Zr,toggleSelectNumericFacetValue:Gr,updateNumericFacetSortCriterion:Kc,updateNumericFacetValues:Xr}}function vI(e){return e.addReducers({folding:ef}),{registerFolding:ga,loadCollection:nn}}function yI(e){return e.addReducers({pagination:hn}),{nextPage:Ji,previousPage:Ki,registerNumberOfResults:Hi,registerPage:Wi,updateNumberOfResults:Yi,updatePage:Tr}}function mI(e){return e.addReducers({pipeline:ws}),{setPipeline:zo}}function bI(e){return e.addReducers({query:sr}),{updateQuery:Kt}}function SI(e){return e.addReducers({querySet:af}),{registerQuerySetQuery:No,updateQuerySetQuery:sn}}function wI(e){return e.addReducers({instantResults:of}),{registerInstantResults:to,updateInstantResultsQuery:Jn,clearExpiredResults:ro}}function CI(e){return e.addReducers({querySuggest:Ss}),{clearQuerySuggest:ln,fetchQuerySuggestions:cn,registerQuerySuggest:Uo,selectQuerySuggestion:ir}}function OI(e){return e.logger.warn('The "loadRedirectionActions" function is deprecated. Please use "loadStandaloneSearchBoxSetActions" instead.'),e.addReducers({redirection:aw}),{checkForRedirection:zd}}function ux(e){return e.addReducers({search:ue}),{executeSearch:N,fetchMoreResults:Xt,fetchFacetValues:ut,fetchPage:st,fetchInstantResults:$r}}function xI(e){return e.addReducers({searchHub:Cs}),{setSearchHub:ba}}function qI(e){return e.addReducers({sortCriteria:sf}),{registerSortCriterion:cs,updateSortCriterion:ds}}function II(e){return e.addReducers({standaloneSearchBoxSet:df}),{registerStandaloneSearchBox:rs,fetchRedirectUrl:pn,updateAnalyticsToSearchFromLink:as,updateAnalyticsToOmniboxFromLink:is,resetStandaloneSearchBox:ns}}function RI(e){return e.addReducers({staticFilterSet:nf}),{registerStaticFilter:hs,toggleSelectStaticFilterValue:gn,deselectAllStaticFilterValues:wa}}function FI(e){return e.addReducers({questionAnswering:Ra}),{collapseSmartSnippet:Ho,expandSmartSnippet:Bo,dislikeSmartSnippet:Wo,likeSmartSnippet:Yo,openFeedbackModal:Jo,closeFeedbackModal:dn,expandSmartSnippetRelatedQuestion:Ko,collapseSmartSnippetRelatedQuestion:Zo}}function AI(e){return e.addReducers({}),{deselectAllFacets:Gt,deselectAllBreadcrumbs:We}}function EI(e){return e.addReducers({recentQueries:pf}),{registerRecentQueries:es,clearRecentQueries:ts}}function jI(e){return e.addReducers({recentResults:ff}),{registerRecentResults:Go,clearRecentResults:Xo,pushRecentResult:fn}}function kI(e){return e.addReducers({excerptLength:sw}),{setExcerptLength:Gd}}var lx=new ne({priority:new B({required:!1,default:0,min:0}),fields:new te({required:!1,each:_})});function PI(e){if(!cx(e))throw H;let t=[],r=n=>{n.forEach(a=>{if(lx.validate(a,"Check the arguments of registerTemplates"),!a.conditions.every(i=>i instanceof Function))throw new Ja("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...n){let a=[];try{r(n)}catch(i){e.logger.error(i,"Result template manager error");return}n.forEach(i=>{let o={...i,priority:i.priority||0,fields:i.fields||[]};t.push(o),a.push(...o.fields)}),t.sort((i,o)=>o.priority-i.priority),a.length&&e.dispatch(fa(a))},selectTemplate(n){let a=t.find(i=>i.conditions.every(o=>o(n)));return a?a.content:null}}}function cx(e){return e.addReducers({fields:qa}),!0}var Rp;(e=>{e.getResultProperty=gt,e.fieldsMustBeDefined=Fw,e.fieldsMustNotBeDefined=Aw,e.fieldMustMatch=Ew,e.fieldMustNotMatch=jw})(Rp||(Rp={}));function TI(e){return e.addReducers({}),{logClearBreadcrumbs:tp,logInterfaceLoad:vf,logSearchFromLink:yf,logOmniboxFromLink:mf,logInterfaceChange:yn,logDidYouMeanClick:Kl,logCategoryFacetBreadcrumb:rp,logFacetBreadcrumb:dd,logFacetClearAll:dt,logFacetDeselect:ar,logFacetSelect:Ne,logFacetShowLess:Fo,logFacetShowMore:Ro,logFacetUpdateSort:tn,logDateFacetBreadcrumb:ip,logNumericFacetBreadcrumb:ap,logNavigateBackward:zf,logNavigateForward:_f,logPageNext:Bf,logPageNumber:As,logPagePrevious:Hf,logPagerResize:Fs,logSearchboxSubmit:ks,logQuerySuggestionClick:Zf,logResultsSort:Ps,logDislikeSmartSnippet:mp,logLikeSmartSnippet:yp,logOpenSmartSnippetFeedbackModal:Sp,logCloseSmartSnippetFeedbackModal:wp,logSmartSnippetFeedback:Cp,logSmartSnippetDetailedFeedback:Op,logExpandSmartSnippet:hp,logCollapseSmartSnippet:vp,logExpandSmartSnippetSuggestion:xp,logCollapseSmartSnippetSuggestion:qp,logNoResultsBack:Nf,logStaticFilterSelect:Jd,logStaticFilterDeselect:vs,logStaticFilterClearAll:Kd}}function VI(e){return e.addReducers({}),{logDocumentOpen:Wf,logOpenSmartSnippetSource:bp,logOpenSmartSnippetSuggestionSource:Ip}}function MI(e){return e.addReducers({}),{logSearchEvent:qw,logClickEvent:Iw,logCustomEvent:Rw}}function dx(e){let{by:t,order:r}=e;switch(t){case bt.Relevancy:return ku();case bt.QRE:return Gh();case bt.NoSort:return Xh();case bt.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Kh(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Zh(t,r)}}function fx(e){return e===void 0||e===Vt.Ascending||e===Vt.Descending}function $I(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(n=>{let a=n.trim().split(" "),i=a[0].toLowerCase(),o=a[1]&&a[1].toLowerCase();if(a.length>2||i==="")throw r;if(!fx(o))throw new Error(`Wrong criterion sort order "${o}" in expression "${e}". Order should either be "${Vt.Ascending}" or "${Vt.Descending}"`);return dx({by:i,order:o})})}function Ke(e){return e.negate?"NOT ":""}function lr(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function px(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=lr(e.operator);return`${Ke(e)}@${t}${n}${r}`}}}function gx(e){return{toQuerySyntax(){let t=Ke(e),{field:r,from:n,to:a}=e,i=lr("isExactly");return`${t}@${r}${i}${n}..${a}`}}}function hx(e){return{toQuerySyntax(){let t=Ke(e),{expression:r}=e;return`${t}"${r}"`}}}function vx(e){return{toQuerySyntax(){let t=Ke(e),{field:r}=e;return`${t}@${r}`}}}function yx(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function mx(e){return{toQuerySyntax(){let t=Ke(e),{startTerm:r,otherTerms:n}=e,a=bx(n),i=`${r} ${a}`;return e.negate?`${t}(${i})`:i}}}function bx(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:n}=t;return`near:${n} ${r}`}).join(" ")}function Sx(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=Ke(e),a=lr(e.operator);return`${n}@${t}${a}${r}`}}}function wx(e){return{toQuerySyntax(){let t=Ke(e),{field:r,from:n,to:a}=e,i=lr("isExactly");return`${t}@${r}${i}${n}..${a}`}}}function Cx(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,n=Ox(r);return`$${t}(${n})`}}}function Ox(e){return Object.entries(e).map(t=>{let[r,n]=t,a=typeof n=="string"?n:n.toQuerySyntax();return`${r}: ${a}`}).join(", ")}function xx(e){return{toQuerySyntax(){let t=Ke(e),{field:r,operator:n,value:a}=e,i=lr(n),o=n==="fuzzyMatch"?` $quoteVar(value: ${a})`:`("${a}")`;return`${t}@${r}${i}${o}`}}}function qx(e){return{toQuerySyntax(){let{field:t}=e,r=Ke(e),n=lr(e.operator),a=e.values.map(o=>`"${o}"`),i=a.length===1?a[0]:`(${a.join(",")})`;return`${r}@${t}${n}${i}`}}}function LI(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(yx(r)),this},addNear(r){return e.push(mx(r)),this},addExactMatch(r){return e.push(hx(r)),this},addFieldExists(r){return e.push(vx(r)),this},addStringField(r){return e.push(qx(r)),this},addStringFacetField(r){return e.push(xx(r)),this},addNumericField(r){return e.push(Sx(r)),this},addNumericRangeField(r){return e.push(wx(r)),this},addDateField(r){return e.push(px(r)),this},addDateRangeField(r){return e.push(gx(r)),this},addQueryExtension(r){return e.push(Cx(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=Ix(t),n=e.map(a=>a.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?n:`(${n})`}}}function Ix(e){return e==="and"?"AND":"OR"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** *//**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}}]);

//# sourceMappingURL=7491.bundle.js.map