{"version":3,"sources":["webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/atomic-search-box-query-suggestions_2.entry.js","webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/local-storage-utils-ac281531.js","webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/search-055301c4.js","webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/string-utils-5695e07f.js"],"names":[],"mappings":"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","file":"scripts/7546.bundle.js","sourcesContent":["import { r as registerInstance, h, g as getElement } from './index-a326e2b3.js';\nimport { S as SearchIcon } from './search-055301c4.js';\nimport { x as Yre, S as SE, y as Ag } from './headless.esm-36d42fef.js';\nimport { d as dispatchSearchBoxSuggestionsEvent } from './suggestions-common-917463d6.js';\nimport { c as cleanUpString } from './string-utils-5695e07f.js';\nimport { o as once } from './utils-2f0ee174.js';\nimport { a as SafeStorage, S as StorageItems } from './local-storage-utils-ac281531.js';\nimport './event-utils-5d69ba8f.js';\nimport './purify-e45d59ef.js';\nimport './_commonjsHelpers-5ec8f9b7.js';\n\nconst AtomicSearchBoxQuerySuggestions = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n  }\n  componentWillLoad() {\n    try {\n      dispatchSearchBoxSuggestionsEvent((bindings) => {\n        this.bindings = bindings;\n        return this.initialize();\n      }, this.host);\n    }\n    catch (error) {\n      this.error = error;\n    }\n  }\n  renderIcon() {\n    return this.icon || SearchIcon;\n  }\n  initialize() {\n    const engine = this.bindings.engine;\n    const { registerQuerySuggest, fetchQuerySuggestions } = Yre(engine);\n    engine.dispatch(registerQuerySuggest({\n      id: this.bindings.id,\n      count: this.bindings.numberOfQueries,\n    }));\n    return {\n      position: Array.from(this.host.parentNode.children).indexOf(this.host),\n      onInput: () => engine.dispatch(fetchQuerySuggestions({\n        id: this.bindings.id,\n      })),\n      renderItems: () => this.renderItems(),\n    };\n  }\n  renderItems() {\n    const hasQuery = this.bindings.searchBoxController.state.value !== '';\n    const max = hasQuery ? this.maxWithQuery : this.maxWithoutQuery;\n    return this.bindings.searchBoxController.state.suggestions\n      .slice(0, max)\n      .map((suggestion) => this.renderItem(suggestion));\n  }\n  renderItem(suggestion) {\n    const hasQuery = this.bindings.searchBoxController.state.value !== '';\n    return {\n      content: (h(\"div\", { class: \"flex items-center\" }, this.bindings.getSuggestions().length > 1 && (h(\"atomic-icon\", { icon: this.renderIcon(), class: \"w-4 h-4 mr-2 shrink-0\" })), hasQuery ? (\n      // deepcode ignore ReactSetInnerHtml: This is not React code, deepcode ignore DOMXSS: Value escaped in upstream code.\n      h(\"span\", { class: \"break-all line-clamp-2\",\n        // deepcode ignore ReactSetInnerHtml: This is not React code, deepcode ignore DOMXSS: Value escaped in upstream code.\n        innerHTML: suggestion.highlightedValue })) : (h(\"span\", { class: \"break-all line-clamp-2\" }, suggestion.rawValue)))),\n      key: `qs-${cleanUpString(suggestion.rawValue)}`,\n      query: suggestion.rawValue,\n      onSelect: () => {\n        this.bindings.searchBoxController.selectSuggestion(suggestion.rawValue);\n      },\n    };\n  }\n  render() {\n    if (this.error) {\n      return (h(\"atomic-component-error\", { element: this.host, error: this.error }));\n    }\n  }\n  get host() { return getElement(this); }\n};\n\nconst Clock = `<svg fill=\"none\" stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-linecap=\"round\"  viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"8\" cy=\"8\" r=\"7.5\"/><path d=\"m8.5 4.5v4\"/><path d=\"m10.3066 10.1387-1.80932-1.5768\"/></svg>`;\n\nconst AtomicSearchBoxRecentQueries = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    /**\n     * The maximum number of suggestions that will be displayed if the user has typed something into the input field.\n     */\n    this.maxWithQuery = 3;\n    this.warnUser = once(() => this.bindings.engine.logger.warn('Because analytics are disabled, the recent queries feature is deactivated.'));\n  }\n  componentWillLoad() {\n    try {\n      dispatchSearchBoxSuggestionsEvent((bindings) => {\n        this.bindings = bindings;\n        return this.initialize();\n      }, this.host);\n    }\n    catch (error) {\n      this.error = error;\n    }\n  }\n  renderIcon() {\n    return this.icon || Clock;\n  }\n  initialize() {\n    this.storage = new SafeStorage();\n    this.recentQueriesList = SE(this.bindings.engine, {\n      initialState: { queries: this.retrieveLocalStorage() },\n      options: { maxLength: 1000 },\n    });\n    this.recentQueriesList.subscribe(() => this.updateLocalStorage());\n    return {\n      position: Array.from(this.host.parentNode.children).indexOf(this.host),\n      renderItems: () => this.renderItems(),\n    };\n  }\n  retrieveLocalStorage() {\n    return this.storage.getParsedJSON(StorageItems.RECENT_QUERIES, []);\n  }\n  updateLocalStorage() {\n    if (!this.recentQueriesList.state.analyticsEnabled) {\n      return this.disableFeature();\n    }\n    return this.storage.setJSON(StorageItems.RECENT_QUERIES, this.recentQueriesList.state.queries);\n  }\n  disableFeature() {\n    this.warnUser();\n    this.storage.removeItem(StorageItems.RECENT_QUERIES);\n  }\n  renderItems() {\n    if (!this.recentQueriesList.state.analyticsEnabled) {\n      return [];\n    }\n    const query = this.bindings.searchBoxController.state.value;\n    const hasQuery = query !== '';\n    const max = hasQuery ? this.maxWithQuery : this.maxWithoutQuery;\n    const filteredQueries = this.recentQueriesList.state.queries\n      .filter((recentQuery) => recentQuery !== query &&\n      recentQuery.toLowerCase().startsWith(query.toLowerCase()))\n      .slice(0, max);\n    const suggestionElements = filteredQueries.map((value) => this.renderItem(value));\n    if (suggestionElements.length) {\n      suggestionElements.unshift(this.renderClear());\n    }\n    return suggestionElements;\n  }\n  renderClear() {\n    return {\n      key: 'recent-query-clear',\n      content: (h(\"div\", { class: \"flex justify-between w-full\" }, h(\"span\", { class: \"font-bold\", part: \"recent-query-title\" }, this.bindings.i18n.t('recent-searches')), h(\"span\", { part: \"recent-query-clear\" }, this.bindings.i18n.t('clear')))),\n      onSelect: () => {\n        this.recentQueriesList.clear();\n        this.bindings.triggerSuggestions();\n      },\n    };\n  }\n  renderItem(value) {\n    const query = this.bindings.searchBoxController.state.value;\n    return {\n      key: `recent-${cleanUpString(value)}`,\n      query: value,\n      content: (h(\"div\", { class: \"flex items-center break-all\" }, h(\"atomic-icon\", { icon: this.renderIcon(), class: \"w-4 h-4 mr-2 shrink-0\" }), query === '' ? (h(\"span\", { class: \"break-all line-clamp-2\" }, value)) : (\n      // deepcode ignore DOMXSS: Value escaped in upstream code, deepcode ignore ReactSetInnerHtml: This is not React code.\n      h(\"span\", { class: \"break-all line-clamp-2\",\n        // deepcode ignore DOMXSS: Value escaped in upstream code, deepcode ignore ReactSetInnerHtml: This is not React code.\n        innerHTML: Ag.highlightString({\n          content: value,\n          openingDelimiter: '<span class=\"font-bold\">',\n          closingDelimiter: '</span>',\n          highlights: [\n            {\n              offset: query.length,\n              length: value.length - query.length,\n            },\n          ],\n        }) })))),\n      onSelect: () => {\n        if (this.bindings.isStandalone) {\n          this.bindings.searchBoxController.updateText(value);\n          this.bindings.searchBoxController.submit();\n          return;\n        }\n        this.recentQueriesList.executeRecentQuery(this.recentQueriesList.state.queries.indexOf(value));\n      },\n    };\n  }\n  render() {\n    if (this.error) {\n      return (h(\"atomic-component-error\", { element: this.host, error: this.error }));\n    }\n  }\n  get host() { return getElement(this); }\n};\n\nexport { AtomicSearchBoxQuerySuggestions as atomic_search_box_query_suggestions, AtomicSearchBoxRecentQueries as atomic_search_box_recent_queries };\n\n//# sourceMappingURL=atomic-search-box-query-suggestions_2.entry.js.map","var StorageItems;\n(function (StorageItems) {\n  StorageItems[\"RECENT_QUERIES\"] = \"coveo-recent-queries\";\n  StorageItems[\"STANDALONE_SEARCH_BOX_DATA\"] = \"coveo-standalone-search-box-data\";\n})(StorageItems || (StorageItems = {}));\nclass SafeStorage {\n  constructor() { }\n  clear() {\n    return this.tryAccessLocalStorageOrWarn(() => localStorage.clear(), () => { });\n  }\n  getItem(key) {\n    return this.tryAccessLocalStorageOrWarn(() => localStorage.getItem(key), () => null);\n  }\n  getParsedJSON(key, fallback) {\n    const item = this.getItem(key);\n    if (!item) {\n      return fallback;\n    }\n    return this.tryJSONOrWarn(key, () => JSON.parse(item), () => fallback);\n  }\n  key(index) {\n    return this.tryAccessLocalStorageOrWarn(() => localStorage.key(index), () => null);\n  }\n  get length() {\n    return this.tryOrElse(() => localStorage.length, () => 0);\n  }\n  removeItem(key) {\n    return this.tryAccessLocalStorageOrWarn(() => localStorage.removeItem(key), () => { });\n  }\n  setItem(key, value) {\n    return this.tryAccessLocalStorageOrWarn(() => localStorage.setItem(key, value), () => { });\n  }\n  setJSON(key, obj) {\n    const stringified = this.tryJSONOrWarn(key, () => JSON.stringify(obj), () => JSON.stringify({}));\n    return this.setItem(key, stringified);\n  }\n  tryAccessLocalStorageOrWarn(tryTo, orElse) {\n    return this.tryOrElse(tryTo, () => {\n      console.warn('Error while trying to read or modify local storage. This can be caused by browser specific settings.');\n      return orElse();\n    });\n  }\n  tryJSONOrWarn(key, tryTo, orElse) {\n    return this.tryOrElse(tryTo, () => {\n      console.warn(`Error while trying to do JSON manipulation with local storage entry. ${key}`);\n      return orElse();\n    });\n  }\n  tryOrElse(tryTo, orElse) {\n    try {\n      return tryTo();\n    }\n    catch (e) {\n      console.warn(e);\n      return orElse();\n    }\n  }\n}\n\nexport { StorageItems as S, SafeStorage as a };\n\n//# sourceMappingURL=local-storage-utils-ac281531.js.map","const SearchIcon = `<svg viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m6.4 0c3.5 0 6.4 2.9 6.4 6.4 0 1.4-.4 2.7-1.2 3.7l4 4c.4.4.4 1 .1 1.5l-.1.1c-.2.2-.5.3-.8.3s-.6-.1-.8-.3l-4-4c-1 .7-2.3 1.2-3.7 1.2-3.4-.1-6.3-3-6.3-6.5s2.9-6.4 6.4-6.4zm0 2.1c-2.3 0-4.3 1.9-4.3 4.3s1.9 4.3 4.3 4.3 4.3-1.9 4.3-4.3-1.9-4.3-4.3-4.3z\"/></svg>`;\n\nexport { SearchIcon as S };\n\n//# sourceMappingURL=search-055301c4.js.map","function regexEncode(value) {\n  return value.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\n}\nfunction cleanUpString(str) {\n  var _a;\n  return (_a = str\n    .match(/(\\d|\\w|\\s)+/g)) === null || _a === void 0 ? void 0 : _a.join('').replace(/\\s/g, '-').toLocaleLowerCase();\n}\n\nexport { cleanUpString as c, regexEncode as r };\n\n//# sourceMappingURL=string-utils-5695e07f.js.map"],"sourceRoot":""}