{"version":3,"sources":["webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/atomic-facet-manager.entry.js","webpack://@verndale/toolkit/./node_modules/@coveo/atomic/dist/esm/bueno.esm-08331852.js"],"names":[],"mappings":"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","file":"scripts/166.bundle.js","sourcesContent":["import { r as registerInstance, h, g as getElement } from './index-a326e2b3.js';\nimport { p as pi, o as ow } from './headless.esm-36d42fef.js';\nimport { I as InitializeBindings, B as BindStateToController } from './initialization-utils-7c6915b8.js';\nimport { S as Schema, N as NumberValue } from './bueno.esm-08331852.js';\nimport './event-utils-5d69ba8f.js';\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n    r = Reflect.decorate(decorators, target, key, desc);\n  else\n    for (var i = decorators.length - 1; i >= 0; i--)\n      if (d = decorators[i])\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst AtomicFacetManager = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    /**\n     * The number of expanded facets inside the manager.\n     * Remaining facets are automatically collapsed.\n     *\n     * Using the value `0` collapses all facets.\n     * Using the value `-1` disables the feature and keeps all facets expanded. Useful when you want to set the collapse state for each facet individually.\n     */\n    this.collapseFacetsAfter = 4;\n    this.sortFacets = () => {\n      if (!this.searchStatusState.firstSearchExecuted) {\n        this.updateCollapsedState(this.facets);\n        return;\n      }\n      const payload = this.facets.map((f) => ({ facetId: f.facetId, payload: f }));\n      const sortedFacets = this.facetManager.sort(payload).map((f) => f.payload);\n      this.updateCollapsedState(sortedFacets);\n      this.host.append(...sortedFacets);\n    };\n  }\n  initialize() {\n    this.validateProps();\n    this.searchStatus = pi(this.bindings.engine);\n    this.facetManager = ow(this.bindings.engine);\n    // An update has to be forced for the facets to be visually updated, without being interacted with.\n    this.bindings.i18n.on('languageChanged', this.sortFacets);\n  }\n  updateCollapsedState(facets) {\n    if (this.collapseFacetsAfter === -1) {\n      return;\n    }\n    facets.forEach((facet, index) => {\n      facet.setAttribute('is-collapsed', index + 1 > this.collapseFacetsAfter ? 'true' : 'false');\n    });\n  }\n  validateProps() {\n    new Schema({\n      collapseFacetAfter: new NumberValue({ min: -1, required: true }),\n    }).validate({\n      collapseFacetAfter: this.collapseFacetsAfter,\n    });\n  }\n  get facets() {\n    const facets = [];\n    const children = Array.from(this.host.children);\n    children.forEach((child) => {\n      this.isPseudoFacet(child) && facets.push(child);\n    });\n    return facets;\n  }\n  isPseudoFacet(el) {\n    return 'facetId' in el;\n  }\n  disconnectedCallback() {\n    this.bindings.i18n.off('languageChanged', this.sortFacets);\n  }\n  render() {\n    return h(\"slot\", null);\n  }\n  get host() { return getElement(this); }\n};\n__decorate([\n  InitializeBindings()\n], AtomicFacetManager.prototype, \"bindings\", void 0);\n__decorate([\n  BindStateToController('searchStatus')\n], AtomicFacetManager.prototype, \"searchStatusState\", void 0);\n__decorate([\n  BindStateToController('facetManager', {\n    onUpdateCallbackMethod: 'sortFacets',\n  })\n], AtomicFacetManager.prototype, \"facetManagerState\", void 0);\n\nexport { AtomicFacetManager as atomic_facet_manager };\n\n//# sourceMappingURL=atomic-facet-manager.entry.js.map","/**\n * @license\n *\n * Copyright 2022 Coveo Solutions Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * \n *       http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// src/schema.ts\nfunction buildSchemaValidationError(errors, context) {\n  const message = `\n  The following properties are invalid:\n\n    ${errors.join(\"\\n\t\")}\n  \n  ${context}\n  `;\n  return new SchemaValidationError(message);\n}\nvar SchemaValidationError = class extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"SchemaValidationError\";\n  }\n};\nvar Schema = class {\n  constructor(definition) {\n    this.definition = definition;\n  }\n  validate(values = {}, message = \"\") {\n    const mergedValues = {\n      ...this.default,\n      ...values\n    };\n    const errors = [];\n    for (const property in this.definition) {\n      const error = this.definition[property].validate(mergedValues[property]);\n      error && errors.push(`${property}: ${error}`);\n    }\n    if (errors.length) {\n      throw buildSchemaValidationError(errors, message);\n    }\n    return mergedValues;\n  }\n  get default() {\n    const defaultValues = {};\n    for (const property in this.definition) {\n      const defaultValue = this.definition[property].default;\n      if (defaultValue !== void 0) {\n        defaultValues[property] = defaultValue;\n      }\n    }\n    return defaultValues;\n  }\n};\n\n// src/values/value.ts\nvar Value = class {\n  constructor(baseConfig = {}) {\n    this.baseConfig = baseConfig;\n  }\n  validate(value) {\n    if (this.baseConfig.required && isNullOrUndefined(value)) {\n      return \"value is required.\";\n    }\n    return null;\n  }\n  get default() {\n    return this.baseConfig.default instanceof Function ? this.baseConfig.default() : this.baseConfig.default;\n  }\n  get required() {\n    return this.baseConfig.required === true;\n  }\n};\nfunction isUndefined(value) {\n  return value === void 0;\n}\nfunction isNull(value) {\n  return value === null;\n}\nfunction isNullOrUndefined(value) {\n  return isUndefined(value) || isNull(value);\n}\n\n// src/values/number-value.ts\nvar NumberValue = class {\n  constructor(config = {}) {\n    this.config = config;\n    this.value = new Value(config);\n  }\n  validate(value) {\n    const valueValidation = this.value.validate(value);\n    if (valueValidation) {\n      return valueValidation;\n    }\n    if (!isNumberOrUndefined(value)) {\n      return \"value is not a number.\";\n    }\n    if (value < this.config.min) {\n      return `minimum value of ${this.config.min} not respected.`;\n    }\n    if (value > this.config.max) {\n      return `maximum value of ${this.config.max} not respected.`;\n    }\n    return null;\n  }\n  get default() {\n    return this.value.default;\n  }\n  get required() {\n    return this.value.required;\n  }\n};\nfunction isNumberOrUndefined(value) {\n  return isUndefined(value) || isNumber(value);\n}\nfunction isNumber(value) {\n  return typeof value === \"number\" && !isNaN(value);\n}\n\n// src/values/string-value.ts\nvar urlRegex = /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i;\nvar StringValue = class {\n  constructor(config = {}) {\n    this.config = {\n      emptyAllowed: true,\n      url: false,\n      ...config\n    };\n    this.value = new Value(this.config);\n  }\n  validate(value) {\n    const { emptyAllowed, url, regex, constrainTo } = this.config;\n    const valueValidation = this.value.validate(value);\n    if (valueValidation) {\n      return valueValidation;\n    }\n    if (isUndefined(value)) {\n      return null;\n    }\n    if (!isString(value)) {\n      return \"value is not a string.\";\n    }\n    if (!emptyAllowed && !value.length) {\n      return \"value is an empty string.\";\n    }\n    if (url && !urlRegex.test(value)) {\n      return \"value is not a valid URL.\";\n    }\n    if (regex && !regex.test(value)) {\n      return `value did not match provided regex ${regex}`;\n    }\n    if (constrainTo && !constrainTo.includes(value)) {\n      const values = constrainTo.join(\", \");\n      return `value should be one of: ${values}.`;\n    }\n    return null;\n  }\n  get default() {\n    return this.value.default;\n  }\n  get required() {\n    return this.value.required;\n  }\n};\nfunction isString(value) {\n  return Object.prototype.toString.call(value) === \"[object String]\";\n}\n\nexport { NumberValue as N, Schema as S, StringValue as a, isUndefined as i };\n\n//# sourceMappingURL=bueno.esm-08331852.js.map"],"sourceRoot":""}