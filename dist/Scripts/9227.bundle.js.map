{"version":3,"sources":["webpack://@verndale/toolkit/./src/js/modules/CoveoHeadlessJS.js"],"names":[],"mappings":"8JAQA,eAA4B,KAAU,CACpC,eAAgB,CACd,KAAK,IAAM,CACT,UAAW,KAAK,GAAG,cAAc,iCACjC,aAAc,KAAK,GAAG,cAAc,+BACpC,WAAY,KAAK,GAAG,cAAc,oCAEpC,KAAK,OACL,KAAK,gBAGP,MAAO,CACL,KAAK,eAAiB,SAAkB,CACtC,cAAe,WACf,cAAe,CAAE,MAAO,UAE1B,KAAK,oBAAsB,SAAe,KAAK,gBAC/C,KAAK,qBAAuB,QAAgB,KAAK,gBACjD,KAAK,qBAAqB,UAAU,IAAM,CACxC,KAAK,kBAIT,cAAe,CACb,KAAK,IAAI,UAAU,iBACjB,QACA,KAAK,kBAAkB,KAAK,OAE9B,KAAK,IAAI,UAAU,iBACjB,QACA,KAAK,iBAAiB,KAAK,OAE7B,KAAK,IAAI,aAAa,iBACpB,QACA,KAAK,mBAAmB,KAAK,OAIjC,eAAgB,CACd,KAAS,qBAAqB,MAAM,QAAQ,OAAS,EACnD,KAAK,IAAI,WAAW,MAAM,QAAU,QACjC,KAAK,IAAI,WAAW,MAAM,QAAU,OAEzC,KAAK,IAAI,WAAW,UAAY,GAEhC,KAAK,qBAAqB,MAAM,QAAQ,QAAQ,GAAU,CACxD,KAAM,GAAO,SAAS,cAAc,KACpC,EAAK,KAAO,EAAO,SACnB,EAAK,UAAY,EAAO,MAExB,KAAM,GAAU,SAAS,cAAc,KACvC,EAAQ,UAAY,EAAO,QAE3B,KAAM,GAAK,SAAS,cAAc,MAClC,EAAG,UAAU,IAAI,iCACjB,EAAG,YAAY,GACf,EAAG,YAAY,GAEf,KAAK,IAAI,WAAW,YAAY,KAIpC,mBAAoB,CAClB,KAAK,oBAAoB,WAAW,KAAK,IAAI,UAAU,OAGzD,iBAAiB,EAAG,CAClB,EAAM,UAAY,IAAI,KAAK,oBAAoB,SAGjD,oBAAqB,CACnB,KAAK,oBAAoB,UAI7B,UAAe","file":"scripts/9227.bundle.js","sourcesContent":["import { Component } from '@verndale/core';\nimport {\n  buildSearchEngine,\n  getSampleSearchEngineConfiguration,\n  buildSearchBox,\n  buildResultList\n} from '@coveo/headless';\n\nclass CoveoHeadless extends Component {\n  setupDefaults() {\n    this.dom = {\n      searchBox: this.el.querySelector('.coveo-headless-search__input'),\n      searchButton: this.el.querySelector('.coveo-headless-search__btn'),\n      resultList: this.el.querySelector('.coveo-headless-search__results')\n    };\n    this.init();\n    this.updateResults();\n  }\n\n  init() {\n    this.headlessEngine = buildSearchEngine({\n      configuration: getSampleSearchEngineConfiguration(),\n      loggerOptions: { level: 'info' }\n    });\n    this.searchBoxController = buildSearchBox(this.headlessEngine);\n    this.resultListController = buildResultList(this.headlessEngine);\n    this.resultListController.subscribe(() => {\n      this.updateResults();\n    });\n  }\n\n  addListeners() {\n    this.dom.searchBox.addEventListener(\n      'input',\n      this.handleInputChange.bind(this)\n    );\n    this.dom.searchBox.addEventListener(\n      'keyup',\n      this.handleInputKeyUp.bind(this)\n    );\n    this.dom.searchButton.addEventListener(\n      'click',\n      this.handleSearchSubmit.bind(this)\n    );\n  }\n\n  updateResults() {\n    if (this.resultListController.state.results.length > 0)\n      this.dom.resultList.style.display = 'block';\n    else this.dom.resultList.style.display = 'none';\n\n    this.dom.resultList.innerHTML = '';\n\n    this.resultListController.state.results.forEach(result => {\n      const link = document.createElement('a');\n      link.href = result.clickUri;\n      link.innerText = result.title;\n\n      const excerpt = document.createElement('p');\n      excerpt.innerHTML = result.excerpt;\n\n      const li = document.createElement('li');\n      li.classList.add('coveo-headless-search__result');\n      li.appendChild(link);\n      li.appendChild(excerpt);\n\n      this.dom.resultList.appendChild(li);\n    });\n  }\n\n  handleInputChange() {\n    this.searchBoxController.updateText(this.dom.searchBox.value);\n  }\n\n  handleInputKeyUp(e) {\n    if (e.keyCode === 13) this.searchBoxController.submit();\n  }\n\n  handleSearchSubmit() {\n    this.searchBoxController.submit();\n  }\n}\n\nexport default CoveoHeadless;\n"],"sourceRoot":""}